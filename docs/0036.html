<html>
<head>
<title>More Development, Less Operations.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">多开发，少运营。</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/more-development-less-operations-1ec4ab2d6cff?source=collection_archive---------2-----------------------#2015-11-10">https://medium.com/google-cloud/more-development-less-operations-1ec4ab2d6cff?source=collection_archive---------2-----------------------#2015-11-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0a59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用Go建立<a class="ae jd" href="https://cord.im" rel="noopener ugc nofollow" target="_blank">线</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/e67b29398b313d1ba63c0599b36e5834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3n41krdVMKNqtiLFRO-bmQ.jpeg"/></div></div></figure><p id="e3f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<a class="ae jd" href="http://cordproject.co" rel="noopener ugc nofollow" target="_blank"> Cord项目</a>，我们相信声音的力量。我们相信简单。这一信条也指导着我们的工程实践。我们专注于运输产品和避免技术债务。我们尽可能地自动化来关注有趣的东西。</p><p id="5fbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">杰夫·巴克斯特(Jeff Baxter)和托马斯·盖诺(Thomas Gayno)在2014年5月创立了Cord Project，目标是打造下一代消息应用。他们用Parse后端构建了一个iOS原型，并于2014年9月发布。我于2014年8月加入，构建我们自己的服务器应用程序并迁移解析数据。我们的目标是在2014年圣诞节前使用我们自己的基础设施发布一款更新的iOS应用和一款新的Android应用。我很高兴地说我们达到了目标。我们是这样做的。</p><p id="2c7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在八月和九月花了大约三周时间思考语言和架构。我在Python、Postgres和nginx之间就亚马逊Web服务上的原始虚拟机和谷歌云平台上的Go进行了辩论。我之前的公司在AWS上使用了Perl/Python/Postgres栈，所以我很想“用你知道的东西”我决定尝试一些新的东西，说实话，我大多选择了反对我以前的经验。我不想管理虚拟机、数据库、负载平衡器、安全性和日志记录基础架构。我讨厌手术。在发布之前，我需要并且想把100%的时间花在编写应用程序代码上。</p><p id="7a2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不得不在大约3个月内从头开始构建一切。这实际上意味着我只有一半的时间来开发，以便交付给客户端团队。主要的应用功能有:</p><ul class=""><li id="e362" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">用电话号码、脸书和谷歌注册、登录和授权</li><li id="e4a6" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">用户帐户管理</li><li id="3fd6" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">用户社交图</li><li id="0b63" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">媒体(音频和图像)存储</li><li id="6ea1" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">消息发送和接收</li><li id="4092" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">移动推送通知</li><li id="1e85" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">消息和用户的社交活动</li><li id="c470" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">分析用户事件的数据管道和数据仓库</li><li id="9abc" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">消息的Web界面</li><li id="1972" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">行政申请</li></ul><p id="d2f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我需要快速构建和部署。因此，我决定使用<a class="ae jd" href="https://cloud.google.com/appengine/" rel="noopener ugc nofollow" target="_blank">谷歌应用引擎</a> Classic和应用引擎管理的虚拟机来编写Go代码。在构建应用程序之前，我对Go了解甚少，这是我第一次用编译语言编写一个重要的应用程序。我们没有遗憾。</p><p id="f13a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我没有立即意识到编译器是如何提高生产率和效率的。作为唯一的后端工程师，如果没有编译器检查我的工作，我会推送不运行的代码。它提醒我注意打字错误和其他小错误。Go编译器，以及像<a class="ae jd" href="https://golang.org/cmd/vet/" rel="noopener ugc nofollow" target="_blank"> Go vet </a>和<a class="ae jd" href="https://golang.org/cmd/gofmt/" rel="noopener ugc nofollow" target="_blank"> Gofmt </a>这样的Go工具，就像自动化代码审查工具，所以我可以快速部署正确的代码。</p><p id="e385" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">官方的<a class="ae jd" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank"> Go网站</a>有关于<a class="ae jd" href="https://golang.org/pkg/" rel="noopener ugc nofollow" target="_blank">语法、类型和功能</a>的清晰文档，还有许多<a class="ae jd" href="https://golang.org/doc/" rel="noopener ugc nofollow" target="_blank">文章、最佳实践和指南</a>。Go中的代码组织、包管理和版本控制比Python更容易。Go团队建议“导入路径应该是全局唯一的，所以使用您的源存储库的路径作为它的基础。”出售第三方软件包也是一个给你的应用程序稳定性的好主意。</p><p id="15b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">围棋哲学也提高了我的效率。通过关注数据结构、经过充分测试的算法、RFC规范和组合，我可以用JSON编写清晰的代码来响应HTTPS的请求。服务器和客户端错误也很容易处理。</p><p id="0a57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好的Go代码可以事半功倍，尽管不算太少。比如围棋里就没有三元运算符。你需要写一个5行的if-else语句。快写该死的代码！Go风格有助于代码的可读性，甚至是简略性。例如，在<a class="ae jd" href="https://golang.org/doc/effective_go.html" rel="noopener ugc nofollow" target="_blank"> Effective Go文章</a>中，作者写道，“如果成功的控制流沿着页面向下运行，消除了出现的错误，代码读起来就很好。由于错误案例往往以return语句结束，因此生成的代码不需要else语句。”程序员执行一系列步骤(有时是并发的)，如果其中一个步骤失败，那么函数可以返回，程序员不必担心其余的步骤。因此，很容易将API请求的成功和错误案例可视化。</p><p id="2de0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我不需要复杂的类层次结构或web框架来制作JSON API。net/http包实际上拥有服务器所需的一切。一般来说，移动后端接收传入的请求，有时带有一些数据，对它们进行授权，进行一些计算和数据库调用，并用JSON进行响应。您可以使用并发RPC和缓存来提高性能。在高层次上，Go帮助程序员按照以下指导方针编写快速代码:</p><ol class=""><li id="3fb8" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc ke jw jx jy bi translated">少干活。Go使得删除代码变得容易，因为你通常没有紧密耦合的复杂代码。:-)</li><li id="e369" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc ke jw jx jy bi translated">做更聪明的工作。标准库有许多排序、搜索和其他标准算法，还有一个强大的开源社区。</li><li id="7a61" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc ke jw jx jy bi translated">做同样多的工作，但同时进行。Go提供了goroutines、channels和<a class="ae jd" href="https://golang.org/pkg/sync/" rel="noopener ugc nofollow" target="_blank"> WaitGroups </a>，以及其他基本的同步原语。</li><li id="ced3" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc ke jw jx jy bi translated">少干点活，剩下的随意干。Go使得控制超时的变化变得容易。</li><li id="05fb" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc ke jw jx jy bi translated">现在少做点工作，剩下的以后再做。Go on Google Cloud Platform使用<a class="ae jd" href="https://cloud.google.com/appengine/docs/go/taskqueue/" rel="noopener ugc nofollow" target="_blank">任务队列</a>轻松推迟工作。</li></ol><p id="35ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不出意外，Go在谷歌云平台上运行得非常好。App Engine Classic和App Engine托管虚拟机提供了Cord团队所需的所有功能:</p><ul class=""><li id="4151" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">操作系统、安全更新、访问控制和私钥管理</li><li id="8004" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">简单的工具，如部署脚本、缓慢推出、回滚、A/B测试</li><li id="18e1" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">日志聚合和搜索</li><li id="690a" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">用于请求跟踪、监控和警报的控制台</li><li id="1520" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">自动扩展前端和后端实例(当你出现在应用商店中并且每秒请求数增加10倍时，这非常方便)</li><li id="20a2" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">自动缩放数据库</li><li id="466c" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">数据库导出到分析引擎(BigQuery)</li></ul><p id="f019" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我从事Cord工作的整个过程中，我只使用过一个原始虚拟机，那是在我将数据从Parse迁移到GCP的时候。我可以在大约15秒内部署新代码，并以同样快的速度回滚。我可以在web控制台中搜索和监控应用程序请求。我可以将我的请求日志导出到BigQuery，并执行SQL查询来查找瓶颈或模式。我不需要担心实例，因为应用引擎的自动缩放。由于<a class="ae jd" href="https://cloud.google.com/appengine/docs/go/datastore/" rel="noopener ugc nofollow" target="_blank">数据存储</a>的优势，我不需要担心数据库分片、性能和备份。最后，团队可以使用BigQuery进行即席查询，并做出数据驱动的产品决策。对于端到端的应用程序开发，Go on GCP让Cord团队能够以<a class="ae jd" href="http://commandcenter.blogspot.com/2012/06/less-is-exponentially-more.html" rel="noopener ugc nofollow" target="_blank">成倍减少的</a>完成更多工作。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kf"><img src="../Images/fd259ba4ac0c59943407769eb28eee15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EwdVzGkwBYyqbDxnnJrWzA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">我们谈谈吧！</figcaption></figure></div></div>    
</body>
</html>