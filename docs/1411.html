<html>
<head>
<title>Connecting your Visualization Software to Hadoop on Google Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将您的可视化软件连接到Google Cloud上的Hadoop</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/connecting-your-visualization-software-to-hadoop-on-google-cloud-64b55f536fab?source=collection_archive---------3-----------------------#2020-04-30">https://medium.com/google-cloud/connecting-your-visualization-software-to-hadoop-on-google-cloud-64b55f536fab?source=collection_archive---------3-----------------------#2020-04-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="ae74" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">第1部分—架构</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/fae0cd4f55126a41ec6e08a04a109cb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v1YJ9EU7qajT_pnADruKdQ.png"/></div></div></figure><h1 id="1ae2" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">概观</h1><p id="b636" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">作为一名IT管理员，您希望让您的数据分析师能够安全地访问熟悉的商业智能(BI)工具，以便他们能够高效地从数据中获得洞察力。您还希望利用云提供的计算能力和灵活性，并且希望最大限度地降低成本。本文展示了如何使用Hadoop生态系统中熟悉的开源工具来满足这些需求，比如Apache Hive、Apache Ranger和Apache Knox。您将看到如何在Dataproc上部署这些工具，以在云中提供快速、简单且更安全的数据分析处理。</p><p id="a70e" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">本文面向对使用Tableau和Looker等BI工具，同时利用熟悉的开源工具和Google Cloud为数据分析师设置安全数据访问感兴趣的操作员和IT管理员。本文没有为数据分析师提供如何使用这些BI工具的指导，也没有为希望与Dataproc APIs交互的开发人员提供指导。</p><p id="c27e" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">本文档是帮助您构建端到端解决方案的第一部分，可帮助数据分析师使用BI工具安全地访问数据。它包括:</p><ul class=""><li id="b01b" class="ks kt hi jr b js kn jw ko ka ku ke kv ki kw km kx ky kz la bi translated">组件的架构</li><li id="1708" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km kx ky kz la bi translated">边界、交互和网络的高级视图，以及</li><li id="09ce" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km kx ky kz la bi translated">体系结构中身份验证和授权的高级视图</li></ul><p id="e905" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated"><a class="ae lg" rel="noopener" href="/@david.cueva/connecting-your-visualization-software-to-hadoop-on-google-cloud-f50279d83f2">第二部分</a>带你一步一步地在谷歌云上建立架构。</p><h1 id="fab9" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">体系结构</h1><p id="e817" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">这是该架构的示意图:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lh"><img src="../Images/f87ede14196b5da22293f69711791c97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*TuEsmhuJlgIfF1Y9-v78hg.png"/></div></figure><p id="e2be" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">从高层次来看，架构是简单明了的。简而言之:</p><ol class=""><li id="cd01" class="ks kt hi jr b js kn jw ko ka ku ke kv ki kw km li ky kz la bi translated">客户端应用程序通过JDBC连接到Dataproc集群上的单个入口点。入口点由Apache Knox提供，它安装在集群主节点上。与Apache Knox的通信由TLS保护。</li><li id="f811" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km li ky kz la bi translated">Apache Knox通过一个提供者将认证委托给一个系统，比如LDAP目录。</li><li id="a40e" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km li ky kz la bi translated">在认证之后，Apache Knox将用户请求路由到多个后端集群中的一个。路由和配置被定义为自定义拓扑。</li><li id="95f3" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km li ky kz la bi translated">像Apache Hive这样的服务在所选的后端集群中监听请求。</li><li id="535a" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km li ky kz la bi translated">Apache Ranger拦截请求，验证用户的授权，并决定是否继续处理。</li><li id="63d2" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km li ky kz la bi translated">如果验证成功，后端服务将处理请求并返回结果。</li></ol><h1 id="c0b0" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">成分</h1><p id="47a4" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">该架构最重要的组件包括:</p><ul class=""><li id="2dae" class="ks kt hi jr b js kn jw ko ka ku ke kv ki kw km kx ky kz la bi translated"><a class="ae lg" href="https://cloud.google.com/dataproc" rel="noopener ugc nofollow" target="_blank"><strong class="jr hj">data proc</strong></a><strong class="jr hj">:</strong>data proc是谷歌云管理的Apache Spark和Apache Hadoop，一种让你利用开源数据工具进行批处理、查询、流和机器学习的服务。Dataproc是支撑本文描述的解决方案的平台。</li><li id="7f3b" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km kx ky kz la bi translated"><a class="ae lg" href="https://knox.apache.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jr hj">Apache Knox</strong></a><strong class="jr hj">:</strong>Apache Knox充当Hadoop集群中所有底层服务的单一HTTP接入点。Apache Knox被设计成一个<a class="ae lg" href="https://en.wikipedia.org/wiki/Reverse_proxy" rel="noopener ugc nofollow" target="_blank">反向代理</a>,具有用于认证、授权、审计和其他服务的可插拔提供者。客户向Knox发送请求。根据请求URL和参数，Knox将请求路由到适当的Hadoop服务。Knox是该架构的核心，因为它是透明地处理客户端请求并隐藏复杂性的入口点。</li><li id="abf0" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km kx ky kz la bi translated"><a class="ae lg" href="https://ranger.apache.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jr hj">Apache Ranger</strong></a><strong class="jr hj">:</strong>Apache Ranger为用户在Hadoop服务上执行特定操作提供细粒度授权。它还实现了对用户访问和管理操作的审计。</li><li id="73e6" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km kx ky kz la bi translated"><a class="ae lg" href="https://hive.apache.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jr hj">Apache Hive</strong></a><strong class="jr hj">:</strong>Apache Hive是一款数据仓库软件，支持使用SQL访问和管理驻留在分布式存储中的大型数据集。Apache Hive解析SQL查询，执行语义分析，并构建由处理引擎执行的阶段的<a class="ae lg" href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" rel="noopener ugc nofollow" target="_blank">有向非循环图</a> (DAG)。在本文的架构中，Hive充当用户请求和可能的多个处理引擎之一之间的转换点。Apache Hive在Hadoop生态系统中无处不在，它为熟悉标准SQL的从业者打开了执行数据分析的大门。</li><li id="358d" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km kx ky kz la bi translated"><a class="ae lg" href="https://tez.apache.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jr hj">Apache Tez</strong></a>:Apache Tez是负责执行Hive准备的Dag并随后返回结果的处理引擎。</li><li id="8936" class="ks kt hi jr b js lb jw lc ka ld ke le ki lf km kx ky kz la bi translated"><a class="ae lg" href="https://spark.apache.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jr hj">Apache Spark</strong></a>:Apache Spark是大规模数据处理的统一分析引擎，支持Dag的通用执行，可供Hive使用。该架构展示了Apache Spark的<a class="ae lg" href="https://spark.apache.org/docs/latest/sql-distributed-sql-engine.html" rel="noopener ugc nofollow" target="_blank"> Spark SQL </a>组件，以展示本文所介绍的方法的灵活性。Spark SQL最初是从HiveServer2构建的，支持在Apache Spark上执行SQL查询。但是有一点需要注意，Spark SQL没有官方的Ranger插件支持，所以授权必须通过apache Knox中的粗粒度ACL来完成。</li></ul><h1 id="9d29" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">深潜</h1><p id="b140" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">接下来的部分将更深入地研究参与流程的每一个组件及其交互。</p><h2 id="798e" class="lj ig hi bd ih lk ll lm il ln lo lp ip ka lq lr it ke ls lt ix ki lu lv jb lw bi translated">客户端应用程序</h2><p id="e1c3" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">这些应用程序包括可以向HTTPS REST端点发送请求的工具，但是不一定支持<a class="ae lg" href="https://cloud.google.com/dataproc/docs/reference/rest/v1/projects.regions.jobs/submit" rel="noopener ugc nofollow" target="_blank"> Dataproc作业API </a>。BI工具如<strong class="jr hj"> Tableau </strong>和<strong class="jr hj"> Looker </strong>有HiveServer2和Spark SQL JDBC驱动，可以通过HTTP发送请求。</p><p id="4ce4" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">在本文中，我们假设客户端应用程序在Google Cloud之外，例如，在分析师工作站、内部或另一个云上执行。因此，客户端应用程序和Apache Knox之间的通信必须使用SSL/TLS证书进行保护，该证书可以是CA签名的，也可以是自签名的。</p><h2 id="2adb" class="lj ig hi bd ih lk ll lm il ln lo lp ip ka lq lr it ke ls lt ix ki lu lv jb lw bi translated">入口点和用户身份验证</h2><p id="6233" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">代理集群</strong>是<strong class="jr hj"> </strong>一个或多个<a class="ae lg" href="https://cloud.google.com/blog/products/data-analytics/10-tips-for-building-long-running-clusters-using-cloud-dataproc" rel="noopener ugc nofollow" target="_blank">长期存在的Dataproc集群</a>，其主要目的是托管Apache Knox网关。</p><p id="ca50" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated"><a class="ae lg" href="https://knox.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Knox </a> <strong class="jr hj"> </strong>充当客户端请求的单一入口点。它安装在代理群集主节点上。Knox执行SSL终止，委托用户认证，并将请求转发给一个后端服务。</p><p id="df20" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">每个后端服务都被配置成Knox所谓的<strong class="jr hj">拓扑</strong>。<a class="ae lg" href="https://knox.apache.org/books/knox-1-1-0/user-guide.html#Topology+Descriptors" rel="noopener ugc nofollow" target="_blank">拓扑描述符</a>定义了如何为服务授权认证、后端服务转发请求的URI以及简单的每服务授权访问控制列表(ACL)。</p><p id="e816" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">Apache Knox支持与企业和云身份管理系统的身份认证集成。用户身份验证可使用身份验证提供程序按拓扑进行配置。默认情况下，Knox利用<a class="ae lg" href="https://shiro.apache.org/" rel="noopener ugc nofollow" target="_blank">阿帕奇·希罗</a>来验证本地演示<a class="ae lg" href="https://directory.apache.org/apacheds/" rel="noopener ugc nofollow" target="_blank"> ApacheDS </a> LDAP服务器，但是Knox也可以使用Kerberos。在图中，您可以看到一个位于集群之外的Google Cloud上托管的Active Directory服务器。</p><p id="d26f" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">将Knox连接到外部ApacheDS服务器或Microsoft Active Directory (AD)等企业认证服务超出了本文的讨论范围。你可以在谷歌云的<a class="ae lg" href="https://knox.apache.org/books/knox-1-4-0/user-guide.html#Authentication" rel="noopener ugc nofollow" target="_blank"> Apache Knox用户指南</a>和<a class="ae lg" href="https://cloud.google.com/managed-microsoft-ad/docs" rel="noopener ugc nofollow" target="_blank">托管活动目录</a>或<a class="ae lg" href="https://cloud.google.com/solutions/federating-gcp-with-active-directory-introduction" rel="noopener ugc nofollow" target="_blank">联合广告</a>文档中找到更多信息。</p><p id="e8f7" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">对于本文中的用例，只要Apache Knox充当代理和后端集群的单一看门人，您就不必使用<a class="ae lg" href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/SecureMode.html" rel="noopener ugc nofollow" target="_blank"> Kerberos </a>。</p><h2 id="ab76" class="lj ig hi bd ih lk ll lm il ln lo lp ip ka lq lr it ke ls lt ix ki lu lv jb lw bi translated">处理引擎</h2><p id="9bcb" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hj">后端集群</strong>是托管执行用户请求处理的服务的Dataproc集群。Dataproc集群可以<a class="ae lg" href="https://cloud.google.com/dataproc/docs/concepts/configuring-clusters/autoscaling" rel="noopener ugc nofollow" target="_blank">自动扩展</a>工作人员的数量，以满足您的分析师团队的需求，不需要手动重新配置。</p><p id="b002" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">后端集群最好是长期集群，以便在集群被删除的情况下不间断地为数据分析师的临时请求提供服务。然而，这些集群也可以是特定于作业的，也称为<a class="ae lg" href="https://cloud.google.com/blog/products/data-analytics/10-tips-for-building-long-running-clusters-using-cloud-dataproc" rel="noopener ugc nofollow" target="_blank">短暂的</a>，如果它们只需要在短时间内为请求提供服务，或者作为一种节省成本的策略。在这种情况下，为了避免修改拓扑配置，请确保在相同的区域中以相同的名称重新创建临时集群，以便在临时集群恢复时，Knox可以使用主节点<a class="ae lg" href="https://cloud.google.com/compute/docs/internal-dns" rel="noopener ugc nofollow" target="_blank">内部DNS名称</a>透明地路由请求。</p><p id="7afc" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated"><a class="ae lg" href="https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Overview" rel="noopener ugc nofollow" target="_blank"> HiveServer2 </a> (HS2)负责服务用户对Apache Hive的查询。它是使用<a class="ae lg" href="https://thrift.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Thrift </a>框架构建的，所以它有时被称为Hive Thrift服务器。它可以配置为使用各种执行引擎，如Hadoop Map Reduce引擎、Apache Tez和Apache Spark。在本文中，HS2被配置为使用Apache Tez引擎。</p><p id="b9bb" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated"><a class="ae lg" href="https://spark.apache.org/sql/" rel="noopener ugc nofollow" target="_blank"> Spark SQL </a>是Apache Spark的一个模块，它包括一个JDBC/ODBC接口，用于在Apache Spark上执行SQL查询。在架构图中，它被显示为服务于用户查询的一种替代方式。Spark SQL源自HS2的工作，也是使用Thrift框架构建的。它有时被称为Spark节俭服务器。</p><p id="457e" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">Tez或Spark处理引擎调用<a class="ae lg" href="https://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html" rel="noopener ugc nofollow" target="_blank">纱线资源管理器</a>在集群工作机上执行它们的Dag。最后，这些工作机访问数据。对于在Dataproc集群中存储和访问数据，使用云存储连接器，而不是HDFS。有关优势的更多信息，请参见<a class="ae lg" href="https://cloud.google.com/dataproc/docs/concepts/connectors/cloud-storage" rel="noopener ugc nofollow" target="_blank">连接器文档</a>。</p><p id="50ea" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">架构图展示了一个Apache Knox拓扑，用于将请求转发到Apache Hive，另一个用于Spark SQL，以及其他可以将请求转发到相同或不同后端集群中的服务的拓扑。后端服务可以处理不同的数据集。例如，一个Hive实例可以为一组受限用户提供对个人身份(PII)数据的访问，而另一个Hive实例可以为更广泛的用户提供对非PII数据的访问。</p><h2 id="6f28" class="lj ig hi bd ih lk ll lm il ln lo lp ip ka lq lr it ke ls lt ix ki lu lv jb lw bi translated">用户授权</h2><p id="ccff" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><a class="ae lg" href="https://ranger.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Ranger </a>可以安装在后端集群上，为Hadoop服务提供细粒度授权。在该体系结构中，用于Hive的Ranger插件拦截用户请求，并基于Ranger策略确定是否允许用户对Hive数据执行动作。</p><p id="6831" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">作为管理员，您可以使用管理员用户界面定义管理员策略。这些策略存储在外部云SQL数据库中。将策略外部化有两个强大的优势:它使它们在任何后端集群被删除的情况下保持不变，并且还使策略能够为所有后端集群或定制的后端集群组进行集中管理。</p><p id="d0a2" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">为了能够将Ranger策略分配给正确的用户身份或组，Ranger必须配置为从Knox连接到的同一目录同步身份。默认情况下，Ranger使用的用户身份来自操作系统。</p><p id="a82f" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">Apache Ranger还可以将其审计日志外部化到云存储中，使其持久化。这些审计可以通过利用<a class="ae lg" href="https://lucene.apache.org/solr/" rel="noopener ugc nofollow" target="_blank"> Apache Solr </a>进行搜索。</p><p id="fbf3" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">注意，与HiveServer2不同，Spark SQL没有官方的Ranger插件支持，因此它的授权必须由Apache Knox中提供的粗粒度ACL来管理。要使用这些ACL，请在服务的相应拓扑描述符中添加允许使用每个特定服务(如Spark SQL或Hive)的LDAP标识。</p><h2 id="28ce" class="lj ig hi bd ih lk ll lm il ln lo lp ip ka lq lr it ke ls lt ix ki lu lv jb lw bi translated">高可用性</h2><p id="8431" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">Dataproc提供了一个<a class="ae lg" href="https://cloud.google.com/dataproc/docs/concepts/configuring-clusters/high-availability" rel="noopener ugc nofollow" target="_blank">高可用性(HA)模式</a>。在这种模式下，有几台机器被配置为主节点，其中一台处于活动状态。这种模式允许不间断的纱线和HDFS操作，不管任何单节点故障/重启。</p><p id="4b9d" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">但是，如果主节点出现故障，单一入口点外部IP会发生变化，因此您需要重新配置BI工具连接。当您在HA模式下运行Dataproc时，您应该配置一个<a class="ae lg" href="https://cloud.google.com/load-balancing/docs/https" rel="noopener ugc nofollow" target="_blank">外部HTTP负载平衡器</a>作为入口点。负载平衡器将请求路由到一个<a class="ae lg" href="https://cloud.google.com/compute/docs/instance-groups#unmanaged_instance_groups" rel="noopener ugc nofollow" target="_blank">非托管实例组</a>，该实例组捆绑了您的集群主节点。作为一个完全成熟的负载均衡器的替代方案，你可以应用一个<a class="ae lg" href="https://en.wikipedia.org/wiki/Round-robin_DNS" rel="noopener ugc nofollow" target="_blank">循环DNS </a>技术，但是要考虑到使用它带来的<a class="ae lg" href="https://en.wikipedia.org/wiki/Round-robin_DNS#Drawbacks" rel="noopener ugc nofollow" target="_blank">缺点</a>。这些配置超出了这些文章的范围。</p><p id="fec1" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">云SQL还提供了<a class="ae lg" href="https://cloud.google.com/sql/docs/mysql/high-availability" rel="noopener ugc nofollow" target="_blank">高可用性模式</a>，通过位于不同区域的主实例和备用实例之间的同步复制实现数据冗余。</p><p id="4a95" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">云存储固有的可用性、可访问性、延迟、耐用性和冗余性在其<a class="ae lg" href="https://cloud.google.com/storage/docs/storage-classes#descriptions" rel="noopener ugc nofollow" target="_blank">存储类别描述</a>中有所阐述。</p><h2 id="d1f5" class="lj ig hi bd ih lk ll lm il ln lo lp ip ka lq lr it ke ls lt ix ki lu lv jb lw bi translated">建立工作关系网</h2><p id="844e" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">在分层网络架构中，代理集群位于外围网络(也称为<a class="ae lg" href="https://en.wikipedia.org/wiki/DMZ_(computing)" rel="noopener ugc nofollow" target="_blank">隔离区，或DMZ </a>)中，与其他集群隔离，因为它们暴露于外部请求。防火墙规则只允许从一组受限的源IP地址(对应于BI工具)进入代理集群。</p><p id="8497" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">另一方面，后端集群位于受防火墙规则保护的内部网络中，只允许来自代理集群的传入流量通过。</p><p id="dda0" class="pw-post-body-paragraph jp jq hi jr b js kn ju jv jw ko jy jz ka kp kc kd ke kq kg kh ki kr kk kl km hb bi translated">分层网络的配置超出了这些文章的范围。实际操作说明仅使用默认网络。有关分层网络设置的更多信息，请参见<a class="ae lg" href="https://cloud.google.com/solutions/best-practices-vpc-design#network_security" rel="noopener ugc nofollow" target="_blank"> VPC网络安全</a>的最佳实践，以及关于<a class="ae lg" href="https://cloud.google.com/vpc/docs/multiple-interfaces-concepts" rel="noopener ugc nofollow" target="_blank">如何配置多个网络接口</a>的概述和示例。</p><h1 id="1601" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">后续步骤</h1><p id="a7af" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">继续阅读本文的第二部分,它将带你一步一步地完成在Google Cloud上建立这个架构的过程。</p></div></div>    
</body>
</html>