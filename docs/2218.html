<html>
<head>
<title>Start splashing in the data lake: with Dataplex (2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开始在数据湖中溅起水花:用Dataplex (2)</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/start-splashing-in-the-data-lake-with-dataplex-2-6726300fea48?source=collection_archive---------0-----------------------#2022-06-12">https://medium.com/google-cloud/start-splashing-in-the-data-lake-with-dataplex-2-6726300fea48?source=collection_archive---------0-----------------------#2022-06-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1981ccd0ba1c7984b5834ba7fccd8864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Eoc4BN2oewF8dfZJ.jpg"/></div></div></figure><p id="6d9f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我之前的博客中，我讨论过<a class="ae jo" href="https://cloud.google.com/dataplex" rel="noopener ugc nofollow" target="_blank"> Dataplex </a>如何简化数据湖管理。只需点击几下鼠标，就可以创建湖泊、定义区域、添加资产和进行探索！</p><p id="5245" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦数据区就绪，就必须定义数据区的属性。例如，如果原始区域在GCS中，那么数据源中推荐/可接受的文件<strong class="is hj">格式</strong>是什么？在数据进入原始区之前，是否应该有任何正在进行的转换？数据应该存储多长时间？应该只为数据或<strong class="is hj">增量</strong>维护<strong class="is hj">历史</strong>？还有更多..这些考虑通常因用例以及所选技术的不同而不同。</p><p id="9390" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇博客中，我将讨论两个关键的用例——一个解决<strong class="is hj">数据管理</strong>问题，另一个解决<strong class="is hj">数据质量</strong>问题。</p><h1 id="70fe" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">场景1:将数据(文件)格式与区域特定格式对齐</h1><p id="e063" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">处理区域间数据的最常见模式之一是文件格式转换。例如，数据源推送CSV、JSON等格式，这些文件最终会保存在原始区域中。对于数据工程和分析工作负载，处理和存储数据(以及消费)的一种常见格式是Parquet。所以问题是，有没有一种方法可以在数据湖中处理JSON到Parquet格式的转换，并且只需点击几下鼠标？</p><p id="074f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">答案是肯定的！让我们看看如何做到这一点..</p><p id="1bbc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第一步:创建任务</strong></p><p id="8e1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从Dataplex控制台&gt;点击Process &gt; Create Task</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/1c2e294584989ea03f9201d3025e91a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKkq0B84MvkTpIzzY-XEcg.png"/></div></div></figure><p id="a8f7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第二步:选择数据准备任务</strong></p><p id="dd60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">单击&gt;转换为策划格式</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/f551801036df8f5b302de97a7a92daa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VKyTE2odRH-CB9_tEDB8_g.png"/></div></div></figure><p id="8ab5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤3a:选择数据湖</strong></p><p id="979f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据流转换模板是自动填充的。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/92632588333b2cf6055113644c58950d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*otHREbQHDpphTIf9GsYXIQ.png"/></div></div></figure><p id="ae8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤3b:输入来源&amp;目标资产路径</strong></p><p id="c974" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">输入数据的目标格式，在本例中为拼花地板。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/fd5ccc4222806db1151a2d0dcdccfcd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zoO2c6U1Xuf4XdvHihUQyA.png"/></div></div></figure><p id="c923" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤3c:指定可选参数</strong></p><p id="3865" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">压缩格式(快节奏、GZIP)、动作(目标文件覆盖、失败、跳过等)。)、工人、机器类型、网络、子网等。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/baf80d4619125ed74b7effb746835ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1t9NkHSOXnHYm8Ehu5N0tg.png"/></div></div></figure><p id="e718" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第四步:设定日程</strong></p><p id="f37f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后单击创建..</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/e09cbc3a24367ffcb52178d7c3607399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s24EiMLhE5PveG43TFJyiw.png"/></div></div></figure><p id="d950" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与dataplex lake关联的数据管道已经准备好执行了！</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/1db2c60e66beab79c51faac801ee82c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QPWQVNhKnvRDs-cLBfMocA.png"/></div></div></figure><h1 id="cf81" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">场景2:验证数据质量</h1><p id="e50e" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">既然我们已经开始在湖中加载数据，问题是我们如何确保数据质量？Dataplex通过几个简单的步骤实现了DQ验证任务。在幕后，它使用Dataproc无服务器来执行DQ任务。</p><p id="693e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第一步:创建一个任务</strong></p><p id="696c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从Dataplex控制台&gt;点击Process &gt; Create Task &gt;点击Check Data Quality</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/d6dab6b671da58eb6e57fc66b99e2071.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cvV2eTRfgKTEM0FmVSNxnw.png"/></div></div></figure><p id="27cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤2a:选择dataplex数据湖</strong></p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/caaa5b40652217ea8dcfb955c9782616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q4Dh_C94hvVOxh5mjawjAw.png"/></div></div></figure><p id="7525" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤2b:配置任务</strong></p><p id="7262" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">选择定义了DQ规则的yaml文件。设置用于存储验证输出的目标数据集和BQ表。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/3487474a51a0aa1affe63403719aa673.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wvUxVIxN3bE5JylD4ssj0w.png"/></div></div></figure><p id="e560" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">DQ规则的yaml示例如下所示。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es le"><img src="../Images/5ce5dbfd73efb9a5b59423c828ca99fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*ZhuXWPng9y8nu68E9bhO1A.png"/></div></figure><p id="77d1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤2c:设置服务账户和网络配置</strong></p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/7bc7782129e968873d4333348f693a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ggTlTTzE2yKC_DrK4tJBg.png"/></div></div></figure><p id="33d1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第三步:设置日程</strong></p><p id="2883" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后单击创建..</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/c4da25b14cd04ea53077a950b5e150b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Eg29m6yiHDjXUGIBZhBHQ.png"/></div></div></figure><p id="5057" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每次验证运行的输出都存储在BQ表中。验证报告具有关键属性，如dataplex数据湖、运行信息、dataplex资产表、已验证的表/列、已验证的运行次数、成功/失败统计。</p><p id="b8fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">总之，Dataplex以一种简单的方式解决了一些关键的数据管理/数据质量功能。这是通过与GCP本地工具的无缝集成实现的，例如<a class="ae jo" href="https://cloud.google.com/dataflow" rel="noopener ugc nofollow" target="_blank"> Dataflow </a>、<a class="ae jo" href="https://cloud.google.com/dataproc" rel="noopener ugc nofollow" target="_blank"> Dataproc </a> Serverless和<a class="ae jo" href="https://cloud.google.com/bigquery" rel="noopener ugc nofollow" target="_blank"> BigQuery </a>等等。</p><p id="ab5e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要探索更多有趣的功能，请观看此空间！</p></div></div>    
</body>
</html>