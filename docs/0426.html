<html>
<head>
<title>Object Detection: Tensorflow and Google Cloud Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">物体检测:Tensorflow和Google云平台</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/object-detection-tensorflow-and-google-cloud-platform-72e0a3f3bdd6?source=collection_archive---------0-----------------------#2017-11-05">https://medium.com/google-cloud/object-detection-tensorflow-and-google-cloud-platform-72e0a3f3bdd6?source=collection_archive---------0-----------------------#2017-11-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/061e23e430ea5b60dfb3e20abf0be126.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*OIQ7tbQV4H-u3pZEsv5GwA.jpeg"/></div></figure><p id="0a28" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">关于在windows 10和谷歌云平台(GCP)上运行<a class="ae jk" href="https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/running_pets.md" rel="noopener ugc nofollow" target="_blank">这个</a>物体检测模块/教程的快速说明，此前它让我费了很大劲来设置和运行。</p><p id="9fdc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">完整的教程和学分可以在这里找到并关联到男生和女生:</p><div class="jl jm ez fb jn jo"><a href="https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/running_pets.md" rel="noopener  ugc nofollow" target="_blank"><div class="jp ab dw"><div class="jq ab jr cl cj js"><h2 class="bd hj fi z dy jt ea eb ju ed ef hh bi translated">张量流/模型</h2><div class="jv l"><h3 class="bd b fi z dy jt ea eb ju ed ef dx translated">模型-用TensorFlow构建的模型和示例</h3></div><div class="jw l"><p class="bd b fp z dy jt ea eb ju ed ef dx translated">github.com</p></div></div><div class="jx l"><div class="jy l jz ka kb jx kc ik jo"/></div></div></a></div><p id="71c6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">不过，我做了一些更新，可能有助于解决GCP和tensorflow之间的一些兼容性问题。主要是做setup.py文件！</p><p id="9508" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">提到的教程的目的是得到一个用于宠物的物体检测ML算法。为此，我们使用tensorflow对象检测模型，结合牛津可视化pet图像数据集。希望你能像我一样冷静地面对这个问题，并且更快地得到一个可用的版本。</p><h1 id="f026" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">克隆目标检测库:</strong></h1><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="2400" class="lk ke hi lg b fi ll lm l ln lo">git clone<strong class="lg hj"> </strong><a class="ae jk" href="https://github.com/tensorflow/models.git" rel="noopener ugc nofollow" target="_blank">https://github.com/tensorflow/models.git</a></span></pre><p id="2307" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">由于对象检测模块最近的一些变化，GCP仍然停留在tensorflow 1.2，您需要检查模块的以下版本:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="b885" class="lk ke hi lg b fi ll lm l ln lo">git reset — hard a4944a57ad</span></pre><p id="b5b4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你现在应该有一个回购单<em class="lp">模型</em>文件夹，和随后的模块文件夹(即。对抗性_加密，对抗性_文本，…..物体探测…苗条等。)</p><h1 id="9204" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">安装张量流</strong></h1><p id="53a1" class="pw-post-body-paragraph im in hi io b ip lq ir is it lr iv iw ix ls iz ja jb lt jd je jf lu jh ji jj hb bi translated"><strong class="io hj">修改后的步骤如下，完整的原安装步骤</strong> <a class="ae jk" href="https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/installation.md" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">此处</strong> </a></p><p id="683e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">向PYTHONPATH系统变量添加两条路径:</p><ol class=""><li id="8157" class="lv lw hi io b ip iq it iu ix lx jb ly jf lz jj ma mb mc md bi translated">模型文件夹的位置—例如<em class="lp">C://location _ to _ models _ folder/models</em></li><li id="4319" class="lv lw hi io b ip me it mf ix mg jb mh jf mi jj ma mb mc md bi translated">models/slim文件夹的位置—例如C<em class="lp">://location _ to _ models _ folder/models/slim</em></li></ol><p id="708b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">安装tensorflow</p><p id="ff66" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">(我使用了一个anaconda设置)——<a class="ae jk" href="https://www.tensorflow.org/install/" rel="noopener ugc nofollow" target="_blank">完整的设置链接在这里</a></p><p id="f6e1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用anaconda或本地python，运行以下命令之一。</p><p id="3575" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">安装张量流命令</strong></p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="f880" class="lk ke hi lg b fi ll lm l ln lo">#CPU version<br/><strong class="lg hj">pip install --ignore-installed --upgrade tensorflow</strong></span><span id="507d" class="lk ke hi lg b fi mj lm l ln lo">#GPU version -- need a NVIDIA graphics card with more than 2gb<br/><strong class="lg hj">pip install --ignore-installed --upgrade tensorflow-gpu</strong></span></pre><p id="2388" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">安装依赖关系</strong></p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="2f16" class="lk ke hi lg b fi ll lm l ln lo">pip install pillow<br/>pip install lxml<br/>pip install jupyter<br/>pip install matplotlib</span><span id="c2d0" class="lk ke hi lg b fi mj lm l ln lo"># or in one</span><span id="1b72" class="lk ke hi lg b fi mj lm l ln lo">pip install pillow lxml jupyter matplotlib</span></pre><p id="c9aa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> Protobuf编译</strong></p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="eda8" class="lk ke hi lg b fi ll lm l ln lo">#From models directory<br/>protoc object_detection/protos/*.proto --python_out=.</span></pre><p id="7a82" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">测试安装</strong></p><p id="ad94" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">运行以下代码，当您使用高于3的python版本运行它时，应该会出现两个错误——由于使用了iteritems()函数，该函数在python 3 中已被<a class="ae jk" href="https://github.com/saltstack-formulas/vmbuilder-formula/issues/3" rel="noopener ugc nofollow" target="_blank">弃用。不要担心这两个错误，这些都是意料之中的。</a></p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="041b" class="lk ke hi lg b fi ll lm l ln lo">python object_detection/builders/model_builder_test.py</span></pre><h1 id="b7af" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">建立物体检测模型</strong></h1><p id="b77c" class="pw-post-body-paragraph im in hi io b ip lq ir is it lr iv iw ix ls iz ja jb lt jd je jf lu jh ji jj hb bi translated">从http://www.robots.ox.ac.uk/~vgg/data/pets/<a class="ae jk" href="http://www.robots.ox.ac.uk/~vgg/data/pets/" rel="noopener ugc nofollow" target="_blank"/>下载数据集<strong class="io hj"> <em class="lp">标注</em> </strong>和<strong class="io hj"> <em class="lp">接地真相</em> </strong></p><p id="96db" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">虽然这些都是下载(在澳大利亚，仍然吸ADSL，这些花了很长时间！).所以与此同时:</p><ol class=""><li id="47e6" class="lv lw hi io b ip iq it iu ix lx jb ly jf lz jj ma mb mc md bi translated">建立GCP项目和bucket(给它起个有纪念意义的名字)——<a class="ae jk" href="https://www.google.com.au/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwjS1N3IiKHXAhXDn5QKHawnBGcQFggoMAA&amp;url=https%3A%2F%2Fcloud.google.com%2Ffree%2F&amp;usg=AOvVaw3PgoKGVJPPuiGeSj8cPDnR" rel="noopener ugc nofollow" target="_blank">注册</a>，它应该会创建“你的第一个项目”，只需启用存储即可。</li><li id="8ee3" class="lv lw hi io b ip me it mf ix mg jb mh jf mi jj ma mb mc md bi translated">启用机器学习(ML)引擎API应该在项目的左侧导航栏中</li><li id="b97a" class="lv lw hi io b ip me it mf ix mg jb mh jf mi jj ma mb mc md bi translated">安装G <a class="ae jk" href="https://cloud.google.com/sdk/downloads" rel="noopener ugc nofollow" target="_blank"> oogle Cloud SDK </a></li></ol><p id="72c0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下载完数据集后，将它们移动到与object_detection文件夹相同的文件夹级别。</p><p id="55a0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">提取数据集文件夹。</p><p id="c45d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在我们需要转换成tensorflow可以读取的东西。</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="bb97" class="lk ke hi lg b fi ll lm l ln lo"># From models directory<br/>python object_detection/create_pet_tf_record.py \<br/>    --label_map_path=object_detection/data/pet_label_map.pbtxt \<br/>    --data_dir=`pwd` \<br/>    --output_dir=`pwd`</span><span id="9e06" class="lk ke hi lg b fi mj lm l ln lo"># From the source itself - Warnings are normal when you run the script, so don't worry</span></pre><p id="d584" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在models目录中应该有两个新文件，<em class="lp"> pet_train.record </em>和<em class="lp"> pet_val.record </em>。</p><p id="3542" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在<em class="lp">/models/object _ detection/data/</em>目录中应该有一个名为<em class="lp"> pet_label_map.pbtxt </em>的新文件</p><p id="2fe2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在您的GCP存储桶中，创建一个名为<em class="lp"> data </em>的文件夹，并将这些文件复制到其中。</p><p id="3d16" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">下载COCO-pretrained迁移学习模型</strong></p><p id="5842" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">预先训练的模型有助于一般对象检测:</p><p id="f59e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">“从头开始训练一个最先进的对象检测器可能需要几天时间，即使使用多个GPU也是如此！为了加快训练速度，我们将采用在不同数据集(COCO)上训练的对象检测器，并重用它的一些参数来初始化我们的新模型。”</p><ol class=""><li id="e3ed" class="lv lw hi io b ip iq it iu ix lx jb ly jf lz jj ma mb mc md bi translated">下载如下:<a class="ae jk" href="http://storage.googleapis.com/download.tensorflow.org/models/object_detection/faster_rcnn_resnet101_coco_11_06_2017.tar.gz" rel="noopener ugc nofollow" target="_blank">COCO-用Resnet-101模型预训练的更快的R-CNN</a></li><li id="6fe6" class="lv lw hi io b ip me it mf ix mg jb mh jf mi jj ma mb mc md bi translated">提取</li><li id="92b1" class="lv lw hi io b ip me it mf ix mg jb mh jf mi jj ma mb mc md bi translated">将带有<em class="lp"> /model.ckpt.* </em>图案的内容上传到数据文件夹下的GCP存储桶中</li></ol><p id="776f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">配置对象检测管道</strong></p><ol class=""><li id="3af2" class="lv lw hi io b ip iq it iu ix lx jb ly jf lz jj ma mb mc md bi translated">在<em class="lp">object _ detection/samples/configs</em>文件夹中，打开faster _ rcnn _ resnet 101 _ pets . config</li><li id="9a6f" class="lv lw hi io b ip me it mf ix mg jb mh jf mi jj ma mb mc md bi translated">用GS://$ {您的GCP存储桶名称}/data/替换路径配置的所有实例</li><li id="7da1" class="lv lw hi io b ip me it mf ix mg jb mh jf mi jj ma mb mc md bi translated">将此文件上传到数据文件夹下的GCP桶中</li></ol><p id="6e32" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">检查点</strong></p><p id="b8ac" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您应该在数据文件夹下的GCP桶中有以下文件</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="3daa" class="lk ke hi lg b fi ll lm l ln lo">+ ${YOUR_GCS_BUCKET}/<br/>  + data/<br/>    - faster_rcnn_resnet101_pets.config<br/>    - model.ckpt.index<br/>    - model.ckpt.meta<br/>    - model.ckpt.data-00000-of-00001<br/>    - pet_label_map.pbtxt<br/>    - pet_train.record<br/>    - pet_val.record</span></pre><h1 id="c84f" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">修改setup.py文件</h1><p id="8807" class="pw-post-body-paragraph im in hi io b ip lq ir is it lr iv iw ix ls iz ja jb lt jd je jf lu jh ji jj hb bi translated">在<em class="lp">模型</em>目录中，修改<em class="lp"> setup.py </em>文件以反映以下内容。这是为了安装object_detection模块所需的一些依赖项，这些依赖项不是GCP ML环境中的预打包模块。</p><p id="ad48" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">主要是python-tk和Matplotlib。</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="be88" class="lk ke hi lg b fi ll lm l ln lo">"""Setup script for object_detection."""<br/>import logging<br/>import subprocess<br/>from setuptools import find_packages<br/>from setuptools import setup<br/>from setuptools.command.install import install</span><span id="7ab1" class="lk ke hi lg b fi mj lm l ln lo">class CustomCommands(install):<br/>  """A setuptools Command class able to run arbitrary commands."""</span><span id="41ea" class="lk ke hi lg b fi mj lm l ln lo">def RunCustomCommand(self, command_list):<br/>    p = subprocess.Popen(<br/>        command_list,<br/>        stdin=subprocess.PIPE,<br/>        stdout=subprocess.PIPE,<br/>        stderr=subprocess.STDOUT)<br/>    # Can use communicate(input='y\n'.encode()) if the command run requires<br/>    # some confirmation.<br/>    stdout_data, _ = p.communicate()<br/>    logging.info('Log command output: %s', stdout_data)<br/>    if p.returncode != 0:<br/>      raise RuntimeError('Command %s failed: exit code: %s' %<br/>                         (command_list, p.returncode))<br/>       <br/>  def run(self):<br/>    self.RunCustomCommand(['apt-get', 'update'])<br/>    self.RunCustomCommand(<br/>          ['apt-get', 'install', '-y', 'python-tk'])</span><span id="a38a" class="lk ke hi lg b fi mj lm l ln lo">    install.run(self)</span><span id="5164" class="lk ke hi lg b fi mj lm l ln lo">REQUIRED_PACKAGES = ['Pillow&gt;=1.0', 'Matplotlib&gt;=2.1']</span><span id="5adc" class="lk ke hi lg b fi mj lm l ln lo">setup(<br/>    name='object_detection',<br/>    version='0.1',<br/>    install_requires=REQUIRED_PACKAGES,<br/>    include_package_data=True,<br/>    packages=[p for p in find_packages() if p.startswith('object_detection')],<br/>    description='Tensorflow Object Detection Library',<br/> cmdclass={<br/>        'install': CustomCommands,<br/>    }<br/>)</span></pre><p id="b180" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">修改云参数设置</strong></p><p id="aae5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">编辑以下文件:<em class="lp">object _ detection/samples/cloud/cloud . yml</em></p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="b80b" class="lk ke hi lg b fi ll lm l ln lo">trainingInput:<br/>  runtimeVersion: "1.2"<br/>  scaleTier: CUSTOM<br/>  masterType: standard_gpu<br/>  workerCount: 5<br/>  workerType: standard_gpu<br/>  parameterServerCount: 3<br/>  parameterServerType: standard</span></pre><p id="4045" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">开始训练</strong></p><p id="ecfa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">修改了所有需要的参数文件后，我们现在可以构建并将其发送到Google ML进行处理:</p><p id="bc2a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">构建包:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="352c" class="lk ke hi lg b fi ll lm l ln lo"># From models directory<br/>python setup.py sdist<br/>(cd slim &amp;&amp; python setup.py sdist)</span></pre><p id="c5be" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">运行培训作业</strong></p><p id="63e0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">#注意:在澳大利亚，我们无法从我们当地的澳大利亚-东南1数据中心使用ML，因此我们使用us-central1。</p><p id="5f8e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">确保cd回到模型目录</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="25ab" class="lk ke hi lg b fi ll lm l ln lo"># From models directory<br/>gcloud ml-engine jobs submit training object_detection_${version_unique_ID} \<br/>    --job-dir=gs://${YOUR_GCS_BUCKET}/train \<br/>    --packages dist/object_detection-0.1.tar.gz,slim/dist/slim-0.1.tar.gz \<br/>    --module-name object_detection.train \<br/>    --region us-central1 \<br/>    --config object_detection/samples/cloud/cloud.yml \<br/>    -- \<br/>    --train_dir=gs://${YOUR_GCS_BUCKET}/train \<br/>    --pipeline_config_path=gs://${YOUR_GCS_BUCKET}/data/faster_rcnn_resnet101_pets.config</span></pre><p id="30e0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">运行评估作业</strong></p><p id="4490" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">评估作业可以与培训一起运行。然而，你很有可能不得不增加分配给你的ML平台的资源量，以使它们串联运行。</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="ba39" class="lk ke hi lg b fi ll lm l ln lo"># From models directory <br/>gcloud ml-engine jobs submit training object_detection_EVAL_${version_unique_ID} \<br/>    --job-dir=gs://${YOUR_GCS_BUCKET}/train \<br/>    --packages dist/object_detection-0.1.tar.gz,slim/dist/slim-0.1.tar.gz \<br/>    --module-name object_detection.eval \<br/>    --region us-central1 \<br/>    --scale-tier BASIC_GPU \<br/>    -- \<br/>    --checkpoint_dir=gs://${YOUR_GCS_BUCKET}/train \<br/>    --eval_dir=gs://${YOUR_GCS_BUCKET}/eval \<br/>    --pipeline_config_path=gs://${YOUR_GCS_BUCKET}/data/faster_rcnn_resnet101_pets.config</span></pre><h1 id="4176" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">使用tensorboard监控作业:</h1><p id="2dff" class="pw-post-body-paragraph im in hi io b ip lq ir is it lr iv iw ix ls iz ja jb lt jd je jf lu jh ji jj hb bi translated">打开GCP右上角的Google cloud SDK外壳。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div class="er es mk"><img src="../Images/76c48acb946853b5e571cba31ca1f594.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*Ax10hUZjjuChkAxFnNZ5Fg.png"/></div><figcaption class="ml mm et er es mn mo bd b be z dx translated">SDK外壳，在浏览器控制台中</figcaption></figure><p id="0f2d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">运行以下命令:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="3782" class="lk ke hi lg b fi ll lm l ln lo">tensorboard --logdir=gs://${GCP_BUCKET_NAME} --port=8080</span></pre><p id="7654" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用控制台中的预览功能打开张量板仪表板</p><figure class="lb lc ld le fd ij er es paragraph-image"><div class="er es mp"><img src="../Images/34c582a5843a7ac95de4d9edef552240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*mmexud7rdmwUfZwkI1mrfA.png"/></div><figcaption class="ml mm et er es mn mo bd b be z dx translated">网络预览— tensorboard</figcaption></figure><p id="0fb1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在处理培训和评估模型时，您应该能够检查它们。</p><p id="e223" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果这是您第一次运行模型，可能需要一段时间来填充，所以请耐心等待。还有，别忘了停止你的培训工作！</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="er es mq"><img src="../Images/14c38c83ebf8246a57b7b6bd46e0dd7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XqGznQ4zx1ryCpZto_LcMw.png"/></div></div><figcaption class="ml mm et er es mn mo bd b be z dx translated">Tensorboard性能监控</figcaption></figure><h1 id="5d2b" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="5388" class="pw-post-body-paragraph im in hi io b ip lq ir is it lr iv iw ix ls iz ja jb lt jd je jf lu jh ji jj hb bi translated">不管怎样，希望这些能帮助你通过windows在GCP试用版上运行TF。</p><p id="d160" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">另外，在你对pets数据集的结果感到沮丧之前，请务必阅读<a class="ae jk" href="http://www.robots.ox.ac.uk/~vgg/publications/2012/parkhi12a/parkhi12a.pdf" rel="noopener ugc nofollow" target="_blank">论文</a>。</p></div></div>    
</body>
</html>