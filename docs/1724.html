<html>
<head>
<title>Day #11 with Cloud Workflows: sleeping in a workflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云工作流的第11天:在工作流中睡觉</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/days-11-with-cloud-workflows-sleeping-in-a-workflow-39c849ee7a3e?source=collection_archive---------0-----------------------#2020-12-22">https://medium.com/google-cloud/days-11-with-cloud-workflows-sleeping-in-a-workflow-39c849ee7a3e?source=collection_archive---------0-----------------------#2020-12-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7956" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">工作流不一定是即时的，执行可以跨越很长一段时间。有些步骤可能会启动异步操作，这可能需要几秒钟或几分钟才能完成，但在该过程结束时不会通知您。因此，当您想要完成某件事情时，例如在再次轮询以检查异步操作的状态之前，您可以在工作流中引入休眠操作。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="44b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了引入一个<a class="ae jk" href="https://cloud.google.com/workflows/docs/reference/syntax" rel="noopener ugc nofollow" target="_blank">睡眠操作</a>，在工作流中添加一个调用内置睡眠操作的步骤:</p><pre class="jd je jf jg fd jl jm jn jo aw jp bi"><span id="868a" class="jq jr hi jm b fi js jt l ju jv">- someSleep:<br/>    call: sys.sleep<br/>    args:<br/>        seconds: 10<br/>- returnOutput:<br/>    return: We waited for 10 seconds!</span></pre><p id="576f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">休眠操作采用seconds参数，您可以在该参数中指定等待的秒数。</p><p id="1cc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过结合条件跳转和休眠操作，您可以轻松地定期轮询一些资源或API，以双重检查它是否已完成。</p></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="2367" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kd">最初发表于</em><a class="ae jk" href="http://glaforge.appspot.com/article/days-11-with-cloud-workflows-sleeping-in-a-workflow" rel="noopener ugc nofollow" target="_blank">T5【http://glaforge.appspot.com】</a><em class="kd">。</em></p></div></div>    
</body>
</html>