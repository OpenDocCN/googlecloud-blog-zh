<html>
<head>
<title>Day #7 with Cloud Workflows: Pass an input argument to your workflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云工作流的第7天:向工作流传递一个输入参数</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/day-7-with-cloud-workflows-pass-an-input-argument-to-your-workflow-7bd75dc63d9b?source=collection_archive---------3-----------------------#2020-12-10">https://medium.com/google-cloud/day-7-with-cloud-workflows-pass-an-input-argument-to-your-workflow-7bd75dc63d9b?source=collection_archive---------3-----------------------#2020-12-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4cd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到目前为止，我们在本系列中看到的所有工作流定义都是独立的。它们没有被参数化。但是我们经常需要我们的业务流程接受参数(订单的ID、订单的细节等。)，这样我们就可以对待那些输入值，并对它们做些什么。这就是工作流输入参数变得有用的地方！</p><p id="e4b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从一个简单的问候消息开始，我们希望用名字和姓氏对其进行定制。我们希望我们的工作流看起来像这样:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="23e6" class="jm jn hi ji b fi jo jp l jq jr">- output:<br/>    return: ${"Your name is " + person.firstname + " " + <br/>               person.lastname}</span></pre><p id="60d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的例子中，我们有一个person变量，在这个变量上我们请求firstname和lastname字段。这实际上是一本字典。但是我们如何让云工作流知道这个变量呢？我们需要以某种方式定义它。</p><p id="4d2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">工作流参数对于所有步骤都是全局的，因此需要在步骤本身的范围之外定义它们。实际上，工作流可以由子工作流构成:有一个主工作流，可能还有附加的子工作流，比如例程或内部函数定义。我们将在后面的文章中再次讨论子工作流的主题。为了声明我们的输入参数，我们将在主工作流的级别上进行，但是以一种更明确的方式，使用下面的符号:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="e744" class="jm jn hi ji b fi jo jp l jq jr">main:<br/>    params: [person]<br/>    steps:<br/>        - output:<br/>            return: ${"Your name is " + person.firstname + " " + <br/>                       person.lastname}</span></pre><p id="89ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们明确显示了主工作流的名称。我们使用params指令。请注意，我们的单个参数person用方括号括起来。主工作流只能接受一个字典参数，但是，正如我们将在后面看到的，子工作流可以接受几个输入参数，因此用方括号符号来指定参数列表。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div class="er es js"><img src="../Images/e5a6ed691821d2c65f2f74056d3632d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*rcOJvFiYCRKxKgdj.png"/></div></figure><p id="dd30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们如何传递这个输入参数？在执行屏幕中，在左侧的输入窗格中，我们创建了一个JSON对象，带有firstname和lastname键。这个JSON对象是我们的工作流定义的person变量中的字典。</p><p id="5861" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本视频中，您将看到实际的输入参数:</p><figure class="jd je jf jg fd jt"><div class="bz dy l di"><div class="jw jx l"/></div></figure></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><p id="e138" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kf">最初发表于</em><a class="ae kg" href="http://glaforge.appspot.com/article/day-7-with-cloud-workflows-pass-an-input-argument-to-your-workflow" rel="noopener ugc nofollow" target="_blank"><em class="kf">【http://glaforge.appspot.com】</em></a><em class="kf">。</em></p></div></div>    
</body>
</html>