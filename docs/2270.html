<html>
<head>
<title>Istio Service Mesh 101 — Part (1/3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Istio服务网格101 —零件(1/3)</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/istio-service-mesh-101-part-1-3-f07a8fedeea8?source=collection_archive---------0-----------------------#2022-07-20">https://medium.com/google-cloud/istio-service-mesh-101-part-1-3-f07a8fedeea8?source=collection_archive---------0-----------------------#2022-07-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/94bb00809bdc28037b83ae010d0a092b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l9PyOF1BIHD-6EpVSO5Gog.png"/></div></div></figure><div class=""/><p id="711f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们都听说过单片和微服务。微服务流行的是Kubernetes。有了Kubernetes，我们可以将紧密耦合的单片应用程序分解成松散耦合的微服务，如pods或部署。但是，我们应该定义部署的身份验证、授权、联网、日志记录和监控。当我们有多个部署时，事情会变得困难，因为我们必须为所有部署重复相同的过程。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><blockquote class="jv"><p id="5e72" class="jw jx ht bd jy jz ka kb kc kd ke jn dx translated">如果我们可以用边车集装箱上的代理来取代所有这些身份验证、授权、联网、日志记录和监控，会怎么样？</p></blockquote></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="4fe3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">代理可以通过数据平面相互通信，然后使用控制平面与服务器组件通信。控制平面将通过代理管理进出服务的所有流量，以便业务逻辑与网络逻辑分离。<em class="kg">这种做法被称为</em> <strong class="is hu"> <em class="kg">役目</em> </strong> <em class="kg">。</em></p><h1 id="1d18" class="kh ki ht bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">服务网格</h1><p id="899d" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated"><em class="kg">服务网格是一个专用且可配置的基础设施层，它处理服务之间的通信，而无需更改微服务架构中的代码</em>。使用服务网格，很容易<strong class="is hu"> <em class="kg">处理安全性、管理流量、控制可观察性和发现服务</em> </strong>。</p><h1 id="afdd" class="kh ki ht bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">伊斯迪奥</h1><p id="4f80" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated"><strong class="is hu"> <em class="kg"> Istio是一个服务网格——一个现代化的服务网络层，它提供了一种透明且独立于语言的方式来灵活、轻松地自动化应用网络功能。</em>T19】</strong></p><figure class="ll lm ln lo fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lk"><img src="../Images/e7e1bc5127960dddc51c7a8667500019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZFuYZzV0e8GgQ3GZuCJHA.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">图片来源:<a class="ae lt" href="https://istio.io/" rel="noopener ugc nofollow" target="_blank">https://istio.io/</a></figcaption></figure><p id="1f59" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为管理构成云原生应用的不同微服务的流行解决方案，它还支持这些微服务如何相互通信和共享数据。Istio <em class="kg">管理服务间的流量，执行访问策略，并汇总遥测数据，所有这些都不需要更改应用代码</em>。它通过透明地分层到现有的分布式应用程序上，降低了部署的复杂性。它也是<strong class="is hu"> <em class="kg">独立于平台的，可以在各种环境中运行，比如云、内部部署、Kubernetes和Mesos。</em> </strong></p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><blockquote class="jv"><p id="0f5a" class="jw jx ht bd jy jz ka kb kc kd ke jn dx translated">一个开源服务网格，帮助组织在任何地方运行分布式的、基于微服务的应用。</p></blockquote></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="ebe3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Istio <strong class="is hu"> <em class="kg">扩展了Kubernetes，使用强大的特使服务代理</em> </strong>建立了一个可编程的应用感知网络。Istio可处理Kubernetes和传统工作负载，为复杂的部署带来标准、通用的流量管理、遥测和安全性。</p><h1 id="f230" class="kh ki ht bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">Istio的用途</h1><p id="5cf1" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">Istio允许组织大规模交付分布式应用程序。它简化了服务到服务的网络操作，如流量管理、授权和加密，以及审计和可观察性。</p><p id="0e18" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">前面，我们提到了用于通信的代理。<strong class="is hu"> <em class="kg"> Istio使用开源的高性能代理，命名为特使</em> </strong>。<em class="kg">代理与称为控制平面</em>的服务器端组件通信。这就是守护进程的所在。</p><h1 id="8906" class="kh ki ht bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">Istiod</h1><p id="d1d7" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated"><strong class="is hu"> <em class="kg">控制平面功能整合到一个名为Istiod </em> </strong>的二进制文件中。这包含几个组件。</p><blockquote class="lu lv lw"><p id="45f3" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">试点——用于服务发现</p><p id="f5a0" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">条样-用于验证配置文件</p><p id="4cf7" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">Citadel —用于托管证书生成</p></blockquote><p id="926a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> <em class="kg">每个服务或端口都有一个单独的组件，以及称为Istio代理</em> </strong>的特使代理。它负责将配置秘密传递给特使代理。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="06e1" class="kh ki ht bd kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la me lc ld le bi translated">安装Istio</h1><p id="5dd6" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">安装Istio有三种方法。它们是:</p><blockquote class="jv"><p id="d382" class="jw jx ht bd jy jz ka kb kc kd ke jn dx translated">1.使用名为istioctl的命令行实用程序</p><p id="94d5" class="jw jx ht bd jy jz ka kb kc kd ke jn dx translated">2.使用Istio操作员安装</p><p id="8eb1" class="jw jx ht bd jy jz ka kb kc kd ke jn dx translated">3.使用Istio的头盔组件</p></blockquote><p id="365b" class="pw-post-body-paragraph iq ir ht is b it mf iv iw ix mg iz ja jb mh jd je jf mi jh ji jj mj jl jm jn hb bi translated">我们将研究如何使用istioctl 安装Istio。</p><h2 id="7650" class="mk ki ht bd kj ml mm mn kn mo mp mq kr jb mr ms kv jf mt mu kz jj mv mw ld mx bi translated">安装istioctl</h2><p id="2e5d" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">转到Istio发行版页面下载适用于您的操作系统的安装文件，或者下载并自动提取最新的发行版(Linux或macOS):</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="2377" class="nd ki ht mz b be ne nf l ng nh">$ curl -L https://istio.io/downloadIstio | sh -</span></pre><p id="fc9d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">移动到Istio包目录。例如，如果包是istio 1.14.1:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="60ec" class="nd ki ht mz b be ne nf l ng nh">$ cd istio-1.14.1</span></pre><p id="81d8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装目录包含:</p><ul class=""><li id="ebcc" class="ni nj ht is b it iu ix iy jb nk jf nl jj nm jn nn no np nq bi translated"><strong class="is hu">示例/ </strong>中的示例应用</li><li id="3f76" class="ni nj ht is b it nr ix ns jb nt jf nu jj nv jn nn no np nq bi translated">istioctl客户端二进制文件位于bin/目录中。</li></ul><p id="41ed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将istioctl客户端添加到您的路径中(Linux或macOS):</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="e9c1" class="nd ki ht mz b be ne nf l ng nh">$ export PATH=$PWD/bin:$PATH</span></pre><h2 id="9e5f" class="mk ki ht bd kj ml mm mn kn mo mp mq kr jb mr ms kv jf mt mu kz jj mv mw ld mx bi translated">安装Istio</h2><p id="a083" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated"><em class="kg">对于此次安装，我们将使用演示配置文件。</em>它选择了一组很好的缺省值用于测试，但是还有其他的概要文件用于生产或性能测试。</p><blockquote class="lu lv lw"><p id="303e" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">如果您的平台有特定于供应商的配置文件，例如Openshift，请在下面的命令中使用它，而不是演示配置文件。有关详细信息，请参考您的平台说明。</p></blockquote><p id="04d6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用istioctl命令安装配置文件。</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="5cb2" class="nd ki ht mz b be ne nf l ng nh">$ istioctl install - set profile=demo -y</span></pre><p id="b81f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加一个名称空间标签，指示Istio在以后部署应用程序时自动注入Envoy sidecar代理:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="4fdc" class="nd ki ht mz b be ne nf l ng nh">$ kubectl label namespace default istio-injection=enabled</span></pre><blockquote class="lu lv lw"><p id="9b00" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">如果您错过了执行上述步骤，Istio将不会将sidecar容器注入到您创建的部署中。</p></blockquote></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="7ab1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们已经安装了Istio，让我们部署一个示例应用程序。当我们安装Istio时，在<em class="kg"> /samples </em>文件夹中有一个示例应用程序。</p><h1 id="dc2f" class="kh ki ht bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">部署示例应用程序</h1><p id="9380" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">部署Bookinfo示例应用程序:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="ef10" class="nd ki ht mz b be ne nf l ng nh">$ kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml</span></pre><p id="e671" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kg">应用程序将启动。当每个吊舱准备就绪时，Istio边车将随之展开。</em></p><blockquote class="lu lv lw"><p id="66b8" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">列出服务:</p></blockquote><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="7597" class="nd ki ht mz b be ne nf l ng nh">$ kubectl get services</span></pre><blockquote class="lu lv lw"><p id="8dd5" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">列表窗格:</p></blockquote><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="ab97" class="nd ki ht mz b be ne nf l ng nh">$ kubectl get pods</span></pre><blockquote class="lu lv lw"><p id="7127" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">确保每个箱子里有两个容器。</p></blockquote><p id="2705" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">验证到目前为止一切都工作正常。运行此命令，通过检查响应中的页面标题来查看应用程序是否正在群集内运行并提供HTML页面:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="4570" class="nd ki ht mz b be ne nf l ng nh">$ kubectl exec "$(kubectl get pod -l app=ratings -o jsonpath='{.items[0].metadata.name}')" -c ratings - curl -sS productpage:9080/productpage | grep -o "&lt;title&gt;.*&lt;/title&gt;"</span></pre><p id="41ac" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您应该得到这样的输出:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="dc57" class="nd ki ht mz b be ne nf l ng nh">&lt;title&gt;Simple Bookstore App&lt;/title&gt;</span></pre><h1 id="19cc" class="kh ki ht bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">向外部流量开放应用程序</h1><p id="4830" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">Bookinfo应用程序已部署，但无法从外部访问。要使其可访问，您需要创建一个Istio入口网关，它将路径映射到网格边缘的一条路线。</p><p id="17bb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将此应用程序与Istio网关关联:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="0b3e" class="nd ki ht mz b be ne nf l ng nh">$ kubectl apply -f samples/bookinfo/networking/bookinfo-gateway.yaml</span></pre><p id="f522" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">确保配置没有问题:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="b8f3" class="nd ki ht mz b be ne nf l ng nh">$ istioctl analyze</span></pre><p id="41b2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您应该得到这样的输出:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="6c5e" class="nd ki ht mz b be ne nf l ng nh">✔ No validation issues found when analyzing namespace: default.</span></pre><h2 id="afa9" class="mk ki ht bd kj ml mm mn kn mo mp mq kr jb mr ms kv jf mt mu kz jj mv mw ld mx bi translated">确定入口IP和端口</h2><p id="fc06" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">按照这些说明设置用于访问网关的INGRESS_HOST和INGRESS_PORT变量。</p><p id="6ee8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">执行以下命令来确定Kubernetes集群是否运行在支持外部负载平衡器的环境中:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="f612" class="nd ki ht mz b be ne nf l ng nh">$ kubectl get svc istio-ingressgateway -n istio-system</span></pre></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="4889" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kg">如果设置了EXTERNAL-IP值，您的环境就有了一个外部负载平衡器，您可以将它用于入口网关。如果EXTERNAL-IP值为&lt; none &gt;(或永久&lt; pending &gt;)，则您的环境不会为入口网关提供外部负载平衡器。在这种情况下，您可以使用服务的节点端口访问网关。</em></p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><blockquote class="lu lv lw"><p id="c90b" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">如果您的环境有外部负载平衡器。</p></blockquote><p id="7986" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">设置入口IP和端口:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="c177" class="nd ki ht mz b be ne nf l ng nh">$ export INGRESS_HOST=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.status.loadBalancer.ingress[0].ip}')<br/>$ export INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name=="http2")].port}')<br/>$ export SECURE_INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name=="https")].port}')</span></pre><blockquote class="lu lv lw"><p id="1181" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">如果您的环境没有外部负载平衡器，请选择一个节点端口。</p></blockquote><p id="da98" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">设置入口端口:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="5efd" class="nd ki ht mz b be ne nf l ng nh">$ export INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name=="http2")].nodePort}')<br/>$ export SECURE_INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name=="https")].nodePort}')</span></pre><p id="01ed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">设置网关URL:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="42ce" class="nd ki ht mz b be ne nf l ng nh">$ export GATEWAY_URL=$INGRESS_HOST:$INGRESS_PORT</span></pre><p id="5747" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">确保IP地址和端口已成功分配给环境变量:</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="494d" class="nd ki ht mz b be ne nf l ng nh">$ echo "$GATEWAY_URL"</span></pre><p id="bc91" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你的输出应该是<strong class="is hu"> <em class="kg"> IP_ADDRESS:PORT </em> </strong></p><h1 id="59f8" class="kh ki ht bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">验证外部访问</h1><p id="ba25" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">通过使用浏览器查看Bookinfo产品页面，确认可以从外部访问Bookinfo应用程序。</p><p id="0541" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行以下命令来检索Bookinfo应用程序的外部地址。</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="075f" class="nd ki ht mz b be ne nf l ng nh">$ echo "http://$GATEWAY_URL/productpage"</span></pre><p id="9897" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将前一个命令的输出粘贴到您的web浏览器中，并确认显示了Bookinfo产品页面。</p><h1 id="b82d" class="kh ki ht bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">查看仪表板</h1><p id="fe67" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">Istio集成了几种不同的遥测应用。这些可以帮助您了解服务网格的结构，显示网格的拓扑结构，并分析网格的健康状况。</p><blockquote class="lu lv lw"><p id="6b81" class="iq ir kg is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">与普罗米修斯、格拉法纳和耶格一起部署基阿利仪表板</p></blockquote><p id="a9e9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装Kiali和其他附加组件，并等待它们被部署。</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="3f7a" class="nd ki ht mz b be ne nf l ng nh">$ kubectl apply -f samples/addons<br/>$ kubectl rollout status deployment/kiali -n istio-system</span></pre><p id="a148" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">访问Kiali仪表板。</p><pre class="ll lm ln lo fd my mz na bn nb nc bi"><span id="1d26" class="nd ki ht mz b be ne nf l ng nh">$ istioctl dashboard kiali</span></pre><p id="5d82" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，您可以单击localhost链接来查看Kiali。在左侧导航菜单中，选择Graph，并在命名空间下拉列表中，选择default。</p><p id="531e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Bookinfo示例应用程序中,<em class="kg">Kiali仪表板显示了您的网格与服务之间关系的概述。它还提供过滤器来可视化流量。</em></p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="10f9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">祝贺您在Istio上构建了您的服务网络。我们将在接下来的博客中探讨流量管理、安全性和可观察性。祝您愉快！</p><p id="1332" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在此阅读第2部分:<a class="ae lt" rel="noopener" href="/google-cloud/istio-service-mesh-101-part-2-3-ceff88a38558"> <strong class="is hu"> Istio服务网格101 —部分(2/3) </strong> </a></p></div></div>    
</body>
</html>