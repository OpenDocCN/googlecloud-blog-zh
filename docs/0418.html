<html>
<head>
<title>Google Cloud SDK (gcloud) on cygwin - almost….</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">cygwin上的Google Cloud SDK(g Cloud)——差不多…</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/google-cloud-sdk-gcloud-on-cygwin-almost-9be91e0006fb?source=collection_archive---------3-----------------------#2017-10-26">https://medium.com/google-cloud/google-cloud-sdk-gcloud-on-cygwin-almost-9be91e0006fb?source=collection_archive---------3-----------------------#2017-10-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="04ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在windows机器上工作，通过windows installer安装<a class="ae jd" href="https://cloud.google.com/sdk/docs/quickstart-windows" rel="noopener ugc nofollow" target="_blank"> Google Cloud SDK </a>。到目前为止，我能够在我的cygwin环境中处理几乎所有的事情，除了几个例外。</p><p id="36ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在对<a class="ae jd" href="https://cloud.google.com/container-engine/" rel="noopener ugc nofollow" target="_blank"> GKE </a>集群进行身份验证后，kubectl的“cmd-path”配置存在一些问题:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="bb45" class="jn jo hi jj b fi jp jq l jr js">Unable to connect to the server: error executing access token command "/cygdrive/c/Users/brett/AppData/Local/Google/Cloud SDK/google-cloud-sdk/bin/gcloud config config-helper --format=json": err=exec: "/cygdrive/c/Users/brett/AppData/Local/Google/Cloud SDK/google-cloud-sdk/bin/gcloud": file does not exist output=</span></pre><p id="1e4d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了在每次成功收集端点和auth数据后解决这个问题，我需要更改~/中的kubeconfig条目。kube/配置:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="c734" class="jn jo hi jj b fi jp jq l jr js">- name: gke_ops-iac-sb_us-east1-b_iac-test-cluster<br/>  user:<br/>    auth-provider:<br/>      config:<br/>        cmd-args: config config-helper --format=json<br/>        cmd-path: /cygdrive/c/Users/brett/AppData/Local/Google/Cloud SDK/google-cloud-sdk/bin/gcloud<br/>        expiry-key: '{.credential.token_expiry}'<br/>        token-key: '{.credential.access_token}'<br/>      name: gcp</span></pre><p id="450e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以看到cmd路径指向我的windows安装版本的gcloud。(注意:我已经在不同的目录中不加空格地试过了，甚至把它指向cygwin下的一个位置路径，结果都是一样的。)这在使用kubectl做任何事情时都会抛出一个错误:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="ed7b" class="jn jo hi jj b fi jp jq l jr js">$ kubectl cluster-info<br/>Unable to connect to the server: error executing access token command "/cygdrive/c/Users/brett/AppData/Local/Google/Cloud SDK/google-cloud-sdk/bin/gcloud config config-helper --format=json": err=exec: "/cygdrive/c/Users/brett/AppData/Local/Google/Cloud SDK/google-cloud-sdk/bin/gcloud": file does not exist output=</span></pre><p id="84b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了解决这个问题，我将cmd路径改为:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="01da" class="jn jo hi jj b fi jp jq l jr js">cmd-path: gcloud</span></pre><p id="e704" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问题是，每次认证都必须这样做。我还尝试过使用curl将cloud sdk直接安装到cygwin上。这工作，但是我无法安装kubectl后:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="0c36" class="jn jo hi jj b fi jp jq l jr js">$ gcloud components install kubectl<br/>ERROR: (gcloud.components.install) The following components are unknown [kubectl].</span></pre><p id="1e4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我也无法连接到豆荚:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="f4ee" class="jn jo hi jj b fi jp jq l jr js">$ kubectl.exe exec -it my-pod --namespace=my-namespace -- /bin/bash<br/>Unable to use a TTY - input is not a terminal or the right kind of file</span></pre><p id="b0a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我遇到的下一个问题是关于将docker图像推送到<a class="ae jd" href="https://cloud.google.com/container-registry" rel="noopener ugc nofollow" target="_blank">谷歌容器注册中心</a>。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="0aca" class="jn jo hi jj b fi jp jq l jr js">$ gcloud docker -- push gcr.io/ops-iac-sb/gcloud-slave:v1<br/>The push refers to a repository [gcr.io/ops-iac-sb/gcloud-slave]<br/>f2c2cdf1f2e9: Preparing<br/>b5b8df85aa3c: Preparing<br/>24b3e47367c1: Preparing<br/>a75caa09eb1f: Preparing<br/>9b790cee2175: Waiting<br/>348667646bbd: Waiting<br/><br/>denied: Unable to access the repository; please check that you have permission to access it.</span></pre><p id="b6ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我还没有找到解决这个问题的方法。我必须从windows Google Cloud SDK shell运行这些命令。</p><p id="97c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我喜欢能够完全使用来自cygwin的Google Cloud SDK，所以我会继续探讨这个问题。如果有人有任何想法或者比我更成功，请告诉我！</p></div></div>    
</body>
</html>