<html>
<head>
<title>How to create a chatbot using Dialogflow Enterprise Edition and Dialogflow API V2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Dialogflow企业版和Dialogflow API V2创建聊天机器人</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/how-to-create-a-chatbot-using-dialogflow-enterprise-edition-and-dialogflow-api-v2-923f4a965176?source=collection_archive---------0-----------------------#2018-05-10">https://medium.com/google-cloud/how-to-create-a-chatbot-using-dialogflow-enterprise-edition-and-dialogflow-api-v2-923f4a965176?source=collection_archive---------0-----------------------#2018-05-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/59ad28bb4221692613ce61c55a978c4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7u42rvyRCly8KzSp."/></div></div></figure><p id="dc3c" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在本教程中，我们将学习如何使用Dialogflow企业版和Dialogflow API V2创建聊天机器人。本教程是对教程列表的补充，涵盖了Google Cloud及其令人敬畏的产品和服务套件。</p><h1 id="d641" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">使用Dialogflow企业版和Dialogflow API V2创建聊天机器人</h1><p id="21d0" class="pw-post-body-paragraph iy iz hi ja b jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv hb bi translated">本教程结束时，您将对以下内容有更好的理解。</p><ol class=""><li id="e855" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv le lf lg lh bi translated">Dialogflow简介</li><li id="3fe8" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv le lf lg lh bi translated">Dialogflow企业版简介</li><li id="4d22" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv le lf lg lh bi translated">如何在Dialogflow中创建代理</li><li id="5c00" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv le lf lg lh bi translated">对意图和实体的理解</li><li id="8432" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv le lf lg lh bi translated">构建客户服务代理</li><li id="27d0" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv le lf lg lh bi translated">实现和云功能以及对话流V2 API</li><li id="daf1" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv le lf lg lh bi translated">如何创建客服代理聊天机器人</li><li id="a8fb" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv le lf lg lh bi translated">将票证信息存储在云数据存储中</li><li id="767b" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv le lf lg lh bi translated">结论</li><li id="36e8" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv le lf lg lh bi translated">参考</li></ol><p id="0174" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">因为我们在本教程中有很多内容要介绍，所以让我们开始吧。</p><h2 id="7527" class="ln jx hi bd jy lo lp lq kc lr ls lt kg jj lu lv kk jn lw lx ko jr ly lz ks ma bi translated">1.Dialogflow简介:</h2><p id="1ef7" class="pw-post-body-paragraph iy iz hi ja b jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv hb bi translated">Dialogflow是一个端到端的开发套件，用于为网站、移动应用程序、流行的消息平台和物联网设备构建对话界面。它可以用来构建聊天机器人、语音助手等特别相关的工具，这些工具能够与你的用户进行自然而丰富的互动(T2)。<br/> Dialogflow也由机器学习驱动，以<strong class="ja hj">识别用户所说内容的意图和上下文</strong>，允许对话界面提供高效和准确的响应。所以在本教程的这一点上，Google提供了两个版本的Dialogflow。</p><ul class=""><li id="cfbc" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated"><a class="ae mc" href="https://dialogflow.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj"> Dialogflow标准版</strong> </a>:全部免费</li><li id="471c" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated"><a class="ae mc" href="https://cloud.google.com/dialogflow-enterprise/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj"> Dialogflow企业版</strong> </a>:高级服务和现收现付服务。</li></ul><h2 id="975a" class="ln jx hi bd jy lo lp lq kc lr ls lt kg jj lu lv kk jn lw lx ko jr ly lz ks ma bi translated">2.Dialogflow企业版简介:</h2><p id="83a8" class="pw-post-body-paragraph iy iz hi ja b jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv hb bi translated"><strong class="ja hj"> Dialogflow企业版</strong>作为谷歌云平台(GCP)的一部分提供。它提供无限制的文本和语音交互，更高的批量使用配额，以及来自Google Cloud support的支持。Dialogflow Enterprise Edition是一种高级产品，作为一种现收现付的服务提供。<br/>dialog flow Enterprise Edition非常适合需要企业级服务的企业，这种服务可以轻松扩展以支持用户需求的变化。</p><h2 id="eba9" class="ln jx hi bd jy lo lp lq kc lr ls lt kg jj lu lv kk jn lw lx ko jr ly lz ks ma bi translated">3.如何在Dialogflow企业版中创建代理:</h2><p id="e063" class="pw-post-body-paragraph iy iz hi ja b jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv hb bi translated">在Dialogflow标准版中，您可以前往<a class="ae mc" href="https://dialogflow.com/" rel="noopener ugc nofollow" target="_blank">dialogflow.com</a>创建您的代理。而对于Dialogflow企业版，我们首先在Google云平台中创建一个项目，并使用Dialogflow API。按照以下步骤使用Dialogflow企业版和Dialogflow API V2创建聊天机器人。</p><p id="fe15" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 3.1项目设置和认证:</strong></p><p id="d505" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">首先，我们需要使用https://console.cloud.google.com/的<a class="ae mc" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">创建一个谷歌云平台项目</a></p><ul class=""><li id="edc5" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">创建或选择现有的GCP项目。</li><li id="8f0f" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">为该项目启用Dialogflow V2 API。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es md"><img src="../Images/cbe981cfa4389a465a89e4ed721d239d.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/0*JL8jbxE60QuO1pG0."/></div></figure><ul class=""><li id="836e" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">点击<strong class="ja hj">启用API和服务</strong></li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/754630f0129a72db287cb019b06c9f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ijddf13yKFEwzTCj."/></div></div></figure><ul class=""><li id="7dd0" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">在搜索栏中搜索Dialogflow API并单击它。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es me"><img src="../Images/37c9154b04c84b1092238dc3c7059e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n0oQ0TIwFK8GkB-d."/></div></div></figure><ul class=""><li id="df3f" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">继续点击<strong class="ja hj">启用API </strong>。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/ed1d8ef4b541098f1ac39595560830c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Uiv-m4FDqlPqY7t8."/></div></div></figure><ul class=""><li id="54f7" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated"><strong class="ja hj"> 3.2创建一个Dialogflow代理。</strong></li><li id="a190" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">启用API后，单击Dialogflow代理选项卡并为您的项目选择一个代理名称。</li><li id="977b" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">代理名称</li><li id="6836" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">语言</li><li id="9cfd" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">时区</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/b29f60865b1e3fe72eb2058151ad9d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VvsN3JHc5OhH7Evb."/></div></div></figure><ul class=""><li id="58da" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">单击<strong class="ja hj">创建</strong>按钮创建<strong class="ja hj">diaglflow企业版代理。</strong></li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/af364cf29bf5b75c3c69ebf79bf8bcff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GLAIFHdjC3DQM6QF."/></div></div></figure><ul class=""><li id="ef85" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">因此，在本教程的剩余部分，我们将使用dialogflow.com构建我们在GCP上创建的代理。于是，点击<strong class="ja hj">打开dialogflow.com代理</strong></li><li id="7225" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">因此，一旦你点击链接，它也应该要求你选择你的谷歌帐户。选择最初创建项目时使用的同一个google帐户。</li><li id="5c42" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">它现在还应该向您显示一个允许dialogflow查看和管理数据的页面。最后，点击<strong class="ja hj">允许</strong>。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es mf"><img src="../Images/1748c781ae39874076d15c125d9c3193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/0*ewc3dSTx36TU_Rcz."/></div></figure><ul class=""><li id="199c" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">此外，查看帐户设置并点击<strong class="ja hj">接受。</strong></li><li id="0227" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">最后，您现在将看到Dialgflow仪表板，在本教程中，您还可以看到一条消息，说明“Dialogflow API V2已正式推出。它现在是所有新的Dialogflow代理的默认API，所有新功能将仅在V2上发布。点击了解如何迁移您的V1代理<a class="ae mc" href="https://dialogflow.com/docs/reference/v1-v2-migration-guide" rel="noopener ugc nofollow" target="_blank">。”</a></li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/1391991dccea0a6f2d8ccdf6a24b0415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yGuWlxTWYK9q4VXj."/></div></div></figure><p id="548a" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 3.3创建服务帐户。</strong></p><ul class=""><li id="1cbd" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">在我们继续进行dialogflow之前，让我们也确保我们有一些更多的项目设置。</li><li id="6efd" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">从Google Cloud <a class="ae mc" href="https://console.cloud.google.com/iam-admin/serviceaccounts/" rel="noopener ugc nofollow" target="_blank">服务账户</a>页面，<strong class="ja hj">选择</strong>您的<strong class="ja hj">项目</strong>。</li><li id="8578" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">您应该会看到一个类似如下所示的屏幕。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/d3d7d0866072219660faecf3939e8f51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vh9pbFY3eUfF-FjQ."/></div></div></figure><ul class=""><li id="6651" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">以JSON的形式下载一个私钥。</li><li id="f37d" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">从GCP控制台，转到<strong class="ja hj">API和服务</strong>并点击<strong class="ja hj">凭证</strong>。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mg"><img src="../Images/6ee11e481a0e2ea0042cfa01d57a5280.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aFsMSE8H5hdXLyty."/></div></div></figure><ul class=""><li id="fb8c" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">点击<strong class="ja hj">创建凭证</strong>并选择<strong class="ja hj">服务账号密钥。</strong></li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/89f8609c84980c2ec76dfff44900e7ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SxtPsQ7VCOJjgWKX."/></div></div></figure><ul class=""><li id="56ab" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">从下拉列表中选择您的服务帐户，选择JSON并点击<strong class="ja hj">创建。</strong>这会将JSON密钥下载到您的计算机上。安全保存。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mh"><img src="../Images/3961926b98f83aaf2ce09a1e3149ab16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2Yv6ofeABb1Rahhv."/></div></div></figure><ul class=""><li id="de68" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">将环境变量GOOGLE_APPLICATION_CREDENTIALS设置为包含您的服务帐户密钥的JSON文件的文件路径。打开终端或命令提示符窗口，根据您的操作系统执行以下命令。</li></ul></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="9427" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">举例:</strong> <strong class="ja hj"> Linux或macOS </strong></p><p id="54be" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">将[PATH]替换为包含您的服务帐户密钥的JSON文件的文件路径。</p><pre class="in io ip iq fd mi mj mk ml aw mm bi"><span id="23ad" class="ln jx hi mj b fi mn mo l mp mq">export GOOGLE_APPLICATION_CREDENTIALS="[PATH]"</span></pre><p id="b9c2" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">例如:</p><pre class="in io ip iq fd mi mj mk ml aw mm bi"><span id="ee22" class="ln jx hi mj b fi mn mo l mp mq">export GOOGLE_APPLICATION_CREDENTIALS="/home/user/Downloads/service-account-file.json"</span></pre></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="dd44" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">举例:</strong> <strong class="ja hj">窗口</strong></p><p id="30c5" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">将[PATH]替换为包含您的服务帐户密钥的JSON文件的文件路径，将[FILE_NAME]替换为文件名。</p><p id="1483" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">使用命令提示符:</p><pre class="in io ip iq fd mi mj mk ml aw mm bi"><span id="52b9" class="ln jx hi mj b fi mn mo l mp mq">set GOOGLE_APPLICATION_CREDENTIALS=[PATH]</span></pre></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="da52" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 3.4 </strong> <a class="ae mc" href="https://cloud.google.com/sdk/docs/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj">安装并初始化云SDK。</strong>T19】</a></p><ul class=""><li id="0c07" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">遵循文档中显示的说明。</li><li id="6821" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">最后，按照这些步骤，您应该获得一个服务帐户密钥文件(JSON格式),该文件将允许您通过快速入门中的Dialogflow V2 API的身份验证:</li><li id="b59c" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated"><strong class="ja hj">g cloud auth activate–service–account–key–file = service–account–key–file</strong></li><li id="0351" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">成功完成上述步骤后，您就已经激活了服务帐户凭据。</li></ul><h2 id="369f" class="ln jx hi bd jy lo lp lq kc lr ls lt kg jj lu lv kk jn lw lx ko jr ly lz ks ma bi translated">4.理解对话流中的意图和实体:</h2><p id="dc21" class="pw-post-body-paragraph iy iz hi ja b jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv hb bi translated"><strong class="ja hj">意图:</strong><strong class="ja hj">意图</strong>代表了用户所说的和你的软件应该采取的行动之间的映射。</p><p id="a957" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">意图界面也有以下部分:</p><ul class=""><li id="ed08" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">训练短语</li><li id="1c15" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">行动</li><li id="62ed" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">反应</li><li id="aa6f" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">上下文</li></ul><p id="0da8" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">实体:</strong>实体是用于从自然语言输入中提取<a class="ae mc" href="https://dialogflow.com/docs/actions-and-parameters#parameters" rel="noopener ugc nofollow" target="_blank">参数值</a>的强大工具。任何你想从用户请求中得到的重要数据，都会有相应的实体。</p><p id="dc63" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">随着我们进入教程的下一部分，您也将对意图和实体有更好的理解。</p><h2 id="4b89" class="ln jx hi bd jy lo lp lq kc lr ls lt kg jj lu lv kk jn lw lx ko jr ly lz ks ma bi translated">5.构建客户服务代理:</h2><p id="c091" class="pw-post-body-paragraph iy iz hi ja b jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv hb bi translated">由于我们正在构建一个客户服务代理聊天机器人，我们也必须首先欢迎或问候客户。我们可以通过<strong class="ja hj">欢迎意向来实现这一点。</strong></p><p id="61d8" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 5.1欢迎用户</strong></p><ul class=""><li id="b1f7" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">点击<strong class="ja hj">欢迎意向</strong>。</li><li id="f093" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">在培训短语下，继续添加一些你的用户会用来开始对话的短语。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/687e49fd3d37acd0bed6a08c2e7575dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pFH_wgynNqirxl5J."/></div></div></figure><ul class=""><li id="1e3c" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">此外，下一步是添加来自聊天机器人的适当响应，以问候用户并提示他们特定的问题。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/35cf1eac26b47086c6625c64d7960f17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mLo8lrDdpCBm6wV5."/></div></div></figure><ul class=""><li id="c57a" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">最后，点击<strong class="ja hj">保存</strong>意向。您还应该看到一个弹出消息，说<strong class="ja hj">代理</strong> <strong class="ja hj">培训已完成</strong>。</li></ul><p id="3c60" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 5.2创建提交票意向</strong></p><ul class=""><li id="a932" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">点击<strong class="ja hj">创建意图</strong>。这将创建一个新的意图，您必须为您的意图指定一个名称。姑且称之为提交票吧。</li><li id="9748" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">之后点击<strong class="ja hj">训练短语</strong>来添加用户可能会说的短语。</li><li id="f2a4" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">一旦您成功添加了几个<strong class="ja hj">训练短语</strong>，让我们添加一个响应以从用户那里获得更多信息。</li><li id="46c8" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">点击<strong class="ja hj">添加响应</strong>并输入类似这样的响应。当然可以！我可以帮你。请提供您的姓名。</li><li id="48e7" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">点击<strong class="ja hj">保存</strong>保存<strong class="ja hj">提交票意向</strong>。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/c9bcd4f49b2022481ce5f3b49df09955.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bTtphDJupWpE7ZXg."/></div></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/bc7af9823bd39b28e6fde27e05d91262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zbx1UhZN_cgA5WDD."/></div></div></figure><p id="28b5" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 5.3创建跟进意向收集名称</strong></p><ul class=""><li id="e91c" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">以便我们建立后续意向。请遵循以下步骤。</li><li id="0a44" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">单击左侧导航面板上的Intents。</li><li id="412a" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">将鼠标悬停在<strong class="ja hj">提交票据</strong>意图上。您将看到<strong class="ja hj">向右侧添加随动</strong>意图选项。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/1982bb2624c812e9ad8b815bb80c9564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wdBcUKQeweAUYFdm."/></div></div></figure><ul class=""><li id="b3b7" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">这应该会给你一个下拉列表。从列表中选择<strong class="ja hj">自定义</strong>。</li><li id="fe84" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">现在，您应该会看到一个后续意向已经创建。点击<strong class="ja hj">提交票证—自定义</strong>。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mr"><img src="../Images/3a0e84f9da0c486d149e298017379c46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*npG5I55NEpbrm4S6."/></div></div></figure><ul class=""><li id="d908" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">我们把名字改成有意义的吧。将意向名称更改为<strong class="ja hj">提交票证—收集名称</strong>。</li><li id="e1bc" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">添加几个<strong class="ja hj">训练短语</strong>。</li><li id="7a07" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">“我是约翰”</li><li id="986d" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">“我的名字是萨钦”</li><li id="c8f6" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">“我是露西”</li><li id="5103" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">您还可以看到，它会自动突出显示实体名称<strong class="ja hj"> @sys.given-name </strong>。</li><li id="8779" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">此外，到目前为止，在actions和parameters下，您应该会看到如下所示的内容。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/0d31b242b3f6f79fc9948afc3a5e3658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xMBUSMk4Jq2KZgos."/></div></div></figure><ul class=""><li id="3b9a" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">最后，添加一个响应来从用户那里获取更多信息。$given-name将保存客户的姓名。</li><li id="c569" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">“谢谢$赐名！你的电话号码是多少？”</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/d8554f6d953b866ab08c162874c9b881.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UVw5RgrRQvlr_myc."/></div></div></figure><ul class=""><li id="2c42" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated"><strong class="ja hj">保存</strong>意向培训代理。</li></ul><p id="d6da" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 5.4创建跟进意向以收集电话号码。</strong></p><ul class=""><li id="4cac" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">首先，将鼠标悬停在<strong class="ja hj">提交票证—收集名称</strong>意图上。您将看到<strong class="ja hj">向右侧添加随动</strong>意图选项。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/cd60de493ef66360671ba8694dae7d95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hykx9qAaP7SfV-rn."/></div></div></figure><ul class=""><li id="1b99" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">这应该会给你一个下拉列表。从列表中选择<strong class="ja hj">自定义</strong>。</li><li id="2aa1" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">现在，您应该会看到一个后续意向已经创建。点击<strong class="ja hj">提交票证—收集名称—自定义</strong>。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/74f05db6aded8740140b2fa115ef3ade.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XQP1u2XF8lT0iVvb."/></div></div></figure><ul class=""><li id="e32b" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">我们把名字改成有意义的吧。将意向名称更改为<strong class="ja hj">提交票证—收集电话</strong>。</li><li id="9c2d" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">添加几个<strong class="ja hj">训练短语</strong>。这些只是样品。</li><li id="e609" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">我的电话号码是+ 1231232432</li><li id="ef71" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">手机号码是+1 234234234</li><li id="7c82" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi">+1234324234</li><li id="4c5e" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">将实体从@sys.number更改为<strong class="ja hj"> @sys.phone-number </strong>。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/895df49d47e0681102836b5a6afae6ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iuO_WV76yHcfV_U8."/></div></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/fa1784d1bca08abe6f11539225975ada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kJY5fv8uYUsyoJsz."/></div></div></figure><ul class=""><li id="709b" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">最后，添加一个响应来从用户那里获取更多信息。$phone-number将保存客户的姓名。</li><li id="c0e0" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">“谢谢！现在请描述您的问题”。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/4da0fd147bf90e9e76ddfe2adb50f7b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uju50J8V30ZacS-D."/></div></div></figure><ul class=""><li id="ec13" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated"><strong class="ja hj">保存</strong>意图训练特工。</li></ul><p id="c5c7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 5.5创建跟进意向，收集客户问题的描述。</strong></p><ul class=""><li id="6cdf" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">与前面的步骤相同，创建一个名为<strong class="ja hj">Submit Ticket-collect description的跟进意向。</strong></li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/16f286c8c0b61ccea7163ca990081e12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tCg85Cnd7ZNwlRzc."/></div></div></figure><ul class=""><li id="7356" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">添加几个<strong class="ja hj">训练短语</strong>。这些只是用于演示目的的样本数据。</li><li id="e03e" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">我的手机一直重启</li><li id="f614" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">wifi问题</li><li id="420d" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">蓝牙问题</li><li id="9a8a" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">屏幕没有反应。</li><li id="0542" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">冻结屏幕</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/fdb867a2488b61456118e715d9b914ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RIZ-18E3HNUKQMWm."/></div></div></figure><ul class=""><li id="5e1b" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">将回答留空。我们将它留空的原因是，我们希望在从用户那里捕获所有信息并生成一个票号以将其返回给用户作为参考之后，响应来自我们的服务器。</li><li id="80e6" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">此外，为了让我们将它链接到服务器或云功能，我们需要启用<strong class="ja hj">实现</strong>。</li><li id="23ba" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">点击<strong class="ja hj">完成</strong>和<strong class="ja hj">为此目的启用webhook调用</strong>。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/546787c4378bd378c316689a8d62050b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LZDwkvbmNiXmCE9z."/></div></div></figure><ul class=""><li id="7616" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">点击<strong class="ja hj">保存</strong>按钮保存提交票-领取描述。</li></ul><h2 id="4682" class="ln jx hi bd jy lo lp lq kc lr ls lt kg jj lu lv kk jn lw lx ko jr ly lz ks ma bi translated">6.实现和云功能:</h2><p id="99b4" class="pw-post-body-paragraph iy iz hi ja b jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv hb bi translated">Fulfilments由Webhook和firebase的云功能组成。由于我们试图了解如何使用Dialogflow企业版和Dialogflow API V2创建聊天机器人，因此我们还需要了解更多关于Webhook或Firebase云功能的信息。</p><p id="5aef" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> Webhook </strong>:设置一个Webhook允许您将匹配意图的信息传递给web服务，并从中获得一个结果。</p><p id="af23" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">Firebase的云函数:</strong>对于简单的webhook测试和实现，您可以使用Fulfillments页面的Firebase区域的云函数。在大多数情况下，你只需要Firebase的免费“火花”层。其他层的层限制和定价信息可在<a class="ae mc" href="https://firebase.google.com/pricing/" rel="noopener ugc nofollow" target="_blank"> Firebase定价页面</a>上找到。</p><p id="e99a" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">要启用:</p><ul class=""><li id="2262" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">点击左侧菜单中的<strong class="ja hj">履行</strong>。</li><li id="35db" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">此外，启用<strong class="ja hj">行内编辑器</strong>的切换。</li><li id="20c2" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated"><strong class="ja hj">行内编辑器:</strong>你可以使用你自己的代码或者从下面复制粘贴代码到行内编辑器中。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/0d285ecd33d16b1f98f8d2c1f79b4e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yYul_rfwfPqvX9rT."/></div></div></figure><pre class="in io ip iq fd mi mj mk ml aw mm bi"><span id="06ba" class="ln jx hi mj b fi mn mo l mp mq">'use strict';<br/>const http = require('http');<br/>// Imports the Google Cloud client library<br/>const Datastore = require('<a class="ae mc" href="http://twitter.com/google" rel="noopener ugc nofollow" target="_blank">@google</a>-cloud/datastore');<br/>// Your Google Cloud Platform project ID<br/>const projectId = 'REPLACE_WITH_YOUR_PROJECT_ID';<br/>// Instantiates a client<br/>const datastore = Datastore({<br/>  projectId: projectId<br/>});<br/>// The kind for the new entity<br/>const kind = 'ticket';</span><span id="70cf" class="ln jx hi mj b fi ms mo l mp mq">// The kind for the new entity<br/>const kind = 'ticket';</span><span id="c233" class="ln jx hi mj b fi ms mo l mp mq">exports.dialogflowFirebaseFulfillment = (req, res) =&gt; {<br/>  console.log('Dialogflow Request body: ' + JSON.stringify(req.body));<br/>  // Get the city and date from the request<br/>  let ticketDescription = req.body.queryResult['queryText']; // incidence is a required param<br/>  //let name = req.body.result.contexts[0].parameters['given-name.original'];<br/>  let username = req.body.queryResult.outputContexts[1].parameters['given-name.original'];<br/>  let phone_number = req.body.queryResult.outputContexts[1].parameters['phone-number.original'];<br/>  console.log('description is ' +ticketDescription);<br/>  console.log('name is '+ username);<br/>  console.log('phone number is '+ phone_number);<br/>  function randomIntInc (low, high) {<br/>    return Math.floor(Math.random() * (high - low + 1) + low);<br/>  }<br/>  let ticketnum = randomIntInc(11111,99999);<br/>  // The Cloud Datastore key for the new entity<br/>  const taskKey = datastore.key(kind);<br/>  // Prepares the new entity<br/>  const task = {<br/>    key: taskKey,<br/>    data: {<br/>      description: ticketDescription,<br/>      username: username,<br/>      phoneNumber: phone_number,<br/>      ticketNumber: ticketnum<br/>    }<br/>  };<br/>  console.log("incidence is  " , task);<br/>  // Saves the entity<br/>  datastore.save(task)<br/>  .then(() =&gt; {<br/>    console.log(`Saved ${task.key}: ${task.data.description}`);<br/>    res.setHeader('Content-Type', 'application/json');<br/>    //Response to send to Dialogflow<br/>    res.send(JSON.stringify({ 'fulfillmentText': "I have successfully logged your ticket, the ticket number is " + ticketnum + ". Someone from the helpdesk will reach out to you within 24 hours."}));<br/>    //res.send(JSON.stringify({ 'fulfillmentText': "I have successfully logged your ticket, the ticket number is " + ticketnum + ". Someone from the helpdesk will reach out to you within 24 hours.", 'fulfillmentMessages': "I have successfully logged your ticket, the ticket number is " + ticketnum +  ". Someone from the helpdesk will reach out to you within 24 hours."}));<br/>  })<br/>  .catch((err) =&gt; {<br/>    console.error('ERROR:', err);<br/>    res.setHeader('Content-Type', 'application/json');<br/>    res.send(JSON.stringify({ 'speech': "Error occurred while saving, try again later", 'displayText': "Error occurred while saving, try again later" }));    <br/>  });<br/>}</span></pre><ul class=""><li id="de0b" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">将第6行中的project_id替换为您自己的google云平台项目id。您应该可以在<a class="ae mc" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云控制台</a>中的仪表板&gt;项目信息下找到项目ID。</li><li id="b84a" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">因为我们将使用Google Cloud Datastore来存储机票信息，所以我们需要在<strong class="ja hj"> package.json </strong>下添加必要的依赖项。</li><li id="1f41" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">从下面复制代码，并在内联编辑器中将其添加到您的<strong class="ja hj"> package.json </strong>中，或者只添加第20行的代码来添加云数据存储依赖项。</li></ul><pre class="in io ip iq fd mi mj mk ml aw mm bi"><span id="2b59" class="ln jx hi mj b fi mn mo l mp mq">{<br/>  "name": "dialogflowFirebaseFulfillment",<br/>  "description": "This is the default fulfillment for a Dialogflow agents using Cloud Functions for Firebase",<br/>  "version": "0.0.1",<br/>  "private": true,<br/>  "license": "Apache Version 2.0",<br/>  "author": "Google Inc.",<br/>  "engines": {<br/>    "node": "~6.0"<br/>  },<br/>  "scripts": {<br/>    "start": "firebase serve --only functions:dialogflowFirebaseFulfillment",<br/>    "deploy": "firebase deploy --only functions:dialogflowFirebaseFulfillment"<br/>  },<br/>  "dependencies": {<br/>    "actions-on-google": "2.0.0-alpha.4",<br/>    "firebase-admin": "^4.2.1",<br/>    "firebase-functions": "^0.5.7",<br/>    "dialogflow": "^0.1.0",<br/>    "<a class="ae mc" href="http://twitter.com/google" rel="noopener ugc nofollow" target="_blank">@google</a>-cloud/datastore": "^1.1.0",<br/>    "dialogflow-fulfillment": "0.3.0-beta.3"<br/>  }<br/>}</span></pre><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/023a09054edb770aab054786f50ff771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VpFBPQZBCUr-ZMlS."/></div></div></figure><ul class=""><li id="34e7" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">点击<strong class="ja hj">部署</strong>按钮，部署我们的云功能。</li><li id="e52d" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">部署可能需要几秒钟才能完成。</li><li id="2703" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated"><em class="mt">注:以上云函数是使用新的</em><strong class="ja hj"><em class="mt">dialog flow API V2</em></strong><em class="mt">或</em> <strong class="ja hj"> <em class="mt"> V2 API提供的。</em> </strong> <em class="mt">因此</em> <strong class="ja hj"> <em class="mt">，</em></strong><em class="mt">index . js文件中注释的一些代码是基于V1 API的。这清楚地显示了在Dialogflow中从V1迁移到V2 API是多么简单。我将很快就从V1到V2 API的迁移做一个单独的教程。</em></li></ul><h2 id="0d68" class="ln jx hi bd jy lo lp lq kc lr ls lt kg jj lu lv kk jn lw lx ko jr ly lz ks ma bi translated">7.如何创建客服代理聊天机器人:</h2><p id="3a54" class="pw-post-body-paragraph iy iz hi ja b jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv hb bi translated">最后，是时候测试我们的代理并实现我们的聊天机器人了。Dialogflow允许我们轻松地将我们的代理集成到多个平台，如<a class="ae mc" href="https://dialogflow.com/docs/integrations/" rel="noopener ugc nofollow" target="_blank"><strong class="ja hj">dialog flow Integrations</strong></a><strong class="ja hj">下的Google Assistant、Facebook Messenger、Slack、web等。</strong></p><p id="d4f7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在本教程中，我们将看到如何创建我们的代理，并将其嵌入到我们自己的网站中。</p><ul class=""><li id="9570" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">点击左侧导航菜单中的<strong class="ja hj">集成</strong>。</li><li id="05a8" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">启用<strong class="ja hj">网络演示</strong></li><li id="f751" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">将显示一个弹出窗口，其中包含生成的链接。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/f47d9de8ee2d466c3b35bd1a21ac4296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qFVvW2x2KmjU586W."/></div></div></figure><ul class=""><li id="3795" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">首先，点击链接来看看你的聊天机器人的神奇之处。</li><li id="d553" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">因此，您也可以使用嵌入代码将聊天机器人添加到您的网站。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mu"><img src="../Images/697a3f61003a8ec3ed5401a1aa516026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RUZB48oiuUl7j9dI."/></div></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mv"><img src="../Images/e26f6572426bc5383fa7af2f4a9c89b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*esPqZAxLdHcuMPAQ."/></div></div></figure><h2 id="acec" class="ln jx hi bd jy lo lp lq kc lr ls lt kg jj lu lv kk jn lw lx ko jr ly lz ks ma bi translated">8.将机票信息存储在Google Cloud数据存储中:</h2><p id="8d04" class="pw-post-body-paragraph iy iz hi ja b jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv hb bi translated">最后，我们的聊天机器人开始运行了。最值得注意的是，如果您使用云功能，我们会获得客户的以下详细信息。</p><ul class=""><li id="8916" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">获取客户信息</li><li id="de9f" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">用户名</li><li id="8da7" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">电话号码</li><li id="1ccf" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">描述</li></ul><p id="9a18" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 8.1将详细信息存储到Google Cloud Datastore: </strong></p><p id="2ab8" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们还可以在谷歌云数据库中看到通过聊天机器人捕捉到的细节。</p><ul class=""><li id="6c2b" class="kz la hi ja b jb jc jf jg jj lb jn lc jr ld jv mb lf lg lh bi translated">进入<a class="ae mc" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj">谷歌云控制台</strong> </a>。</li><li id="119b" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">单击导航菜单以显示选项。</li><li id="1e2f" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">选择<strong class="ja hj">数据存储- &gt;实体。</strong></li><li id="72c5" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated">因此，查看聊天机器人捕获的数据和所有特定信息。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es mw"><img src="../Images/03e927baf68f5b7d5b6c6a4557844839.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/0*4R9MJI2zySDhMCWz."/></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es mx"><img src="../Images/76e48919fe683ea8fb8cb37f0c5f3d93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/0*dy31Cop9CInj6Ygt."/></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/b4140485ab1788544b1694f960c61f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U5Wq67-STr4bZ_37."/></div></div><figcaption class="my mz et er es na nb bd b be z dx translated">包含机票信息的Google云数据存储</figcaption></figure><h2 id="5e9d" class="ln jx hi bd jy lo lp lq kc lr ls lt kg jj lu lv kk jn lw lx ko jr ly lz ks ma bi translated">9.结论:</h2><p id="dec5" class="pw-post-body-paragraph iy iz hi ja b jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv hb bi translated">总之，这是一个很长的教程，涵盖了如何使用Dialogflow企业版和Dialogflow API V2创建聊天机器人的各个方面。此外，我们还学习了如何从用户那里获取信息，并使用Google Cloud Datastore存储这些信息。因此，这只是触及表面，利用Dialogflow和Google云服务的可能性是无穷无尽的。我已经尽了最大努力涵盖了本教程的每一步，以便您可以轻松地学习开发这样的应用程序。在接下来的<a class="ae mc" href="https://chatbotslife.com/how-to-build-an-app-for-google-assistant-using-dialogflow-enterprise-edition-and-actions-on-google-4413a61d2f2d" rel="noopener ugc nofollow" target="_blank">教程</a>中，我们还将<a class="ae mc" href="https://chatbotslife.com/how-to-build-an-app-for-google-assistant-using-dialogflow-enterprise-edition-and-actions-on-google-4413a61d2f2d" rel="noopener ugc nofollow" target="_blank">学习如何以谷歌助手的形式使用它，以及我们如何从V1 API迁移到V2 API </a>。</p><p id="b0d6" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">最后，在下一个系列教程中再见。在此之前，还可以查看我的其他教程帖子，关于<a class="ae mc" href="https://chatbotslife.com/how-to-build-an-app-for-google-assistant-using-dialogflow-enterprise-edition-and-actions-on-google-4413a61d2f2d" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj">如何使用Dialogflow企业版为谷歌助手构建应用程序，以及关于谷歌</strong> </a> <strong class="ja hj">、</strong> <a class="ae mc" href="https://techwithsach.com/sentiment-analysis-using-google-cloud-natural-language-api/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj">使用谷歌云自然语言API进行情感分析</strong> </a>和<a class="ae mc" href="https://techwithsach.com/entity-analysis-using-google-cloud-natural-language-api/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj">使用谷歌云自然语言API进行实体分析</strong> </a>和<a class="ae mc" href="https://techwithsach.com/flutter-tutorials-getting-started/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj">使用Flutter </strong> </a>入门。查看更多关于<a class="ae mc" href="https://techwithsach.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ja hj"><em class="mt">techwithsach.com</em></strong></a>的教程</p><h2 id="0e47" class="ln jx hi bd jy lo lp lq kc lr ls lt kg jj lu lv kk jn lw lx ko jr ly lz ks ma bi translated">10.参考资料:</h2><ul class=""><li id="e1d2" class="kz la hi ja b jb ku jf kv jj nc jn nd jr ne jv mb lf lg lh bi translated"><a class="ae mc" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj">谷歌云控制台</strong> </a></li><li id="fb0f" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated"><a class="ae mc" href="https://cloud.google.com/dialogflow-enterprise/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj">了解关于Dialogflow企业版的更多信息</strong> </a></li><li id="b7b5" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated"><a class="ae mc" href="https://dialogflow.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj"> Dialogflow标准版</strong> </a></li><li id="e98d" class="kz la hi ja b jb li jf lj jj lk jn ll jr lm jv mb lf lg lh bi translated"><a class="ae mc" href="https://dialogflow.com/docs/reference/v2-agent-setup" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj">如何使用新的Dialogflow V2 API </strong> </a></li></ul></div></div>    
</body>
</html>