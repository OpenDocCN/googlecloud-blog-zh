<html>
<head>
<title>Easily deploy Trino on Dataproc with init action script</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用init动作脚本在Dataproc上轻松部署Trino</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/easily-deploy-trino-on-dataproc-with-init-action-script-f23aef1a6cac?source=collection_archive---------2-----------------------#2022-01-31">https://medium.com/google-cloud/easily-deploy-trino-on-dataproc-with-init-action-script-f23aef1a6cac?source=collection_archive---------2-----------------------#2022-01-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="42a2" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">想在Dataproc上轻松部署Trino吗？你在搜索Trino初始化脚本吗？在这里。</p></blockquote><p id="2e85" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated"><strong class="il hj">从github下载“</strong><a class="ae jk" href="https://github.com/sametkaradag/initialization-actions/blob/master/trino/trino.sh" rel="noopener ugc nofollow" target="_blank"><strong class="il hj">trino . sh</strong></a><strong class="il hj">”</strong>上传到你的GCS桶。</p><p id="eae8" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">下面是我的github链接<a class="ae jk" href="https://github.com/sametkaradag/initialization-actions/blob/master/trino/trino.sh" rel="noopener ugc nofollow" target="_blank">https://github . com/sametkaradag/initial ization-actions/blob/master/trino/trino . sh</a>，它是<a class="ae jk" href="https://github.com/GoogleCloudDataproc/initialization-actions" rel="noopener ugc nofollow" target="_blank">https://github . com/GoogleCloudDataproc/initial ization-actions</a>的分支(在撰写本文时正在等待拉取)</p><p id="50f4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">如果您想使用Trino的BigQuery连接器来查询BigQuery数据，请用您的project-id替换init操作中的第162行:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="4ee5" class="ju jv hi jq b fi jw jx l jy jz">bigquery.project-id=set-your-project-id</span></pre><p id="fde4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">然后<strong class="il hj">创建您的dataproc集群</strong>:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="2e7b" class="ju jv hi jq b fi jw jx l jy jz">gcloud dataproc clusters create trino-test — enable-component-gateway — region europe-west4 \</span><span id="871f" class="ju jv hi jq b fi ka jx l jy jz"> — zone europe-west4-c — master-machine-type n1-standard-4 — master-boot-disk-size 100 — num-workers 8 \</span><span id="b97d" class="ju jv hi jq b fi ka jx l jy jz"> — worker-machine-type n1-standard-4 — worker-boot-disk-size 100 — image-version 2.0-debian10 \</span><span id="aec7" class="ju jv hi jq b fi ka jx l jy jz"> — scopes 'https://www.googleapis.com/auth/cloud-platform' — initialization-actions ‘gs://trino-init/trino.sh’ — project change-with-your-project-id</span></pre><p id="670b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">这里我使用Trino在短暂的Dataproc集群上进行BigQuery查询，这意味着我在处理之前创建集群，之后删除集群以降低成本。</p><p id="cc1a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">我不会在Dataproc上存储任何数据，因此磁盘大小(worker-boot-disk-size，master-boot-disk-size)被设置为100gb。</p><p id="8db0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">我在n1-standard-4机器上只使用了2个worker节点，这些机器有15GB RAM。如果需要更快的查询，请增加这些值。</p><p id="f9e7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">就是这样，现在你有了Trino:)</p><p id="37c8" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">最后，如何连接？</p><p id="98ce" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">您可以使用Trino CLI客户端或JDBC客户端，如<a class="ae jk" href="http://squirrel-sql.sourceforge.net/" rel="noopener ugc nofollow" target="_blank"> SquirrelSQL </a>、<a class="ae jk" href="https://dbeaver.io/" rel="noopener ugc nofollow" target="_blank"> DBeaver </a>(免费)或<a class="ae jk" href="https://www.jetbrains.com/datagrip/download/#section=mac" rel="noopener ugc nofollow" target="_blank"> DataGrip </a>(需要付费订阅)</p><p id="bf67" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">您还可以配置您的JDBC客户端连接到BigQuery，让一个客户端通过两个不同的会话来分析BQ数据。</p><p id="8a71" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">如果你想看实际操作，这里有一个<a class="ae jk" href="https://youtu.be/n1PFnvfQbFE" rel="noopener ugc nofollow" target="_blank"> youtube视频</a>和match_recognize演示。</p></div></div>    
</body>
</html>