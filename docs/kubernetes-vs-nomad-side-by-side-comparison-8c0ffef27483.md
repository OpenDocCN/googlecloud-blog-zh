# 库伯内特人 vs 游牧人:并排比较

> 原文：<https://medium.com/google-cloud/kubernetes-vs-nomad-side-by-side-comparison-8c0ffef27483?source=collection_archive---------0----------------------->

Kubernetes 是一个容器编排系统，最初由 Google 设计，现在由云本地计算基金会(CNCF)管理，由 Google、Red Hat 和许多其他公司开发。自 2014 年推出以来，Kubernetes 已经成为容器化应用的一个非常受欢迎的选择。Kubernetes 旨在提供运行基于 Linux 容器的应用程序所需的所有特性，包括集群管理、调度、服务发现、监控、秘密管理等等。许多软件/应用程序开发人员依赖于该工具。然而，对于容器编排，市场上还有其他选择。

其中一个工具是由哈希公司于 2015 年推出的[游牧部落](https://www.nomadproject.io/)。Nomad 通常被定位为 Kubernetes 的替代品，宣传自己是软件/应用程序团队的一个简单、灵活的选择。Nomad 的唯一目标是专注于集群管理和调度，其设计理念是在使用 Consul for service discovery/service mesh 和 Vault for secret management 等工具的同时拥有一个小范围。

本文将对这两种容器编排工具进行比较，因此您可以决定哪种工具最适合您各自的应用程序/软件/系统。

# 库伯内特人 vs 游牧人:相似之处

Kubernetes 和 Nomad 都是为容器编排而构建的开源工具，并支持类似的用例。因此，两者都具有一些共同的特征:

## 自动化调度

**Kubernetes** 使用过滤器和分数来保存 pod 可以绑定的可行机器的排名。该平台使用诸如资源需求、工作负载间干扰、策略约束和相似性规范等因素来记录健康节点。

**Nomad** 通过使用评估过程来改变节点的状态并使其与作业的期望状态相匹配，从而自动化工作负载调度。

## 自动恢复和自我修复部署

**Kubernetes 将 pods** 重新调度到最健康的可用节点，以防一台工作机出现故障。Kubernetes 部署环境还包括类似于**scale set**和**auto scaling group**的功能，支持自修复节点。

**Nomad** 通过检查每个节点的**紧急状态**来确保自愈。客户端节点的状态失败会触发新的评估，之后 Nomad 会尝试将紧急状态与系统的期望状态相协调。

## 展示和回滚策略

Kubernetes 使用复制集来维护应用程序的期望状态。Kubernetes 将滚动更新作为其默认部署策略之一，允许一个渐进的过程来替换 pod，一次一个。通过回滚，Kubernetes 还允许将部署更新到更早的期望状态。

**Nomad** 通过限制并行性和与 HashiCorp 的监控接口来确定服务的健康状况，从而实现滚动更新。在部署失败或配置不正常的情况下，Nomad 会根据定义的更新策略自动回滚到较旧的正常服务。

## Nomad 和 Kubernetes 存储编排

Nomad 和 Kubernetes 都支持符合容器存储接口(CSI)标准的各种第三方插件，允许应用程序附加外部存储卷。通过允许从公共/私有云或裸机内部基础架构消耗存储，这两个平台都允许高效的存储编排来维护有状态的工作负载。

# 库伯内特人 vs 游牧人:差异

虽然这两个平台都是为了容器编排，但 Nomad 和 Kubernetes 有一些基本的不同，包括:

# 简单

Kubernetes 被设计为六个以上互操作服务的集合，它们共同提供完整的功能。协调和存储由核心的 etcd 提供。状态由 API 控制器包装，由其他服务使用，这些服务为调度等功能提供更高级别的 API。Kubernetes 支持在高度可用的配置中运行，但是设置起来操作复杂。

Nomad 在架构上要简单得多。Nomad 是一个单一的二进制文件，适用于客户机和服务器，不需要外部服务来协调或存储。Nomad 将一个轻量级的资源管理器和一个复杂的调度器结合到一个系统中。默认情况下，Nomad 是分布式的，高度可用，操作简单。

# 灵活的工作负载支持

虽然 Kubernetes 特别关注 Linux 容器，但 Nomad 更通用。Nomad 支持虚拟化、容器化和独立应用，包括 Docker、Java、Windows 上的 IIS、Qemu 等。Nomad 设计了可扩展的驱动程序，支持将扩展到所有常见的驱动程序。

# 一致部署

在生产环境中安装完整的 Kubernetes 非常耗时，操作复杂，而且需要大量资源。Kubernetes 社区创建了越来越多的实现来缓解这些挑战，比如 minikube、kubeadm、k3s 等等。Kubernetes 的这些精简版本使开发和测试更容易采用，但是在进入生产时会导致功能、配置和管理的不一致。

与 Kubernetes 的分散发行版相比，Nomad 作为一个轻量级的二进制文件可以以一致的方式部署在本地开发、生产、本地、边缘和云中，并在所有环境中提供相同的操作易用性。

# 可量测性

Kubernetes 文档声明他们支持多达 5，000 个节点和 300，000 个容器的集群。随着环境的增长，具有不同约束的互操作组件增加了操作的复杂性。甚至谷歌的运营商也透露了管理大规模系统的巨大挑战。联邦项目的不成熟和管理集中式管理平面的额外开销也使得部署跨多个集群的分布式系统变得困难。

事实证明，在真实的生产环境中，Nomad 可以扩展到超过 10，000 个节点的集群规模。它可以部署在多个可用性分区、区域和具有单个集群或多个集群的数据中心。Nomad 旨在本机处理多集群部署，而没有在集群上运行集群的开销。这使得跨多个数据中心、区域和云扩展应用程序部署变得更加容易，而不会增加复杂性。

# 用哪一个

**Kubernetes** 平台拥有广泛的社区支持、增强的可移植性和灵活性、开源、多云支持，被认为是已经在 Linux 容器上运行应用程序并拥有管理其复杂生态系统的合适技能的组织的完美之选。

**Nomad** 是一个通用编排平台，可用于管理遗留应用集群、传统批处理作业。Nomad 的优势包括易于学习和使用、需要较少的配置管理、不受平台限制、支持基于 Windows 和基于 Linux 的容器，这使得它非常适合刚刚开始使用容器编排的组织。

# 摘要

与 Kubernetes 相比，Nomad 还不是一个势均力敌的竞争对手，但它是 container orchestrator 世界中的一个新兴颠覆者，使用一个可移植的二进制代理提供更简单、更可扩展的部署。

虽然这两个平台都是为了在集群中编排容器而构建的，但它们具有不同的特性和功能，支持不同的用例。