<html>
<head>
<title>Firebase platform for Android applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android应用的Firebase平台</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/firebase-platform-for-android-applications-3cf170d1a019?source=collection_archive---------1-----------------------#2016-06-29">https://medium.com/google-cloud/firebase-platform-for-android-applications-3cf170d1a019?source=collection_archive---------1-----------------------#2016-06-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="23a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章最初是由<a class="ae jd" href="https://www.youtube.com/watch?v=3H6tM-Gw7GU" rel="noopener ugc nofollow" target="_blank"> JRebel for Android </a>的产品负责人<a class="ae jd" href="http://twitter.com/stensuitsev" rel="noopener ugc nofollow" target="_blank">斯登冲锋枪</a>在RebelLabs 上发表的。</p></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><p id="8a8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设计Android应用程序是一项令人着迷的任务。除了设计应用程序组件的交互方式，你还需要考虑任何应用程序需要的通用功能。通常，这包括跨功能的需求，如日志记录、管理用户和凭证、指标和分析等。因为你不能总是在设备上存储所有必要的数据，你需要考虑某种后端服务。</p><p id="0937" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，当您刚刚开始一个项目时，您可能不愿意从头开始构建后端服务。你应该考虑的一个选择是Firebase。这是一个平台，包含许多常见功能，并提供通知、文件存储、分析、远程配置等功能。目前，它有11项服务可以帮助你开发、发展和从你的应用中赚钱。</p><p id="e0ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇Android上的Firebase入门文章中，我将带你建立一个Android项目来使用<a class="ae jd" href="https://www.firebase.com/" rel="noopener ugc nofollow" target="_blank"> Firebase平台</a>。我们让我们的项目实现其应用程序分析，并将事件发送到Firebase控制台。</p><h1 id="2390" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">如何注册项目</h1><p id="3d61" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">首先要做的是在Firebase控制台中创建一个项目。它需要一个名字和一个国家。国家选择将不会决定你的数据将被保存在哪里，而是指定你的公司所属的国家，影响货币等。例如，如果你选择英国，对话框会发出咯咯的笑声，并提供一个不断下跌的英镑作为默认选项。</p><p id="bf7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以将多个iOS、Android或web应用程序添加到单个项目中。该项目将从不同的应用程序把你所有的统计数据和指标结合在一起。您将在项目控制面板的一个视图中看到关于用户、崩溃报告事件的所有数据。</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es ko"><img src="../Images/7a79509a8e51f1f2578b4a66a1d88673.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*bdnWrN4zxLGzBbwj.png"/></div></figure><h1 id="7e80" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">添加Android应用程序</h1><p id="75e0" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">出于本文的目的，我将使用我们常规的示例应用程序<a class="ae jd" href="https://github.com/sten711/Retrofit2SampleApp" rel="noopener ugc nofollow" target="_blank"> Retrofit2SampleApp </a>。如果你不熟悉它，这个应用程序非常小，是为<a class="ae jd" href="https://zeroturnaround.com/rebellabs/getting-started-with-retrofit-2/" rel="noopener ugc nofollow" target="_blank">开始改造2帖子</a>而创建的。这篇博文教你如何从你的Android应用程序中查询互联网，看看吧！然而，现在是时候添加向Firebase仪表板发送指标的功能了。</p><p id="a95e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要配置我们的Firebase项目，以了解我们的应用程序。为此，您首先需要提供包名。这在build.gradle中作为<strong class="ih hj">应用程序Id </strong>属性提供。您可以选择添加调试密钥库的签名证书的SHA-1。在这篇文章的范围内不需要它，但是我提到它是为了以防你需要使用它。谷歌有一个很好的快速指南，告诉你如何去做。</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es kw"><img src="../Images/c397ef25c527a26204856376720e9fc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/0*j3gS4ignzIV1X546.png"/></div></figure><p id="e081" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我们将应用程序添加到Firebase项目中，它将生成一个Google-services . JSON文件，该文件将被复制到您的应用程序模块的根目录中。快速浏览一下就可以看到大量的项目元数据——比如api键、项目id等等。这种方法非常优雅，它将您从必须在代码中手动提供所有数据的麻烦中解脱出来。</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es kx"><img src="../Images/0aa0bd1389e83f8d83855b898855047f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/0*pM18jSO1nJwyaxhB.png"/></div></figure><h1 id="fc97" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">指定Firebase依赖项</h1><p id="dab4" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">Firebase在将服务分成不同的库方面做得很好。没有必要在项目中包含任何不必要的代码。这里是可供你使用的Firebase库的完整列表。</p><p id="05ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们转到项目的build.gradle，添加以下几行:</p><pre class="kp kq kr ks fd ky kz la lb aw lc bi"><span id="ada8" class="ld jm hi kz b fi le lf l lg lh">buildscript {<br/>    // ...<br/>    dependencies {<br/>        // ...<br/>        classpath 'com.google.gms:google-services:3.0.0'<br/>    }<br/>}</span></pre><p id="2a97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要将以下Firebase依赖项添加到应用程序的build.gradle文件中:</p><pre class="kp kq kr ks fd ky kz la lb aw lc bi"><span id="a650" class="ld jm hi kz b fi le lf l lg lh">dependencies {<br/>  // ...<br/>  compile 'com.google.firebase:firebase-core:9.0.2'<br/>}</span></pre><p id="9222" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并应用插件:</p><pre class="kp kq kr ks fd ky kz la lb aw lc bi"><span id="84c3" class="ld jm hi kz b fi le lf l lg lh">apply plugin: 'com.google.gms.google-services'</span></pre><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es li"><img src="../Images/b01035e85c27982ccdaf5f02bb5c7c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/0*cD-QuA9R4lACqqVc.png"/></div></figure><p id="84af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！我们已经准备好利用Firebase平台来处理我们的分析数据。</p><h1 id="714c" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">如何发送Firebase analytics事件</h1><p id="0e5f" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">发送分析事件非常简单。在代码级别，我们需要做的就是获取FirebaseAnalytics的一个实例，创建一个包含我们想要记录的属性的键值对的包，并调用logEvent()方法。</p><p id="413b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们仅查询Github存储库元数据的示例应用程序中，我将使用用户指定的搜索查询来触发分析事件。</p><p id="f846" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Firebase为我们提供了大量的事件和属性键。事件和FirebaseAnalytics。参数类。如果这些不能完全解决您的问题，您可以创建自己的自定义事件。</p><p id="a56f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的示例应用程序中，我使用以下代码片段来发送我的搜索查询关键字:</p><pre class="kp kq kr ks fd ky kz la lb aw lc bi"><span id="cc92" class="ld jm hi kz b fi le lf l lg lh">Bundle bundle = new Bundle();<br/>bundle.putString(FirebaseAnalytics.Param.SEARCH_TERM, repositorySearchKeyword + "&amp;" + companySearchKeyword);<br/>firebaseAnalytics.logEvent(FirebaseAnalytics.Event.SEARCH, bundle);</span></pre><p id="0994" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了验证我们的结果，我们可以检查Firebase控制台进行分析，但这将需要24小时才能显示事件。因为这在开发和调试期间不太方便，所以这里有另一个选项来验证是否记录了正确的指标。</p><p id="a81a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行以下adb命令:</p><pre class="kp kq kr ks fd ky kz la lb aw lc bi"><span id="a5d1" class="ld jm hi kz b fi le lf l lg lh">adb shell setprop log.tag.FA VERBOSE<br/>adb shell setprop log.tag.FA-SVC VERBOSE<br/>adb logcat -v time -s FA FA-SVC</span></pre><p id="8e73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在运行adb命令并单击“搜索”按钮后。</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es lj"><img src="../Images/9eb7e39c8911b9001408ced430d6a2b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/0*f-3bxcqpBl9NqJoD.png"/></div></figure><p id="4964" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我现在在adb logcat中看到以下输出:</p><pre class="kp kq kr ks fd ky kz la lb aw lc bi"><span id="9ed5" class="ld jm hi kz b fi le lf l lg lh">06-28 11:26:06.630 V/FA-SVC  ( 1734): Event recorded: Event{appId='org.zeroturnaround.githubcontributors', name='search', params=Bundle[{search_term=retrofit&amp;square, _o=app}]}</span></pre><p id="e3cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以使用analytics events检测应用程序中的所有基本操作，并准确了解您的用户正在做什么、他们最常使用的操作以及您应该将开发工作的重点放在哪里。</p><h1 id="c89c" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">摘要</h1><p id="de7b" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">在这篇文章中，我试图给你一个如何开始使用Firebase的快速总结。我发现它非常容易设置和开始编写代码。我强烈建议看看Firebase提供的不同服务。我最感兴趣的两个服务是Firebase云数据库和远程通知服务。我很想听听哪个Firebase特性最让你感兴趣。你在你的项目中看到了什么，你认为哪些部分更容易实现？在Twitter上Ping我:<a class="ae jd" href="https://twitter.com/stensuitsev" rel="noopener ugc nofollow" target="_blank"> @stensuitsev </a>，我会很高兴和你谈论这件事。</p><p id="f8f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，如果你想成为一名更快乐的Android开发者，请查看用于Android的<a class="ae jd" href="https://zeroturnaround.com/software/jrebel-for-android/?utm_source=medium&amp;utm_medium=firebase-post&amp;utm_campaign=medium" rel="noopener ugc nofollow" target="_blank"> JRebel，这是一款可以即时更新你正在运行的应用</a>的代码和资源的工具。我参与了它的开发，所以我欢迎任何反馈！</p><p id="e638" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在回到燃烧基地。你是决定构建自己的后端服务还是开始使用Firebase是一个重要的<strong class="ih hj">商业</strong>决定。Firebase具有灵活的定价，可以帮助您在早期阶段快速原型化和测试您的产品。</p></div></div>    
</body>
</html>