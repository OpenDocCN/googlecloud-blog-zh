<html>
<head>
<title>Cloud IAP on Cloud Run</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云运行时的云IAP</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/cloud-iap-on-cloud-run-2b97ee9cd47a?source=collection_archive---------0-----------------------#2022-09-14">https://medium.com/google-cloud/cloud-iap-on-cloud-run-2b97ee9cd47a?source=collection_archive---------0-----------------------#2022-09-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/73b753af8baa4c47bd3e37f1c51103d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p8Ffj0HLDNxmF3go5GUwIA.png"/></div></div></figure><div class=""/><p id="406d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你好。我希望你一切都好。在这篇文章中，我将教你如何使用Google Cloud上的Cloud IAP来保护对你的应用程序的访问。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><blockquote class="jv"><p id="3c03" class="jw jx ht bd jy jz ka kb kc kd ke jn dx translated">订阅我的YouTube频道，<a class="ae kf" href="https://www.youtube.com/c/TheCloudPilot" rel="noopener ugc nofollow" target="_blank">云飞行员</a></p></blockquote></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="a052" class="kg kh ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">方案</h1><p id="2758" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">您有一个容器化的应用程序，并且希望将该应用程序限制在特定的人群中。例如，一个内部应用程序只需要被公司的员工访问。您使用Cloud Run来托管应用程序，因为它很容易容器化。您现在想要开放对公司内部成员的访问。</p><p id="3a5f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在深入探讨实现之前，我们先简单说一下云运行和云IAP。</p><h1 id="5653" class="kg kh ht bd ki kj lj kl km kn lk kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld bi translated">云运行</h1><blockquote class="jv"><p id="7a38" class="jw jx ht bd jy jz ka kb kc kd ke jn dx translated">一个完全托管的无服务器平台，让您运行容器化的应用程序。</p></blockquote><p id="aca9" class="pw-post-body-paragraph iq ir ht is b it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">如果可以从任何编程语言构建一个容器映像，就可以部署用这种语言编写的应用程序。或者，如果您使用Node.js、Python、Java或Go等语言，您甚至不需要构建图像。相反，您可以使用一个名为基于源代码的部署的特性，该特性为您构建容器映像，然后部署它。这是一项服务，主要服务于那些想花时间开发代码而不担心基础设施的开发人员。</p><p id="9229" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在云运行中，应用程序作为服务运行。云运行的一些功能包括:</p><blockquote class="lt lu lv"><p id="f4f9" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">每项服务的唯一HTTPS端点</p><p id="a133" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">基于传入的请求自动快速扩展</p><p id="8154" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">内置流量管理</p><p id="cc50" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">缩减到零/最少实例以降低成本</p><p id="f76b" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">运行私有或公共服务—允许或限制访问互联网</p></blockquote><p id="77ff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，如果您不希望流量对互联网开放，您可以用三种不同的方式来限制流量:</p><blockquote class="lt lu lv"><p id="d37a" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">一种使用云IAM的访问策略</p><p id="6f2d" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">允许来自VPC和其他内部服务的内部流量的入口设置。</p><p id="b9e0" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">仅允许通过身份验证的用户使用IAP</p></blockquote><h1 id="eb01" class="kg kh ht bd ki kj lj kl km kn lk kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld bi translated">云IAP</h1><blockquote class="jv"><p id="b2c1" class="jw jx ht bd jy jz ka kb kc kd ke jn dx translated">集中的身份验证层，将访问权限仅限于特定的用户组</p></blockquote><p id="b6e2" class="pw-post-body-paragraph iq ir ht is b it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">云IAP支持应用程序级别的访问控制模型，而不是网络级别的防火墙。当您想要对应用程序或资源实施访问控制时，最好使用它。</p><h2 id="bacc" class="ma kh ht bd ki mb mc md km me mf mg kq jb mh mi ku jf mj mk ky jj ml mm lc mn bi translated">从事云IAP</h2><p id="d3b2" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">当您启用IAP时，用户只能通过代理访问应用程序。当用户被授予访问权限时，即使不需要VPN，他们也可以进行细粒度的访问。然后，Cloud IAP将在允许用户访问应用程序之前执行身份验证和授权检查。</p><p id="27ea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用Cloud IAP，当您访问应用程序的URL时，您将被重定向到一个登录页面，您必须使用您的凭据登录。然后，将使用云IAM策略检查这些凭证，以查看这些凭证的所有者是否有权访问应用程序。为此，用户需要分配一个<strong class="is hu"> IAP安全的Web应用用户</strong>角色。在为资源打开 IAP的<strong class="is hu">时，它会自动生成OAuth 2.0客户端ID和密码。</strong></p><blockquote class="lt lu lv"><p id="3be8" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">云IAP可以与<strong class="is hu">应用引擎、HTTPS负载平衡器或内部HTTP负载平衡器</strong>一起使用。</p></blockquote><p id="d894" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们看看如何在Cloud Run上使用Cloud IAP来实现这个安全特性。</p><h1 id="443f" class="kg kh ht bd ki kj lj kl km kn lk kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld bi translated">步骤1:创建无服务器VPC访问</h1><ol class=""><li id="13d4" class="mo mp ht is b it le ix lf jb mq jf mr jj ms jn mt mu mv mw bi translated">在菜单上，转到<strong class="is hu"> VPC网络&gt;无服务器VPC访问</strong>。</li><li id="b8dd" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">创建连接器</strong>。</li></ol><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/301043b09b8f916ef964a18efe667208.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iWn77rbTjd37jJca"/></div></div></figure><ol class=""><li id="7b41" class="mo mp ht is b it iu ix iy jb nh jf ni jj nj jn mt mu mv mw bi translated">在“名称”列中，输入无服务器VPC的名称<strong class="is hu">。</strong></li><li id="01a8" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">选择VPC的<strong class="is hu">区域</strong>和<strong class="is hu">选择您想要连接的网络</strong>。</li><li id="2c44" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">在子网部分，<strong class="is hu">选择自定义IP范围</strong>并<strong class="is hu">输入您的子网的IP范围</strong>。</li><li id="5193" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">创建</strong>。</li></ol><h1 id="acdb" class="kg kh ht bd ki kj lj kl km kn lk kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld bi translated">步骤2:创建云运行服务</h1><ol class=""><li id="22cb" class="mo mp ht is b it le ix lf jb mq jf mr jj ms jn mt mu mv mw bi translated">从侧边栏菜单进入<strong class="is hu">云运行</strong>。</li><li id="49eb" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">创建服务</strong>。</li><li id="3962" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">根据您的要求填写配置。</li></ol><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/151318983ff07ebbc8ea6413258046bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YKFEB99BfqfitXYA"/></div></div></figure><ol class=""><li id="f2c1" class="mo mp ht is b it iu ix iy jb nh jf ni jj nj jn mt mu mv mw bi translated">点击<strong class="is hu">连接</strong>选项卡。转到<strong class="is hu"> VPC连接器</strong>和<strong class="is hu">选择您在步骤1中创建的无服务器VPC </strong>。</li><li id="5064" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">展开</strong>。</li></ol><p id="5fd0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Cloud Run服务现在已经准备好，并开始托管应用程序。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><blockquote class="lt lu lv"><p id="e19c" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated"><em class="ht">注意:要使用云IAP向云运行进行认证，云运行服务需要连接到云负载平衡器，因为IAP只能应用于App Engine应用、计算引擎实例或HTTPS负载平衡器。</em></p></blockquote><h1 id="5474" class="kg kh ht bd ki kj lj kl km kn lk kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld bi translated">步骤3:为负载平衡器保留外部IP地址</h1><ol class=""><li id="ff01" class="mo mp ht is b it le ix lf jb mq jf mr jj ms jn mt mu mv mw bi translated">转到<strong class="is hu"> VPC网络&gt;外部IP地址</strong>。</li><li id="39fd" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">保留静态地址</strong>。</li></ol><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/9a151513855d8cf628adcf6080c91cbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uvV3t6jyLBOrbpTe"/></div></div></figure><ol class=""><li id="cbdb" class="mo mp ht is b it iu ix iy jb nh jf ni jj nj jn mt mu mv mw bi translated">输入IP地址的<strong class="is hu">名称。选择网络服务等级为<strong class="is hu">高级</strong>。</strong></li><li id="d5a1" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">保持<strong class="is hu"> IP版本为IPv4 </strong>，类型为<strong class="is hu">全局</strong>。</li><li id="c448" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">储备</strong>。</li></ol><h1 id="ecbf" class="kg kh ht bd ki kj lj kl km kn lk kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld bi translated">步骤4:创建HTTPS负载平衡器</h1><ol class=""><li id="acae" class="mo mp ht is b it le ix lf jb mq jf mr jj ms jn mt mu mv mw bi translated">在菜单上，转到<strong class="is hu">网络服务&gt;负载平衡</strong>。</li><li id="8d2a" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">创建负载平衡器</strong>。选择<strong class="is hu"> HTTP(S)负载均衡</strong>。</li><li id="3dfc" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">保持负载均衡器<strong class="is hu">面向互联网</strong>并在高级流量管理上选择<strong class="is hu">经典。</strong></li><li id="84da" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">为负载平衡器输入一个<strong class="is hu">名称</strong>。点击<strong class="is hu">后端服务</strong>下拉菜单。</li><li id="50a5" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">如果没有创建现有服务，单击<strong class="is hu">创建后端服务</strong>。</li><li id="c5f2" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">为后端服务输入一个<strong class="is hu">名称</strong>。<em class="lw">选择性地提供一些描述。</em></li><li id="7477" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">选择后端类型为<strong class="is hu">无服务器网络端点组</strong>。</li><li id="01f4" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">创建无服务器网络端点组</strong>。</li></ol><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/76a5dfbe6cc74c06f876a34df1dd6544.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qX_zxVckTkyUhXVI"/></div></div></figure><ol class=""><li id="78d8" class="mo mp ht is b it iu ix iy jb nh jf ni jj nj jn mt mu mv mw bi translated">输入无服务器NEG的<strong class="is hu">名称</strong>。</li><li id="84a8" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">适当选择<strong class="is hu">地区</strong>。</li><li id="f336" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">在无服务器NEG类型中，选择<strong class="is hu">云运行</strong>和<strong class="is hu">选择服务</strong>作为您想要使用的云运行服务。</li><li id="fb81" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">创建</strong>。</li></ol><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/feb8bee5abb4b230e53d588c99028ef8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e3LvaMVaOX2U_9VL"/></div></div></figure><ol class=""><li id="11ed" class="mo mp ht is b it iu ix iy jb nh jf ni jj nj jn mt mu mv mw bi translated">点击<strong class="is hu">前端配置</strong>。<em class="lw">可选地，为配置提供一个名称。</em></li><li id="961c" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">选择<strong class="is hu">协议为HTTPS </strong>，保留<strong class="is hu">网络服务层</strong>为<strong class="is hu">高级</strong>。</li><li id="690e" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">保持<strong class="is hu"> IP版本为IPv4 </strong>并且<strong class="is hu">选择IP地址</strong>为您之前在<strong class="is hu">步骤3 </strong>中保留的IP地址。</li><li id="f725" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">选择<strong class="is hu"> SSL证书</strong> <em class="lw">(参见4.1创建新证书)</em>，并将SSL策略保留为GCP默认设置。检查<strong class="is hu">启用HTTP到HTTPS重定向</strong>。</li></ol><h1 id="4ba4" class="kg kh ht bd ki kj lj kl km kn lk kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld bi translated">4.1.创建SSL证书</h1><ol class=""><li id="9621" class="mo mp ht is b it le ix lf jb mq jf mr jj ms jn mt mu mv mw bi translated">点击<strong class="is hu">证书</strong>。</li><li id="f077" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">创建新证书</strong>。</li><li id="db47" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">为证书输入一个<strong class="is hu">名称</strong>。<em class="lw">选择性地提供描述。</em></li><li id="2fa8" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">选择<strong class="is hu">模式</strong>进行创作。</li></ol><blockquote class="lt lu lv"><p id="dc66" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">如果你有域名，你可以使用自己的证书，或者让谷歌为你创建一个证书。</p></blockquote><p id="3204" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">a)如果您选择上传证书，请上传中的文件。pem格式。或者，您可以从文件中复制内容，并将它们粘贴到证书和私钥中。</p><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/08b442d17694bc41f5eefa46372fcd2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_25JN9HFpDVDQ27G"/></div></div></figure><p id="2e52" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">b)如果您希望Google为您创建一个证书，请输入您拥有的域名。</p><ol class=""><li id="2c82" class="mo mp ht is b it iu ix iy jb nh jf ni jj nj jn mt mu mv mw bi translated">点击<strong class="is hu">创建</strong>。</li><li id="e63a" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">查看配置后，点击<strong class="is hu">创建</strong>。</li><li id="5fa6" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">一旦创建了负载平衡器，您可以在<strong class="is hu">细节</strong>选项卡上找到<strong class="is hu"> IP地址</strong>。</li></ol><blockquote class="lt lu lv"><p id="0502" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">记下该IP地址，以便进行下一步。</p></blockquote><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/6db992c54e5b230f9dfcc5aec598aedd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*azqUXQjOB9qUutZZ"/></div></div></figure><p id="14f3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦创建了负载平衡器，下一步就是将域名路由到IP地址。</p><h1 id="d3f6" class="kg kh ht bd ki kj lj kl km kn lk kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld bi translated">步骤5:创建DNS区域</h1><ol class=""><li id="b806" class="mo mp ht is b it le ix lf jb mq jf mr jj ms jn mt mu mv mw bi translated">点击<strong class="is hu">创建区域</strong>。</li><li id="51e6" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">输入区域的<strong class="is hu">名称</strong>。</li><li id="ba67" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">保持<strong class="is hu">区域类型为公共</strong>。</li><li id="3ecc" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">输入<strong class="is hu"> DNS名称</strong>。</li><li id="20af" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">创建</strong>。</li></ol><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/0cd919ed8748cdf40717f042a003c0d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GJkCROI5ILHS7ITj"/></div></div></figure><p id="88c1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建DNS区域后，单击<strong class="is hu">添加记录集</strong>。</p><ol class=""><li id="2e2f" class="mo mp ht is b it iu ix iy jb nh jf ni jj nj jn mt mu mv mw bi translated">选择<strong class="is hu">一条记录。</strong></li><li id="e323" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">输入您的<strong class="is hu"> DNS名称</strong>和负载平衡器的<strong class="is hu"> IP地址</strong>。</li></ol><h1 id="f13b" class="kg kh ht bd ki kj lj kl km kn lk kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld bi translated">步骤6:对负载均衡器启用云IAP</h1><ol class=""><li id="30d0" class="mo mp ht is b it le ix lf jb mq jf mr jj ms jn mt mu mv mw bi translated">从菜单侧边栏，转到<strong class="is hu">安全&gt;身份识别代理</strong>。<em class="lw">在HTTPS资源选项卡下，您可以看到您创建的负载平衡器。</em></li><li id="60b6" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated"><strong class="is hu">打开</strong>IAP按钮。</li></ol><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/0ea3896c8088bd428e5808f309389dd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TLf4ozMq4K37xDUZ"/></div></div></figure><ol class=""><li id="032e" class="mo mp ht is b it iu ix iy jb nh jf ni jj nj jn mt mu mv mw bi translated">检查配置要求，点击<strong class="is hu">打开</strong>。</li></ol><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/890fce14501c4e44d57d47233fe03f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RtDNjla9fT6VO5nA"/></div></div></figure><blockquote class="jv"><p id="b8b9" class="jw jx ht bd jy jz nk nl nm nn no jn dx translated">一旦IAP被创建，包含客户端ID和客户端秘密的凭证将被命名为IAP- <name of="" the="" load="" balancer="">。</name></p></blockquote><h1 id="1b59" class="kg kh ht bd ki kj lj kl km kn lk kp kq kr np kt ku kv nq kx ky kz nr lb lc ld bi translated">步骤7:向网站添加用户</h1><p id="54c8" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">您可以选择谁可以访问云运行服务。使用IAM方法，您可以将人员添加到IAP。</p><blockquote class="lt lu lv"><p id="dda5" class="iq ir lw is b it iu iv iw ix iy iz ja lx jc jd je ly jg jh ji lz jk jl jm jn hb bi translated">最佳实践是将人员添加到Google群组并分配权限。</p></blockquote><ol class=""><li id="2a02" class="mo mp ht is b it iu ix iy jb nh jf ni jj nj jn mt mu mv mw bi translated">选中与负载平衡器名称对应的框。右侧会弹出一个信息面板。</li><li id="7126" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">添加委托人</strong>。</li><li id="4b23" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">输入您想要添加的人的电子邮件地址。允许多个条目<em class="lw">(但遵循使用Google群组的最佳实践)</em>或者，如果您希望任何拥有Google帐户的人都可以访问该应用程序，请选择<strong class="is hu"> allAuthenticatedUsers </strong>。</li><li id="2f4b" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击选择一个角色，选择<strong class="is hu">云IAP &gt; IAP安全Web App用户</strong>作为权限。</li><li id="e283" class="mo mp ht is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">点击<strong class="is hu">保存</strong>。</li></ol><figure class="nd ne nf ng fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/6c2b0df35049708fbcfb00f226852040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qhY5hE1V51-Lruxo"/></div></div></figure><p id="7550" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦完成以上所有步骤，搜索您在DNS中添加的网站地址，它会将您直接带到OAuth页面。成功完成认证后，您将登陆网站。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><blockquote class="jv"><p id="65eb" class="jw jx ht bd jy jz ka kb kc kd ke jn dx translated">在我的<a class="ae kf" href="https://www.linkedin.com/in/udesh-udayakumar/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上关注我</p></blockquote></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="eaca" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢阅读！我希望这有所帮助。回头见！</p></div></div>    
</body>
</html>