<html>
<head>
<title>Using Python oauth2client with App Engine Standard</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python oauth2client和App Engine Standard</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/using-python-oauth2client-with-app-engine-standard-fd121518965b?source=collection_archive---------1-----------------------#2017-07-28">https://medium.com/google-cloud/using-python-oauth2client-with-app-engine-standard-fd121518965b?source=collection_archive---------1-----------------------#2017-07-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0ae9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我最近开始开发我的第一个应用引擎应用，这是在谷歌的<a class="ae jd" href="https://cloud.google.com/appengine/docs/standard/python/quickstart" rel="noopener ugc nofollow" target="_blank">Python应用引擎标准环境</a>快速入门之后。</p><p id="7795" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的应用程序需要能够使用<a class="ae jd" href="https://developers.google.com/api-client-library/python/guide/aaa_oauth" rel="noopener ugc nofollow" target="_blank"> OAuth 2.0 </a>验证一些Google APIs。从App Engine 中有几种方法可以做到这一点，但所有这些方法都要求您能够访问<a class="ae jd" href="https://github.com/google/oauth2client" rel="noopener ugc nofollow" target="_blank"> oauth2client </a>。</p><p id="a604" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我很自然地认为<strong class="ih hj"> oauth2client </strong>会自动包含在App Engine标准环境中，因为它是作为<a class="ae jd" href="https://developers.google.com/api-client-library/python/start/installation" rel="noopener ugc nofollow" target="_blank">Google-API-python-client</a>的依赖项之一安装的。但是客户端库<strong class="ih hj">默认<a class="ae jd" href="https://developers.google.com/api-client-library/python/start/installation#appengine" rel="noopener ugc nofollow" target="_blank">不包含</a></strong>。</p><blockquote class="je jf jg"><p id="6333" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated"><strong class="ih hj"> App引擎</strong></p><p id="0736" class="if ig jh ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">因为Python客户端库没有安装在<a class="ae jd" href="https://cloud.google.com/appengine/docs/python/" rel="noopener ugc nofollow" target="_blank"> App Engine Python运行时环境</a>中，所以它们必须<a class="ae jd" href="https://cloud.google.com/appengine/docs/python/tools/libraries27#vendoring" rel="noopener ugc nofollow" target="_blank">像第三方库一样出售到您的应用程序</a>中。</p></blockquote><p id="47e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Google提供了将第三方库安装到应用引擎应用程序中的文档。以下是我遵循的流程。</p><ol class=""><li id="86e4" class="jl jm hi ih b ii ij im in iq jn iu jo iy jp jc jq jr js jt bi translated">在项目的根目录下创建一个新的空目录:<code class="du ju jv jw jx b">mkdir lib</code></li><li id="16f2" class="jl jm hi ih b ii jy im jz iq ka iu kb iy kc jc jq jr js jt bi translated">创建<strong class="ih hj"> requirements.txt </strong> : <code class="du ju jv jw jx b">echo 'oauth2client' &gt; requirements.txt</code></li><li id="836b" class="jl jm hi ih b ii jy im jz iq ka iu kb iy kc jc jq jr js jt bi translated">安装要求:<code class="du ju jv jw jx b">pip install -U -t lib -r requirements.txt</code></li><li id="13b4" class="jl jm hi ih b ii jy im jz iq ka iu kb iy kc jc jq jr js jt bi translated">创建<strong class="ih hj"> appengine_config.py </strong>:</li></ol><pre class="kd ke kf kg fd kh jx ki kj aw kk bi"><span id="3858" class="kl km hi jx b fi kn ko l kp kq"># appengine_config.py<br/><strong class="jx hj">from google.appengine.ext import vendor</strong><br/><br/># Add any libraries install in the "lib" folder.<br/><strong class="jx hj">vendor.add('lib')</strong></span></pre><p id="abf2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我可以在本地和部署时将来自Google oauth2client的模块和类包含在我的App Engine应用程序中。</p><p id="de6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">附加参考文献</strong></p><ul class=""><li id="3c1f" class="jl jm hi ih b ii ij im in iq jn iu jo iy jp jc kr jr js jt bi translated"><a class="ae jd" href="http://blog.jonparrott.com/managing-vendored-packages-on-app-engine/" rel="noopener ugc nofollow" target="_blank">管理App Engine上出售的软件包</a> ( <a class="ae jd" href="http://www.jonparrott.com/" rel="noopener ugc nofollow" target="_blank">乔恩·韦恩·帕罗特</a></li><li id="7e47" class="jl jm hi ih b ii jy im jz iq ka iu kb iy kc jc kr jr js jt bi translated"><a class="ae jd" href="https://sookocheff.com/post/appengine/managing-app-engine-dependencies-with-pip/" rel="noopener ugc nofollow" target="_blank">使用pip </a>管理应用引擎依赖关系</li><li id="d0b5" class="jl jm hi ih b ii jy im jz iq ka iu kb iy kc jc kr jr js jt bi translated"><a class="ae jd" rel="noopener" href="/google-cloud/simple-google-api-auth-samples-for-service-accounts-installed-application-and-appengine-da30ee4648">服务账户、已安装应用和Appengine的简单Google API认证示例</a>(介质上的<a class="ae jd" rel="noopener" href="/@salmaan.rashid"> @salmaan.rashid </a>)</li><li id="c03c" class="jl jm hi ih b ii jy im jz iq ka iu kb iy kc jc kr jr js jt bi translated"><a class="ae jd" href="https://stackoverflow.com/questions/34584937/unable-to-run-dev-appserver-py-with-gcloud/34585485#34585485" rel="noopener ugc nofollow" target="_blank">无法使用gcloud运行dev _ appserver.py】(堆栈溢出)</a></li><li id="2242" class="jl jm hi ih b ii jy im jz iq ka iu kb iy kc jc kr jr js jt bi translated"><a class="ae jd" href="https://stackoverflow.com/questions/39704367/unable-to-use-google-cloud-in-a-gae-app" rel="noopener ugc nofollow" target="_blank">在GAE无法使用Google-cloud</a>(堆栈溢出)</li></ul></div></div>    
</body>
</html>