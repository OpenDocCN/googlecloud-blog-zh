<html>
<head>
<title>Ruby Functions on Cloud Run! 💎</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云上运行的Ruby函数！💎</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/ruby-functions-on-cloud-run-db6ea95ad8ac?source=collection_archive---------4-----------------------#2020-04-22">https://medium.com/google-cloud/ruby-functions-on-cloud-run-db6ea95ad8ac?source=collection_archive---------4-----------------------#2020-04-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/0c41ce949b2217bd458817aeed5176af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fDm0DhTViH_p7x6YJ53cpg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Ruby +云运行</figcaption></figure><p id="3c6b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">介绍<em class="js"> Ruby函数框架</em>。作为一个服务开发者，这个gem允许你用一个简单函数轻松地编写ruby服务。在这篇博文中，我们将介绍<em class="js">如何使用Ruby Functions框架来封装和<em class="js">部署</em>一个Ruby方法到Cloud Run。</em></p><h1 id="9cb7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">设置</h1><p id="49b9" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">确保Ruby 2.4+安装了<code class="du kw kx ky kz b">ruby -v</code>。<a class="ae la" href="https://www.ruby-lang.org/en/documentation/installation/" rel="noopener ugc nofollow" target="_blank">🔗</a></p><p id="2d5e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">用以下内容创建一个<code class="du kw kx ky kz b">Gemfile</code>:</p><pre class="lb lc ld le fd lf kz lg lh aw li bi"><span id="3f64" class="lj ju hi kz b fi lk ll l lm ln">source "<a class="ae la" href="https://rubygems.org" rel="noopener ugc nofollow" target="_blank">https://rubygems.org</a>"<br/>gem "functions_framework", "~&gt; 0.1"</span></pre><h1 id="deef" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">创建一个函数</h1><p id="abfe" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">用下面的函数<code class="du kw kx ky kz b">hello</code>创建一个名为<code class="du kw kx ky kz b">app.rb</code>的文件:</p><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lo lp l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">一句“你好，世界！”app。</figcaption></figure><h1 id="752b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">测试您的功能</h1><p id="8c15" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">通过安装依赖项和启动web服务器来测试您的功能:</p><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lo lp l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">安装依赖项并启动函数框架。</figcaption></figure><p id="ca29" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">去<code class="du kw kx ky kz b">localhost:8080</code>看看你的函数响应！</p><h1 id="88d6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">添加Dockerfile文件</h1><p id="6c8a" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">Ruby Functions Framework repo包含一个<a class="ae la" href="https://github.com/GoogleCloudPlatform/functions-framework-ruby/blob/master/examples/echo/Dockerfile" rel="noopener ugc nofollow" target="_blank">示例</a> <code class="du kw kx ky kz b"><a class="ae la" href="https://github.com/GoogleCloudPlatform/functions-framework-ruby/blob/master/examples/echo/Dockerfile" rel="noopener ugc nofollow" target="_blank">Dockerfile</a></code>，我们可以使用/复制它来构建我们的容器。在您的<code class="du kw kx ky kz b">app.rb</code>文件旁边创建一个名为<code class="du kw kx ky kz b">Dockerfile</code>的新文件:</p><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lo lp l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">Dockerfile文件</figcaption></figure><h1 id="c7b3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">部署到云运行</h1><p id="f27f" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">要将您的服务部署到Google Cloud Platform，请运行以下命令来构建您的容器:</p><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lo lp l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">使用云构建构建您的容器</figcaption></figure><p id="87fc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后将您的容器部署到云运行:</p><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lo lp l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">部署到云运行</figcaption></figure><p id="e5e5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">很快，您将获得一个如下所示的实时URL:</p><pre class="lb lc ld le fd lf kz lg lh aw li bi"><span id="d707" class="lj ju hi kz b fi lk ll l lm ln"><a class="ae la" href="https://helloruby-q7vieseilq-uc.a.run.app/" rel="noopener ugc nofollow" target="_blank">https://helloruby-q7vieseilq-uc.a.run.app/</a></span></pre><p id="2067" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">瞧！</p><h1 id="69fd" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">感谢阅读</h1><p id="95fe" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">您可能也会对这些相关的学习资源感兴趣:</p><ul class=""><li id="7cd5" class="lq lr hi iw b ix iy jb jc jf ls jj lt jn lu jr lv lw lx ly bi translated"><a class="ae la" href="https://github.com/GoogleCloudPlatform/functions-framework-ruby" rel="noopener ugc nofollow" target="_blank">💎Ruby Functions框架的源代码</a></li><li id="61e6" class="lq lr hi iw b ix lz jb ma jf mb jj mc jn md jr lv lw lx ly bi translated"><a class="ae la" href="https://cloud.google.com/ruby" rel="noopener ugc nofollow" target="_blank">📄谷歌云文档上的ruby</a></li></ul></div></div>    
</body>
</html>