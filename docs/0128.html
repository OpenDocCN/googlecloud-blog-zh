<html>
<head>
<title>Zero to Continuous Delivery with Google Cloud Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">借助谷歌云平台实现零到持续交付</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/zero-to-continuous-delivery-with-google-cloud-platform-8e3bf1312fb5?source=collection_archive---------1-----------------------#2016-07-23">https://medium.com/google-cloud/zero-to-continuous-delivery-with-google-cloud-platform-8e3bf1312fb5?source=collection_archive---------1-----------------------#2016-07-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ab31" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">介绍</h2></div><p id="41e1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我最近在英国曼彻斯特的一个当地码头工人聚会上做了一个演讲。这篇博客伴随着那次谈话。在这篇文章的过程中，我希望给读者一些指导，让他们利用<a class="ae jt" href="https://cloud.google.com" rel="noopener ugc nofollow" target="_blank">谷歌云平台</a> (GCP)，特别是<a class="ae jt" href="https://cloud.google.com/container-engine/" rel="noopener ugc nofollow" target="_blank">谷歌容器引擎</a> (GKE)，创建一个持续的交付管道。</p><p id="0aee" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本教程将提供创建GKE集群的详细信息，利用<a class="ae jt" href="http://kubernetes.io" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a> (k8s)和<a class="ae jt" href="https://www.docker.com" rel="noopener ugc nofollow" target="_blank"> Docker </a>来启动<a class="ae jt" href="https://jenkins.io" rel="noopener ugc nofollow" target="_blank"> Jenkins </a>容器，使用k8s来启动Jenkins构建代理，将<a class="ae jt" href="https://jenkins.io/solutions/pipeline/" rel="noopener ugc nofollow" target="_blank">构建管道定义为代码</a>，创建<a class="ae jt" href="http://projects.spring.io/spring-boot/" rel="noopener ugc nofollow" target="_blank"> spring boot app </a>作为Docker容器，最后使用k8s部署应用程序。唷，还有很多事情要做…所以系好安全带，我们要做长期的努力。为了帮助采用和帮助人们玩GCP，教程还概述了GCP项目的创建和用户的创建。我唯一的假设是，你已经注册了GCP，可以访问GCP控制台。</p><p id="c4e2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">TL；博士</strong></p><p id="7b10" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本教程的所有代码都是开源的，可以在<a class="ae jt" href="https://github.com/search?q=user%3Aeggsy84+gcp" rel="noopener ugc nofollow" target="_blank">我的github账户</a>上找到，演示文稿可以在的slideshare上找到<a class="ae jt" href="http://www.slideshare.net/JamesHeggs/zero-to-continuous-delivery-on-google-cloud" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="49bf" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jg km kn ko jk kp kq kr jo ks kt ku kv bi translated">GCP项目创建</h2><p id="fbd8" class="pw-post-body-paragraph ix iy hi iz b ja kw ij jc jd kx im jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">注册谷歌云平台后(在撰写本文时，他们提供300美元/60天的免费试用)，导航到<a class="ae jt" href="https://console.cloud.google.com" rel="noopener ugc nofollow" target="_blank">云控制台</a>。</p><ol class=""><li id="3185" class="lc ld hi iz b ja jb jd je jg le jk lf jo lg js lh li lj lk bi translated">导航至<a class="ae jt" href="https://console.cloud.google.com/iam-admin/projects" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj">项目管理屏幕</strong> </a></li><li id="e591" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">点击<strong class="iz hj">创建项目</strong>按钮(图1)</li><li id="be63" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">输入<strong class="iz hj">项目名称，</strong>记下<strong class="iz hj">项目ID </strong>。这对以后很重要。图1显示了一个项目ID为“docker-meetup-1381”的示例项目</li><li id="0023" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">点击<strong class="iz hj">创建</strong>来创建你的GCP项目</li></ol><figure class="lr ls lt lu fd lv er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es lq"><img src="../Images/735b12349bcc2aa1979aba3942e8e859.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rGv6gyp4EWPI1ESCZrUhIQ.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx translated">图1 : GCP项目创建</figcaption></figure><p id="21aa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是创建的项目。现在我们可以配置一个<a class="ae jt" href="https://cloud.google.com/docs/authentication" rel="noopener ugc nofollow" target="_blank"> GCP服务帐户</a>来管理项目。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="fc2f" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jg km kn ko jk kp kq kr jo ks kt ku kv bi translated">GCP服务帐户创建</h2><p id="1f25" class="pw-post-body-paragraph ix iy hi iz b ja kw ij jc jd kx im jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">为了管理我们即将创建的资源，GCP提出了<a class="ae jt" href="https://cloud.google.com/docs/authentication" rel="noopener ugc nofollow" target="_blank">服务账户</a>的概念。接下来的步骤将讨论创建服务帐户和下载相关的密钥文件。</p><ol class=""><li id="88cf" class="lc ld hi iz b ja jb jd je jg le jk lf jo lg js lh li lj lk bi translated">确保您的<strong class="iz hj">项目在GCP控制台的右上角被选中</strong>(如图2所示)</li><li id="1263" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">点击左上角的汉堡菜单并选择'<strong class="iz hj"> IAM &amp; Admin </strong>'</li><li id="2852" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">点击左侧菜单中的<strong class="iz hj">服务账户</strong></li><li id="1ad9" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">点击“<strong class="iz hj">创建服务账户</strong>按钮</li><li id="56c3" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">提供您想要的<strong class="iz hj">服务帐户名</strong>并勾选“<strong class="iz hj">提供新的私钥</strong>”(示例如图3所示)</li><li id="e565" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">单击“<strong class="iz hj">创建</strong>”后，还会触发浏览器下载您的新服务帐户密钥文件。</li><li id="8768" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">记下<strong class="iz hj">密钥文件</strong>的<strong class="iz hj">位置和文件名</strong>，因为稍后会用到。</li><li id="bbef" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">回到“<strong class="iz hj">服务帐户</strong>”屏幕，确保您的新服务帐户“<strong class="iz hj">已勾选</strong>，并点击屏幕顶部的“<strong class="iz hj">权限</strong>”按钮。</li><li id="0df8" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">为了简单起见，但以牺牲安全性为代价，我们将授予服务帐户'<strong class="iz hj"> Editor </strong>'访问我们的GCP资源的权限。然而，我建议审查长期项目的许可。在右侧权限面板的<strong class="iz hj">【添加成员】</strong>字段<strong class="iz hj"> </strong>中键入您的<strong class="iz hj">服务帐户名称</strong>，并在出现提示时点击相应的服务帐户。从角色下拉菜单中选择“<strong class="iz hj">编辑</strong>，点击“<strong class="iz hj">添加</strong>”。(示例如图4所示)</li></ol><p id="6ec8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们现在已经准备好了我们的GCP项目和证书。</p><p id="5295" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">注</strong></p><p id="3bb4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在Safari上，由于某种原因，密钥有时会被下载为一个名为“<strong class="iz hj"> Unknown </strong>的文件。虽然不是必需的，但我建议将该文件移出下载目录，并将其重命名，以清楚地表明它是一个JSON文件。例如:</p><pre class="lr ls lt lu fd mg mh mi mj aw mk bi"><span id="a1dd" class="kb kc hi mh b fi ml mm l mn mo">mkdir ~/keys</span><span id="0ebd" class="kb kc hi mh b fi mp mm l mn mo">mv ~/Downloads/Unknown ~/keys/gcp-service-account.json</span></pre><figure class="lr ls lt lu fd lv er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es mq"><img src="../Images/0e484796e4939d08954f2ae74390c337.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nf3C1g4XOxxTq0s3HsWHxg.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx translated">图2:选择您的GCP项目</figcaption></figure><figure class="lr ls lt lu fd lv er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es mq"><img src="../Images/fedd335910b4eb1192fd261787d95eb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t-f9G71bECilN-0EaOyY8Q.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx translated">图3 —服务帐户创建</figcaption></figure><figure class="lr ls lt lu fd lv er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es mr"><img src="../Images/87784f08f733bbc4d21277ec23f2512b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Xr1C43vgzjrMnO2ASUYmg.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx translated">图4 —服务帐户的权限</figcaption></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="aa76" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jg km kn ko jk kp kq kr jo ks kt ku kv bi translated">GKE集群创建</h2><p id="683f" class="pw-post-body-paragraph ix iy hi iz b ja kw ij jc jd kx im jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">是时候创建我们的GKE (K8S)集群了。</p><ol class=""><li id="9ffa" class="lc ld hi iz b ja jb jd je jg le jk lf jo lg js lh li lj lk bi translated">首先<a class="ae jt" href="https://cloud.google.com/sdk/docs/quickstarts" rel="noopener ugc nofollow" target="_blank">将谷歌云SDK </a>安装到你的命令行。</li><li id="315d" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">一旦你安装了GCloud SDK，你就可以继续安装<a class="ae jt" href="https://cloud.google.com/sdk/docs/managing-components" rel="noopener ugc nofollow" target="_blank"> kubernetes扩展</a></li></ol><pre class="lr ls lt lu fd mg mh mi mj aw mk bi"><span id="20a3" class="kb kc hi mh b fi ml mm l mn mo"># gcloud components install kubectl</span></pre><p id="a66b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.克隆引导数据库</p><pre class="lr ls lt lu fd mg mh mi mj aw mk bi"><span id="ecda" class="kb kc hi mh b fi ml mm l mn mo"># mkdir ~/gcp-continuous-delivery<br/># cd ~/gcp-continuous-delivery<br/># git clone <a class="ae jt" href="https://github.com/eggsy84/gcp-bootstrap-infrastructure.git" rel="noopener ugc nofollow" target="_blank">https://github.com/eggsy84/gcp-bootstrap-infrastructure.git</a></span></pre><p id="35b9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.转到引导目录</p><pre class="lr ls lt lu fd mg mh mi mj aw mk bi"><span id="f5a1" class="kb kc hi mh b fi ml mm l mn mo"># cd ~/gcp-continuous-delivery/gcp-bootstrap-infrastructure/bootstrap/</span></pre><p id="0d97" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.现在可以执行引导脚本了。它需要5个参数:</p><p id="034c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> Google项目ID </strong> <br/>将包含您的GKE集群的项目。(取自您之前记录的ID)</p><p id="d834" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> GCP区域</strong> <br/>取自GCP提供的“可用区域”列表</p><p id="9c55" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> GCP机器型号</strong> <br/>取自GCP提供的“机器型号”。GKE集群中的每个节点都将按照这种类型进行配置。</p><p id="feb4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">为您的k8s集群的节点数量</strong> <br/>为要创建的节点数量输入数值。</p><p id="e34a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">您的服务帐户文件的路径</strong> <br/>您之前在教程中下载的服务帐户JSON文件的路径。</p><pre class="lr ls lt lu fd mg mh mi mj aw mk bi"><span id="882d" class="kb kc hi mh b fi ml mm l mn mo"># sh deploy.sh \<br/>  docker-meetup-1381 \<br/>  europe-west1-b \<br/>  n1-standard-2 \<br/>  1 \<br/>  ~/keys/gcp-service-account.json</span></pre><p id="a9c6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.该脚本将打开您的浏览器，并要求您进行身份验证。输入您的GCP用户名和密码详细信息，然后单击“<strong class="iz hj">允许</strong>”。返回命令行终端，您应该会看到类似于以下内容的输出:</p><pre class="lr ls lt lu fd mg mh mi mj aw mk bi"><span id="f997" class="kb kc hi mh b fi ml mm l mn mo">About to create a Container Cluster in the ‘docker-meetup-1381’ GCP project located in ‘europe-west1-b’ with 1 x ‘n1-standard-2’ node(s)</span><span id="da1b" class="kb kc hi mh b fi mp mm l mn mo">Press any key to continue…or Ctrl+C to exit</span></pre><p id="e3b1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">确认它将采取的操作并请求确认。</p><p id="4830" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">重要提示</strong>:脚本现在将在GCP提供基础设施，这可能需要你承担费用。</p><p id="3479" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">7.提取詹金斯的IP地址</p><p id="1a25" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该脚本将输出其进展，并在接近结束时输出一个IP地址，您可以访问詹金斯。比如:</p><pre class="lr ls lt lu fd mg mh mi mj aw mk bi"><span id="189a" class="kb kc hi mh b fi ml mm l mn mo">Jenkins service up and running on 104.155.36.72</span></pre><p id="8e32" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您现在应该能够打开浏览器，导航到该URL并查看您的Jenkins服务器！基本上就是这样——您已经提供了一个GKE集群，使用Kubernetes在其上部署了一个<a class="ae jt" href="https://hub.docker.com/r/eggsy84/gcp-jenkins-master-k8s-seed/" rel="noopener ugc nofollow" target="_blank">预配置的Jenkins master </a> docker容器，并为该服务提供了一个外部IP地址以使其可访问。Jenkins实例已经预先配置了一个Jenkins作业，该作业使用<a class="ae jt" href="https://hub.docker.com/r/eggsy84/gcp-jenkins-slave-k8s-seed/" rel="noopener ugc nofollow" target="_blank"> Jenkins JNLP代理</a>和<a class="ae jt" href="https://jenkins.io/doc/pipeline/" rel="noopener ugc nofollow" target="_blank"> Jenkins管道插件</a>生成一个<a class="ae jt" href="https://github.com/eggsy84/gcp-spring-boot-app" rel="noopener ugc nofollow" target="_blank">示例spring boot应用程序</a>的构建管道。</p><p id="e63f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">重要说明:</strong>让读者练习解决实例的安全性问题，因为它目前是不安全的，不需要任何用户凭证。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="df4c" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jg km kn ko jk kp kq kr jo ks kt ku kv bi translated">应用程序部署</h2><p id="88ca" class="pw-post-body-paragraph ix iy hi iz b ja kw ij jc jd kx im jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">大约10分钟后(您可能需要刷新屏幕)，您的jenkins实例将创建一个名为'<strong class="iz hj"> spring-boot-pipeline </strong>的作业，并执行一个构建。</p><ol class=""><li id="fff5" class="lc ld hi iz b ja jb jd je jg le jk lf jo lg js lh li lj lk bi translated">导航到jenkins职务。从这里你应该完全荣耀地建立管道。(示例如图5所示)</li></ol><figure class="lr ls lt lu fd lv er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es ms"><img src="../Images/d3845e1b787d5c621ee338852946a967.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hb9n2wZUalrEwCKTqwcg2g.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx translated">图5 —构建管道</figcaption></figure><p id="6b45" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.点击<strong class="iz hj">建造1号</strong></p><p id="b032" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.点击<strong class="iz hj">控制台输出</strong>查看作业的输出。</p><p id="d810" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.向下滚动到输出的底部，您应该会看到类似以下内容的消息:</p><pre class="lr ls lt lu fd mg mh mi mj aw mk bi"><span id="5d0d" class="kb kc hi mh b fi ml mm l mn mo">[spring-boot-pipeline] Running shell script<br/>+ echo Application up and running on 130.211.78.33<br/>Application up and running on 130.211.78.33<br/>[Pipeline] }<br/>[Pipeline] // node<br/>[Pipeline] End of Pipeline<br/>Finished: SUCCESS</span></pre><p id="3dee" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.显示spring boot应用程序已经成功构建并部署到我们的Kubernetes集群中。您可以导航到提供的IP地址来查看正在运行的应用程序。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="cc97" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jg km kn ko jk kp kq kr jo ks kt ku kv bi translated">刚刚发生了什么？</h2><ul class=""><li id="6569" class="lc ld hi iz b ja kw jd kx jg mt jk mu jo mv js mw li lj lk bi translated">创造了一个GCP·库伯内特集群</li><li id="7d58" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js mw li lj lk bi translated">使用k8s和docker将预配置的Jenkins主服务器部署到该集群</li><li id="fb70" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js mw li lj lk bi translated">让Jenkins执行我们的<a class="ae jt" href="https://github.com/eggsy84/gcp-spring-boot-app" rel="noopener ugc nofollow" target="_blank">示例spring boot应用程序</a>的构建</li><li id="a990" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js mw li lj lk bi translated">詹金斯构建旋转了一个Docker容器，其中包含一个用于执行构建的<a class="ae jt" href="https://hub.docker.com/r/eggsy84/gcp-jenkins-slave-k8s-seed/" rel="noopener ugc nofollow" target="_blank">JNLP·詹金斯从属服务器</a></li><li id="0ac7" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js mw li lj lk bi translated">构建使用Maven编译代码</li><li id="a244" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js mw li lj lk bi translated">然后，它继续生成应用程序的Docker映像</li><li id="4a9b" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js mw li lj lk bi translated">将此推送到<a class="ae jt" href="https://cloud.google.com/container-registry/" rel="noopener ugc nofollow" target="_blank">谷歌的容器注册表</a></li><li id="b2af" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js mw li lj lk bi translated">使用<a class="ae jt" href="http://kubernetes.io/docs/user-guide/deployments/" rel="noopener ugc nofollow" target="_blank"> k8s部署</a>将docker映像部署到我们的k8s集群中</li><li id="df8f" class="lc ld hi iz b ja ll jd lm jg ln jk lo jo lp js mw li lj lk bi translated">使用<a class="ae jt" href="http://kubernetes.io/docs/user-guide/services/" rel="noopener ugc nofollow" target="_blank"> k8s services </a>在docker容器前注册一个服务，并将其类型设置为<a class="ae jt" href="http://kubernetes.io/docs/user-guide/services/#type-loadbalancer" rel="noopener ugc nofollow" target="_blank"> LoadBalancer </a>以确保应用程序可以通过互联网访问。</li></ul></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="fcda" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jg km kn ko jk kp kq kr jo ks kt ku kv bi translated">系列的下一个</h2><p id="72d6" class="pw-post-body-paragraph ix iy hi iz b ja kw ij jc jd kx im jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">后续文章将更详细地介绍使这个例子工作的每个元素，以便您可以复制它，并以类似的形式开始您自己的项目。</p><p id="cafc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我也欢迎对涉及的<a class="ae jt" href="https://github.com/search?q=user%3Aeggsy84+gcp" rel="noopener ugc nofollow" target="_blank">各种Github项目的任何改变的输入，所以请给我一个拉请求。</a></p></div></div>    
</body>
</html>