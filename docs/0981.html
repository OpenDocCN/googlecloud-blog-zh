<html>
<head>
<title>Deconstructing Chatbots: Integrate Dialogflow with Actions on Google</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解构聊天机器人:将Dialogflow与Google上的操作整合起来</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/integrate-dialgflow-with-actions-on-google-3c22089ad001?source=collection_archive---------0-----------------------#2019-04-26">https://medium.com/google-cloud/integrate-dialgflow-with-actions-on-google-3c22089ad001?source=collection_archive---------0-----------------------#2019-04-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/78f3f99e64deaa321884e1da7197b527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ScD72WY6wOs2tpyOxK8bKw.png"/></div></div></figure><div class=""/><h1 id="c70a" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="5092" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">一旦您在Dialogflow上构建了代理，您就可以使用一键式集成连接到各种平台，如google assistant、web、电话、slack、facebook messenger、twitter等。在本实验中，您将把Dialogflow与Google上的操作集成在一起，使聊天机器人成为Google Home或Assistant上的Google操作。</p><p id="2e08" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">Actions on Google是一个平台，在这里你可以创建软件来扩展Google Assistant的功能。通过将Dialogflow与Google上的Actions集成，您可以访问超过5亿台支持Google Assistant的设备，如智能音箱、电话、汽车、电视、手表等</p><h1 id="b98c" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">你会学到什么</h1><ul class=""><li id="489d" class="kr ks ht jq b jr js jv jw jz kt kd ku kh kv kl kw kx ky kz bi translated">如何从Dialogflow启用对Google集成的操作</li><li id="fe4f" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">如何测试谷歌行动</li><li id="398b" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">如何在google控制台上管理动作助手</li></ul><h1 id="f54c" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">先决条件</h1><p id="8a98" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对话流的基本概念和结构。关于介绍基本对话设计的Dialogflow教程视频，请查看<a class="ae lf" href="https://www.youtube.com/watch?v=O00K10xP5MU&amp;list=PLIivdWyY5sqK5SM34zbkitWLOV-b3V40B&amp;index=1" rel="noopener ugc nofollow" target="_blank">解构聊天机器人系列</a>。</p><h1 id="392a" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">从Dialogflow启用对Google集成的操作</h1><p id="9752" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我们将使用我们在之前的codelab中构建的相同的约会调度聊天机器人，并通过集成来工作。</p><ul class=""><li id="6c55" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">导航至<a class="ae lf" href="https://console.dialogflow.com/api-client/" rel="noopener ugc nofollow" target="_blank">对话流控制台</a>。</li><li id="72f1" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">选择我们在前面的codelab中创建的AppointmentScheduler代理。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div class="er es lj"><img src="../Images/61268bbaa0d968ebdb8c9f7f63a9a5fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/0*0AHrhznGFVyilJ6J"/></div></figure><ul class=""><li id="9f52" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">点击集成</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lo"><img src="../Images/5ed5d66f7f1afc3617c1d512566b2eb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Nw-PD_PiHw913HaH"/></div></div></figure><ul class=""><li id="83d5" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">点击“谷歌助手”整合设置</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lp"><img src="../Images/997f0f0761d6baa390b8db227846ff6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GzbR_Zqj9ICh0-YX"/></div></div></figure><ul class=""><li id="9d72" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">在弹出的窗口中，将定义显式和隐式调用:</li><li id="2f1b" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hu">显式调用</strong>发生在用户通过名字告诉谷歌助手使用你的动作的时候。可选地，用户可以在他们的调用的末尾包含一个调用短语，这将直接把他们带到他们所请求的功能。</li><li id="af35" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">当一个用户说“好的谷歌，跟智能调度”智能调度是我们的触发名称，我们将看到在哪里设置它。在我们的例子中，欢迎意图是用户登陆的最佳点。所以我们会坚持这一点。</li><li id="13da" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hu">隐式调用</strong>是一个交互流，当用户请求执行某个任务而不通过名称调用某个动作时，就会出现这个交互流。Google Assistant试图将用户的请求匹配到一个合适的实现，比如一个操作、搜索结果或移动应用程序，然后向用户提供建议。如果您已经部署了可以帮助用户完成任务的操作，隐式调用为用户提供了一种通过助手发现您的操作的方式。</li><li id="9060" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">假设一个用户说，“好的，google，让smart scheduler为明天下午5点设置一个约会”——这是一个隐式调用，需要触发深层链接，所以在这种情况下，我们应该直接调用我们的“计划约会”意图，因为我们确切地知道用户打算做什么。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lq"><img src="../Images/2d1dc350735327aeedb5f19335237009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ECb6RChp9r4KMEe2"/></div></div></figure><ul class=""><li id="6a2b" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">点击“测试”，因为我们刚刚开发了我们的应用程序，测试是一个很好的方式来看看它是否正常工作。</li></ul><h1 id="50a5" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">在模拟器中测试代理</h1><ul class=""><li id="531a" class="kr ks ht jq b jr js jv jw jz kt kd ku kh kv kl kw kx ky kz bi translated">点击“测试”,这将在谷歌控制台的操作中打开<strong class="jq hu">模拟器</strong>。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lr"><img src="../Images/7835008f1bc3226e7a13cc7ebdb87c66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0EoSq3NH22eYEkkv"/></div></div></figure><ul class=""><li id="7033" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">尝试几个短语:</li><li id="754f" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">“与我的测试应用程序对话”。机器人回答:“好吧。让我们获得我的测试应用程序的测试版本。日安！今天有什么事吗？”</li><li id="70ed" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">“帮我预约”或“预约明天下午4点”并按照提示查看预约设置。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ls"><img src="../Images/81348ff39bb28e03bfb9ca1afbf9c494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PBVRqCK0PZo-YH9t"/></div></div></figure><ul class=""><li id="b28b" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">您将在右侧看到测试和调试显示、请求、响应、错误和日志的选项。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lt"><img src="../Images/56ab5cc69458dbe546b6b44fe708a679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_p9t-R_tLQJ0xaCm"/></div></div></figure><h1 id="5929" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">管理助手应用程序</h1><ul class=""><li id="cab8" class="kr ks ht jq b jr js jv jw jz kt kd ku kh kv kl kw kx ky kz bi translated">导航到对话流控制台，然后单击集成</li><li id="8caf" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">然后再次点击谷歌集成上的操作。</li><li id="f93c" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">在这次弹出的窗口中，我们来探索一下“管理助手APP”</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lq"><img src="../Images/0b8cc793ffbcb9b2f1c066e59fa6f86a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1V6_0iiyI965ziz1"/></div></div></figure><ul class=""><li id="098f" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">这为我们提供了为聊天机器人设置调用名称的能力，在示例中我们称之为“智能调度程序”，但是您将需要使用另一个名称(字段中不接受数字或特殊字符)，因为这些是全局的。</li><li id="729d" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">在这里为助手选择男/女声，点击<strong class="jq hu">保存。</strong></li><li id="b8ea" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">回到概述——我们已经构建了我们的应用程序，可以开始测试了。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lr"><img src="../Images/fcc1b3b324cac262e4e1028a19f9ca75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Eie6Zs2MbnD5xoR7"/></div></div></figure><ul class=""><li id="4139" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">当您准备好进行部署时，单击左侧的Deploy选项卡，并提供公司详细信息和适当的联系人。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lr"><img src="../Images/202ef779e76435866e2b8c9da2ae063d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D80CCfVmf6A9h2Q6"/></div></div></figure><ul class=""><li id="d318" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">接下来，在左侧菜单中的<strong class="jq hu">部署</strong>下，单击<strong class="jq hu">目录信息</strong>，确保您已经为您的应用程序和示例调用提供了描述——例如，我们在这里添加了“与智能调度程序对话”它还需要一个小的和一个大的标志图像(至少192像素宽和高)，联系方式，隐私信息和类别。点击<strong class="jq hu">保存。</strong></li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lr"><img src="../Images/11e7476a7bff657a2479a8c31737716c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MGDNtbRSmxOTmR5r"/></div></div></figure><ul class=""><li id="729b" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">接下来，在Deploy -&gt; Location targeting下，选择要部署的国家和要运行操作的表面。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lu"><img src="../Images/225db7c251a042053a47d752c1c95f96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*APpdxbqYTtzIrHgY"/></div></div></figure><p id="1ce0" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">[可选]一旦您在模拟器测试后感到舒适，您可以选择为Alpha和Beta测试人员推送应用程序以进行进一步测试。要启用Alpha和Beta测试，请导航到“部署”并单击“发布”。</p><ul class=""><li id="6b31" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl kw kx ky kz bi translated">随着测试版的推出，你可以测试200个用户的行动。</li><li id="0826" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">使用Alpha版本，您可以为多达20个用户启用该操作，而无需提交进行审查。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lv"><img src="../Images/f99e1e556a6f6d10b964832dc9bbeb27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BJFyPms8lMhaLydo"/></div></div></figure><p id="abb8" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">[可选]当您感到满意并准备将应用程序推向生产时，用户可以使用“部署”-&gt;“发布”下的“提交生产”按钮来提交生产。</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/a0990184ccc2cdfdf48b091362432683.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XnVHJyE8iqAiAynu"/></div></div></figure><p id="65a8" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">[可选]您将看到一个对话框，确认您已经在部署到生产环境并提交审批之前测试了该应用程序。适当选择。如果您不希望在生产中提交动作以供审查，这很好，到目前为止您所做的所有设置对于在模拟器、Alpha和Beta中进行适当的测试仍然是有用的。</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lx"><img src="../Images/b9a26e3c8bed946f03a4952a5430a644.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JASIVnCFZHpzkGk6"/></div></div></figure><h1 id="019c" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">测试你的聊天机器人！</h1><p id="8550" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在这一点上，登录到您的谷歌家庭设备或谷歌助理应用程序与您用来建立这个应用程序的相同的电子邮件地址。</p><p id="ef38" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">用下面的对话来测试一下:</p><ol class=""><li id="8a80" class="kr ks ht jq b jr km jv kn jz lg kd lh kh li kl ly kx ky kz bi translated">与<example name="" given="">(在我们的例子中是智能调度器)对话</example></li><li id="e6a5" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl ly kx ky kz bi translated">当然可以。让我们获得智能调度程序演示的测试版本。嗨！你过得怎么样？</li><li id="d0e8" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl ly kx ky kz bi translated">用户:“嗨”</li><li id="1ec6" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl ly kx ky kz bi translated">用户:“设置约会”</li><li id="65ab" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl ly kx ky kz bi translated">聊天机器人回应:“什么日期？”</li><li id="d6e5" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl ly kx ky kz bi translated">用户:“5月23日”</li><li id="db22" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl ly kx ky kz bi translated">聊天机器人回应:“你想什么时候进来？”</li><li id="c1eb" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl ly kx ky kz bi translated">用户:“上午10点”</li><li id="8c64" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl ly kx ky kz bi translated">另外，试试另一个例子:“约定明天下午4点”。Google Home或Assistant应该会回复确认预约。</li></ol><h1 id="5c6a" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">恭喜你！</h1><p id="f607" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">你创建了一个聊天机器人，并用它创建了一个谷歌动作。您现在是聊天机器人开发者了！</p><h1 id="680b" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">后续步骤</h1><ul class=""><li id="62a8" class="kr ks ht jq b jr js jv jw jz kt kd ku kh kv kl kw kx ky kz bi translated">点击查看Dialogflow网站<a class="ae lf" href="https://cloud.google.com/dialogflow-enterprise/" rel="noopener ugc nofollow" target="_blank">获取文档、API和更多内容。</a></li><li id="5030" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">跟随<a class="ae lf" href="https://www.youtube.com/watch?v=O00K10xP5MU&amp;list=PLIivdWyY5sqK5SM34zbkitWLOV-b3V40B&amp;index=1" rel="noopener ugc nofollow" target="_blank">解构聊天机器人</a>视频系列，订阅谷歌云平台youtube频道</li><li id="ad01" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">想要更多的故事？查看我的<a class="ae lf" rel="noopener" href="/@pvergadia/">中</a>，<a class="ae lf" href="https://twitter.com/pvergadia" rel="noopener ugc nofollow" target="_blank">在twitter上关注我</a>。</li><li id="aea7" class="kr ks ht jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">试试<a class="ae lf" href="https://dialogflow.com/" rel="noopener ugc nofollow" target="_blank"> Dialogflow </a>，它是<strong class="jq hu">免费</strong>打造的一个bot！看看这个。</li></ul></div></div>    
</body>
</html>