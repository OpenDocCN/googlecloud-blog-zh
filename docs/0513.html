<html>
<head>
<title>Translate a Book with Google Cloud Translation API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用谷歌云翻译API翻译一本书</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/translate-a-book-with-google-cloud-translate-api-938d16396911?source=collection_archive---------0-----------------------#2018-02-06">https://medium.com/google-cloud/translate-a-book-with-google-cloud-translate-api-938d16396911?source=collection_archive---------0-----------------------#2018-02-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="80c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我有一本来自一个家庭成员的另一种语言的自传，我想翻译一段时间。你知道，你清单上的那些项目中的一个，很长一段时间，你似乎不能完成。终于有一天到了，是时候完成这项工作并着手翻译API了。</p><p id="f5d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在最初的测试中，我注意到使用翻译API时，每个请求有一个字符限制(5000个字符)。我的书刚好有超过500，000个字符和超过1000行文本。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="1ba7" class="jm jn hi ji b fi jo jp l jq jr">$ wc -c book.txt<br/>513632 book.txt<br/>$ wc -l book.txt<br/>1029 book.txt</span></pre><p id="3ce0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我知道我必须逐行拆分文本，并向翻译API发送多个请求。起初，我认为我应该分割文件，然后将5000个字符发送给翻译API，但后来我意识到通过新行或“.”分割请求更有意义，然后调用翻译API，存储响应，并进行循环。这就是我们所做的。它只有大约30行python代码，没有进度条和注释，非常容易理解。在我的github上找到代码。</p><div class="js jt ez fb ju jv"><a href="https://github.com/mkahn5/translate-book" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hj fi z dy ka ea eb kb ed ef hh bi translated">mkahn 5/翻译-图书</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">在GitHub上创建一个帐户，为翻译书籍的开发做出贡献。</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">github.com</p></div></div><div class="ke l"><div class="kf l kg kh ki ke kj kk jv"/></div></div></a></div><figure class="jd je jf jg fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="f797" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个脚本只测试了西班牙语和希伯来语，效果很好。</p><blockquote class="ko kp kq"><p id="f84e" class="if ig kr ih b ii ij ik il im in io ip ks ir is it kt iv iw ix ku iz ja jb jc hb bi translated">你谷歌了吗<a class="ae kv" href="https://research.googleblog.com/2006/04/statistical-machine-translation-live.html" rel="noopener ugc nofollow" target="_blank">做翻译服务已经超过10年了</a>？</p></blockquote><ul class=""><li id="6cb6" class="kw kx hi ih b ii ij im in iq ky iu kz iy la jc lb lc ld le bi translated">我的500，000字符/ 1029行文本文件花了大约5分钟翻译(希伯来语)</li><li id="7a98" class="kw kx hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">“La mentira en el Quijote /唐吉诃德中的谎言”35，000字符/ 46行耗时5秒(西班牙语)</li></ul><p id="0968" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">翻译API的成本是每1，000，000个字符20美元。对于我本周的测试，我的成本如下:</p><ul class=""><li id="06ae" class="kw kx hi ih b ii ij im in iq ky iu kz iy la jc lb lc ld le bi translated"><em class="kr">翻译NMT字符352，354.00计7.05美元</em></li></ul><p id="5ff5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只要通过翻译API按新行发送文本，并按句点分隔文本，就应该能够保留源文本文件中的大多数格式。可能需要一些后处理手动校正(见下文)。输出语言设置为英语，但可以通过在脚本中修改target_language来更改。</p><figure class="jd je jf jg fd kl er es paragraph-image"><div class="er es lk"><img src="../Images/cd33a1ffb8870970eb14f6a7ba7dc272.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*PTluUMJtr46gjY1qc1mM3w.png"/></div><figcaption class="lm ln et er es lo lp bd b be z dx translated">翻译后清理</figcaption></figure><p id="6ee3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读，并享受谷歌云翻译API带来的乐趣！</p></div></div>    
</body>
</html>