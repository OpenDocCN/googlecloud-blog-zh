<html>
<head>
<title>Calculating Gini Coefficient in BigQuery with SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用SQL计算BigQuery中的基尼系数</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/calculating-gini-coefficient-in-bigquery-3bc162c82168?source=collection_archive---------0-----------------------#2019-01-10">https://medium.com/google-cloud/calculating-gini-coefficient-in-bigquery-3bc162c82168?source=collection_archive---------0-----------------------#2019-01-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="95ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://en.wikipedia.org/wiki/Gini_coefficient" rel="noopener ugc nofollow" target="_blank">基尼系数</a>，也称基尼指数，是衡量资产分配不平等程度的常用经济计量工具。</p><p id="3bb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是给定每日非零(匿名)帐户余额的情况下，每天输出基尼系数的查询:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jj jk l"/></div></figure><p id="70cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它使用了来自维基百科页面<a class="ae jd" href="https://en.wikipedia.org/wiki/Gini_coefficient" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Gini_coefficient</a>的<code class="du jl jm jn jo b">1 — 2B</code>公式，其中B是洛伦兹曲线下的面积:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jp"><img src="../Images/45e17f6d2afbaa52c04e381721e93045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*5Rnj13-dRZxQjxAV4v_jPw.png"/></div></figure><ul class=""><li id="5f13" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated"><code class="du jl jm jn jo b">balance * (rank — 1)</code>是洛伦兹曲线下矩形水平切片的面积。</li><li id="ed77" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated"><code class="du jl jm jn jo b">balance / 2</code>是矩形切片左边三角形的面积。</li><li id="ae04" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">然后对所有切片求和:<code class="du jl jm jn jo b">sum((balance * (rank — 1) + balance / 2))</code></li><li id="26b0" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">需要<code class="du jl jm jn jo b">count(*)</code>将x轴归一化到范围0到1</li><li id="ef97" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">需要<code class="du jl jm jn jo b">sum(balance)</code>将y轴标准化到范围0到1</li></ul><p id="7af6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个结果可以在本网<a class="ae jd" href="http://shlegeris.com/gini" rel="noopener ugc nofollow" target="_blank">http://shlegeris.com/gini</a>得到验证。</p><p id="8236" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下面的文章<a class="ae jd" href="https://cloud.google.com/blog/products/data-analytics/introducing-six-new-cryptocurrencies-in-bigquery-public-datasets-and-how-to-analyze-them" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/blog/products/data-analytics/introducing-six-new-cryptocurrences-in-big query-public-datasets-and-how-to-analyze-them</a>中，您可以找到使用该SQL的主要加密货币的基尼指数对比。</p></div></div>    
</body>
</html>