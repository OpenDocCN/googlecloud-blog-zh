<html>
<head>
<title>Creating a Virtual Machine in Google Cloud Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在谷歌云平台中创建虚拟机</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/creating-a-virtual-machine-in-google-cloud-platform-ec2d74dbbab0?source=collection_archive---------0-----------------------#2018-01-16">https://medium.com/google-cloud/creating-a-virtual-machine-in-google-cloud-platform-ec2d74dbbab0?source=collection_archive---------0-----------------------#2018-01-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c2b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我将向你展示如何在谷歌云平台中创建一个基本的虚拟机。我们将从谷歌云平台的基本概述开始，然后我将向您展示如何使用谷歌云平台创建各种机器类型的虚拟机实例。我们开始吧</p><p id="cf30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">谷歌云平台概述</strong></p><p id="2b09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谷歌云平台是谷歌云数据中心中包含的一大组物理资产，如计算机、硬盘、处理器和虚拟资产，如虚拟机和服务。每个数据中心都位于一个全局区域中，每个区域都是分区的集合。每个区域在同一区域内相互隔离。<br/>这种分布为我们提供了许多便利，如在区域故障情况下的数据冗余，通过将资源放置在更靠近客户端的位置来减少延迟，还提供了对资源以及如何使用资源来改善服务和降低成本的更多控制。</p><p id="05e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于这是一个云平台，您不必担心购买硬件、购买数据中心和安装它们。你可以使用谷歌提供的所有硬件/软件作为服务。在GCP，这些服务为您提供对底层硬件的访问。当你开始开发时，你会注意到你的产品只是谷歌提供的服务和你的代码的混合。</p><p id="6196" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">先决条件</strong></p><p id="9933" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">启用计费的Google帐户(如果您是第一次使用任何启用国际交易的信用卡/借记卡创建一个计费帐户，您将从Google获得免费点数)</p><p id="3375" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们开始吧</strong></p><p id="cbbb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步是登录到你的谷歌云控制台，用你想要的名字创建一个新项目。现在，您可能会想，项目在这里的作用是什么？我只想创建一个虚拟机，对吗？。所以，把项目想象成一个组织实体。您分配和使用的任何云平台资源都必须属于一个项目。创建项目后，您将能够在仪表板上看到项目信息。该项目信息包含将帮助您识别项目的项目名称、将帮助google cloud platform识别您的项目的项目ID(这对于每个项目都是唯一的)、将由支持团队使用的项目编号(如果您的项目需要任何帮助)。</p><p id="d351" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建虚拟机有三种方式</p><ol class=""><li id="922e" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">使用谷歌云控制台创建。</li><li id="c8bd" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">使用“gcloud”命令行工具创建。</li><li id="ab06" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">使用计算引擎REST API创建</li></ol><p id="c434" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我将使用谷歌云控制台和gcloud向您展示它</p><p id="23c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用谷歌云控制台创建虚拟机</strong></p><p id="497f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击屏幕左上角的菜单图标</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es jr"><img src="../Images/540f009bfcfbf9b4f0ba18835376dacd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*et6Sz7mkBTcMRzbfCQW2ag.png"/></div></figure><p id="4e79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后导航至计算引擎和虚拟机实例。当你第一次点击虚拟机实例时，可能需要一些时间，但是一旦它被初始化，你将会看到类似这样的东西(记住你需要为你的项目启用计费来看到它)。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es jz"><img src="../Images/e5b61172833137f59cf0dfe273b2a617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ivms3f2klEoFAD42x3MyQQ.png"/></div></div></figure><p id="dda8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击创建，然后你会看到这个页面</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ke"><img src="../Images/947e3399f2636cd99490ad449b1ec086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h08sOPM6pcHEKuYcOwT8Nw.png"/></div></div></figure><p id="e454" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您在这里看到的，您可以指定想要创建的实例的名称。指定要在其中创建此实例的区域。您可以选择要用于实例的机器类型。有大量的机器可供选择，你可以根据你的要求。您甚至可以定制和创建自己的机器类型。</p><p id="340d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您还可以选择要用来启动该虚拟机的启动磁盘。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kf"><img src="../Images/760f23ad625f136afbd4a5725c945da4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eaA9pWft4CIB6bl0X6WGCg.png"/></div></div></figure><p id="e7ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以选择此实例将使用的服务帐户。现在不要担心服务帐户，只要把它看作是谷歌云平台识别和授权你的虚拟机的一种方式，如果它想与GCP的其他服务通信的话。</p><p id="33e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，为了允许传入和传出流量，我们有防火墙规则，这些规则使用标记应用于虚拟机。</p><p id="35a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有与管理、磁盘、SSH等相关的定制。我们将在今后研究这些问题。现在只需点击创建。</p><p id="731d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个创建过程是异步的，但是一旦创建了实例，您将看到一个带有实例名称的绿色复选标记。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kg"><img src="../Images/a1f764a4674e462c2657af46cfba0537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q_ZGMiCnJjthUNlDKeCzjQ.png"/></div></div></figure><p id="21ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">祝贺您，您已经成功创建了一个虚拟机。嗯（表示踌躇等）..你可能会认为这很无聊，因为你还没有使用你创造的东西。所以，我会给你一个小预告片，告诉你从这里你能做什么。</p><p id="e3da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击您在那里看到的SSH链接。您将能够看到您的虚拟实例的控制台，最酷的是您无需做任何事情就可以获得它的root访问权限。因此，不用浪费任何时间，只需以root用户身份登录，运行</p><pre class="js jt ju jv fd kh ki kj kk aw kl bi"><span id="8796" class="km kn hi ki b fi ko kp l kq kr">sudo su -</span></pre><p id="814d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将使您以root用户身份登录，您将看到如下内容</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ks"><img src="../Images/1ac96bbdb01665980624226ae58a681f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZZc6A41g0R5qlis9hCXj4w.png"/></div></div></figure><p id="5452" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中“实例-1”是您的实例的名称。现在，第一件也是最重要的事情是通过运行</p><pre class="js jt ju jv fd kh ki kj kk aw kl bi"><span id="c0ba" class="km kn hi ki b fi ko kp l kq kr">apt-get update</span></pre><p id="211b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将使用所有安全补丁和许多其他东西更新您的实例，并最终安装nginx服务器</p><pre class="js jt ju jv fd kh ki kj kk aw kl bi"><span id="9b23" class="km kn hi ki b fi ko kp l kq kr">apt-get install nginx -y</span></pre><p id="2b2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装完成后，使用以下命令检查nginx是否正在运行</p><pre class="js jt ju jv fd kh ki kj kk aw kl bi"><span id="740b" class="km kn hi ki b fi ko kp l kq kr">ps auwx | grep nginx</span></pre><p id="a2a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">厉害！现在转到您的控制台，点击外部IP。您应该会看到默认页面</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kt"><img src="../Images/a2c43192e833d939e55347c57939e780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*koQnuDxNv-VYfJXSCp51dA.png"/></div></div></figure><p id="fcf0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么，谁认为拥有自己的服务器会那么容易呢？。</p><p id="3397" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你也可以用“gcloud”做所有这些事情。通常“gcloud”会在你想用脚本创建实例的情况下使用。但是现在让我们看看如何用所有的默认值创建一个简单的实例。</p><p id="4c39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用gcloud创建虚拟机</strong></p><p id="4caf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">gcloud是google提供的命令行工具，我们可以将它安装在我们的系统中，也可以使用Google command shell，它预装了许多软件包，提供大约5GB的内存。出于我们的目的，我们将使用谷歌命令外壳。你可以点击屏幕右上角的图标打开云壳。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ku"><img src="../Images/846574ec0675a086084787a9c1296163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*tkX6XGORxVArBA9nUmG3ug.png"/></div></figure><p id="7354" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开后，您可以使用命令创建一个虚拟机实例</p><pre class="js jt ju jv fd kh ki kj kk aw kl bi"><span id="5d12" class="km kn hi ki b fi ko kp l kq kr">gcloud compute instances create instance-1 --zone us-central1-c</span></pre><p id="d722" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虚拟机是一个区域资源，因此我们必须指定要在其中创建实例的区域，并且我们不能在同一项目下的同一区域中有同名的实例。您还可以在“计算使用”下探索更多选项</p><pre class="js jt ju jv fd kh ki kj kk aw kl bi"><span id="62ea" class="km kn hi ki b fi ko kp l kq kr">gcloud compute instances create — help</span></pre><p id="3b92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它会要求您为虚拟机实例创建密码。如果您想创建一个空密码，只需点击enter。</p><p id="95f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在未来，我们将探索更多选项来定制我们的虚拟机，以及如何修改防火墙规则，提高虚拟机实例的安全性，对它们进行分组等。我们还将探索“gcloud”命令行工具。</p></div></div>    
</body>
</html>