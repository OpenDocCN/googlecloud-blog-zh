<html>
<head>
<title>Knative v0.9.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Knative v0.9.0</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/knative-v0-9-0-a6fa0a3b1f7d?source=collection_archive---------1-----------------------#2019-09-26">https://medium.com/google-cloud/knative-v0-9-0-a6fa0a3b1f7d?source=collection_archive---------1-----------------------#2019-09-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f4cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Knative发展得相当快。大约每6周就有一个新版本，每个版本都有重大变化。Knative v0.7.0完全是关于Knative发球的变化(<a class="ae jd" rel="noopener" href="/google-cloud/knative-serving-0-7-96e6d7be463e">我的帖子</a>)。Knative v0.8.0是关于Knative Build的弃用，支持Tekton管道(<a class="ae jd" rel="noopener" href="/google-cloud/migrating-from-knative-build-to-tekton-pipelines-68fc6de14373">我的帖子</a>)。</p><p id="81d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个多星期前发布了Knative <a class="ae jd" href="https://github.com/knative/serving/releases/tag/v0.9.0" rel="noopener ugc nofollow" target="_blank"> Serving v0.9.0 </a>和<a class="ae jd" href="https://github.com/knative/eventing/releases/tag/v0.9.0" rel="noopener ugc nofollow" target="_blank"> Eventing v0.9.0 </a>。在服务方面，有一个<em class="je"/><em class="je">v1 API</em>和一些关于自动缩放和冷启动的改进。在事件中，读取事件的方式发生了很大的变化。我想在这里概述一下这些变化。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/e8eacf1aa843df51373f11d3b1869067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DOThLZ2jCZpJqwpcY6k7jw.png"/></div></div></figure><h1 id="c222" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">ClusterChannelProvisioners CRDs</h1><p id="5822" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">从v0.8.0开始，已经从ClusterChannelProvisioners转移到CRDs，这在v0.9.0中结束。<a class="ae jd" href="https://github.com/knative/eventing/releases/tag/v0.9.0" rel="noopener ugc nofollow" target="_blank">发行说明</a>给出了更多细节，但这影响了Knative如何设置来传输事件。例如，在Knative的以前版本中，为了使用Google Cloud Pub/Sub作为事件传输，您需要创建一个带有<em class="je"> gcp-pubsub </em> provisioner的通道，如<a class="ae jd" href="https://knative.dev/v0.8-docs/eventing/samples/gcp-pubsub-source/" rel="noopener ugc nofollow" target="_blank">文档</a>中所述。</p><p id="ecd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个版本中，现在有一个具体的CRD，<em class="je">channels . pubsub . cloud . run</em>，由您创建。它包括该传输可用的所有配置参数。这使得查看可用参数和验证它们变得更加容易。</p><h1 id="165a" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">GCP项目创意</h1><p id="4d95" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">与GCP合作的kna tive是一个新项目，旨在实现轻松配置和消费谷歌云事件。现在，这是在Knative中消费Google Cloud事件的首选方式。它单独安装在Knative ( <a class="ae jd" href="https://github.com/google/knative-gcp/blob/master/docs/install/README.md" rel="noopener ugc nofollow" target="_blank">指令</a>)之上，允许读取云存储、云调度程序或云发布/订阅事件。</p><h1 id="b0fa" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">云发布/订阅订阅</h1><p id="d8c0" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">在我的<a class="ae jd" href="https://github.com/meteatamel/knative-tutorial" rel="noopener ugc nofollow" target="_blank"> Knative教程</a>中，我从Cloud Pub/Sub将事件读入Knative。Knative与GCP项目有多种方式读取发布/订阅消息到Knative。<a class="ae jd" href="https://github.com/google/knative-gcp/blob/master/docs/pullsubscription/README.md" rel="noopener ugc nofollow" target="_blank"> PullSubscription </a>是将云发布/订阅消息直接读入Knative的一种方式。</p><p id="1210" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这与先前版本的Knative略有不同。默认情况下，发布/订阅消息不再包装到CloudEvents中，因此您不必担心解开CloudEvents。由于您不再有CloudEvents，您也不必担心对CloudEvents的数据字段进行Base64解码(如果您仍然喜欢旧的行为，有一个<a class="ae jd" href="https://github.com/google/knative-gcp/blob/master/config/300-pullsubscription.yaml#L92-L95" rel="noopener ugc nofollow" target="_blank"> <em class="je">模式</em> </a>配置，您可以将其设置为<em class="je"> PushCompatible </em> ) <em class="je">。</em></p><p id="c3e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所有这些使得发布/订阅消息的处理比以前更简单。PullSubscription需要一个来自启用了发布/订阅的服务帐户的密码(<a class="ae jd" href="https://github.com/google/knative-gcp/tree/master/docs/pubsub" rel="noopener ugc nofollow" target="_blank">指令</a>)和一个如下所示的yaml定义文件:</p><pre class="jg jh ji jj fd ku kv kw kx aw ky bi"><span id="92e2" class="kz js hi kv b fi la lb l lc ld">apiVersion: pubsub.cloud.run/v1alpha1<br/>kind: PullSubscription<br/>metadata:<br/>  name: my-topic-source<br/>spec:<br/>  topic: my-topic<br/>  sink:<br/>    apiVersion: v1<br/>    kind: Service<br/>    name: event-display</span></pre><p id="bbe7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将一个发布/订阅主题链接到一个Kubernetes服务，但它可以是任何可寻址的内容，如Knative服务、通道、代理等。</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><p id="cc1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这能提供Knative在v.0.9.0中的一点变化。我已经更新了我的<a class="ae jd" href="https://github.com/meteatamel/knative-tutorial" rel="noopener ugc nofollow" target="_blank"> Knative教程</a>来使用Knative 0.9.0。<a class="ae jd" href="https://github.com/meteatamel/knative-tutorial/blob/master/docs/08-helloworldeventing.md" rel="noopener ugc nofollow" target="_blank"> Hello World Eventing </a>在一个简单的Kubernetes服务中完成读取发布/订阅消息所需的所有设置步骤。试试看！</p></div></div>    
</body>
</html>