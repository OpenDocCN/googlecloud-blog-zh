<html>
<head>
<title>Data governance: Tagging PII data through Google Sheets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据治理:通过Google Sheets标记PII数据</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/data-governance-tagging-pii-data-through-google-sheets-7927b7cd3dd9?source=collection_archive---------1-----------------------#2020-11-12">https://medium.com/google-cloud/data-governance-tagging-pii-data-through-google-sheets-7927b7cd3dd9?source=collection_archive---------1-----------------------#2020-11-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="bf52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将重点关注数据标签的工业化。您可以将标记操作视为向数据添加元数据。拥有关于表和字段的良好元数据是健壮的数据治理的首要前提。只有这样，您才能开始构建新的数据治理层，例如围绕个人身份信息的自动化流程(PII)。如何确保你的分析数据库可以系统地删除某人的数据，如果有人问？如何确保任何人都无法访问这些PII数据？只有在表和字段中有可靠的元数据的情况下，才能解决这些问题。</p><blockquote class="jd je jf"><p id="abfd" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">没有大数据分析，公司就像瞎子和聋子，像高速公路上的小鹿一样在网络上游荡。</p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jk"><img src="../Images/e7554117599f6cbc8615a4a22c9055ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*h2IIXmyNmb1ci7g4.jpg"/></div></div></figure><p id="a09d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如果说今天有什么能定义成功的企业，那就是对公司数据的成功理解、使用和策略。</strong>在每家公司，数据都在以指数速度增长。虽然这可能导致洞察力的增加，但它通常会导致公司迷失在这个巨大的数据沼泽中。</p><p id="d626" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于正确的原因，因为<strong class="ih hj">扩展到TB或Pb的数据需要一些强大的数据治理</strong>来理解这一切。</p><p id="3992" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在过去的两年里，我们一直致力于Google Cloud上的各种数据仓库项目以及这些项目的数据治理。big query与<a class="ae jw" href="https://cloud.google.com/data-catalog" rel="noopener ugc nofollow" target="_blank">数据目录</a>的结合使得通过单一平台管理整个组织的数据变得非常高效。</p><h1 id="d472" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">数据目录和大查询</h1><p id="eb7b" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated"><strong class="ih hj">数据目录是组织级别的资源</strong>，它将允许您通过单一访问点访问所有项目的数据。</p><p id="1a30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">默认情况下，BigQuery表的所有模式都会出现在那里。</strong>因此，它满足了数据治理支柱之一所需的可见性要求。</p><h1 id="c855" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">数据目录中的标签模板</h1><p id="949d" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">数据目录通过<a class="ae jw" href="https://cloud.google.com/data-catalog/docs/quickstart-tagging" rel="noopener ugc nofollow" target="_blank">标签模板</a>真正展示了其标签的可能性。</p><p id="4aa7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用这些模板，您可以定义一个标记模板，然后您可以为任何BigQuery表和任何表中的字段填充该模板。</p><p id="2ffb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">字段级别的标签示例包括:</p><ul class=""><li id="6e80" class="la lb hi ih b ii ij im in iq lc iu ld iy le jc lf lg lh li bi translated"><strong class="ih hj"> has_pii (boolean) </strong>:声明pii存在与否的布尔值</li><li id="3638" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><strong class="ih hj">描述(字符串)</strong>:明确的描述</li><li id="54ea" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><strong class="ih hj">分类(列举)</strong>:该字段包含的数据类型(id、金融、科学等。)</li><li id="6854" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated">等等。</li></ul><p id="be51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以轻松地想出十几个标签，让所有数据和业务分析师更容易地搜索和理解您的数据。</p><h1 id="4596" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">数据目录中的手动标记过程</h1><p id="b541" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">当您开始拥有许多标签和大量数据时，Data Catalog的一个缺点是，如果您通过UI进行标记，标记过程可能会非常耗时，而且不太方便。此外，不应该只有一个人负责标记。</p><p id="b465" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jw" href="https://en.wikipedia.org/wiki/Data_steward" rel="noopener ugc nofollow" target="_blank">数据管理员</a>可能需要事先与数据所有者讨论标记的创建和更改，然后在GCP控制台中手动创建标记。</p><p id="fa5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果这个过程可以简化和工业化，那不是很好吗？这正是我们通过在数据目录上创建一个名为Google sheets的UI层所解决的问题。</p><h1 id="d997" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">使用Google Sheets自动化标记过程的解决方案</h1><p id="88e2" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">借助我们的标签解决方案，数据管理员只需使用Google Sheets就可以轻松地将标签批量发布到数据目录中。通过使用一些<a class="ae jw" href="https://developers.google.com/apps-script" rel="noopener ugc nofollow" target="_blank">应用程序脚本</a>，我们自动将所有带有当前标签的BigQuery模式加载到Google Sheets中。然后，由任何数据管理员开始对数据进行大规模标记。</p><p id="04a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦他们完成标记，点击应用程序脚本“保存”按钮将触发一个批准过程，该过程将向数据所有者发送一封电子邮件进行审查。然后，数据所有者可以通过App Engine上托管的web应用程序查看所有更改。如果他/她同意更改，新的标签将被发布到数据目录。</p><h1 id="372e" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">在Google Sheets解决方案中标记PII数据的架构</h1><p id="a632" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">该流程的概要架构如下所示。真正的架构包括一些用于收集和验证数据的<a class="ae jw" href="https://www.fourcast.io/blog/google-cloud-functions-serverless-noops-solutions" rel="noopener ugc nofollow" target="_blank">云函数</a>，一个用于批准或拒绝过程的应用引擎服务，用于保存密钥集的数据存储等等。</p><p id="3e23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为用户，你唯一需要交互的工具是Google Sheet和App Engine，用于批准或拒绝标签中的更改。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lo"><img src="../Images/b7348bd70985fe188e092cb56f4b6a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kHp7IsPc_4zcO-ML.png"/></div></div></figure><p id="3d71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在幕后，有更多的事情发生，使整个过程变得健壮。以下是所使用的所有谷歌产品的完整架构:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lp"><img src="../Images/ab700de6b6cca289dee1280986417e27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Fr0YuwYvUPHJgBus.png"/></div></div></figure><p id="7053" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该架构有三个主要部分:</p><p id="077c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1。通过Google Sheets </strong>进行标记:数据管理员需要通过Google Sheet为所有数据(表和列级别)输入一系列标记，然后在数据所有者接受后将标记发布到数据目录。<br/>为了避免手动错误，我们在谷歌表单中添加了一些下拉菜单，让你更容易地了解你需要填写到标签中的值。还会执行一些数据验证过程，以便在将更改发送给数据所有者之前对其进行检查。Google表单中有两个功能:</p><ul class=""><li id="8aba" class="la lb hi ih b ii ij im in iq lc iu ld iy le jc lf lg lh li bi translated"><strong class="ih hj">刷新数据</strong>:这将调用一个谷歌云函数，从数据目录中获取所有数据的最新标签。</li><li id="af96" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><strong class="ih hj">保存数据</strong>:这将把你所有的标签保存在云存储的json文件中，同时向数据所有者发送一个批准请求。</li></ul><p id="87e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。批准流程</strong>:该部分是一个简单的web应用程序，托管在App Engine上，授权用户可通过<a class="ae jw" href="https://cloud.google.com/iap" rel="noopener ugc nofollow" target="_blank"> IAP </a>访问。数据所有者可以查看该web应用程序上的标签，如果他/她批准了更改，只需点击“批准”即可将所有标签分派给<a class="ae jw" href="https://cloud.google.com/tasks" rel="noopener ugc nofollow" target="_blank">云任务</a>。</p><p id="9a7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3。标签的发布:</strong>云任务队列上的一个任务对应一个BigQuery字段。这个队列的处理程序是一个云函数。这允许我们为每个任务利用大量的调用，并且只为每个函数调用运行的几毫秒付费。</p><p id="7a87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结论Google Cloud提供了令人难以置信的分析套件，为了保护数据并提供数据可见性，将它与强有力的治理结合使用非常重要。这篇文章关注于通过数据目录上的Google Sheets来工业化你的标记过程。在下一篇文章中，我们将看到如何通过BigQuery的内置问题自动加密和解密您的PII数据，这些问题是关于这种从数据治理开始的伟大方式，或者关于任何其他数据&amp;分析挑战？我们很高兴与您讨论最佳的前进方式！如何通过加速您的数据分析战略来节省大量时间&amp;资源&amp;？阅读有关我们的数据仓库加速器Flycs的更多信息！</strong> <a class="ae jw" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/aead-encryption-concepts#:~:text=AEAD%20encryption%20functions.-,Purpose%20of%20AEAD%20encryption,by%20using%20encryption%20at%20rest.&amp;text=AEAD%20encryption%20functions%20allow%20you,rotate%20keys%20within%20a%20keyset." rel="noopener ugc nofollow" target="_blank"> AEAD </a> <strong class="ih hj">功能连同数据目录。</strong></p></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><p id="f37b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">原载于</em><a class="ae jw" href="https://www.fourcast.io/blog/starting-with-data-governance-tagging-personally-identifiable-information-data-through-google-sheets" rel="noopener ugc nofollow" target="_blank"><em class="jg">https://www . fourcast . io</em></a><em class="jg">。</em></p></div></div>    
</body>
</html>