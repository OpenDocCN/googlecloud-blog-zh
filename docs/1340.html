<html>
<head>
<title>Google Cloud Data Catalog Filesets: unlock its full potential</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google云数据目录文件集:释放其全部潜力</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/google-cloud-data-catalog-filesets-unlock-its-full-potential-5625c745303c?source=collection_archive---------0-----------------------#2020-03-26">https://medium.com/google-cloud/google-cloud-data-catalog-filesets-unlock-its-full-potential-5625c745303c?source=collection_archive---------0-----------------------#2020-03-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="a824" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">用有用的文件统计数据丰富你的Google云存储文件集</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/268ab2da59074bbf9490eaff013d0449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BRYv00lypvZJYSBd0AzIuA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">由<a class="ae jn" href="https://unsplash.com/@bendavisual" rel="noopener ugc nofollow" target="_blank">本达维亚</a>在<a class="ae jn" href="https://unsplash.com/photos/FiZTaNTj2Ak" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><h1 id="f079" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">进退两难</h1><p id="525b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">您是否曾经忘记自己在云提供商处存储了多少文件？您的对象存储解决方案是否杂乱无章？你有没有不知道的空桶？您是否希望更好地管理您的文件，以符合所有这些新的数据保护法规？</p><blockquote class="lc"><p id="c614" class="ld le hi bd lf lg lh li lj lk ll lb dx translated"><strong class="ak">数据目录来救场了！</strong></p></blockquote><p id="7d63" class="pw-post-body-paragraph kg kh hi ki b kj lm ij kl km ln im ko kp lo kr ks kt lp kv kw kx lq kz la lb hb bi translated">如果你不熟悉<strong class="ki hj">数据目录</strong>，一个<a class="ae jn" href="https://cloud.google.com/blog/products/data-analytics/google-cloud-data-catalog-now-available-in-public-beta" rel="noopener ugc nofollow" target="_blank">最近宣布的<strong class="ki hj">谷歌云的大数据</strong>服务家族的</a>成员，在medium上有一个很棒的<a class="ae jn" rel="noopener" href="/google-cloud/data-catalog-hands-on-guide-a-mental-model-dae7f6dd49e">系列</a>解释了它的一些功能。</p><blockquote class="lc"><p id="6ab2" class="ld le hi bd lf lg lh li lj lk ll lb dx translated"><a class="ae jn" href="https://cloud.google.com/data-catalog/" rel="noopener ugc nofollow" target="_blank"> Data Catalog是一种全面管理和可扩展的元数据管理服务，使组织能够快速发现、管理和了解他们在Google Cloud中的所有数据</a></p></blockquote><p id="9a52" class="pw-post-body-paragraph kg kh hi ki b kj lm ij kl km ln im ko kp lo kr ks kt lp kv kw kx lq kz la lb hb bi translated">有了最新版本，用户现在能够<a class="ae jn" href="https://cloud.google.com/data-catalog/docs/how-to/filesets" rel="noopener ugc nofollow" target="_blank">创建文件集</a>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/cbe4671d9b6d87b181c49bb3fbfa6e99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JRYAnDF62kJMZYt2RCyyxQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">来自<a class="ae jn" href="https://cloud.google.com/data-catalog/docs/how-to/filesets#data-catalog-fileset-console" rel="noopener ugc nofollow" target="_blank">谷歌官方文档</a></figcaption></figure><p id="9cfa" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">云存储文件集是云存储中一个或多个文件的集合。定义基数的是创建时提供的<code class="du lx ly lz ma b">file pattern</code>。</p><blockquote class="mb mc md"><p id="785b" class="kg kh me ki b kj ls ij kl km lt im ko mf lu kr ks mg lv kv kw mh lw kz la lb hb bi translated">稍后我们将更多地讨论文件模式，并给出一些具体的例子。</p></blockquote><p id="3cd0" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">为了创建您的文件集，首先您需要有一个用户定义的条目组，让我们来理解这种关系:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/1b579bd54b1c55796911156857d5fe23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dDtnJ-Y1LkMwU946f2w2gQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">基于<a class="ae jn" href="https://cloud.google.com/data-catalog/docs/how-to/filesets" rel="noopener ugc nofollow" target="_blank">谷歌官方文件</a></figcaption></figure><p id="e8f4" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">文件集条目包含在用户创建的条目组中。因此，我们必须事先创建条目组。</p><blockquote class="mb mc md"><p id="bc2d" class="kg kh me ki b kj ls ij kl km lt im ko mf lu kr ks mg lv kv kw mh lw kz la lb hb bi translated">请遵循<a class="ae jn" href="https://cloud.google.com/data-catalog/docs/how-to/filesets" rel="noopener ugc nofollow" target="_blank"> google官方文档</a>中的说明，如果您想测试它并创建您的文件集条目，这里有多种语言的示例，展示了如何做。</p></blockquote><p id="176b" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">一旦设置了文件集条目，就可以使用DataCatalog的搜索引擎发现它，并向它添加业务标记，但是这就产生了一个问题…如果这个文件集条目没有指向任何东西，该怎么办？</p><p id="a027" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">我们可以有一个<code class="du lx ly lz ma b">file pattern</code>来匹配一个桶中的零个文件，但这可能不会有很大帮助…我们如何用关于我们文件的有用元数据来丰富它，并改进DataCatalog的搜索功能以及我们自己的元数据管理？</p></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><h1 id="adb3" class="jo jp hi bd jq jr mq jt ju jv mr jx jy io ms ip ka ir mt is kc iu mu iv ke kf bi translated">文件集丰富器</h1><p id="25e1" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">这是文件集丰富器的目标:</p><div class="mv mw ez fb mx my"><a href="https://github.com/mesmacosta/datacatalog-util" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hj fi z dy nd ea eb ne ed ef hh bi translated">mesmacosta/datacatalog-util</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">管理Google Cloud数据目录助手命令和脚本的Python包。声明:这不是一个正式的…</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">github.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm jh my"/></div></div></a></div><p id="d7bc" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">它是<code class="du lx ly lz ma b">datacatalog-util</code> python包的一部分，使用<code class="du lx ly lz ma b">enrich</code>命令，您的DataCatalog文件集条目将被标记上与所提供的<code class="du lx ly lz ma b">file pattern</code>相匹配的文件的统计信息。</p><blockquote class="mb mc md"><p id="b0dd" class="kg kh me ki b kj ls ij kl km lt im ko mf lu kr ks mg lv kv kw mh lw kz la lb hb bi translated">你可以简单地通过<code class="du lx ly lz ma b">pip3 install datacatalog-util</code>来安装它。</p><p id="a391" class="kg kh me ki b kj ls ij kl km lt im ko mf lu kr ks mg lv kv kw mh lw kz la lb hb bi translated">声明:这不是一个官方支持的谷歌产品，它是一个开源的python包，对贡献开放=)</p></blockquote><p id="c6b4" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">为了演示这一功能，让我们看一下这个场景，其中我们有3个不同的文件存储桶:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nn"><img src="../Images/1468cf7a7854830a0f8b86c6d1f70ce0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NtwuVsakMXKouKm0Be1XCA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">GCP项目和装有文件的存储桶</figcaption></figure><p id="5e72" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">现在，我们将在项目中创建4个文件集条目:</p><ul class=""><li id="f1f2" class="no np hi ki b kj ls km lt kp nq kt nr kx ns lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">file pattern</code> gs://orders*/*csv</li><li id="fe4a" class="no np hi ki b kj nx km ny kp nz kt oa kx ob lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">file pattern</code> gs://orders*/*</li><li id="c44f" class="no np hi ki b kj nx km ny kp nz kt oa kx ob lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">file pattern</code> gs://users_pii/*</li><li id="4b5a" class="no np hi ki b kj nx km ny kp nz kt oa kx ob lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">file pattern</code> gs://new_orders/*</li></ul><p id="3813" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">让我们来看看它们:</p><div class="iy iz ja jb fd ab cb"><figure class="oc jc od oe of og oh paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><img src="../Images/6b20fd9f9eebcc85914f1aea343e7be9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*k_m5wjCk2fSb7G7YIwqnEA.jpeg"/></div></figure><figure class="oc jc oi oe of og oh paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><img src="../Images/156262e21b828c2bb2760cec57dc84a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*3DWITvv197fGp4dXqNNqww.jpeg"/></div></figure></div><div class="ab cb"><figure class="oc jc oj oe of og oh paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><img src="../Images/3e53ff302a224914213d3246c33b1c00.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*6jjvSRABnL8gVfKe8Z3iLg.jpeg"/></div></figure><figure class="oc jc ok oe of og oh paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><img src="../Images/7a6a6dbb8bb7a3342de9be4f044bee87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*FgBijd1rCJTvOnlOiAeYyg.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx ol di om on translated">创建的文件集条目</figcaption></figure></div><blockquote class="mb mc md"><p id="29df" class="kg kh me ki b kj ls ij kl km lt im ko mf lu kr ks mg lv kv kw mh lw kz la lb hb bi translated">不是很有用吧？</p></blockquote><p id="2df4" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">文件集丰富器功能将向每个文件集条目添加以下标记字段:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es oo"><img src="../Images/fbeffa8f599b6485da41e12ddfd97e5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ca7sGzGT3Lp3_APos7t8Pw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">标签字段选项</figcaption></figure><p id="0397" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">它甚至允许用户选择应该添加到条目中的字段，如果没有指定字段，则应用上面的所有字段。</p><p id="1ac5" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">让我们运行脚本:</p><pre class="iy iz ja jb fd op ma oq or aw os bi"><span id="340f" class="ot jp hi ma b fi ou ov l ow ox">datacatalog-util filesets enrich --project-id my-project</span></pre><ul class=""><li id="9a11" class="no np hi ki b kj ls km lt kp nq kt nr kx ns lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">file pattern</code> gs://orders*/*csv</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es oy"><img src="../Images/4cc6fbd75cb68ac2a07428fe38abfc3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0cW_o7dvLV44MajBMzmfVg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">CSV订单文件集增加了标签</figcaption></figure><p id="f920" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">我们可以看到找到了两个存储桶，并且我们有4个CSV文件匹配该模式。</p><ul class=""><li id="83dd" class="no np hi ki b kj ls km lt kp nq kt nr kx ns lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">file pattern</code> gs://orders*/*</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es oz"><img src="../Images/52c24a5bdeef924ff1e9ec933dea92e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C32RH4EwoKF8OvYgWddUOA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">用标记丰富的订单文件集</figcaption></figure><p id="1823" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">我们可以看到现在找到了7个文件，我们有一个<code class="du lx ly lz ma b">unkown_file_type</code>，有人出错了？:)</p><ul class=""><li id="129a" class="no np hi ki b kj ls km lt kp nq kt nr kx ns lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">file pattern</code> gs://users_pii/*</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es pa"><img src="../Images/2bdbd5d0b794f71e77ac86e96abd9b96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mgW-jff7Ec64viIuhtqodQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">标记丰富的PII数据文件集</figcaption></figure><p id="0e94" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">我们可以看到现在找到了6个文件，我们有5种不同的文件类型。也许我们应该标准化这个桶？</p><ul class=""><li id="0ca0" class="no np hi ki b kj ls km lt kp nq kt nr kx ns lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">file pattern</code> gs://new_orders/*</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es pb"><img src="../Images/667802bb54ae38179589616646329cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U533mz-qVDckD11oYv_9iQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">标签丰富的新订单文件集</figcaption></figure><p id="d18a" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">等等，这个桶根本不存在，也许我们应该删除这个条目？</p><ul class=""><li id="a0ad" class="no np hi ki b kj ls km lt kp nq kt nr kx ns lb nt nu nv nw bi translated">奖金:<code class="du lx ly lz ma b">file pattern</code> gs://*/*</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es pc"><img src="../Images/df2210685f096872911cc89938a0aec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jGlXo5W9O7A8UrPof2aYig.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">标记丰富了我的项目文件集</figcaption></figure><p id="24ea" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">您甚至可以对项目中的所有存储桶运行它，通过这样做，我们发现我们有868个文件，其中89个是未知类型的。</p><h1 id="10cb" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">数据目录搜索</h1><p id="1210" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">这就是数据目录的亮点，想象一下，您可能有数千个存储桶和文件集……如果您无法搜索并找到数据，数据的质量有多好并不重要。</p><blockquote class="mb mc md"><p id="1feb" class="kg kh me ki b kj ls ij kl km lt im ko mf lu kr ks mg lv kv kw mh lw kz la lb hb bi translated">如果你想了解搜索的基础知识，请阅读这篇解释其特点的伟大的<a class="ae jn" rel="noopener" href="/google-cloud/data-catalog-hands-on-guide-search-get-lookup-with-python-82d99bfb4056">文章</a>，或者官方的<a class="ae jn" href="https://cloud.google.com/data-catalog/docs/quickstarts/quickstart-search-tag" rel="noopener ugc nofollow" target="_blank">文档</a>。</p></blockquote><p id="9cde" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">让我们运行一些查询来展示这一点:</p><ul class=""><li id="9ed5" class="no np hi ki b kj ls km lt kp nq kt nr kx ns lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">tag:fileset_enricher_findings.buckets_found=0</code></li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es pd"><img src="../Images/026e873328fb3876b26c2b40d9ac05dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ea3FY_iiWlcIuJV0bHumHQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">搜索用户界面，找到零个存储桶</figcaption></figure><ul class=""><li id="a779" class="no np hi ki b kj ls km lt kp nq kt nr kx ns lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">tag:fileset_enricher_findings.buckets_found&gt;0</code></li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es pe"><img src="../Images/342dc86b82a0ef6ded7f38edec86ec34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YCkWWPXoH7yW9LvvkwgUhQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">搜索用户界面，找到大于零的桶</figcaption></figure><ul class=""><li id="efe6" class="no np hi ki b kj ls km lt kp nq kt nr kx ns lb nt nu nv nw bi translated"><code class="du lx ly lz ma b">tag:fileset_enricher_findings.files_by_type:png</code></li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es pf"><img src="../Images/b9aede9e14a1533766889cc628f70d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zcA-tZUbDlBG28XgeWH5NA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">搜索界面，找到png文件</figcaption></figure><p id="e24e" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">这些只是几个选项，但是您可以使用任何标签字段来搜索并从您的元数据中获得有意义的见解！</p><h1 id="474f" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">负荷试验</h1><p id="b2ee" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">总结一下……当我们考虑一个对象存储解决方案时，比如Google云存储，处理大量文件是很常见的，所以为了了解这个python脚本是如何执行的，我们创建了一个场景，将<code class="du lx ly lz ma b">1008689</code>文件放在一个桶中。因为我们只处理文件元数据，应该不会花很长时间，对吗？让我们看看它是如何运作的。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es pg"><img src="../Images/7bf80302e7e18acff61c85fcece8d264.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*drtTiJkLHLAl7mlF7St6gQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">来自100多万个文件的结果</figcaption></figure><p id="2968" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">一个<code class="du lx ly lz ma b">e2-medium</code>虚拟机(2个vCPUs，4GB内存)用来运行Python脚本，花了3分钟完成执行。</p><h1 id="e6b2" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">结束语</h1><p id="d41c" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在本文中，我们已经介绍了如何用关于文件的有用统计数据来丰富您的数据目录文件集条目，然后搜索它，重要的是要指出，这个数据目录功能目前在测试版中，很可能以后会得到改进，同时这个python脚本可以是改进元数据管理的一个很好的选择。此外，请记住，python脚本使用GCS <code class="du lx ly lz ma b">list_buckets</code>和<code class="du lx ly lz ma b">list_blobs</code>API来提取与<code class="du lx ly lz ma b">file pattern</code>匹配的元数据并生成文件统计数据，因此它们的计费策略将适用。<br/>希望有所帮助！干杯！</p></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><p id="8f38" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp lu kr ks kt lv kv kw kx lw kz la lb hb bi translated">【更新】改为使用<code class="du lx ly lz ma b">datacatalog-util</code> python包。</p><h1 id="4e4d" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">资源</h1><ol class=""><li id="9b4f" class="no np hi ki b kj kk km kn kp ph kt pi kx pj lb pk nu nv nw bi translated"><strong class="ki hj">数据目录正式文件集文档</strong>:<a class="ae jn" href="https://cloud.google.com/data-catalog/docs/how-to/filesets" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/data-catalog/docs/how-to/filesets</a></li><li id="8dc8" class="no np hi ki b kj nx km ny kp nz kt oa kx ob lb pk nu nv nw bi translated"><strong class="ki hj">data catalog Utils GitHub</strong>:【https://github.com/mesmacosta/datacatalog-util T2】</li><li id="af86" class="no np hi ki b kj nx km ny kp nz kt oa kx ob lb pk nu nv nw bi translated"><strong class="ki hj"> DataCatalog medium系列</strong>:<a class="ae jn" rel="noopener" href="/google-cloud/data-catalog-hands-on-guide-a-mental-model-dae7f6dd49e">https://medium . com/Google-cloud/data-catalog-hands-on-guide-a-mental-model-DAE 7 f 6 DD 49 e</a></li><li id="832f" class="no np hi ki b kj nx km ny kp nz kt oa kx ob lb pk nu nv nw bi translated"><strong class="ki hj">数据目录入门指南</strong>:<a class="ae jn" href="https://cloud.google.com/data-catalog/docs/quickstarts/quickstart-search-tag" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/Data-Catalog/docs/quick starts/quick start-search-tag</a></li></ol></div></div>    
</body>
</html>