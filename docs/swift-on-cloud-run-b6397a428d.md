# äº‘è¿è¡Œä¸Šçš„ Swift

> åŸæ–‡ï¼š<https://medium.com/google-cloud/swift-on-cloud-run-b6397a428d?source=collection_archive---------1----------------------->

![](img/f92b945e4b975788f5654f67eb649d85.png)

Swift äº‘è¿è¡Œã€‚

> Swift å¾½æ ‡æ˜¯ Apple Inc .çš„å•†æ ‡ã€‚Swift å¾½æ ‡çš„ä½¿ç”¨æ ¹æ®ä¸ Swift ç¼–ç¨‹è¯­è¨€æ•™å­¦ç›¸å…³çš„æŠ€æœ¯å‡ºç‰ˆç‰©è¿›è¡Œã€‚

***è¿…æ·*** ( [ğŸ”—](https://developer.apple.com/swift/resources/) ) æ˜¯ä¸€ç§åˆ›æ–°çš„å¼€æºç¼–ç¨‹è¯­è¨€ï¼Œç”± Apple å¼€å‘ï¼Œæ—¨åœ¨è®©å„åœ°çš„è½¯ä»¶åˆ›å»ºèµ·æ¥æ›´å®‰å…¨ã€æ›´å¿«é€Ÿã€æ›´æœ‰è¶£ã€‚

***Vapor***([Vapor . codes](https://vapor.codes/))æ˜¯ä¸€ä¸ªåŸºäºè‹¹æœ [SwiftNIO](https://github.com/apple/swift-nio) ä¹‹ä¸Šçš„éé˜»å¡ã€äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œç”¨ Swift ç¼–å†™ï¼Œå…³æ³¨ç±»å‹å®‰å…¨ã€‚

æ€»ä¹‹ï¼Œæ‚¨å¯ä»¥æ„å»ºå¼ºå¤§çš„ web æœåŠ¡ï¼Œè¿™äº›æœåŠ¡å¯ä»¥æ‰˜ç®¡åœ¨äº‘è¿è¡Œä¹‹ä¸Šã€‚è¿™ç¯‡åšå®¢å°†ä¼šç»™ä½ ä¸€ä¸ªå¿«é€Ÿçš„å¼€å§‹ã€‚

# å…ˆå†³æ¡ä»¶

è¦ä½¿ç”¨ Swiftï¼Œä½ éœ€è¦ä¸€ä¸ªå·¥å…·ï¼ŒXcodeã€‚

*   é€šè¿‡ App Store å®‰è£… Xcode 11.4+(å…è´¹)
*   æ‰“å¼€ Xcode å¹¶å®‰è£…ä»»ä½•æ›´æ–°ã€‚
*   ç¡®ä¿ Swift åœ¨æ‚¨çš„ç»ˆç«¯ä¸­å¯ç”¨:`swift --version`

å®‰è£… Xcode åï¼Œä½ åº”è¯¥å¯ä»¥è®¿é—® S `wift.`

# è®¾ç½®è’¸æ±½

å¯¹äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¼€æº web æ¡†æ¶ Vaporã€‚

1.  é€šè¿‡è‡ªåˆ¶è½¯ä»¶å®‰è£…`vapor`:

```
brew install vapor/tap/vapor
```

2.æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Vapor é¡¹ç›®:`vapor`

```
vapor new Hello
```

3.å‡ºç°æç¤ºæ—¶ï¼Œè¯´å‡º`n`ä»¥ä½¿ç”¨`Fluent`ã€‚

æ‚¨çš„ç»ˆç«¯åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:

![](img/d456ab21334278fd47e9a866a84fa65d.png)

è’¸æ±½ CLI

ä½¿ç”¨ Vapor å·¥å…·ç®±è®¾ç½® Xcode é¡¹ç›®:

```
cd Hello && vapor xcode
```

> æ³¨æ„:Xcode æ˜¯å¼€å‘ Vapor åº”ç”¨ç¨‹åºçš„å¥½æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ä»»ä½•ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ã€‚

è¦æ„å»ºå¹¶è¿è¡Œæ‚¨çš„ Vapor åº”ç”¨ç¨‹åºï¼Œè¯·ç¡®ä¿æ‚¨æ‹¥æœ‰æˆ‘ä»¬åˆ›å»ºçš„`Hello`æ–¹æ¡ˆå¹¶é€‰æ‹©äº†`My Mac`è®¾å¤‡:

![](img/1c826e0ff60c78b36f2eb7e8ef68ee46.png)

Xcode åº”è¯¥ç”¨â€œæˆ‘çš„ Macâ€æ–¹æ¡ˆåœ¨å·¥å…·æ ä¸­æ˜¾ç¤ºä½ çš„â€œHelloâ€ç¨‹åºã€‚

é€‰æ‹©åï¼Œåªéœ€ç‚¹å‡»æŒ‰é’®æˆ–æŒ‰ä¸‹`âŒ˜R`ã€‚æ‚¨ä¼šæ³¨æ„åˆ°æ—¥å¿—ä¸­å†™ç€:`Server starting on [http://127.0.0.1:8080](http://127.0.0.1:8080)`ã€‚

è½¬åˆ° [http://localhost:8080/](http://localhost:8080/) æ¥æµ‹è¯•æ‚¨çš„ web æœåŠ¡å™¨ã€‚æ‚¨åº”è¯¥çœ‹åˆ°:

```
It works!
```

## æ£€æŸ¥ä»£ç 

åœ¨ Xcode ä¸­ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿæ·±å…¥æºä»£ç å¹¶æŸ¥çœ‹æ—¥å¿—:

![](img/beb8013b2bac48b5d3a6bf42983a69e0.png)

Xcode å·¥ä½œåŒºçª—å£çš„å®Œæ•´å±å¹•æˆªå›¾ã€‚

æˆ‘ä¸ä¼šä»‹ç»æ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œä½†æ˜¯ä¸»ç¨‹åºæœ‰ä¸€ä¸ªé»˜è®¤è·¯ç”±å™¨ç”¨äº`/` `GET`è¯·æ±‚ï¼Œè¿˜æœ‰ä¸€ä¸ªè·¯ç”±å™¨ç”¨äº`/hello` `GET`è¯·æ±‚:

ä¸€ä¸ªç®€å•çš„è’¸æ±½è·¯ç”±å™¨ã€‚

# ä½¿ç”¨æ–­ç‚¹è°ƒè¯•

é€šè¿‡æ·»åŠ æ–­ç‚¹æ¥è°ƒè¯•æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨è°ƒè¯•åŒºåŸŸè¿›è¡Œæ£€æŸ¥:

![](img/563b1fca08e39c87eabea1c723fbb3f4.png)

# æœ¬åœ°æµ‹è¯•

ä¸€ä¸ªæ ·æœ¬å•å…ƒæµ‹è¯•æ­£åœ¨`Tests`ä¸‹è¿›è¡Œã€‚è¦è¿è¡Œæ‚¨çš„å•å…ƒæµ‹è¯•ï¼Œè¯·æŒ‰`Command + U`ã€‚

![](img/34ae9104ffd9cf8829936a618ef1eb77.png)

Xcode ä¸­æµ‹è¯•æˆåŠŸæ—¶çš„é€šçŸ¥ã€‚

# éƒ¨ç½²åˆ°äº‘è¿è¡Œ

é€šè¿‡é¦–å…ˆæ„å»ºç„¶åéƒ¨ç½² Docker å®¹å™¨æ˜ åƒ(ä½¿ç”¨ç”Ÿæˆçš„`Dockerfile`)ï¼Œè½»æ¾åœ°å°†æ‚¨çš„ web åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ° Cloud Run:

æ„å»ºå¹¶è¿è¡Œæ‚¨çš„å®¹å™¨

åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæ„å»ºå®¹å™¨èŠ±è´¹äº† 10m23sã€‚

è¿™æ˜¯ä¸Šé¢éƒ¨ç½²åœ¨ Cloud Run ä¸Šçš„ Swift/Vapor åº”ç”¨ç¨‹åº:

> [**https://vapor-Q7 vieseilq-UC . a . run . app**](https://vapor-q7vieseilq-uc.a.run.app)

æ‚¨æ­£åœ¨è¿è¡Œç”¨ Swift ç¼–å†™çš„åŸºäºå®¹å™¨çš„è‡ªåŠ¨æ‰©å±• web æœåŠ¡å™¨ï¼ğŸ‰

## æ„Ÿè°¢é˜…è¯»ï¼

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡åšå®¢ï¼Œä½ å¯èƒ½ä¹Ÿä¼šå–œæ¬¢å…¶ä»–çš„å­¦ä¹ èµ„æº:

*   [ğŸ¦•äº‘è¿è¡Œæ—¶çš„å™ªå£°](/google-cloud/deno-on-cloud-run-89ae64d1664d)
*   [ğŸ’§è’¸æ±½ä»£ç ](http://vapor.codes)