<html>
<head>
<title>Automating Cloud Storage Data Classification — Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化云存储数据分类—第3部分</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/automating-cloud-storage-data-classification-dlp-api-and-cloud-function-7546b3763203?source=collection_archive---------0-----------------------#2020-03-16">https://medium.com/google-cloud/automating-cloud-storage-data-classification-dlp-api-and-cloud-function-7546b3763203?source=collection_archive---------0-----------------------#2020-03-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ece7" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在云中烹饪</h2></div><p id="ae27" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">作者:<a class="ae jt" href="https://twitter.com/pvergadia" rel="noopener ugc nofollow" target="_blank">普里扬卡·韦尔加迪亚</a>，<a class="ae jt" href="https://twitter.com/jbrojbrojbro" rel="noopener ugc nofollow" target="_blank">珍妮·布朗</a></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/c4bcbde49cdae22ad3e3f5c644ded927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aogq0U1NY2JEfA9jWI4-8g.gif"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">#GetCookingInCloud</figcaption></figure><h1 id="0b68" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">介绍</h1><p id="f22c" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">“<a class="ae jt" rel="noopener" href="/@pvergadia/get-cooking-in-cloud-an-introduction-5b3b90de534e">在云中烹饪</a>”是一个博客和<a class="ae jt" href="https://www.youtube.com/playlist?list=PLIivdWyY5sqIOyeovvRapCjXCZykZMLAe" rel="noopener ugc nofollow" target="_blank">视频</a>系列，帮助企业和开发者在谷歌云上构建商业解决方案。在这个系列中，我们计划确定开发人员希望在Google cloud上构建的特定主题。一旦确定，我们就以此为主题制作一个迷你系列。</p><p id="561d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个迷你系列中，出于安全和组织的目的，我们将介绍Google云存储中数据分类的自动化。</p><ol class=""><li id="9d8e" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lm ln lo lp bi translated"><a class="ae jt" rel="noopener" href="/google-cloud/automating-cloud-storage-data-classification-overview-35a63f39bb02">用例及整体流程概述</a></li><li id="6b8e" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated"><a class="ae jt" rel="noopener" href="/google-cloud/automating-cloud-storage-data-classification-setup-cloud-storage-and-pub-sub-8cacfcf8ba14">深入探讨如何创建桶和云发布/订阅主题和订阅</a></li><li id="4986" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">使用DLP API创建云函数并进行测试(<strong class="iz hj">本文</strong>)</li></ol><p id="0299" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将创建云函数，设置DLP API，并测试我们的应用程序的自动化数据分类。</p><h1 id="45e6" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">你将学习和使用的东西</h1><p id="7732" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">如何用谷歌云存储实现数据的自动上传和分类？</p><ul class=""><li id="3db3" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lv ln lo lp bi translated"><strong class="iz hj">前端AppEngine </strong></li><li id="6cb4" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated"><strong class="iz hj">谷歌云存储</strong>存储菜谱提交文件</li><li id="47af" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated"><strong class="iz hj">发布/订阅</strong>消息</li><li id="8a33" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">云功能以无服务器的方式实现快速自动化</li><li id="fa10" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated"><strong class="iz hj"> DLP API </strong>检测私人信息</li><li id="8b5f" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated"><a class="ae jt" href="https://cloud.google.com/solutions/automating-classification-of-data-uploaded-to-cloud-storage" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj">此解决方案</strong> </a> <strong class="iz hj"> </strong>用于自动将数据分类上传到云存储</li></ul><h1 id="2d62" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">看看这个视频</h1><figure class="jv jw jx jy fd jz"><div class="bz dy l di"><div class="lw lx l"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">视频:自动化云存储数据分类:DLP API和云</figcaption></figure><h1 id="77db" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated"><strong class="ak">回顾</strong></h1><p id="57ff" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">在最近的两篇博客[ <a class="ae jt" rel="noopener" href="/google-cloud/automating-cloud-storage-data-classification-overview-35a63f39bb02"> 1 </a> ] [ <a class="ae jt" rel="noopener" href="/@pvergadia/automating-cloud-storage-data-classification-setup-cloud-storage-and-pub-sub-8cacfcf8ba14"> 2 </a> ]中，我们已经谈到了晚餐赢家——一个从世界各地的用户那里收集菜谱，并对其进行评判，然后发布获胜菜谱的应用程序。</p><p id="9e03" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们知道，最初可能会有一些个人信息与这些提交内容相关联，需要在其他事情发生之前删除，我们希望这是一个无缝的自动化过程。</p><p id="4933" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们看到了他们如何通过使用云存储、云功能、DLP和发布/订阅来自动化和分类上传数据的架构。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ly"><img src="../Images/6b881995e01b2231e3c374bb9637175f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BjHeyECe0nJMQL-a"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">这是使用云发布/订阅、云功能和DLP API进行自动数据分类的架构</figcaption></figure><h1 id="2e80" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated"><strong class="ak">晚餐赢家的两个云函数</strong></h1><p id="e5e9" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">对于Dinner，我们需要两个云函数:一个在对象上传到云存储时调用，另一个在云发布/订阅队列中收到消息时调用。</p><p id="8087" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们从创建从GCS桶触发的云函数开始。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lz"><img src="../Images/3219a2955e1553a42b9e21b2186045f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/0*RmpWz3xw2kaKY6SN"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">创建云功能—“创建_ DLP _作业”</figcaption></figure><ol class=""><li id="cc10" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lm ln lo lp bi translated">我们将开放云功能并创建一个新功能。将其命名为“create_DLP_job”</li><li id="0fbf" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">在触发器字段中，我们将选择云存储。</li><li id="bee2" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">并从存储桶浏览器中选择隔离存储桶。</li><li id="34da" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">运行时选择Python 3.7。</li><li id="8e0e" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">在内联编辑器中，复制并粘贴main.py和requirements.txt中下面描述的链接中的代码。</li><li id="5586" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">您会发现有一个创建DLP作业功能，当配方上传到桶中时，该功能会创建DLP作业。</li><li id="a1f2" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">在要执行的函数中，我们将用<em class="ma"> create_DLP_job </em>替换<em class="ma"> hello_gcs </em>，并创建函数</li></ol><p id="edb9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们需要创建cloud函数，当在Cloud Pub/Sub队列中收到消息时，该函数将被调用。</p><ol class=""><li id="f10b" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lm ln lo lp bi translated">这几乎是一样的，但这次我们将在触发器字段中选择云发布/订阅，进入我们的发布/订阅主题。</li><li id="4d14" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">我们将使用与上次相同的函数代码，但是在要执行的函数中，这次我们使用<em class="ma"> resolve_DLP </em>。至此，我们已经准备好了两种云功能。</li></ol><h1 id="baa2" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated"><strong class="ak">测试自动化</strong></h1><p id="672c" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">现在是关键时刻了。我们的安全应用程序自动化的秘诀对晚餐赢家有用吗？我们需要测试，以确保正确的自动化和检测内容中的私人信息类型。</p><p id="4aad" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">出于本练习的目的，我们将敏感数据信息类型定义为:姓名、电子邮件地址、位置和电话号码。但是您可以在代码中根据您自己的需求对其进行修改。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es mb"><img src="../Images/e47ae7936e6e0c4871b7ce02cc7493ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/0*iF_c3wvPCCecBw91"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">晚餐赢家</figcaption></figure><ol class=""><li id="2aaf" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lm ln lo lp bi translated">开放云壳</li><li id="8793" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">克隆git repo<a class="ae jt" href="https://github.com/GoogleCloudPlatform/dlp-cloud-functions-tutorials.git" rel="noopener ugc nofollow" target="_blank">https://github . com/Google cloud platform/DLP-cloud-functions-tutorials . git</a></li><li id="a09f" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">导航到示例数据。</li><li id="e6ff" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">将文件复制到GCS隔离桶中。</li><li id="82c2" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">DLP API对上传到隔离区的每个文件进行检查和分类，并根据其分类将其移动到适当的目标区</li><li id="c77e" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">打开我们的存储桶，查看上传的文件</li><li id="0cce" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">检查隔离桶中的文件，查看是否有任何敏感数据</li><li id="4032" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">检查非敏感存储桶中的文件，以确保它不包含任何敏感数据</li></ol><p id="c12c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">原来如此！晚餐赢家可以自动上传和分类，并满怀信心地返回他们的“游戏化”食谱提交。</p><h1 id="220c" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">结论</h1><p id="5a06" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">如果您希望以自动化的方式对数据进行分类，那么您已经体会到了所涉及的挑战和所需的要素。敬请关注<a class="ae jt" rel="noopener" href="/@pvergadia/get-cooking-in-cloud-an-introduction-5b3b90de534e">云烹饪系列</a>中的更多文章，并查看下面的参考资料了解更多细节。</p><h1 id="356a" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">后续步骤和参考:</h1><ul class=""><li id="9357" class="lh li hi iz b ja lc jd ld jg mc jk md jo me js lv ln lo lp bi translated">在<a class="ae jt" href="https://medium.com/google-cloud" rel="noopener">谷歌云平台媒体</a>上关注这个博客系列。</li><li id="fcb9" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">参考:<a class="ae jt" href="https://cloud.google.com/solutions/automating-classification-of-data-uploaded-to-cloud-storage?utm_source=youtube&amp;utm_medium=Unpaidsocial&amp;utm_campaign=pri-20200213-Automating-Classification" rel="noopener ugc nofollow" target="_blank">自动化云存储数据分类</a></li><li id="5a0f" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">由<a class="ae jt" href="https://medium.com/u/e7724d73a96?source=post_page-----35a63f39bb02----------------------" rel="noopener">罗杰·马丁内斯</a>与<a class="ae jt" href="https://medium.com/u/155d53c7be8b?source=post_page-----35a63f39bb02----------------------" rel="noopener">珍妮·布朗</a> : <a class="ae jt" href="https://codelabs.developers.google.com/codelabs/cloud-storage-dlp-functions/#0" rel="noopener ugc nofollow" target="_blank">使用DLP API和云函数对上传到云存储的数据进行自动分类</a></li><li id="ff02" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">关注<a class="ae jt" href="https://www.youtube.com/watch?v=pxp7uYUjH_M" rel="noopener ugc nofollow" target="_blank">获取云端烹饪</a>视频系列，订阅谷歌云平台YouTube频道</li><li id="593c" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">想要更多的故事？在<a class="ae jt" rel="noopener" href="/@pvergadia/">媒体</a>和<a class="ae jt" href="https://twitter.com/pvergadia" rel="noopener ugc nofollow" target="_blank">推特</a>上关注我。</li><li id="7139" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">请和我们一起欣赏这部迷你剧，并了解更多类似的谷歌云解决方案:)</li></ul></div></div>    
</body>
</html>