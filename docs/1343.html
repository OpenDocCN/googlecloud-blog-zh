<html>
<head>
<title>How to copy a BigQuery dataset from one region to another</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将BigQuery数据集从一个区域复制到另一个区域</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/how-to-copy-a-bigquery-dataset-from-one-region-to-another-8388d74da2ac?source=collection_archive---------0-----------------------#2020-03-29">https://medium.com/google-cloud/how-to-copy-a-bigquery-dataset-from-one-region-to-another-8388d74da2ac?source=collection_archive---------0-----------------------#2020-03-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="b63e" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用BigQuery传输服务</h2></div><p id="5558" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">复制BigQuery数据集和表的常用方法是使用bq cp:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="b728" class="kc kd hi jy b fi ke kf l kg kh">bq cp source_project:source_dataset.source_table \<br/>      dest_dataset.dest_table</span></pre><p id="4e40" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">遗憾的是，copy命令不支持跨区域复制，只支持同一区域内的复制。</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es ki"><img src="../Images/e3f9950248014809101e60aada1a14c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8yzJEwKs6jtsSuQG1zWeNg.jpeg"/></div></div></figure><p id="3887" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要进行跨区域复制，可以使用BigQuery传输服务。</p><p id="0468" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，创建目标数据集:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="ef6b" class="kc kd hi jy b fi ke kf l kg kh">bq mk --location eu ch10eu</span></pre><p id="6660" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，创建一个数据源为cross_region_copy的转移配置:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="40bc" class="kc kd hi jy b fi ke kf l kg kh">bq mk --transfer_config <strong class="jy hj">--data_source=cross_region_copy</strong> \<br/>   --params='{"source_dataset_id": "iowa_liquor_sales", "source_project_id": "bigquery-public-data"}' \<br/>   --target_dataset=ch10eu --display_name=liquor \<br/>   --schedule_end_time="$(date -v <strong class="jy hj">+1H</strong> -u +%Y-%m-%dT%H:%M:%SZ)"</span></pre><p id="ce72" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为数据传输服务是为了例行的复制，这将每24小时重复一次。在我的示例中，我将结束时间设置为从现在起1小时，这样传输只发生一次。</p><p id="75f7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kq">请</em> <a class="ae kr" href="https://issuetracker.google.com/issues/152689624" rel="noopener ugc nofollow" target="_blank"> <em class="kq">明星本期</em> </a> <em class="kq">如您愿意</em> <strong class="iz hj"> <em class="kq"> bq cp </em> </strong> <em class="kq">支持跨区副本。</em></p></div></div>    
</body>
</html>