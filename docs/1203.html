<html>
<head>
<title>Cold Disaster recovery for applications in Google Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google云中应用程序的冷灾难恢复</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/cold-disaster-recovery-for-applications-in-google-cloud-5edeb32f2fc6?source=collection_archive---------0-----------------------#2019-11-16">https://medium.com/google-cloud/cold-disaster-recovery-for-applications-in-google-cloud-5edeb32f2fc6?source=collection_archive---------0-----------------------#2019-11-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="9094" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在云中烹饪</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/cbfd047e7cbc3346ec6c96ddd6f904cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gbjpNElIrwuliluZ"/></div></div></figure><h1 id="9c92" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">介绍</h1><p id="8e01" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated"><strong class="kd hj"> <em class="kx">【在云端做饭】</em> </strong>是一个博客和视频系列，帮助企业和开发者在Google Cloud上构建商业解决方案。在这第二个迷你系列中，我将介绍Google Cloud上的灾难恢复。当你在网上时，灾难可能很难处理。在接下来的几篇博客中，我们将详细阐述如何应对地震、停电、洪水、火灾等灾害。如果你对之前的迷你系列感兴趣，请查看<a class="ae ky" rel="noopener" href="/google-cloud/hosting-web-applications-on-google-cloud-an-overview-46f5605eb3a6">的这个</a>。</p><p id="7bb8" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">这是这个系列的计划。</p><ol class=""><li id="4efa" class="le lf hi kd b ke kz kh la kk lg ko lh ks li kw lj lk ll lm bi translated"><a class="ae ky" rel="noopener" href="/google-cloud/hosting-web-applications-on-google-cloud-an-overview-87d0962931a3">灾难恢复概述</a></li><li id="aa8b" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lj lk ll lm bi translated"><a class="ae ky" rel="noopener" href="/@pvergadia/cold-disaster-recovery-on-google-cloud-for-applications-running-on-premises-114b31933d02">基于Google Cloud的本地应用冷灾难恢复</a></li><li id="7c88" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lj lk ll lm bi translated"><a class="ae ky" rel="noopener" href="/google-cloud/warm-disaster-recovery-on-google-cloud-for-applications-running-on-premises-7428b0f7db72">针对内部部署应用的Google Cloud热灾难恢复</a></li><li id="9aec" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lj lk ll lm bi translated"><a class="ae ky" rel="noopener" href="/google-cloud/hot-disaster-recovery-on-google-cloud-for-applications-running-on-premises-da7048d1a57b">基于Google Cloud的内部应用热灾难恢复</a></li><li id="b52d" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lj lk ll lm bi translated">Google Cloud中应用程序的冷灾难恢复(本文)</li><li id="5048" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lj lk ll lm bi translated">Google云中应用程序的热灾难恢复</li><li id="7288" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lj lk ll lm bi translated">Google云中应用程序的热灾难恢复</li><li id="fb34" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lj lk ll lm bi translated">Google Cloud上的数据灾难恢复:第1部分</li><li id="6303" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lj lk ll lm bi translated">Google Cloud上的数据灾难恢复:第2部分</li></ol><p id="f738" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">在本文中，您将学习为部署在Google Cloud中的应用程序设置一个Cold DR模式。所以，继续读下去吧！</p><h1 id="ff28" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">你会学到什么</h1><ul class=""><li id="68f5" class="le lf hi kd b ke kf kh ki kk ls ko lt ks lu kw lv lk ll lm bi translated">Google Cloud应用程序的冷灾难恢复模式，带示例。</li><li id="8332" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">灾难来袭前需要采取的步骤。</li><li id="9a19" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">灾难发生时需要采取的步骤。</li><li id="78a5" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">默认高可用性(HA)是如何工作的？</li><li id="7c06" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">灾难发生后需要采取的步骤。</li></ul><h1 id="0003" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">先决条件</h1><ul class=""><li id="f92a" class="le lf hi kd b ke kf kh ki kk ls ko lt ks lu kw lv lk ll lm bi translated">谷歌云的基本概念和结构，这样你就可以识别产品的名称。</li><li id="6b3c" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">阅读<a class="ae ky" rel="noopener" href="/google-cloud/hosting-web-applications-on-google-cloud-an-overview-87d0962931a3">概述文章</a>了解灾难恢复的相关定义。</li></ul><h1 id="f01a" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">看看这个视频</h1><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lw lx l"/></div><figcaption class="ly lz et er es ma mb bd b be z dx translated">部署在Google云上的应用程序的冷灾难恢复模式</figcaption></figure><h1 id="99c2" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">让我们用一个例子来学习冷DR模式</h1><p id="e658" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">Mane-street-Art已经迁移到谷歌云，但是他们仍然需要一个灾难恢复计划。他们希望使用一台可恢复的应用服务器来设置冷灾难恢复模式。根据您的体系结构，只有一个可恢复的服务器可能工作，也可能不工作，但请将此作为一个示例。</p><p id="c7e5" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">在任何灾难恢复模式中，您都需要了解在灾难发生前需要采取什么步骤，灾难发生时会发生什么，以及灾难过去后需要发生什么。</p><h1 id="aeb7" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">冷灾难恢复模式—它是如何工作的？</h1><h2 id="95c1" class="mc jk hi bd jl md me mf jp mg mh mi jt kk mj mk jv ko ml mm jx ks mn mo jz mp bi translated">灾难来袭前应采取的步骤:</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/f5031b04471a0e6d40b4fd8872239a32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s75Vify0ipbia0ow"/></div></div></figure><ul class=""><li id="fbb5" class="le lf hi kd b ke kz kh la kk lg ko lh ks li kw lv lk ll lm bi translated">创建一个VPC网络</li><li id="9a0a" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">创建使用应用程序服务配置的自定义图像。作为图像的一部分。</li><li id="8df9" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">确保为正在处理的数据连接一个永久磁盘。</li><li id="247a" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">从连接的永久磁盘创建快照。</li><li id="60b0" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">配置一个启动脚本，从最新快照创建一个永久磁盘，并装载该磁盘。</li><li id="1dfb" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">然后从我们刚刚创建的图像创建一个实例模板</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/9fb544ee14ad64c1cdb9b0fe4a86777b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bQQvRFElYtqYDVEn"/></div></div></figure><ul class=""><li id="04df" class="le lf hi kd b ke kz kh la kk lg ko lh ks li kw lv lk ll lm bi translated">使用此实例模板，配置目标大小为1的区域托管实例组。</li><li id="1642" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">确保在托管实例组(MIG)上配置了健康检查</li><li id="cae7" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">使用区域托管实例组配置内部负载平衡</li><li id="6995" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">配置一个计划任务来创建持久性磁盘的常规快照。</li></ul><h2 id="a246" class="mc jk hi bd jl md me mf jp mg mh mi jt kk mj mk jv ko ml mm jx ks mn mo jz mp bi translated">灾难来袭时应采取的措施:</h2><ul class=""><li id="6908" class="le lf hi kd b ke kf kh ki kk ls ko lt ks lu kw lv lk ll lm bi translated">Mane-street-art不需要启动任何故障转移步骤，因为它们会自动发生。这是Google cloud中可用的默认HA特性中最好的部分。</li></ul><h2 id="ad8f" class="mc jk hi bd jl md me mf jp mg mh mi jt kk mj mk jv ko ml mm jx ks mn mo jz mp bi translated">默认高可用性是如何工作的？</h2><ul class=""><li id="2d26" class="le lf hi kd b ke kf kh ki kk ls ko lt ks lu kw lv lk ll lm bi translated"><strong class="kd hj">负载平衡器</strong>确保即使在需要替换实例时，也使用相同的IP地址作为应用服务器的前端。</li><li id="ef7e" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated"><strong class="kd hj">实例模板</strong>和<strong class="kd hj">定制图像</strong>确保替换实例的配置与被替换的实例相同。</li><li id="cc42" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">Mane-street-art的RPO将由拍摄的最后一张快照决定。拍摄快照的频率越高，RPO值就越小。</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/58e1dfa05be8f04de7b21c9c9b9c717b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xHdokFk27T_YAIN4"/></div></div></figure><ul class=""><li id="cd6d" class="le lf hi kd b ke kz kh la kk lg ko lh ks li kw lv lk ll lm bi translated"><strong class="kd hj">区域托管实例组</strong>提供了深度HA。它提供了在应用程序、实例或区域级别对故障做出反应的机制。如果发生任何一种情况，您都不必手动干预。将目标大小设置为1可以确保只运行一个实例。</li><li id="7a66" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated"><strong class="kd hj">永久磁盘</strong>是分区的，因此需要快照，以便在分区故障时重新创建磁盘。但是，快照也可以跨区域使用，这允许您将磁盘恢复到不同的区域，就像将它恢复到相同的区域一样容易。</li><li id="e868" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">如果某个区域出现故障，区域实例组将在同一区域的不同区域中启动一个替换实例。从最新快照创建新的持久磁盘，并将其附加到新实例</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/af3fc19a42b2c9a1079475cae5e3c6de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Um7U8sIjQrhCUnUB"/></div></div></figure><ul class=""><li id="709d" class="le lf hi kd b ke kz kh la kk lg ko lh ks li kw lv lk ll lm bi translated">您可以使用区域性持久磁盘而不是区域磁盘，这将非常好，因为您不必使用快照来恢复持久磁盘。<strong class="kd hj">但是</strong>，请注意这将消耗两倍的存储空间，需要进行预算。</li></ul><h2 id="ea42" class="mc jk hi bd jl md me mf jp mg mh mi jt kk mj mk jv ko ml mm jx ks mn mo jz mp bi translated">灾难过去后应采取的步骤</h2><ul class=""><li id="a956" class="le lf hi kd b ke kf kh ki kk ls ko lt ks lu kw lv lk ll lm bi translated">由于Google云平台提供了默认的HA特性，只要为HA设置好初始环境，在灾难发生时或灾难发生后真的没有太多事情可做。</li></ul><h1 id="ec5c" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">结论</h1><p id="305e" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">如果您的应用程序部署在Google cloud上，并且您有特定的预算来满足这些RTO和RPO值，那么请使用冷灾难恢复模式！敬请关注即将发布的文章，在这些文章中，您将了解如何建立更多对您的业务有意义的灾难恢复模式。</p><h1 id="624c" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">后续步骤</h1><ul class=""><li id="7adf" class="le lf hi kd b ke kf kh ki kk ls ko lt ks lu kw lv lk ll lm bi translated">在<a class="ae ky" href="https://medium.com/google-cloud" rel="noopener">谷歌云平台媒体</a>上关注这个博客系列。</li><li id="7d9b" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">参考<a class="ae ky" href="https://cloud.google.com/solutions/dr-scenarios-planning-guide" rel="noopener ugc nofollow" target="_blank">灾难恢复解决方案</a>。</li><li id="9279" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">关注<a class="ae ky" href="https://www.youtube.com/watch?v=pxp7uYUjH_M" rel="noopener ugc nofollow" target="_blank">获取云端烹饪</a>视频系列，订阅谷歌云平台YouTube频道</li><li id="10b8" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">想要更多的故事？查看我的<a class="ae ky" rel="noopener" href="/@pvergadia/">媒体</a>，<a class="ae ky" href="https://twitter.com/pvergadia" rel="noopener ugc nofollow" target="_blank">在twitter上关注我</a>。</li><li id="d5bb" class="le lf hi kd b ke ln kh lo kk lp ko lq ks lr kw lv lk ll lm bi translated">请和我们一起欣赏这部迷你剧，并了解更多类似的谷歌云解决方案:)</li></ul></div></div>    
</body>
</html>