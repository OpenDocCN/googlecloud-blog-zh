<html>
<head>
<title>Evolution of a DBA in the cloud world</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云世界中数据库管理员的发展</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/evolution-of-a-dba-in-the-cloud-world-ecee5fffadde?source=collection_archive---------3-----------------------#2017-03-31">https://medium.com/google-cloud/evolution-of-a-dba-in-the-cloud-world-ecee5fffadde?source=collection_archive---------3-----------------------#2017-03-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9ee5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在技术领域的第二份工作是数据库管理员。我真的很喜欢这份工作，因为我不仅要处理表模式、索引(我仍然想念<a class="ae jd" href="https://en.wikipedia.org/wiki/Ingres_(database)" rel="noopener ugc nofollow" target="_blank"> INGRES </a>，因为我要选择正确的索引类型)、查询优化、访问路径、备份&amp;恢复过程、安全性、ETL作业等等。我还花了几个小时查看队列深度、iops和延迟，设计SAN查看LUN并配置适当的RAID级别。这可能是我唯一一次能够想出一个有意义的颜色编码方案！</p><p id="0aa5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，当它不仅仅是选择哪种类型的关系数据库，而是我需要哪种非sql数据库时，它变得更加有趣(这弥补了我甚至不必考虑我需要什么类型的索引的不足)😀) .回到最近的时代和“云”，现在担心LUN和条带化磁盘不是一件事，至少在我最近工作的云上不是。</p><p id="9a8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我过去作为DBA做的许多任务已经被抽象掉了，因为现在这是GCP的问题，但其他关注点已经介入，填补了这一低水平的无差别重担。</p><p id="0e86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于如何在云中管理数据库，有两种选择，我将在这里重点介绍GCP(假设你们都参与了这篇文章)，要么在计算引擎(GCE)上部署和管理自己的数据库，要么使用完全托管的数据库服务之一。</p><h2 id="18b0" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">在GCE上部署和管理数据库</h2><p id="bf42" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">因此，我知道我在这里只是略述皮毛，但是我只是想让您了解一下作为DBA在部署到GCE时需要考虑的任务。其中一些任务与您在内部完成的任务相同，但其他任务实际上相当容易完成。</p><p id="b72c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果直接部署到GCE上，那么您需要深入了解将要像在本地一样使用的数据库软件的操作方面。您需要像通常一样将数据和日志从引导磁盘分离到不同的磁盘上，这种方法实际上并没有改变。备份和恢复过程使用云存储(GCS)近线从持久磁盘(PD)移动数据库备份文件。持久磁盘是耐用的存储设备，其功能类似于台式机或服务器中的物理磁盘。计算引擎管理这些设备背后的硬件，以确保数据冗余并为您优化性能。</p><p id="82bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您想要复制分层存储系统，那么可以实施一个过程，允许您将备份从PD移动到标准GCS，然后移动到近线GCS。监控和日志记录您可以使用stackdriver，因为它有一些现成的<a class="ae jd" href="https://cloud.google.com/monitoring/agent/plugins/" rel="noopener ugc nofollow" target="_blank">代理</a>来监控一些常见的数据库。省去您设置额外的监控基础设施</p><p id="cffe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要RAM(你当然需要！)选择一个能提供您所需RAM容量的实例类型，或者如果没有合适的实例类型，就定制一个。</p><p id="a0b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据库(在这篇文章中，我们忽略内存数据库！)，磁盘I/O和吞吐量一直是您需要关注的一个关键方面。你仍然需要关注这些参数，但这是你真正需要改变思维的地方。现在，您不必担心DAS、NAS或San、光纤通道和RAID级别。面向数据中心专业人员的GCP文档有一个<a class="ae jd" href="https://cloud.google.com/docs/compare/data-centers/storage#storage_area_network_san" rel="noopener ugc nofollow" target="_blank">精美的章节</a>帮助您理解从SAN和归档存储到PD和GCS的思维转换。</p><p id="06af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:你确实使用了本地SSD，但是它们被绑定到底层主机，所以只适合暂存盘和可以快速重建的盘。</p><p id="01f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您最终需要关心的是PD的类型、PD的大小，以及如果您使用SSD PD，vCPUs的数量。</p><p id="d619" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">文档中关于比较<a class="ae jd" href="https://cloud.google.com/compute/docs/disks/performance#type_comparison" rel="noopener ugc nofollow" target="_blank">块存储性能</a>的表格是一个很好的起点，或者如果您想要比<a class="ae jd" href="https://cloud.google.com/compute/docs/disks/performance#comparing_persistent_disk_to_a_physical_hard_drive" rel="noopener ugc nofollow" target="_blank">表格</a>更进一步，将7200 rpm SATA与标准PD或SSD PD进行比较有助于了解您应该如何考虑块存储性能，并使用它来适当确定PD的大小。</p><p id="0c6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于<a class="ae jd" href="https://cloud.google.com/compute/docs/disks/performance" rel="noopener ugc nofollow" target="_blank">磁盘优化</a>的整个页面值得一读再读，但这里有一些我个人认为永远值得记住的要点:</p><ul class=""><li id="24d0" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated">标准持久磁盘性能可线性扩展至卷性能极限。您的实例的vCPU数量不会限制<strong class="ih hj">标准</strong>持久磁盘的性能。</li><li id="e47a" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">SSD持久磁盘性能线性扩展，直到达到卷的极限或每个计算引擎实例的极限。一般来说，具有更多vCPUs的实例可以实现更高的吞吐量和IOPS限制。</li><li id="e85c" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">每个持久磁盘写入操作都会增加虚拟机实例的累积网络出口流量。</li><li id="e5bb" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">您仍然需要考虑队列深度和并行性，并进行相应的优化，</li></ul><p id="d100" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个很好的例子是如何将所有这些整合在一起，并考虑在GCE上管理和优化数据库，这是GCP网站上关于GCP上的Microsoft SQL Server的最佳实践的文档。</p><p id="c24c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，现在一名DBA在更高的抽象层次上优化I/O和吞吐量，而GCP则负责这种无差别的繁重工作(尽管我确实没有意识到这最终并没有最好地利用我的时间！).基本上，一旦你明白你需要关注什么，较低层次的基础设施问题就变得容易多了。</p><h2 id="f1b4" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">GCP全面管理的数据库</h2><p id="7db1" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">有了完全托管的数据库，您就不再关心PD大小和优化块大小等细节，从而最大限度地提高性能。现在，您将重点放在为每项服务提供的个别指导上。</p><p id="628d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我建议，如果你是GCP的新用户，并且已经做出了完全明智的决定，那就从<a class="ae jd" href="https://cloud.google.com/solutions/data-lifecycle-cloud-platform" rel="noopener ugc nofollow" target="_blank">这篇关于GCP </a>的<a class="ae jd" href="https://cloud.google.com/solutions/data-lifecycle-cloud-platform" rel="noopener ugc nofollow" target="_blank">数据生命周期的</a>文章开始吧(需要添加扳手提示提示！) .一旦你读了，然后阅读概念指南，并着手快速启动。</p><p id="2e8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面我列举了几个GCP托管数据库服务的例子，以及一些优化使用它们的方法。</p><p id="b18d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> BigTable </strong></p><ul class=""><li id="c751" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated">阅读<a class="ae jd" href="https://cloud.google.com/bigtable/docs/performance" rel="noopener ugc nofollow" target="_blank">了解云大表性能</a></li><li id="5304" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">存储量越大，性能越好(因此&gt; 1 TB)</li><li id="8574" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">选择一个<a class="ae jd" href="https://cloud.google.com/bigtable/docs/choosing-ssd-hdd" rel="noopener ugc nofollow" target="_blank">块存储类型</a></li></ul><p id="10f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">大查询</strong></p><ul class=""><li id="84a2" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated">了解<a class="ae jd" href="https://cloud.google.com/bigquery/docs/partitioned-tables" rel="noopener ugc nofollow" target="_blank">分区表</a>的使用</li><li id="85cf" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">调整您的查询</li><li id="3247" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">使用<a class="ae jd" href="https://cloud.google.com/bigquery/query-plan-explanation" rel="noopener ugc nofollow" target="_blank">查询计划</a>来帮助提高性能</li><li id="d6a9" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">使用<a class="ae jd" href="https://cloud.google.com/bigquery/launch-checklist" rel="noopener ugc nofollow" target="_blank">启动清单</a></li></ul><p id="8321" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">数据存储</strong></p><ul class=""><li id="cd21" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated">阅读<a class="ae jd" href="https://cloud.google.com/datastore/docs/best-practices" rel="noopener ugc nofollow" target="_blank">最佳实践</a></li><li id="4fc9" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">阅读<a class="ae jd" href="https://cloud.google.com/datastore/docs/articles/balancing-strong-and-eventual-consistency-with-google-cloud-datastore/" rel="noopener ugc nofollow" target="_blank">平衡强大的&amp;与谷歌云数据存储的最终一致性</a></li></ul><p id="9c27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">传统数据库管理员通常会执行的任务基本上已经上移了。这意味着有更多的时间参与其他事情。</p><p id="ca76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">存储和查询数据只是冰山一角，但是将数据放入数据存储以及云和ETL工作都是DBA的一部分。我没有忘记诚实！</p><h2 id="a53d" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">抽取、转换、加载至目的端（extract-transform-load的缩写）</h2><p id="4092" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">集成Hadoop及其生态系统是解决各种数据问题的常用途径。也许我应该把它作为一个典型的DBA现在所做的事情的一部分(但是我想我是从我当DBA时所拥有的工具开始的，而Hadoop不是其中之一)。</p><p id="baa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我第一次涉足Hadoop及其生态系统实际上是在AWS的EMR上，因此我错过了桌子下和橱柜中的大量商用硬件，这是在内部运行Hadoop基础架构的一部分。我有一个相对无痛的介绍。看看GCP的<a class="ae jd" href="https://cloud.google.com/dataproc/docs/concepts/overview" rel="noopener ugc nofollow" target="_blank"> Dataproc </a>这真的是Hadoop类型的任务应该运行的方式🙂)</p><p id="e768" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Hadoop类型的工作负载(是的，我想我真的是指map/reduce)之后不久，寻找解决方案来帮助使<a class="ae jd" href="https://en.wikipedia.org/wiki/Lambda_architecture" rel="noopener ugc nofollow" target="_blank"> lambda架构</a>工作而不会让你眼珠子掉出来将是下一个理解，因此<a class="ae jd" href="https://beam.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache beam </a>可能是下一步，或者如果你从未接触过Hadoop，实际上是第一步。这是下一代，所以还是从那里开始吧。GCP 上的<a class="ae jd" href="https://cloud.google.com/dataflow/" rel="noopener ugc nofollow" target="_blank">数据流的完全管理版本。</a></p><p id="1aa7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到现在为止，你可能会想，继续往上爬，他们不是已经把DBA改名为数据工程师了吗？你知道你是对的(如果你不完全确定什么是数据工程师，我喜欢这个<a class="ae jd" href="https://medium.freecodecamp.com/the-rise-of-the-data-engineer-91be18f1e603" rel="noopener ugc nofollow" target="_blank">作为我迄今为止读过的最好的描述)。</a></p><p id="62a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据工程师是一个进化的数据库管理员，拥有更酷的工具来帮助他们完成工作。我也见过随机加入ML的mashups，但我觉得它更适合数据科学领域。老实说，我不会对你的底线进行哲学讨论，职称只是给你一个模糊的概念，告诉你某人在日常工作中主要做什么，而且界限很模糊。</p></div></div>    
</body>
</html>