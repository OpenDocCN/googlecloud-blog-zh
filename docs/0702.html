<html>
<head>
<title>Coding Apache Beam in your Web Browser and Running it in Cloud Dataflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Web浏览器中编写Apache Beam代码，并在云数据流中运行它</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/coding-apache-beam-in-your-web-browser-and-running-it-in-cloud-dataflow-c41c275d42c8?source=collection_archive---------2-----------------------#2018-07-26">https://medium.com/google-cloud/coding-apache-beam-in-your-web-browser-and-running-it-in-cloud-dataflow-c41c275d42c8?source=collection_archive---------2-----------------------#2018-07-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a8b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">更新:代码编辑器现在是基于</strong> <a class="ae jd" href="http://theia-ide.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">月食的【忒伊亚】</strong> </a> <strong class="ih hj">，而不是</strong> <a class="ae jd" href="https://github.com/eclipse/orion.client" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">猎户座</strong> </a> <strong class="ih hj">。截屏和编辑器设置在这篇文章中看起来略有不同(因为它们是基于Orion的)，但所有的命令/指令都是一样的。</strong></p><h1 id="ddf5" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">您的网络浏览器隐藏了一个秘密</h1><p id="43e3" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">大多数开发人员都有一个用于开发Apache Beam代码的<a class="ae jd" href="https://wikipedia.org/wiki/Integrated_development_environment" rel="noopener ugc nofollow" target="_blank"> IDE </a>(集成开发环境)，他们将这些代码本地安装在他们的笔记本电脑/台式机上(比如Python的<a class="ae jd" rel="noopener" href="/google-cloud/python-development-environments-for-apache-beam-on-google-cloud-platform-b6f276b344df"><strong class="ih hj">py charm</strong></a>或Java的<a class="ae jd" rel="noopener" href="/google-cloud/setting-up-a-java-development-environment-for-apache-beam-on-google-cloud-platform-ec0c6c9fbb39"><strong class="ih hj">IntelliJ</strong></a>)。但是，如果您使用的计算机不支持您选择的IDE，或者您使用的是别人的计算机，会发生什么情况呢？谷歌已经覆盖了你！谷歌的<a class="ae jd" href="https://cloud.google.com/shell/docs/features" rel="noopener ugc nofollow" target="_blank">云壳</a>自带内置的<a class="ae jd" href="https://console.cloud.google.com/cloudshell/editor" rel="noopener ugc nofollow" target="_blank">代码编辑器</a>用于开发/修改代码(基于<a class="ae jd" href="https://github.com/eclipse/orion.client" rel="noopener ugc nofollow" target="_blank"> Eclipse的Orion </a>)。它的功能不如IDE全面，但确实比使用Vim或Emacs来编辑代码要好！是的，是的，我知道这些对某些人来说是激烈的言辞，但我是在和那些同意我的人说话(也就是大多数人😜).</p><p id="153b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">✌️ <em class="kh">这里有一个</em> <em class="kh">和平提供给Vim和Emacs用户的提示，代码编辑器通过改变</em> <strong class="ih hj"> <em class="kh">设置&gt;编辑器设置&gt;键&gt;键绑定来支持你的键绑定。</em> </strong></p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ki"><img src="../Images/2f8ffa81b0752f8e7cf9ca5f16ee3199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0erWYTCyut24eu1C_g3gBg.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">代码编辑器(以深色主题显示)</figcaption></figure></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h2 id="e020" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">🔆 😎 🔆如果你不喜欢明亮的光线照在你的脸上，那么将代码编辑器切换到黑暗主题</h2><p id="d3b9" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">只需转到代码编辑器设置，将<strong class="ih hj">编辑器主题</strong>和<strong class="ih hj"> IDE主题</strong>类别都改为深色主题(如下图gif所示)。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ki"><img src="../Images/5a6a4d070b7b6be1a8fefecd19248d8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uLQEbvFPIfV9dfVHFUKUQw.gif"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">将代码编辑器设置为深色主题</figcaption></figure></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h1 id="1c7b" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">那么我如何使用云数据流的<a class="ae jd" href="https://console.cloud.google.com/cloudshell/editor" rel="noopener ugc nofollow" target="_blank">代码编辑器</a>？</h1><p id="bfb3" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">很高兴你问了！为了简单起见，我们不会从头开始创建Apache Beam管道。您将使用代码编辑器来修改Google为您提供的一个<a class="ae jd" href="https://github.com/GoogleCloudPlatform/DataflowTemplates" rel="noopener ugc nofollow" target="_blank">开源数据流模板</a>。具体来说，您将修改Cloud Pub/Sub to BigQuery模板(<a class="ae jd" href="https://github.com/GoogleCloudPlatform/DataflowTemplates/blob/master/src/main/java/com/google/cloud/teleport/templates/PubSubToBigQuery.java" rel="noopener ugc nofollow" target="_blank">PubSubToBigQuery.java</a>)，将一个Pub/Sub订阅作为输入，而不是一个Pub/Sub主题。</p><h2 id="ea45" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">你要做的事情的摘要:</h2><ul class=""><li id="6195" class="ly lz hi ih b ii kc im kd iq ma iu mb iy mc jc md me mf mg bi translated">将GitHub DataflowTemplates repo克隆到您的云Shell <code class="du mh mi mj mk b"><strong class="ih hj">$HOME</strong></code> <strong class="ih hj"> </strong>目录* <strong class="ih hj">(参见下面的注释)</strong></li><li id="c443" class="ly lz hi ih b ii ml im mm iq mn iu mo iy mp jc md me mf mg bi translated">使用代码编辑器将云发布/订阅修改为BigQuery模板</li><li id="a45b" class="ly lz hi ih b ii ml im mm iq mn iu mo iy mp jc md me mf mg bi translated">使用Maven构建修改后的模板，并将其存放在云存储中</li><li id="b4db" class="ly lz hi ih b ii ml im mm iq mn iu mo iy mp jc md me mf mg bi translated">使用您定制的模板在云数据流中运行作业</li></ul><p id="49f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">*注意:</strong>由于代码编辑器是Cloud Shell内置的一个特性，所以您想要在代码编辑器中修改的任何代码都必须首先存在于Cloud Shell的<a class="ae jd" href="https://cloud.google.com/shell/docs/features#persistent_disk_storage" rel="noopener ugc nofollow" target="_blank">空闲5 GB持久磁盘存储</a>(这被挂载为您的<code class="du mh mi mj mk b"><strong class="ih hj">$HOME</strong></code>目录)。如果不定期访问云壳，<code class="du mh mi mj mk b"><strong class="ih hj">$HOME</strong></code>目录持久存储可能会被回收。在此之前，您将收到一封电子邮件通知。启动云外壳会话将阻止其删除。</p></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h1 id="6c52" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">设置代码编辑器</h1><h2 id="a4b8" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">1.打开<a class="ae jd" href="https://console.cloud.google.com/cloudshell/editor" rel="noopener ugc nofollow" target="_blank">代码编辑器</a></h2><p id="cab0" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">你可以使用<a class="ae jd" href="https://console.cloud.google.com/cloudshell/editor" rel="noopener ugc nofollow" target="_blank">直接链接</a>导航到一个上半部分是代码编辑器，下半部分是云壳的页面。您将使用shell来执行以下步骤中的所有命令。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mq"><img src="../Images/c3f1594703ab9e4e2fedd74ef01198f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u4QzRUqD_G-pey54o75cYQ.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">云外壳/代码编辑器</figcaption></figure><p id="836a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您也可以直接从任何云shell实例中打开代码编辑器。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mr"><img src="../Images/d5a107bf3207de689af5b24fc7bfd2a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8D2RyKJtPTzdPgje9BX0ZA.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">云壳的编辑器按钮</figcaption></figure><h2 id="13de" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">2.<em class="ms">为这个示例</em>启用必要的API，并在您的云shell主目录中克隆<a class="ae jd" href="https://github.com/GoogleCloudPlatform/DataflowTemplates" rel="noopener ugc nofollow" target="_blank">GitHub dataflow templates</a>repo</h2><ul class=""><li id="e229" class="ly lz hi ih b ii kc im kd iq ma iu mb iy mc jc md me mf mg bi translated"><a class="ae jd" href="https://console.cloud.google.com/flows/enableapi?apiid=dataflow,compute_component,logging,storage_component,storage_api,bigquery,pubsub" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">点击此帮助链接</strong> </a>批量启用所有必需的API:数据流—计算引擎—日志—云存储—云存储JSON — BigQuery — PubSub</li><li id="dbe2" class="ly lz hi ih b ii ml im mm iq mn iu mo iy mp jc md me mf mg bi translated"><a class="ae jd" href="https://console.cloud.google.com/cloudshell/open?git_repo=https%3A%2F%2Fgithub.com%2FGoogleCloudPlatform%2FDataflowTemplates&amp;page=shell" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">点击这个助手链接</strong> </a>在您的云shell主目录中自动克隆GitHub数据流模板repo</li></ul><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="9527" class="lf jf hi mk b fi mx my l mz na"># Set env variables<br/>gcloud config set project <strong class="mk hj">[YOUR_PROJECT_ID]</strong></span><span id="48f1" class="lf jf hi mk b fi nb my l mz na"># Clone DataflowTemplates repo<br/>cd ~ &amp;&amp; git clone <a class="ae jd" href="https://github.com/GoogleCloudPlatform/DataflowTemplates.git" rel="noopener ugc nofollow" target="_blank">https://github.com/GoogleCloudPlatform/DataflowTemplates.git</a></span></pre><p id="ac06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kh">🔑Point❗️:确保你在“gcloud config set project”命令中使用的同一个项目中启用了API。</em></p><h2 id="aee4" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">3.在<a class="ae jd" href="https://console.cloud.google.com/cloudshell/editor" rel="noopener ugc nofollow" target="_blank">代码编辑器</a>中打开PubSubToBigQuery.java文件</h2><p id="e15b" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">您将在下一节中编辑该文件</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="ce09" class="lf jf hi mk b fi mx my l mz na">cloudshell edit ~/DataflowTemplates/src/main/java/com/google/cloud/teleport/templates/PubSubToBigQuery.java</span></pre></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h1 id="218f" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">将云发布/订阅修改为大查询模板</h1><h2 id="a517" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">1.首先将输入值provider变量从topic改为subscription</h2><p id="b253" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">(下面以粗体显示的更改)</p><p id="572d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">替换第141–144行:</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="419d" class="lf jf hi mk b fi mx my l mz na"><a class="ae jd" href="http://twitter.com/Description" rel="noopener ugc nofollow" target="_blank">@Description</a>("Pub/Sub <strong class="mk hj">topic</strong> to read the input from")<br/>ValueProvider&lt;String&gt; <strong class="mk hj">getInputTopic</strong>();</span><span id="6857" class="lf jf hi mk b fi nb my l mz na">void <strong class="mk hj">setInputTopic</strong>(ValueProvider&lt;String&gt; value);</span></pre><p id="cfd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用:</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="f61e" class="lf jf hi mk b fi mx my l mz na">// Modified Template input parameter<a class="ae jd" href="http://twitter.com/Description" rel="noopener ugc nofollow" target="_blank"><br/>@Description</a>("Pub/Sub <strong class="mk hj">subscription</strong> to read the input from")<br/>ValueProvider&lt;String&gt; <strong class="mk hj">getInputSubscription</strong>();<br/>void <strong class="mk hj">setInputSubscription</strong>(ValueProvider&lt;String&gt; value);</span></pre><h2 id="944e" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">2.然后在管道的第一个应用方法中更改其用法</h2><p id="cbbf" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">(下面以粗体显示的更改)</p><p id="f12f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">替换第202–204行:</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="f94a" class="lf jf hi mk b fi mx my l mz na">.apply("ReadPubsubMessages",PubsubIO.readMessagesWithAttributes().<strong class="mk hj">fromTopic</strong>(options.<strong class="mk hj">getInputTopic</strong>()))</span></pre><p id="200a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用:</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="e04a" class="lf jf hi mk b fi mx my l mz na">.apply("ReadPubsubMessages",PubsubIO.readMessagesWithAttributes().<strong class="mk hj">fromSubscription</strong>(options.<strong class="mk hj">getInputSubscription</strong>()))</span></pre></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h1 id="7ad4" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">构建并运行修改后的云发布/订阅到大查询模板</h1><h2 id="5feb" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">1.创建一个云存储桶，用于暂存和运行数据流模板</h2><p id="c8d6" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">您正在创建一个<a class="ae jd" href="https://cloud.google.com/storage/docs/storage-classes#regional" rel="noopener ugc nofollow" target="_blank">区域</a>桶，以便为数据流管道中常见的数据密集型计算获得更好的性能。</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="8225" class="lf jf hi mk b fi mx my l mz na">BUCKET_NAME=gs://<strong class="mk hj">[YOUR_STORAGE_BUCKET]</strong><br/>gsutil mb -c regional -l us-central1 $BUCKET_NAME</span></pre><p id="6b12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>如果没有指定，us-central1是数据流作业的默认区域。为了获得最佳性能并避免网络出口费用，请将数据流作业与正在处理的数据放在同一区域。</p><h2 id="87b3" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">2.使用Cloud Shell的内置Maven工具来构建PubSubToBigQuery.java代码，该代码反过来也会在Google云存储中创建和存储一个数据流模板文件</h2><p id="c9e1" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>产生的数据流模板文件存储在由<code class="du mh mi mj mk b">--templateLocation</code>标志指定的位置。</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="f176" class="lf jf hi mk b fi mx my l mz na">cd ~/DataflowTemplates &amp;&amp; mvn compile exec:java \<br/>-Dexec.mainClass=com.google.cloud.teleport.templates.PubSubToBigQuery \<br/>-Dexec.cleanupDaemonThreads=false \<br/>-Dexec.args=" \<br/>--project=${GOOGLE_CLOUD_PROJECT} \<br/>--stagingLocation=${BUCKET_NAME}/staging \<br/>--tempLocation=${BUCKET_NAME}/temp \<br/>--templateLocation=${BUCKET_NAME}/template \<br/>--runner=DataflowRunner"</span></pre><h2 id="970a" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">3.创建一个发布/订阅订阅和BigQuery数据集，用于您新修改的数据流模板</h2><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="cc98" class="lf jf hi mk b fi mx my l mz na"><a class="ae jd" href="https://cloud.google.com/sdk/gcloud/reference/pubsub/topics/create" rel="noopener ugc nofollow" target="_blank">gcloud pubsub topics create</a> test_topic &amp;&amp; \</span><span id="d29f" class="lf jf hi mk b fi nb my l mz na">SUBSCRIPTION=$(<a class="ae jd" href="https://cloud.google.com/sdk/gcloud/reference/pubsub/subscriptions/create" rel="noopener ugc nofollow" target="_blank">gcloud pubsub subscriptions create</a> test_subscription --topic=test_topic --format="value(name)") &amp;&amp; \</span><span id="6e2d" class="lf jf hi mk b fi nb my l mz na">bq mk pubsub_to_bigquery_dataset</span></pre><h2 id="9aa9" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">4.最后，使用您在步骤2中创建的模板文件运行数据流作业</h2><p id="f65c" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">您可以在<a class="ae jd" href="https://console.cloud.google.com/dataflow" rel="noopener ugc nofollow" target="_blank">数据流页面</a>中查看您的流式作业</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="19dc" class="lf jf hi mk b fi mx my l mz na"># Job Names must be unique for every run<br/>JOB_NAME=pubsub-to-bigquery-$USER-`date +"%Y%m%d-%H%M%S%z"` &amp;&amp; \</span><span id="4fe5" class="lf jf hi mk b fi nb my l mz na"># Run Dataflow job and store job id for easy cleanup after<br/>JOB_ID=$( \<br/>gcloud dataflow jobs run ${JOB_NAME} \<br/>--gcs-location=${BUCKET_NAME}/template \<br/>--parameters \<br/>"inputSubscription=${SUBSCRIPTION},outputTableSpec=${GOOGLE_CLOUD_PROJECT}:pubsub_to_bigquery_dataset.pubsub_to_bigquery_output,outputDeadletterTable=${GOOGLE_CLOUD_PROJECT}:pubsub_to_bigquery_dataset.pubsub_to_bigquery_deadletter" \<br/>--format="value(id)")</span></pre></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h1 id="9e1b" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">清理以避免重复计费！</h1><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="487b" class="lf jf hi mk b fi mx my l mz na">gcloud dataflow jobs cancel $JOB_ID<br/>gcloud pubsub subscriptions delete $SUBSCRIPTION<br/>gcloud pubsub topics delete test_topic<br/>bq rm -r -f -d $<!-- -->GOOGLE_CLOUD_PROJECT<!-- -->:<!-- -->pubsub_to_bigquery_dataset</span></pre><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="nc nd l"/></div></figure></div></div>    
</body>
</html>