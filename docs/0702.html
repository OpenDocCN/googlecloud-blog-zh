<html>
<head>
<title>Coding Apache Beam in your Web Browser and Running it in Cloud Dataflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨Webæµè§ˆå™¨ä¸­ç¼–å†™Apache Beamä»£ç ï¼Œå¹¶åœ¨äº‘æ•°æ®æµä¸­è¿è¡Œå®ƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/google-cloud/coding-apache-beam-in-your-web-browser-and-running-it-in-cloud-dataflow-c41c275d42c8?source=collection_archive---------2-----------------------#2018-07-26">https://medium.com/google-cloud/coding-apache-beam-in-your-web-browser-and-running-it-in-cloud-dataflow-c41c275d42c8?source=collection_archive---------2-----------------------#2018-07-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a8b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">æ›´æ–°:ä»£ç ç¼–è¾‘å™¨ç°åœ¨æ˜¯åŸºäº</strong> <a class="ae jd" href="http://theia-ide.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">æœˆé£Ÿçš„ã€å¿’ä¼Šäºšã€‘</strong> </a> <strong class="ih hj">ï¼Œè€Œä¸æ˜¯</strong> <a class="ae jd" href="https://github.com/eclipse/orion.client" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">çŒæˆ·åº§</strong> </a> <strong class="ih hj">ã€‚æˆªå±å’Œç¼–è¾‘å™¨è®¾ç½®åœ¨è¿™ç¯‡æ–‡ç« ä¸­çœ‹èµ·æ¥ç•¥æœ‰ä¸åŒ(å› ä¸ºå®ƒä»¬æ˜¯åŸºäºOrionçš„)ï¼Œä½†æ‰€æœ‰çš„å‘½ä»¤/æŒ‡ä»¤éƒ½æ˜¯ä¸€æ ·çš„ã€‚</strong></p><h1 id="ddf5" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">æ‚¨çš„ç½‘ç»œæµè§ˆå™¨éšè—äº†ä¸€ä¸ªç§˜å¯†</h1><p id="43e3" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">å¤§å¤šæ•°å¼€å‘äººå‘˜éƒ½æœ‰ä¸€ä¸ªç”¨äºå¼€å‘Apache Beamä»£ç çš„<a class="ae jd" href="https://wikipedia.org/wiki/Integrated_development_environment" rel="noopener ugc nofollow" target="_blank"> IDE </a>(é›†æˆå¼€å‘ç¯å¢ƒ)ï¼Œä»–ä»¬å°†è¿™äº›ä»£ç æœ¬åœ°å®‰è£…åœ¨ä»–ä»¬çš„ç¬”è®°æœ¬ç”µè„‘/å°å¼æœºä¸Š(æ¯”å¦‚Pythonçš„<a class="ae jd" rel="noopener" href="/google-cloud/python-development-environments-for-apache-beam-on-google-cloud-platform-b6f276b344df"><strong class="ih hj">py charm</strong></a>æˆ–Javaçš„<a class="ae jd" rel="noopener" href="/google-cloud/setting-up-a-java-development-environment-for-apache-beam-on-google-cloud-platform-ec0c6c9fbb39"><strong class="ih hj">IntelliJ</strong></a>)ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„è®¡ç®—æœºä¸æ”¯æŒæ‚¨é€‰æ‹©çš„IDEï¼Œæˆ–è€…æ‚¨ä½¿ç”¨çš„æ˜¯åˆ«äººçš„è®¡ç®—æœºï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿè°·æ­Œå·²ç»è¦†ç›–äº†ä½ ï¼è°·æ­Œçš„<a class="ae jd" href="https://cloud.google.com/shell/docs/features" rel="noopener ugc nofollow" target="_blank">äº‘å£³</a>è‡ªå¸¦å†…ç½®çš„<a class="ae jd" href="https://console.cloud.google.com/cloudshell/editor" rel="noopener ugc nofollow" target="_blank">ä»£ç ç¼–è¾‘å™¨</a>ç”¨äºå¼€å‘/ä¿®æ”¹ä»£ç (åŸºäº<a class="ae jd" href="https://github.com/eclipse/orion.client" rel="noopener ugc nofollow" target="_blank"> Eclipseçš„Orion </a>)ã€‚å®ƒçš„åŠŸèƒ½ä¸å¦‚IDEå…¨é¢ï¼Œä½†ç¡®å®æ¯”ä½¿ç”¨Vimæˆ–Emacsæ¥ç¼–è¾‘ä»£ç è¦å¥½ï¼æ˜¯çš„ï¼Œæ˜¯çš„ï¼Œæˆ‘çŸ¥é“è¿™äº›å¯¹æŸäº›äººæ¥è¯´æ˜¯æ¿€çƒˆçš„è¨€è¾ï¼Œä½†æˆ‘æ˜¯åœ¨å’Œé‚£äº›åŒæ„æˆ‘çš„äººè¯´è¯(ä¹Ÿå°±æ˜¯å¤§å¤šæ•°äººğŸ˜œ).</p><p id="153b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">âœŒï¸ <em class="kh">è¿™é‡Œæœ‰ä¸€ä¸ª</em> <em class="kh">å’Œå¹³æä¾›ç»™Vimå’ŒEmacsç”¨æˆ·çš„æç¤ºï¼Œä»£ç ç¼–è¾‘å™¨é€šè¿‡æ”¹å˜</em> <strong class="ih hj"> <em class="kh">è®¾ç½®&gt;ç¼–è¾‘å™¨è®¾ç½®&gt;é”®&gt;é”®ç»‘å®šæ¥æ”¯æŒä½ çš„é”®ç»‘å®šã€‚</em> </strong></p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ki"><img src="../Images/2f8ffa81b0752f8e7cf9ca5f16ee3199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0erWYTCyut24eu1C_g3gBg.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">ä»£ç ç¼–è¾‘å™¨(ä»¥æ·±è‰²ä¸»é¢˜æ˜¾ç¤º)</figcaption></figure></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h2 id="e020" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">ğŸ”† ğŸ˜ ğŸ”†å¦‚æœä½ ä¸å–œæ¬¢æ˜äº®çš„å…‰çº¿ç…§åœ¨ä½ çš„è„¸ä¸Šï¼Œé‚£ä¹ˆå°†ä»£ç ç¼–è¾‘å™¨åˆ‡æ¢åˆ°é»‘æš—ä¸»é¢˜</h2><p id="d3b9" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">åªéœ€è½¬åˆ°ä»£ç ç¼–è¾‘å™¨è®¾ç½®ï¼Œå°†<strong class="ih hj">ç¼–è¾‘å™¨ä¸»é¢˜</strong>å’Œ<strong class="ih hj"> IDEä¸»é¢˜</strong>ç±»åˆ«éƒ½æ”¹ä¸ºæ·±è‰²ä¸»é¢˜(å¦‚ä¸‹å›¾gifæ‰€ç¤º)ã€‚</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ki"><img src="../Images/5a6a4d070b7b6be1a8fefecd19248d8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uLQEbvFPIfV9dfVHFUKUQw.gif"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">å°†ä»£ç ç¼–è¾‘å™¨è®¾ç½®ä¸ºæ·±è‰²ä¸»é¢˜</figcaption></figure></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h1 id="1c7b" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">é‚£ä¹ˆæˆ‘å¦‚ä½•ä½¿ç”¨äº‘æ•°æ®æµçš„<a class="ae jd" href="https://console.cloud.google.com/cloudshell/editor" rel="noopener ugc nofollow" target="_blank">ä»£ç ç¼–è¾‘å™¨</a>ï¼Ÿ</h1><p id="bfb3" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">å¾ˆé«˜å…´ä½ é—®äº†ï¼ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä¸ä¼šä»å¤´å¼€å§‹åˆ›å»ºApache Beamç®¡é“ã€‚æ‚¨å°†ä½¿ç”¨ä»£ç ç¼–è¾‘å™¨æ¥ä¿®æ”¹Googleä¸ºæ‚¨æä¾›çš„ä¸€ä¸ª<a class="ae jd" href="https://github.com/GoogleCloudPlatform/DataflowTemplates" rel="noopener ugc nofollow" target="_blank">å¼€æºæ•°æ®æµæ¨¡æ¿</a>ã€‚å…·ä½“æ¥è¯´ï¼Œæ‚¨å°†ä¿®æ”¹Cloud Pub/Sub to BigQueryæ¨¡æ¿(<a class="ae jd" href="https://github.com/GoogleCloudPlatform/DataflowTemplates/blob/master/src/main/java/com/google/cloud/teleport/templates/PubSubToBigQuery.java" rel="noopener ugc nofollow" target="_blank">PubSubToBigQuery.java</a>)ï¼Œå°†ä¸€ä¸ªPub/Subè®¢é˜…ä½œä¸ºè¾“å…¥ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªPub/Subä¸»é¢˜ã€‚</p><h2 id="ea45" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">ä½ è¦åšçš„äº‹æƒ…çš„æ‘˜è¦:</h2><ul class=""><li id="6195" class="ly lz hi ih b ii kc im kd iq ma iu mb iy mc jc md me mf mg bi translated">å°†GitHub DataflowTemplates repoå…‹éš†åˆ°æ‚¨çš„äº‘Shell <code class="du mh mi mj mk b"><strong class="ih hj">$HOME</strong></code> <strong class="ih hj"> </strong>ç›®å½•* <strong class="ih hj">(å‚è§ä¸‹é¢çš„æ³¨é‡Š)</strong></li><li id="c443" class="ly lz hi ih b ii ml im mm iq mn iu mo iy mp jc md me mf mg bi translated">ä½¿ç”¨ä»£ç ç¼–è¾‘å™¨å°†äº‘å‘å¸ƒ/è®¢é˜…ä¿®æ”¹ä¸ºBigQueryæ¨¡æ¿</li><li id="a45b" class="ly lz hi ih b ii ml im mm iq mn iu mo iy mp jc md me mf mg bi translated">ä½¿ç”¨Mavenæ„å»ºä¿®æ”¹åçš„æ¨¡æ¿ï¼Œå¹¶å°†å…¶å­˜æ”¾åœ¨äº‘å­˜å‚¨ä¸­</li><li id="b4db" class="ly lz hi ih b ii ml im mm iq mn iu mo iy mp jc md me mf mg bi translated">ä½¿ç”¨æ‚¨å®šåˆ¶çš„æ¨¡æ¿åœ¨äº‘æ•°æ®æµä¸­è¿è¡Œä½œä¸š</li></ul><p id="49f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">*æ³¨æ„:</strong>ç”±äºä»£ç ç¼–è¾‘å™¨æ˜¯Cloud Shellå†…ç½®çš„ä¸€ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥æ‚¨æƒ³è¦åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­ä¿®æ”¹çš„ä»»ä½•ä»£ç éƒ½å¿…é¡»é¦–å…ˆå­˜åœ¨äºCloud Shellçš„<a class="ae jd" href="https://cloud.google.com/shell/docs/features#persistent_disk_storage" rel="noopener ugc nofollow" target="_blank">ç©ºé—²5 GBæŒä¹…ç£ç›˜å­˜å‚¨</a>(è¿™è¢«æŒ‚è½½ä¸ºæ‚¨çš„<code class="du mh mi mj mk b"><strong class="ih hj">$HOME</strong></code>ç›®å½•)ã€‚å¦‚æœä¸å®šæœŸè®¿é—®äº‘å£³ï¼Œ<code class="du mh mi mj mk b"><strong class="ih hj">$HOME</strong></code>ç›®å½•æŒä¹…å­˜å‚¨å¯èƒ½ä¼šè¢«å›æ”¶ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæ‚¨å°†æ”¶åˆ°ä¸€å°ç”µå­é‚®ä»¶é€šçŸ¥ã€‚å¯åŠ¨äº‘å¤–å£³ä¼šè¯å°†é˜»æ­¢å…¶åˆ é™¤ã€‚</p></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h1 id="6c52" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">è®¾ç½®ä»£ç ç¼–è¾‘å™¨</h1><h2 id="a4b8" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">1.æ‰“å¼€<a class="ae jd" href="https://console.cloud.google.com/cloudshell/editor" rel="noopener ugc nofollow" target="_blank">ä»£ç ç¼–è¾‘å™¨</a></h2><p id="cab0" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">ä½ å¯ä»¥ä½¿ç”¨<a class="ae jd" href="https://console.cloud.google.com/cloudshell/editor" rel="noopener ugc nofollow" target="_blank">ç›´æ¥é“¾æ¥</a>å¯¼èˆªåˆ°ä¸€ä¸ªä¸ŠåŠéƒ¨åˆ†æ˜¯ä»£ç ç¼–è¾‘å™¨ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯äº‘å£³çš„é¡µé¢ã€‚æ‚¨å°†ä½¿ç”¨shellæ¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ä¸­çš„æ‰€æœ‰å‘½ä»¤ã€‚</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mq"><img src="../Images/c3f1594703ab9e4e2fedd74ef01198f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u4QzRUqD_G-pey54o75cYQ.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">äº‘å¤–å£³/ä»£ç ç¼–è¾‘å™¨</figcaption></figure><p id="836a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ‚¨ä¹Ÿå¯ä»¥ç›´æ¥ä»ä»»ä½•äº‘shellå®ä¾‹ä¸­æ‰“å¼€ä»£ç ç¼–è¾‘å™¨ã€‚</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mr"><img src="../Images/d5a107bf3207de689af5b24fc7bfd2a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8D2RyKJtPTzdPgje9BX0ZA.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">äº‘å£³çš„ç¼–è¾‘å™¨æŒ‰é’®</figcaption></figure><h2 id="13de" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">2.<em class="ms">ä¸ºè¿™ä¸ªç¤ºä¾‹</em>å¯ç”¨å¿…è¦çš„APIï¼Œå¹¶åœ¨æ‚¨çš„äº‘shellä¸»ç›®å½•ä¸­å…‹éš†<a class="ae jd" href="https://github.com/GoogleCloudPlatform/DataflowTemplates" rel="noopener ugc nofollow" target="_blank">GitHub dataflow templates</a>repo</h2><ul class=""><li id="e229" class="ly lz hi ih b ii kc im kd iq ma iu mb iy mc jc md me mf mg bi translated"><a class="ae jd" href="https://console.cloud.google.com/flows/enableapi?apiid=dataflow,compute_component,logging,storage_component,storage_api,bigquery,pubsub" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">ç‚¹å‡»æ­¤å¸®åŠ©é“¾æ¥</strong> </a>æ‰¹é‡å¯ç”¨æ‰€æœ‰å¿…éœ€çš„API:æ•°æ®æµâ€”è®¡ç®—å¼•æ“â€”æ—¥å¿—â€”äº‘å­˜å‚¨â€”äº‘å­˜å‚¨JSON â€” BigQuery â€” PubSub</li><li id="dbe2" class="ly lz hi ih b ii ml im mm iq mn iu mo iy mp jc md me mf mg bi translated"><a class="ae jd" href="https://console.cloud.google.com/cloudshell/open?git_repo=https%3A%2F%2Fgithub.com%2FGoogleCloudPlatform%2FDataflowTemplates&amp;page=shell" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">ç‚¹å‡»è¿™ä¸ªåŠ©æ‰‹é“¾æ¥</strong> </a>åœ¨æ‚¨çš„äº‘shellä¸»ç›®å½•ä¸­è‡ªåŠ¨å…‹éš†GitHubæ•°æ®æµæ¨¡æ¿repo</li></ul><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="9527" class="lf jf hi mk b fi mx my l mz na"># Set env variables<br/>gcloud config set project <strong class="mk hj">[YOUR_PROJECT_ID]</strong></span><span id="48f1" class="lf jf hi mk b fi nb my l mz na"># Clone DataflowTemplates repo<br/>cd ~ &amp;&amp; git clone <a class="ae jd" href="https://github.com/GoogleCloudPlatform/DataflowTemplates.git" rel="noopener ugc nofollow" target="_blank">https://github.com/GoogleCloudPlatform/DataflowTemplates.git</a></span></pre><p id="ac06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kh">ğŸ”‘Pointâ—ï¸:ç¡®ä¿ä½ åœ¨â€œgcloud config set projectâ€å‘½ä»¤ä¸­ä½¿ç”¨çš„åŒä¸€ä¸ªé¡¹ç›®ä¸­å¯ç”¨äº†APIã€‚</em></p><h2 id="aee4" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">3.åœ¨<a class="ae jd" href="https://console.cloud.google.com/cloudshell/editor" rel="noopener ugc nofollow" target="_blank">ä»£ç ç¼–è¾‘å™¨</a>ä¸­æ‰“å¼€PubSubToBigQuery.javaæ–‡ä»¶</h2><p id="e15b" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">æ‚¨å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­ç¼–è¾‘è¯¥æ–‡ä»¶</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="ce09" class="lf jf hi mk b fi mx my l mz na">cloudshell edit ~/DataflowTemplates/src/main/java/com/google/cloud/teleport/templates/PubSubToBigQuery.java</span></pre></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h1 id="218f" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">å°†äº‘å‘å¸ƒ/è®¢é˜…ä¿®æ”¹ä¸ºå¤§æŸ¥è¯¢æ¨¡æ¿</h1><h2 id="a517" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">1.é¦–å…ˆå°†è¾“å…¥å€¼providerå˜é‡ä»topicæ”¹ä¸ºsubscription</h2><p id="b253" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">(ä¸‹é¢ä»¥ç²—ä½“æ˜¾ç¤ºçš„æ›´æ”¹)</p><p id="572d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ›¿æ¢ç¬¬141â€“144è¡Œ:</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="419d" class="lf jf hi mk b fi mx my l mz na"><a class="ae jd" href="http://twitter.com/Description" rel="noopener ugc nofollow" target="_blank">@Description</a>("Pub/Sub <strong class="mk hj">topic</strong> to read the input from")<br/>ValueProvider&lt;String&gt; <strong class="mk hj">getInputTopic</strong>();</span><span id="6857" class="lf jf hi mk b fi nb my l mz na">void <strong class="mk hj">setInputTopic</strong>(ValueProvider&lt;String&gt; value);</span></pre><p id="cfd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½¿ç”¨:</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="f61e" class="lf jf hi mk b fi mx my l mz na">// Modified Template input parameter<a class="ae jd" href="http://twitter.com/Description" rel="noopener ugc nofollow" target="_blank"><br/>@Description</a>("Pub/Sub <strong class="mk hj">subscription</strong> to read the input from")<br/>ValueProvider&lt;String&gt; <strong class="mk hj">getInputSubscription</strong>();<br/>void <strong class="mk hj">setInputSubscription</strong>(ValueProvider&lt;String&gt; value);</span></pre><h2 id="944e" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">2.ç„¶ååœ¨ç®¡é“çš„ç¬¬ä¸€ä¸ªåº”ç”¨æ–¹æ³•ä¸­æ›´æ”¹å…¶ç”¨æ³•</h2><p id="cbbf" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">(ä¸‹é¢ä»¥ç²—ä½“æ˜¾ç¤ºçš„æ›´æ”¹)</p><p id="f12f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ›¿æ¢ç¬¬202â€“204è¡Œ:</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="f94a" class="lf jf hi mk b fi mx my l mz na">.apply("ReadPubsubMessages",PubsubIO.readMessagesWithAttributes().<strong class="mk hj">fromTopic</strong>(options.<strong class="mk hj">getInputTopic</strong>()))</span></pre><p id="200a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½¿ç”¨:</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="e04a" class="lf jf hi mk b fi mx my l mz na">.apply("ReadPubsubMessages",PubsubIO.readMessagesWithAttributes().<strong class="mk hj">fromSubscription</strong>(options.<strong class="mk hj">getInputSubscription</strong>()))</span></pre></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h1 id="7ad4" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">æ„å»ºå¹¶è¿è¡Œä¿®æ”¹åçš„äº‘å‘å¸ƒ/è®¢é˜…åˆ°å¤§æŸ¥è¯¢æ¨¡æ¿</h1><h2 id="5feb" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">1.åˆ›å»ºä¸€ä¸ªäº‘å­˜å‚¨æ¡¶ï¼Œç”¨äºæš‚å­˜å’Œè¿è¡Œæ•°æ®æµæ¨¡æ¿</h2><p id="c8d6" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">æ‚¨æ­£åœ¨åˆ›å»ºä¸€ä¸ª<a class="ae jd" href="https://cloud.google.com/storage/docs/storage-classes#regional" rel="noopener ugc nofollow" target="_blank">åŒºåŸŸ</a>æ¡¶ï¼Œä»¥ä¾¿ä¸ºæ•°æ®æµç®¡é“ä¸­å¸¸è§çš„æ•°æ®å¯†é›†å‹è®¡ç®—è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="8225" class="lf jf hi mk b fi mx my l mz na">BUCKET_NAME=gs://<strong class="mk hj">[YOUR_STORAGE_BUCKET]</strong><br/>gsutil mb -c regional -l us-central1 $BUCKET_NAME</span></pre><p id="6b12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">æ³¨æ„:</strong>å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œus-central1æ˜¯æ•°æ®æµä½œä¸šçš„é»˜è®¤åŒºåŸŸã€‚ä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½å¹¶é¿å…ç½‘ç»œå‡ºå£è´¹ç”¨ï¼Œè¯·å°†æ•°æ®æµä½œä¸šä¸æ­£åœ¨å¤„ç†çš„æ•°æ®æ”¾åœ¨åŒä¸€åŒºåŸŸã€‚</p><h2 id="87b3" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">2.ä½¿ç”¨Cloud Shellçš„å†…ç½®Mavenå·¥å…·æ¥æ„å»ºPubSubToBigQuery.javaä»£ç ï¼Œè¯¥ä»£ç åè¿‡æ¥ä¹Ÿä¼šåœ¨Googleäº‘å­˜å‚¨ä¸­åˆ›å»ºå’Œå­˜å‚¨ä¸€ä¸ªæ•°æ®æµæ¨¡æ¿æ–‡ä»¶</h2><p id="c9e1" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated"><strong class="ih hj">æ³¨æ„:</strong>äº§ç”Ÿçš„æ•°æ®æµæ¨¡æ¿æ–‡ä»¶å­˜å‚¨åœ¨ç”±<code class="du mh mi mj mk b">--templateLocation</code>æ ‡å¿—æŒ‡å®šçš„ä½ç½®ã€‚</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="f176" class="lf jf hi mk b fi mx my l mz na">cd ~/DataflowTemplates &amp;&amp; mvn compile exec:java \<br/>-Dexec.mainClass=com.google.cloud.teleport.templates.PubSubToBigQuery \<br/>-Dexec.cleanupDaemonThreads=false \<br/>-Dexec.args=" \<br/>--project=${GOOGLE_CLOUD_PROJECT} \<br/>--stagingLocation=${BUCKET_NAME}/staging \<br/>--tempLocation=${BUCKET_NAME}/temp \<br/>--templateLocation=${BUCKET_NAME}/template \<br/>--runner=DataflowRunner"</span></pre><h2 id="970a" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">3.åˆ›å»ºä¸€ä¸ªå‘å¸ƒ/è®¢é˜…è®¢é˜…å’ŒBigQueryæ•°æ®é›†ï¼Œç”¨äºæ‚¨æ–°ä¿®æ”¹çš„æ•°æ®æµæ¨¡æ¿</h2><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="cc98" class="lf jf hi mk b fi mx my l mz na"><a class="ae jd" href="https://cloud.google.com/sdk/gcloud/reference/pubsub/topics/create" rel="noopener ugc nofollow" target="_blank">gcloud pubsub topics create</a> test_topic &amp;&amp; \</span><span id="d29f" class="lf jf hi mk b fi nb my l mz na">SUBSCRIPTION=$(<a class="ae jd" href="https://cloud.google.com/sdk/gcloud/reference/pubsub/subscriptions/create" rel="noopener ugc nofollow" target="_blank">gcloud pubsub subscriptions create</a> test_subscription --topic=test_topic --format="value(name)") &amp;&amp; \</span><span id="6e2d" class="lf jf hi mk b fi nb my l mz na">bq mk pubsub_to_bigquery_dataset</span></pre><h2 id="9aa9" class="lf jf hi bd jg lg lh li jk lj lk ll jo iq lm ln js iu lo lp jw iy lq lr ka ls bi translated">4.æœ€åï¼Œä½¿ç”¨æ‚¨åœ¨æ­¥éª¤2ä¸­åˆ›å»ºçš„æ¨¡æ¿æ–‡ä»¶è¿è¡Œæ•°æ®æµä½œä¸š</h2><p id="f65c" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">æ‚¨å¯ä»¥åœ¨<a class="ae jd" href="https://console.cloud.google.com/dataflow" rel="noopener ugc nofollow" target="_blank">æ•°æ®æµé¡µé¢</a>ä¸­æŸ¥çœ‹æ‚¨çš„æµå¼ä½œä¸š</p><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="19dc" class="lf jf hi mk b fi mx my l mz na"># Job Names must be unique for every run<br/>JOB_NAME=pubsub-to-bigquery-$USER-`date +"%Y%m%d-%H%M%S%z"` &amp;&amp; \</span><span id="4fe5" class="lf jf hi mk b fi nb my l mz na"># Run Dataflow job and store job id for easy cleanup after<br/>JOB_ID=$( \<br/>gcloud dataflow jobs run ${JOB_NAME} \<br/>--gcs-location=${BUCKET_NAME}/template \<br/>--parameters \<br/>"inputSubscription=${SUBSCRIPTION},outputTableSpec=${GOOGLE_CLOUD_PROJECT}:pubsub_to_bigquery_dataset.pubsub_to_bigquery_output,outputDeadletterTable=${GOOGLE_CLOUD_PROJECT}:pubsub_to_bigquery_dataset.pubsub_to_bigquery_deadletter" \<br/>--format="value(id)")</span></pre></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h1 id="9e1b" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">æ¸…ç†ä»¥é¿å…é‡å¤è®¡è´¹ï¼</h1><pre class="kj kk kl km fd mt mk mu mv aw mw bi"><span id="487b" class="lf jf hi mk b fi mx my l mz na">gcloud dataflow jobs cancel $JOB_ID<br/>gcloud pubsub subscriptions delete $SUBSCRIPTION<br/>gcloud pubsub topics delete test_topic<br/>bq rm -r -f -d $<!-- -->GOOGLE_CLOUD_PROJECT<!-- -->:<!-- -->pubsub_to_bigquery_dataset</span></pre><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="nc nd l"/></div></figure></div></div>    
</body>
</html>