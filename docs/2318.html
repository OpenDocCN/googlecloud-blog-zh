<html>
<head>
<title>Automate your VOD transcoding at scale with GCP: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GCP大规模自动化VOD转码:第1部分</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/automate-your-vod-transcoding-at-scale-with-gcp-part-1-87503fdd3a9f?source=collection_archive---------0-----------------------#2022-08-21">https://medium.com/google-cloud/automate-your-vod-transcoding-at-scale-with-gcp-part-1-87503fdd3a9f?source=collection_archive---------0-----------------------#2022-08-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="a54b" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">简介:</h1><p id="bacd" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Google Cloud发布了一组专注于视频的API，使开发人员能够从转码开始，轻松构建和部署灵活的高质量视频流体验。</p><p id="ab13" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">所有这些API都结合了<strong class="jf hj">谷歌的媒体专长</strong>和<strong class="jf hj">谷歌的规模和可靠性。</strong></p><p id="c295" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">2021年9月30日，我们宣布正式发布我们的代码转换器API及其端点(【https://transcoder.googleapis.com/v1/】<em class="kh"/>)，重点关注当前客户在构建复杂视频点播管道时面临的两个不同问题。</p><ol class=""><li id="089a" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka kn ko kp kq bi translated">构建您自己的产品:转码器API非常灵活，足以让媒体公司构建他们想要的产品。</li><li id="95e9" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka kn ko kp kq bi translated"><strong class="jf hj">托管基础设施:</strong>谷歌提供了一个可扩展的API，这样媒体公司就不必管理基础设施</li></ol><p id="e5ca" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">代码转换器API是一种易于使用的API，用于创建消费者流格式，包括MPEG-4 (MP4)、基于HTTP的动态自适应流(DASH，也称为MPEG-DASH)和HTTP实时流(HLS)。许多直接面向消费者的流媒体平台使用多编解码器策略。鉴于YouTube和Google Play，谷歌在直接面向消费者的视频方面拥有专长，并选择了这种特定的媒体解决方案路径/格式。</p><h1 id="dc72" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">问题陈述:</h1><p id="1a61" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">大多数OTT客户都在努力实现转码管道的自动化，而对于复杂的工作流，在没有人工干预的情况下安全地实现自动化并生成统计数据变得更加复杂。</p><p id="c97b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在这篇由两部分组成的博客中，我将介绍端到端集成、自动化、安全性、日志和报告。</p><p id="fb34" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在这个博客系列的结尾，你的架构看起来会和下面分享的我的架构有些相似。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es kw"><img src="../Images/a4f715d427ad022b6c9133374d5ed890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kHWKbABytkzg_UWk"/></div></div></figure><blockquote class="li lj lk"><p id="6588" class="jd je kh jf b jg kb ji jj jk kc jm jn ll kd jq jr lm ke ju jv ln kf jy jz ka hb bi translated"><strong class="jf hj"> <em class="hi">图片:</em> </strong> <em class="hi">转码自动化整体架构</em></p></blockquote><h1 id="b609" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">第1部分:构建自动化VOD代码转换管道</h1><p id="5caa" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">让我们通过创建两个GCS (Google云存储)桶来开始构建自动化VOD管道，并使用云功能(在整体架构的一部分之下)来自动化代码转换。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lo"><img src="../Images/65dcb495241fa32c2680f2d722fd5920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_KGXKtm4KmxHPonY"/></div></div></figure><h1 id="3682" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">先决条件:</h1><p id="5f02" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在我们开始使用云功能之前，我们需要两个存储桶(一个用于源文件，一个用于转码文件)和一个转码器API作业模板。</p><h1 id="42e3" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">存储桶</h1><p id="963f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">步骤1: </strong>创建一个GCS源桶，制作者或操作员将在此上传夹层视频文件(源视频)，在下面的示例中，我在亚洲南部1(孟买)地区创建了一个转码自动化源桶，配置如下。</p><ul class=""><li id="54b4" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">标准默认存储类别</li><li id="a2f9" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">将此桶上的公共访问保护强制为真</li><li id="79c5" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">统一访问级别</li><li id="ecb1" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">Google管理的数据加密密钥</li></ul><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lq"><img src="../Images/bac401b96f4df4add5ba5a7b2da59a29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2zRQxUou4hlQMr8o"/></div></div></figure><p id="ea96" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤2: </strong>类似地，创建另一个GCS输出存储桶，在我下面的例子中，我已经在asia-south1 (Mumbai)地区创建了一个具有相同配置的代码转换-自动化-输出存储桶。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lq"><img src="../Images/a08e142d9038d5e0b003fa9419081400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CqhwEZPnrW_o7elV"/></div></div></figure><p id="49ee" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">存储只支持唯一的存储桶名称，所以你必须使用不同的存储桶名称，记住这一点，因为你必须在下面的代码中到处修改它。</strong></p><h1 id="9f81" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">代码转换器API作业模板</h1><p id="efa4" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在自动转码过程之前，定义转码器作业配置很重要，如比特率阶梯、h264或h265编解码器设置、mux流、段设置、清单设置、发布/订阅通知(当我们在本博客的第2部分构建日志和报告时，这将非常有用)等..并把它放到一个json模板中。</p><p id="9609" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">代码转换器作业包括如下所示的3个主要功能，代码转换作业模板也遵循json结构。</p><ol class=""><li id="5865" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka kn ko kp kq bi translated">编码</li><li id="a11a" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka kn ko kp kq bi translated">多路技术</li><li id="186b" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka kn ko kp kq bi translated">显式创建</li></ol><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lr"><img src="../Images/0757f223586f8fe6f2a4109204c0f60d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W30N-nxYAyL-9ipX"/></div></div></figure><p id="e1d4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在<a class="ae kg" href="https://cloud.google.com/transcoder/docs/how-to/job-templates" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/transcoder/docs/how-to/job-templates</a>上有示例作业模板和创建作业模板的过程，您可以利用它们或使用代码转换器作业配置创建自己的模板。</p><p id="8bf6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">代码转换器作业配置参考可在google cloud参考文档(<a class="ae kg" href="https://cloud.google.com/transcoder/docs/reference/rest/v1/JobConfig" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/transcoder/docs/reference/rest/v1/job config</a>)上获得，这本身就是一个主题，因为本博客的重点是构建自动化，所以我不在本博客中涉及它(可能会再写一篇博客涉及它)。</p><p id="df72" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">此外，我构建了一些工作模板，并在GitHub上提供给本博客的读者，让他们利用和构建这种自动化，或者用来构建自己的模板。</p><p id="5f00" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">模板1: 4K-hevc、HLS和Dash输出(<a class="ae kg" href="https://github.com/nazir-kabani/transcoder-API-templates/blob/main/4k-hevc-hls-dash.json" rel="noopener ugc nofollow" target="_blank">https://github . com/nazir-kabani/transcoder-API-templates/blob/main/4k-hevc-HLS-Dash . JSON</a>)</p><p id="7c46" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">模板2: hd-h264，HLS和Dash输出<strong class="jf hj">(我们将在本博客中使用该模板)</strong>(<a class="ae kg" href="https://github.com/nazir-kabani/transcoder-API-templates/blob/main/hd-h264-hls-dash.json" rel="noopener ugc nofollow" target="_blank">https://github . com/nazir-kabani/transcoder-API-templates/blob/main/HD-h264-HLS-Dash . JSON</a>)</p><p id="4781" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">模板3: hd-h264，mp4输出(<a class="ae kg" href="https://github.com/nazir-kabani/transcoder-API-templates/blob/main/hd-h264-mp4.json" rel="noopener ugc nofollow" target="_blank">https://github . com/nazir-kabani/transcoder-API-templates/blob/main/HD-h264-MP4 . JSON</a>)</p><p id="db05" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，是时候使用gcloud命令和Template 2创建作业模板了</p><p id="98db" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第一步:</strong>启用pub/sub API，创建一个pub/sub主题，主题ID为转码-作业-通知(你可以选择自己的名称，但记得在博客的后面部分用这个名称替换你的主题名称)——<strong class="jf hj">为了便于理解，这是来自整体架构的cloud pub/sub 2。</strong></p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es ls"><img src="../Images/bd3039a33ee171b24396940d3cb71e3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JB7NmBbfdaN4HtyT"/></div></div></figure><p id="4d0e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤2: </strong>从GitHub下载模板2，用项目id和发布/订阅主题id更新第478行，并保存在您的本地计算机中。</p><p id="bf38" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">例如，对于项目/ <strong class="jf hj"> &lt;项目id&gt;</strong>/主题/ <strong class="jf hj">转码-作业-通知</strong></p><p id="de47" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">将更改为项目/ <strong class="jf hj">测试-项目</strong>/主题/ <strong class="jf hj">转码-作业-通知</strong></p><p id="bf4d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤3: </strong>打开cloud-shell并创建一个文件夹，使用以下命令将作业模板json文件上传到该文件夹</p><ol class=""><li id="2ac8" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka kn ko kp kq bi translated">mkdir代码转换-自动化</li><li id="dc6e" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka kn ko kp kq bi translated">上传文件</li></ol><figure class="kx ky kz la fd lb er es paragraph-image"><div class="er es lt"><img src="../Images/8e57eb4d48e6763e86fe351010365842.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/0*iMA3KB1SXGd_Mo98"/></div></figure><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lu"><img src="../Images/c90babbe8cdb720254d24703ac7734a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RLt8l-MtvRvAKGlH"/></div></div></figure><p id="24e5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">3.mv hd-h264-hls-dash.json转码-自动化/</p><p id="8888" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤4: </strong>启用代码转换器API，创建服务帐户，并授予所附链接中提到的角色(<a class="ae kg" href="https://cloud.google.com/transcoder/docs/transcode-video#before-you-begin" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/transcoder/docs/transcode-video # before-you-begin</a>)</p><p id="acb3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">不要创建json键，我们在这个练习中不需要它。</p><p id="6cfe" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤5: </strong>使用云壳和以下命令创建第一个模板。</p><ol class=""><li id="cd4b" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka kn ko kp kq bi translated">cd转码-自动化/</li><li id="c820" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka kn ko kp kq bi translated">gcloud代码转换器模板创建HD-h264-HLS-dash-file = " HD-h264-HLS-dash . JSON "-location = Asia-south 1</li></ol><p id="d004" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">您可以从您的地理位置附近选择您的首选位置，截至今天，代码转换器api已在12个地理区域提供(<a class="ae kg" href="https://cloud.google.com/transcoder/docs/locations" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/transcoder/docs/locations</a>)。</p><p id="03fc" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">答对了，您已经创建了您的第一个转码模板。如果你不想进一步阅读，并且对自动化你的工作流程不感兴趣，那么你可以使用下面的云壳命令开始视频转码。</p><blockquote class="li lj lk"><p id="e038" class="jd je kh jf b jg kb ji jj jk kc jm jn ll kd jq jr lm ke ju jv ln kf jy jz ka hb bi translated">gcloud代码转换器作业创建\</p><p id="c9bf" class="jd je kh jf b jg kb ji jj jk kc jm jn ll kd jq jr lm ke ju jv ln kf jy jz ka hb bi translated">—input-uri = " GS://transcoding-automation-source/file-name-with-extension " \</p><p id="cbec" class="jd je kh jf b jg kb ji jj jk kc jm jn ll kd jq jr lm ke ju jv ln kf jy jz ka hb bi translated">—位置=亚洲-南方-1 \</p><p id="55d6" class="jd je kh jf b jg kb ji jj jk kc jm jn ll kd jq jr lm ke ju jv ln kf jy jz ka hb bi translated">—output-uri = " GS://转码-自动化-输出/文件名-无扩展名/" \</p><p id="60dc" class="jd je kh jf b jg kb ji jj jk kc jm jn ll kd jq jr lm ke ju jv ln kf jy jz ka hb bi translated">— template-id="hd-h264-hls-dash "</p></blockquote><p id="15dc" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">详情请参考<a class="ae kg" href="https://cloud.google.com/transcoder/docs/how-to/jobs#create_jobs_templates" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/transcoder/docs/how-to/jobs # create _ jobs _ templates</a></p><h1 id="70a6" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">使用云功能的楼宇自动化:</h1><p id="a500" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">云函数运行应用程序代码，以响应来自谷歌云产品、firebase和谷歌助手的事件，或者通过HTTP从任何web、移动或后端应用程序直接调用它。</p><p id="e008" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在我们的例子中，我们将使用来自GCS的对象终结触发器来触发云函数。(<a class="ae kg" href="https://cloud.google.com/functions/docs/calling/storage" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/functions/docs/calling/storage</a></p><h1 id="3d86" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">创建云发布/订阅1</h1><p id="fa16" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在创建云函数1之前，我们需要创建一个发布/订阅主题，我们将在云函数1的代码中使用它。</p><p id="8fe0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从google cloud控制台，转到发布/订阅-&gt;模式并创建模式。</p><p id="cdae" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">给你的模式起一个你喜欢的名字，对于这个博客，我使用transcoding-start-status作为模式名。</p><p id="b83b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">选择Avro作为模式类型，并在模式定义中选择GitHub gist中提供的past json，然后单击create。</p><p id="9ce2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" href="https://gist.github.com/nazir-kabani/3380de756b892cc414ae7fb348ebf240" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/nazir-kabani/3380 de 756 b 892 cc 414 AE 7 FB 348 ebf 240</a></p><p id="89c2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，单击从模式页面创建主题(不要转到主题页面并创建创建)。请输入主题ID作为代码转换-开始-状态，然后单击创建主题。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es kw"><img src="../Images/a7428d66d6ef83fbdce706485d015747.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KqgpabMaQnImMEQw"/></div></div></figure><h1 id="42d4" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">创建云函数1</h1><p id="f4a6" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">第一步:</strong>按照<a class="ae kg" href="https://cloud.google.com/functions/docs/console-quickstart#before-you-begin" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/functions/docs/console-quick start # before-you-begin</a>中提到的步骤，启用运行云功能所需的API</p><p id="0e96" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第二步:</strong>从谷歌云控制台，打开云功能，点击创建功能</p><p id="7d0f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤3: </strong>输入以下详细信息</p><ul class=""><li id="93bf" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated"><strong class="jf hj">环境:</strong>第一代</li><li id="041a" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated"><strong class="jf hj">功能名称:</strong>转码-开始</li><li id="2f20" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated"><strong class="jf hj">区域:</strong>亚洲-南方1(您可以选择离您的地理位置最近的区域，类似于您的源/输出桶和代码转换器api区域)</li><li id="755b" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated"><strong class="jf hj">触发类型:</strong>云存储</li><li id="3d53" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated"><strong class="jf hj">事件类型:</strong>对所选桶中的(定稿/创建)文件</li><li id="a4de" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated"><strong class="jf hj">桶:(</strong>浏览选择)转码-自动化源</li></ul><p id="ab75" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">然后点击保存并</p><ul class=""><li id="c90c" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">展开运行时、构建、连接和安全设置</li><li id="ae23" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">将分配的内存更改为1 GB</li><li id="fabd" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">单击连接并选择允许内部流量和来自云负载平衡的流量</li><li id="8014" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">单击下一步</li><li id="fbc0" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">接下来选择python 3.10运行时</li><li id="e45f" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">从Github网址<a class="ae kg" href="https://github.com/nazir-kabani/transcoder-api-automation" rel="noopener ugc nofollow" target="_blank">https://github.com/nazir-kabani/transcoder-api-automation</a>下载代码转换器api自动化代码</li><li id="068e" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">更改requirements.txt和main.py中的代码(这两个代码在GitHub上都有)</li></ul><p id="6e9f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">使用GitHub代码时要记住以下事项</p><ul class=""><li id="15ac" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">在main.py的第42行和第43行中用您的存储桶名称来更改存储桶名称</li><li id="6ae4" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">如果您的模板id在main.py的第44行中不同，请更改模板id</li><li id="2c29" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在main.py的第48行将项目id更改为您的项目id</li><li id="9f13" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在main.py的第48行中，将位置更改为您的首选位置(您想要运行转码作业的位置，您的作业模板应该在同一位置)</li><li id="61a4" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">用您在上面main.py的第67行创建的发布/订阅主题1更改发布/订阅主题路径</li></ul><p id="6c39" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">完成这些更改后，单击deploy。部署需要几分钟才能成功。</p><p id="6923" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤4: </strong>由于云功能使用应用引擎默认服务帐户，我们必须为应用引擎默认服务帐户提供代码转换器管理员、存储管理员和发布/订阅发布者角色</p><ul class=""><li id="cbf1" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">转到IAM &amp; Admin -&gt;服务帐户，然后搜索应用引擎默认服务帐户</li><li id="4e62" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">复制应用引擎默认服务帐户的电子邮件</li><li id="a56b" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">转到IAM</li><li id="59f4" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">点击添加</li><li id="cfe4" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在新主体中添加应用引擎默认服务帐户的电子邮件</li><li id="2b3d" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在角色中添加代码转换器管理员</li><li id="aaf2" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">点击添加另一个角色</li><li id="1d7b" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在角色中添加存储管理员</li><li id="ae6e" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">点击添加另一个角色</li><li id="a37a" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在角色中添加发布/订阅发布者</li><li id="d005" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">点击保存</li></ul><h1 id="dc41" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">与媒体CDN的集成:</h1><p id="5fd8" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">接下来，我们将致力于输出桶和媒体CDN之间的集成(在整体架构的下面部分)。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lv"><img src="../Images/f5375a8c7f109f24086499c72de958da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tup9nn6dyQ8IBTlg"/></div></div></figure><p id="e8e1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">媒体CDN是谷歌云的媒体交付解决方案。媒体CDN是对<a class="ae kg" href="https://cloud.google.com/cdn" rel="noopener ugc nofollow" target="_blank">云CDN </a>的补充，是Google Cloud的web加速解决方案。媒体CDN针对高吞吐量出口工作负载进行了优化，例如流式视频和大型文件下载。媒体CDN于2022年11月9日正式发布，如果您的项目中没有媒体CDN，请联系客户团队，允许您的项目使用媒体CDN。</p><p id="61ab" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">对于那些无法访问媒体CDN的用户，请关注位于<a class="ae kg" href="https://cloud.google.com/cdn/docs/setting-up-cdn-with-bucket" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/CDN/docs/setting-up-CDN-with-bucket</a>的云CDN文档</p><p id="804d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤1: </strong>一旦您的项目中允许使用媒体CDN，您将必须运行以下gcloud命令来启用网络服务、证书管理器和edgecache APIs</p><blockquote class="li lj lk"><p id="9a8f" class="jd je kh jf b jg kb ji jj jk kc jm jn ll kd jq jr lm ke ju jv ln kf jy jz ka hb bi translated">gcloud服务支持networkservices.googleapis.com</p><p id="289b" class="jd je kh jf b jg kb ji jj jk kc jm jn ll kd jq jr lm ke ju jv ln kf jy jz ka hb bi translated">gcloud服务支持certificatemanager.googleapis.com</p><p id="75a4" class="jd je kh jf b jg kb ji jj jk kc jm jn ll kd jq jr lm ke ju jv ln kf jy jz ka hb bi translated">gcloud服务支持edgecache.googleapis.com</p></blockquote><p id="e7bf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第二步:</strong>在谷歌云控制台- &gt;网络服务，打开媒体CDN，选择原点选项卡，点击创建原点。给你的原点起一个你喜欢的名字，通过浏览用户界面选择GSC桶，然后点击创建原点。</p><p id="cb6f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在我的配置中，我选择vod-origin作为我的原始名称。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lw"><img src="../Images/73c31dc6b0f17f230144430633360cd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zyEh6x4MzRrTeSzJ"/></div></div></figure><p id="95f1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤3: </strong>从媒体CDN - &gt;点击服务- &gt;创建服务</p><ul class=""><li id="2465" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">在“服务名称”下给出您的首选名称和描述，在我的示例中，我选择vod-service作为我的配置的服务名称</li></ul><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lx"><img src="../Images/fe28b59ad27bd36ac97753d5ffdd8c69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SIVzEIMzTHx0PndW"/></div></div></figure><ul class=""><li id="36f7" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">单击下一步</li><li id="dac1" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在路由中，单击添加主机规则</li><li id="b063" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">您可以在此处添加您的主机名，在本练习中，我使用通配符*进行配置</li></ul><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lx"><img src="../Images/2252e7eb99a7f183581d0cdecd12123f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CWiApTIqXiDk1hb2"/></div></div></figure><ul class=""><li id="3b21" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">点击添加路线规则</li><li id="e915" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">给优先级1和描述“默认规则”</li><li id="2f85" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">点击添加匹配条件</li><li id="6091" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">选择匹配类型前缀匹配，并在路径匹配框中写入通配符/</li><li id="bacc" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">单击完成</li></ul><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es ly"><img src="../Images/b83035d7dbbc2109832a10a9f6584163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z5BBG7EAO1qgiQvy"/></div></div></figure><ul class=""><li id="8686" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">选择从原点提取的主要操作</li><li id="dc23" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">从下拉列表中选择视频点播源</li></ul><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es ly"><img src="../Images/e53687ba0e0034301dcbc6839e84a9ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XWrujvwTYfBlIFyn"/></div></div></figure><ul class=""><li id="5125" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">展开加载项操作下拉列表</li><li id="9334" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在“路线操作”下，单击“添加项目”</li><li id="d5ad" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在类型中选择CDN策略</li><li id="39d7" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">缓存模式下的强制缓存全部</li><li id="009a" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在默认TTL中输入31536000</li><li id="54fc" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在缓存密钥策略下，选择排除查询字符串和排除主机</li></ul><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es ly"><img src="../Images/9f97ca2d5b7f1a34bdf229dcf75641a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mpcnz8oCpODUuvFl"/></div></div></figure><ul class=""><li id="28f9" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">点击完成并保存路线规则</li><li id="cef2" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">在主机规则中再次单击完成</li></ul><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es ly"><img src="../Images/a2de2cbb1ab8276abccbf7d9c98b4f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C9C4PtOoZDHRqzRf"/></div></div></figure><p id="2daf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">单击下一步，然后单击创建服务</p><p id="72c2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤4: </strong>在“services”选项卡中，记下IPv4地址(在下面的屏幕截图中被屏蔽)，我们将在下一步中用到它。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es kw"><img src="../Images/99c9688ba97605811d53ef13c66af780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HZR4ra8caahcFrLL"/></div></div></figure><p id="a3c8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤5: </strong>授予媒体CDN服务帐户查看存储对象的权限</p><p id="592d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">转到IAM &amp; Admin -&gt; IAM，单击添加，然后在新主体中添加媒体CDN服务帐户</p><p id="f48f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">服务账户邮箱示例:<strong class="jf hj">service-{ PROJECT _ NUM } @ GCP-sa-mediaedgefill . iam . gserviceaccount . com</strong></p><p id="dac2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">添加<strong class="jf hj">存储对象查看器</strong>角色，并点击保存。</p><h1 id="6c21" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">现在是进行端到端测试的时候了:</h1><p id="8bee" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在这一步中，我们将摄取大巴克兔子4K视频(将使用代码转换器API自动化进行代码转换，摄取后您不需要做任何事情)并使用媒体CDN播放。</p><p id="05bb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第一步:</strong>打开云壳，在云壳下载大巴克兔4K视频</p><ul class=""><li id="b7f4" class="ki kj hi jf b jg kb jk kc jo kk js kl jw km ka lp ko kp kq bi translated">打开云外壳并运行以下命令</li><li id="d17f" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">cd转码-自动化/</li><li id="4b9e" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">wget<a class="ae kg" href="http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_2160p_60fps_normal.mp4" rel="noopener ugc nofollow" target="_blank">http://distribution . bbb3d . render farming . net/video/MP4/BBB _ sunflower _ 2160 p _ 60 fps _ normal . MP4</a></li><li id="beeb" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">现在等待大巴克兔在cloudshell中下载</li><li id="868d" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">下载后，运行以下命令</li><li id="bab1" class="ki kj hi jf b jg kr jk ks jo kt js ku jw kv ka lp ko kp kq bi translated">gsutil CP BBB _ sunflower _ 2160 p _ 60 fps _ normal . MP4 GS://转码-自动化-source/</li></ul><p id="dba0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤2: </strong>访问云日志，过滤云函数日志，会发现日志行包含作业ID。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es kw"><img src="../Images/e0578d5ac372ca1c368392ade42e83f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i5mYvyYHk0oG06LE"/></div></div></figure><p id="b8e4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从云日志记录复制作业id</p><p id="1a15" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">打开云控制台并运行</p><blockquote class="li lj lk"><p id="8f64" class="jd je kh jf b jg kb ji jj jk kc jm jn ll kd jq jr lm ke ju jv ln kf jy jz ka hb bi translated">gcloud transcoder作业描述{ job-id }-location = { location }</p></blockquote><p id="ef09" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">要获取作业状态，请等待作业状态更改为成功(每隔2分钟尝试一次gcloud命令)，完成后使用任何hls播放器、vlc播放器或chrome/firefox hls / dash扩展检查回放。</p><p id="53cf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">您可以使用CDN url检查转码输出的回放。</p><p id="340e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" href="http://{cdn-ipv4-ip-address}/bbb_sunflower_2160p_60fps_normal/manifest.m3u8" rel="noopener ugc nofollow" target="_blank">http://<strong class="jf hj">{ cdn-IP v4-IP-address }</strong>/BBB _向日葵_ 2160 p _ 60 fps _ normal/manifest . m3u 8</a></p><p id="8909" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" href="http://{cdn-ipv4-ip-address}/bbb_sunflower_2160p_60fps_normal/manifest.mpd" rel="noopener ugc nofollow" target="_blank">http://<strong class="jf hj">{ cdn-IP v4-IP-address }</strong>/BBB _ sunflower _ 2160 p _ 60 fps _ normal/manifest . mpd</a></p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es kw"><img src="../Images/f7a9b1740d6e39fd322974a2f925596b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BwAC_eghlinodahv"/></div></div></figure><p id="660f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">对于除了大巴克兔子以外的视频文件，您可以使用以下url模式进行播放</p><p id="5152" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" href="http://{cdn-ipv4-ip-address}/{file-name}/manifest.m3u8" rel="noopener ugc nofollow" target="_blank">http://<strong class="jf hj">{ cdn-IP v4-IP-address }</strong>/{文件名}/manifest.m3u8 </a></p><p id="6e8d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" href="http://{cdn-ipv4-ip-address}/{file-name}/manifest.mpd" rel="noopener ugc nofollow" target="_blank">http://<strong class="jf hj">{ cdn-IP v4-IP-address }</strong>/{文件名}/manifest.mpd </a></p><h1 id="cab5" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">结束了</h1><p id="76f3" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">瞧，我们已经完成了自动化，你可以使用gsutil或云控制台(存储上传按钮)上传尽可能多的视频，请记住代码转换器API对并行作业有配额，所以如果你摄取的并行视频超过配额限制，那么你可能会遇到失败。在我的情况下，配额限制是20，所以我只能摄取20个并行视频。如果您希望提高配额限制，请联系google支持团队。</p><p id="9bbd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在下一篇博客中，我将带您浏览该工作流的报告和仪表板创建。</p><p id="81dd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如果你现在还和我在一起，想要建立报告和可视化，那么请访问我博客的第二部分<strong class="jf hj">继续这个故事</strong>:<a class="ae kg" rel="noopener" href="/google-cloud/automate-your-vod-transcoding-at-scale-with-gcp-part-2-b1da0e57823d">https://medium . com/Google-cloud/automate-your-VOD-transcoding-at-scale-with-GCP-part-2-b1da 0 e 57823d</a></p><p id="a360" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">免责声明:</strong>这是为了告知读者，文中表达的观点、想法和意见仅属于作者，不一定属于作者的雇主、组织、委员会或其他团体或个人。</p></div></div>    
</body>
</html>