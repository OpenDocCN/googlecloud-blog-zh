<html>
<head>
<title>Try out SQL Server on Google Cloud at your own pace</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以您自己的速度在Google Cloud上试用SQL Server</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/try-out-sql-server-on-google-cloud-at-your-own-pace-ba3888622c0a?source=collection_archive---------1-----------------------#2020-02-20">https://medium.com/google-cloud/try-out-sql-server-on-google-cloud-at-your-own-pace-ba3888622c0a?source=collection_archive---------1-----------------------#2020-02-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7f3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里有一种经济实惠的方法，可以让您按照自己的节奏在Google Cloud上试用SQL Server。</p><p id="6708" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将介绍创建Google云平台项目和启动Cloud SQL for SQL Server实例所需的步骤。接下来，我们将使用Azure Data Studio创建一个包含单个表的数据库，向表中插入一些示例数据，然后确认我们可以从新表中查询数据。最后，我们将关闭SQL Server以停止收费，直到我们准备好再次使用它。</p><p id="3968" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">创建谷歌云平台项目</strong></p><p id="77dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要开始，我们需要一个谷歌云平台项目。如果您已经有一个项目，可以跳过这一步。按照创建和管理项目的<a class="ae jd" href="https://cloud.google.com/resource-manager/docs/creating-managing-projects" rel="noopener ugc nofollow" target="_blank">文档</a>创建一个新项目。</p><p id="352d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">创建一个SQL Server实例</strong></p><p id="1bd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建好项目后，点击<a class="ae jd" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">云控制台</a>的左侧菜单，选择“SQL”打开云SQL视图。现在我们可以创建实例了。</p><p id="ecf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击“创建实例”按钮，并选择“选择SQL Server”选项。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/554632fd86722e42f12b9fbd2b7de063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QPWxNK_a25Zdk06_"/></div></div></figure><p id="a9bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输入“myinstance”作为实例ID。</p><p id="272d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输入“sqlserver”用户的密码，或者单击“生成”按钮。</p><p id="f863" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对其他字段使用默认值。</p><p id="4ff7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击“创建”按钮。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jq"><img src="../Images/f09546fd2b70fc5c3ba466b920b5413c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iDo7Uo5zzBCa9DKl"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">创建SQL Server实例</figcaption></figure><p id="01b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您将返回到实例列表；您可以立即单击新实例来查看详细信息，但是只有在它初始化和启动后才可用。</p><p id="3d32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用Google Cloud SDK和云SQL代理设置您的连接</strong></p><p id="b469" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建实例后，我们需要设置Google Cloud SDK和Cloud SQL代理，这将允许我们通过SQL Server Management Studio或Azure Data Studio等常见数据库管理工具连接到实例。按照以下步骤设置Google Cloud SDK和云SQL代理:</p><ol class=""><li id="e5a0" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">安装<a class="ae jd" href="https://cloud.google.com/sdk/docs" rel="noopener ugc nofollow" target="_blank">云SDK </a>。Cloud SDK提供了gcloud工具来与Cloud SQL和其他Google云服务进行交互。gcloud工具使用云SQL管理API来访问云SQL，因此在使用gcloud工具访问云SQL之前，您必须<a class="ae jd" href="https://cloud.google.com/sql/docs/sqlserver/admin-api#enabling_the_api" rel="noopener ugc nofollow" target="_blank">启用API </a>。</li></ol><p id="4c12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.在<a class="ae jd" href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)" rel="noopener ugc nofollow" target="_blank"> bash shell </a>命令提示符或<a class="ae jd" href="https://docs.microsoft.com/en-us/powershell/" rel="noopener ugc nofollow" target="_blank"> PowerShell </a>中，运行以下命令来初始化gcloud工具:</p><pre class="jf jg jh ji fd ke kf kg kh aw ki bi"><span id="b6a8" class="kj kk hi kf b fi kl km l kn ko">gcloud init</span></pre><p id="1560" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.运行以下命令来验证gcloud工具:</p><pre class="jf jg jh ji fd ke kf kg kh aw ki bi"><span id="db0b" class="kj kk hi kf b fi kl km l kn ko">gcloud auth login</span></pre><p id="5ac1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.下载并安装谷歌云SQL代理(参见<a class="ae jd" href="https://cloud.google.com/sql/docs/sqlserver/sql-proxy#install" rel="noopener ugc nofollow" target="_blank">安装云SQL代理</a>)。记下您保存云SQL代理可执行文件的位置，因为您将在下一步中运行代理。</p><p id="4587" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.使用bash shell命令提示符或PowerShell运行云SQL代理，将“[Instance-connection-name]”替换为云控制台的Overview选项卡中的相应值(针对您的实例):</p><pre class="jf jg jh ji fd ke kf kg kh aw ki bi"><span id="efa7" class="kj kk hi kf b fi kl km l kn ko">./cloud_sql_proxy -instances=[Instance-connection-name]=tcp:1433</span></pre><p id="c020" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于安装和使用代理的更多信息，请参见<a class="ae jd" href="https://cloud.google.com/sql/docs/sqlserver/sql-proxy" rel="noopener ugc nofollow" target="_blank">关于云SQL代理</a>。</p><p id="1408" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用Azure Data Studio </strong>连接到您的实例</p><p id="112f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在云SQL代理运行的情况下，使用Azure Data Studio和本地主机IP地址连接到您的SQL Server实例:</p><p id="160e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击Azure Data Studio中的“新建连接”选项</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kp"><img src="../Images/6e1bd112be844599ef7cf301a5c8a0df.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*SnKNFqEHdlC7FGGuA3Y2dQ.png"/></div></figure><p id="34bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj">连接细节</strong>对话框中输入以下值:</p><ol class=""><li id="2b32" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">对于连接类型，输入<strong class="ih hj"> Microsoft SQL Server </strong>。</li><li id="41f7" class="jv jw hi ih b ii kq im kr iq ks iu kt iy ku jc ka kb kc kd bi translated">对于Server，输入<strong class="ih hj"> 127.0.0.1 </strong>作为您的SQL Server实例的IP地址。</li><li id="6062" class="jv jw hi ih b ii kq im kr iq ks iu kt iy ku jc ka kb kc kd bi translated">对于认证类型，输入<strong class="ih hj"> SQL登录</strong>。</li><li id="7589" class="jv jw hi ih b ii kq im kr iq ks iu kt iy ku jc ka kb kc kd bi translated">对于用户名，输入<strong class="ih hj"> sqlserver </strong>。</li><li id="8c96" class="jv jw hi ih b ii kq im kr iq ks iu kt iy ku jc ka kb kc kd bi translated">对于口令，输入创建实例时使用的口令。</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kv"><img src="../Images/a80c7c4388679142e921f802ff96d32e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4Q_1hHfLZHTsfeB3"/></div></div></figure><p id="5794" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我们连接到SQL Server实例，我们就可以创建一个数据库和一个表来进行试验。在Azure Data Studio中右键单击服务器，选择“新建查询”。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kw"><img src="../Images/3e60a131b826e3865ddc3c6bb3ad6d3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*vFiCn7Y9dY9TTAnM6-V9xg.png"/></div></figure><p id="19f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在“新建查询”窗口中输入以下查询。</p><pre class="jf jg jh ji fd ke kf kg kh aw ki bi"><span id="0497" class="kj kk hi kf b fi kl km l kn ko">CREATE DATABASE testdb;<br/>GO</span><span id="f9a1" class="kj kk hi kf b fi kx km l kn ko">USE testdb;<br/>GO</span><span id="ed1e" class="kj kk hi kf b fi kx km l kn ko">CREATE TABLE guestbook (<br/> entryID int IDENTITY(1, 1) NOT NULL PRIMARY KEY,<br/> guestname varchar(255),<br/> content varchar(255)<br/>);</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/a2156ce18421e24ad800218890e273fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Stb3oBIrJl-Ft3bY"/></div></div></figure><p id="79db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击查询编辑器顶部的“运行”按钮。</p><p id="b7f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">右键单击在<strong class="ih hj">数据库</strong>下列出的新创建的<strong class="ih hj"> testdb </strong>表，并选择“新建查询”。</p><p id="8284" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输入以下插入语句，然后单击“运行”按钮运行SQL语句:</p><pre class="jf jg jh ji fd ke kf kg kh aw ki bi"><span id="822a" class="kj kk hi kf b fi kl km l kn ko">INSERT INTO guestbook (guestname, content) values (‘first guest’, ‘I got here!’);</span><span id="0516" class="kj kk hi kf b fi kx km l kn ko">INSERT INTO guestbook (guestname, content) values (‘second guest’, ‘Me too!’);</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ky"><img src="../Images/70c44ffdc059588f25495b7145435475.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IWTFlrB6Senb8GhT"/></div></div></figure><p id="0e33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经插入了一些数据，让我们查询表以确认我们可以访问这些数据。</p><p id="5dda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">展开左侧导航菜单中<strong class="ih hj">数据库&gt; testdb </strong>项下的<strong class="ih hj">表格</strong>项。右键单击<strong class="ih hj"> dbo.guestbook </strong>表并选择“选择前1000行”。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kz"><img src="../Images/77e5977e9e9a1ff0b6548c2265865044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*9ZoHbuoLPQbbQQifwGWGpA.png"/></div></figure><p id="3408" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您插入的两条记录显示为结果，干得好！</p><p id="db6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">关闭实例</strong></p><p id="bec3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关闭实例可确保在实例重新启动之前，该实例的所有计费都会停止。当您准备好再次开始使用它时，只需单击实例的“开始”按钮来重新启动实例。</p><p id="ee8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">查看Doug Mahugh的博客文章了解更多关于开始的信息。另外，请查看博客文章<a class="ae jd" href="https://cloud.google.com/blog/products/databases/migrate-your-microsoft-sql-server-workloads-to-google-cloud" rel="noopener ugc nofollow" target="_blank">将您的微软SQL Server工作负载迁移到谷歌云</a>和<a class="ae jd" href="https://cloud.google.com/sql/docs/sqlserver" rel="noopener ugc nofollow" target="_blank"> SQL Server文档</a>，了解更多关于将您的应用程序连接到谷歌云平台SQL Server的信息。</p></div></div>    
</body>
</html>