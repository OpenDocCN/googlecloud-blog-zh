<html>
<head>
<title>Getting the Best out of Google Cloud Shell</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">充分利用Google Cloud Shell</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/getting-the-best-out-of-google-cloud-shell-3d6ca64bc741?source=collection_archive---------0-----------------------#2020-02-08">https://medium.com/google-cloud/getting-the-best-out-of-google-cloud-shell-3d6ca64bc741?source=collection_archive---------0-----------------------#2020-02-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7cc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当涉及到访问google云资源或给予ssh访问权限或在云上执行一些操作时，我们会想到创建一个独立的VM(又名跳转服务器)。也可以选择运行专用实例或获得对本地系统的完全访问权限。当我们需要快速访问时，移动设备怎么办？所有这些障碍都可以通过一个解决方案来避免:<a class="ae jd" href="https://cloud.google.com/shell/" rel="noopener ugc nofollow" target="_blank"> Google Cloud Shell </a>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/0948a9c832f45e52e008268a43d3cc14.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*XxWTGiDhIvoUQCJmo1Ullg.png"/></div></figure><p id="81c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Google Cloud Shell是一个命令行机器，可供每个Google Cloud帐户用户免费使用，并提供从浏览器进行Shell访问，我们可以从浏览器访问和管理云资源和项目。这个安全的外壳有5GB的存储空间，预装了最喜欢的工具，如:MySql客户端、Kubernetes和Docker。外壳是帐户范围的，因此通过保持在同一个外壳上，我们可以连接到多个项目的云资源。</p><p id="6ca4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来看看如何充分利用Google Cloud Shell，让生活变得更加轻松。</p><h2 id="865e" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated">1.只需点击一下，几秒钟就能启动外壳</h2><p id="4e73" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">预装debian的机器只需点击谷歌云控制台右上角的“激活云壳”图标，几秒钟就能在同一个浏览器中启动。如果你很久没有使用shell或者第一次试用，可能需要半分钟左右。shell内置了对gcloud凭证的授权，因此您可以访问任何项目中您拥有IAM访问权限的任何云资源。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es km"><img src="../Images/5bf2968b798c231c76b554c027c006e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*SjZx6S4RQvMCwvKJepiCMQ.png"/></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">正在启动google云外壳</figcaption></figure><h2 id="4523" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated">2.从本地连接到云外壳</h2><p id="d4cc" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">Google Cloud Shell并不局限于浏览器访问，而是可以从任何安装了gcloud sdk和帐户激活的终端访问。使用gcloud IAM验证您的本地系统，并访问google cloud shell:</p><pre class="jf jg jh ji fd kr ks kt ku aw kv bi"><span id="0a4a" class="jm jn hi ks b fi kw kx l ky kz">$ gcloud auth login</span><span id="c534" class="jm jn hi ks b fi la kx l ky kz">$ gcloud alpha cloud-shell ssh</span></pre><h2 id="807b" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated">3.轻松通过SSH访问计算引擎实例</h2><p id="bccf" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">从云Shell中，使用<a class="ae jd" href="https://cloud.google.com/compute/docs/access/#granting_users_ssh_access_to_vm_instances" rel="noopener ugc nofollow" target="_blank"> SSH访问</a>的用户可以使用gcloud命令轻松连接到计算引擎实例。</p><pre class="jf jg jh ji fd kr ks kt ku aw kv bi"><span id="dfb3" class="jm jn hi ks b fi kw kx l ky kz">gcloud compute ssh [instance-name] --project [project-name] --zone [zone]</span></pre><p id="da19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">即使计算实例没有分配公共ip，也可以通过云外壳访问该实例。</p><h2 id="5e31" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated">4.正在运行的服务的Web预览</h2><p id="9f59" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">它不仅是外壳，而且是一个真正的调试工具。我们可以启动任何服务或运行docker，并使用“Web Preview”在nice URL上预览输出。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lb"><img src="../Images/8a09858f351a29971abdc2802ed91a12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ptAD1YARne_q48MnRfQNA.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">云壳web预览</figcaption></figure><p id="9d6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过在后台或外壳的不同标签上运行多个服务，我们可以在不同的端口上预览它们。</p><h2 id="6a4a" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated">5.增强云外壳的能力以获得更高的性能</h2><p id="bb36" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">默认情况下，云壳在<em class="lg"> g1-small </em>机器类型上运行，该机器类型提供1个vCPU短期突发和1.70 GB内存。有时，如果您必须使用多个选项卡并运行很少的服务，这是不够的。</p><p id="5ad3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">cloud shell新推出的功率提升功能允许对shell <em class="lg"> n1-standard-1 </em> VM实例进行升级，该实例提供1个vCPU和3.75GB内存，可运行24小时。</p><p id="04f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要激活增强模式，请单击云外壳“更多”菜单下的“启用增强模式”选项。</p><h2 id="90af" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated">6.它不仅仅是shell——代码编辑器和运行VS代码</h2><p id="0467" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">Google Cloud Shell基于<a class="ae jd" href="https://theia-ide.org/" rel="noopener ugc nofollow" target="_blank">忒伊亚IDE </a>的集成代码编辑器使得从浏览器编辑Shell中的文件和文件夹变得很容易。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lh"><img src="../Images/d21c9e303b6d9bca569c4b8ca1104f46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i_vZMETXnqe8jmwlN-RQoQ.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">云壳集成代码编辑器</figcaption></figure><p id="aeec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击云外壳顶部的<em class="lg">启动编辑器</em>(编辑图标)在浏览器上打开一个新标签，可以访问外壳根目录下的所有文件和文件夹。</p><p id="7a37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有，我们可以用云壳运行VS代码。通过docker或者云壳内部的<a class="ae jd" rel="noopener" href="/google-cloud/how-to-run-visual-studio-code-in-google-cloud-shell-354d125d5748"> shell </a>简单运行<a class="ae jd" href="https://github.com/cdr/code-server/" rel="noopener ugc nofollow" target="_blank"> cdr/code-server </a>，我们就可以在http端口预览nice VS code UI。</p><h2 id="6cf8" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated">7.轻松连接到云SQL</h2><p id="9bd7" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">无论是创建mysql用户、数据库还是在云sql实例上的任何操作，使用云Shell都变得更加简单。</p><pre class="jf jg jh ji fd kr ks kt ku aw kv bi"><span id="7533" class="jm jn hi ks b fi kw kx l ky kz">$ gcloud sql connect myinstance --user=root</span></pre><h2 id="8f21" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated">8.使用高级键从移动应用程序访问外壳</h2><p id="bfd5" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">云壳访问不仅限于web浏览器和计算机，还包括移动设备。除了获取警报通知、管理GCP资源和访问计算引擎实例之外，我们还可以从<a class="ae jd" href="https://cloud.google.com/console-app/" rel="noopener ugc nofollow" target="_blank">云控制台移动应用</a>连接到shell。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es li"><img src="../Images/5f211f25a658d84ddada63ec043c1ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wE7z7Du9fUIxww3Y7SgMuw.jpeg"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">从移动设备访问云外壳</figcaption></figure><h2 id="b872" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated">9.单击即可部署到云运行</h2><p id="d732" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">使用cloud shell可以将容器化的无服务器应用程序部署到Google Cloud Run按钮。新推出的“在Google Cloud上运行”按钮使得将新图像部署到cloud run服务变得非常简单。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lj"><img src="../Images/1465bf14c55be04489eefb1e5a7a9ef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*kW_xXIeCZ3hOvMqblDGg9A.png"/></div></figure><p id="e6d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从<a class="ae jd" href="https://github.com/GoogleCloudPlatform/cloud-run-button" rel="noopener ugc nofollow" target="_blank">Google cloud platform/cloud-run-button</a>repo中了解更多关于设置的应用程序结构。</p></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><p id="ce61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了上述使用云壳，我们可以使用它部署到云功能，GKE集群，应用引擎和其他服务。Google Cloud Shell文档<a class="ae jd" href="https://cloud.google.com/shell/docs/?hl=sk" rel="noopener ugc nofollow" target="_blank">可能会让你感兴趣去探索更多。</a></p><p id="bdb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐的云壳！！</p></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><p id="6e92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在T <a class="ae jd" href="https://twitter.com/dwdRAJU" rel="noopener ugc nofollow" target="_blank"> witter </a>和L<a class="ae jd" href="https://www.linkedin.com/in/dwdraju/" rel="noopener ugc nofollow" target="_blank">ink in</a>上与我保持联系，在那里我不断分享有趣的事情。</p></div></div>    
</body>
</html>