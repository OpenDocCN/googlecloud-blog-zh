<html>
<head>
<title>Dipping your toes into building an Analytics Platform on GCP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">尝试在GCP建立一个分析平台</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/tipping-your-toes-into-building-a-data-analytics-platform-on-gcp-2641926bc923?source=collection_archive---------1-----------------------#2017-12-22">https://medium.com/google-cloud/tipping-your-toes-into-building-a-data-analytics-platform-on-gcp-2641926bc923?source=collection_archive---------1-----------------------#2017-12-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6cb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“我们有许多不同的数据源，我们很难获得整个组织所有数据的全局视图。”</p><p id="81c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">“我们的数据目前都在&lt;中，在这里输入数据仓库名称&gt;，我们希望将它迁移到谷歌云。”</em></p><p id="4189" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">“我们希望将X仓库的数据提升并转移到BigQuery中。”</em></p><p id="0399" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些是我在与(潜在)客户交谈时每周(有时是每天)听到的一些陈述。我一次又一次地看到，关于在GCP(以及一般的云平台)上构建数据分析环境与更传统的方法有何不同，存在一些相当大的误解。传统上，它更倾向于将所有内容转储到企业数据仓库中，然后使用一些ETL工具来清理/转换/处理您的数据，以便为分析工作负载做好准备。因此，对于一些人来说,<em class="jd">数据管道</em>是一个陌生的概念，而对于另一些人来说，BigQuery不仅仅是另一个通用数据仓库的想法是不合理的…</p><p id="2c52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">澄清一下，这不一定局限于GCP，实际上可以普遍应用于基于云的数据分析平台。我关注GCP的原因有两个。</p><p id="baf7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我是谷歌大数据服务产品及其提供的所有价值的粉丝。其次，我认为GCP是部署的便利性、流动性和速度方面的先驱平台之一，尤其是在大数据架构方面。</p><p id="3429" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，尽管BigQuery是金童玉女，拥有其提供的所有价格和性能优势，但在GCP构建数据平台时，我们不能忘记围绕它的丰富的托管数据服务生态系统。这是我真正看到谷歌在大数据领域大放异彩的地方。</p><h1 id="b921" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">从哪里开始</h1><p id="c15a" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">作为一个解决方案架构师，我也是一个强迫性的规划者，这意味着我总是喜欢在我们放在一起的解决方案中看到某种形式的结构；话虽如此，但“<em class="jd">因为那是有效的</em>”的答案很难令人满意。我是分层架构的倡导者，这种架构通常映射到相应的服务分配。同样，当处理数据分析平台问题时，认为数据仓库是一个大机器，所有的东西都放在那里是非常可怕的想法；直译就是把所有的鸡蛋放在一个篮子里。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/6aaa0a606c24013fadf8abd41c4f850c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TexJaG1xBQ7boLUJdqnZYA.jpeg"/></div></div></figure><p id="0101" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，让我们后退一步，通过一个示例方法来构建一个现代数据分析平台，该平台利用了在Google Cloud上运行的灵活性和优势。</p><h1 id="7bce" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">分层架构</h1><h2 id="742a" class="kt jf hi bd jg ku kv kw jk kx ky kz jo iq la lb js iu lc ld jw iy le lf ka lg bi translated">层，层，层…</h2><p id="e7cd" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">回到基础，每个系统的定义都是由它的功能和它的输入与某些(期望的)输出的关系来定义的。一般来说，如果我们能够构建一个系统，当分配给我们相应的输入时，它给出我们想要的输出，那么我们就成功地实现了所需的功能。但这就够了吗？当然<em class="jd">不是</em>！</p><p id="7ab8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能</strong>:当我们开始添加更多/不同的输入时会发生什么？我们还能得到正确的/预期的输出吗？</p><p id="be86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">模块化</strong>:当我们需要修复或升级这个系统的一个子组件时会发生什么？我们是不是把它扔掉，然后从头开始造新的东西？</p><p id="cebf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可伸缩性:当系统需求增加时会发生什么？它能否扩展以满足这一增长的需求？或者我们抛弃它，构建一个更高性能的版本？</p><p id="5e4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可扩展性:当我们需要引入一种新的功能或者一个新的特性的时候怎么办？它是否足够模块化和可插拔，可以增加新功能？或者它是如此的单一，以至于建立一个全新的系统是更容易的途径？</p><p id="b7bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些都是工程师在设计任何系统之前通常会问自己的一些基本问题。</p><h2 id="971f" class="kt jf hi bd jg ku kv kw jk kx ky kz jo iq la lb js iu lc ld jw iy le lf ka lg bi translated">那么，我们如何将此应用于数据分析平台问题呢？</h2><p id="fd41" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">运行在云平台上的数据分析平台本身就是一个系统。这意味着它有输入和输出，并期望某些输入映射到某些输出。然而，这个系统只是在引擎盖下执行单一任务吗？不不是的！(<em class="jd">如果那是真的，我晚上会睡得更好)</em></p><p id="bb17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">澄清一下，在设计这样一个平台时，我们的目标是实现一组通用的功能特性。这些特征和特性可以是:</p><ul class=""><li id="1c9c" class="lh li hi ih b ii ij im in iq lj iu lk iy ll jc lm ln lo lp bi translated">摄取</li><li id="2739" class="lh li hi ih b ii lq im lr iq ls iu lt iy lu jc lm ln lo lp bi translated">储存；储备</li><li id="eab7" class="lh li hi ih b ii lq im lr iq ls iu lt iy lu jc lm ln lo lp bi translated">处理</li><li id="ca43" class="lh li hi ih b ii lq im lr iq ls iu lt iy lu jc lm ln lo lp bi translated">分析学</li><li id="4a71" class="lh li hi ih b ii lq im lr iq ls iu lt iy lu jc lm ln lo lp bi translated">探测</li><li id="206f" class="lh li hi ih b ii lq im lr iq ls iu lt iy lu jc lm ln lo lp bi translated">形象化</li></ul><p id="b4e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些特征中的每一个都扮演着重要的角色，以便实现一个平台，该平台通常在从多个源获得数据时能够向终端用户提供数据分析。</p><h2 id="0a1e" class="kt jf hi bd jg ku kv kw jk kx ky kz jo iq la lb js iu lc ld jw iy le lf ka lg bi translated">好吧，现在怎么办？</h2><p id="09d9" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">现在，我们可以采用分层架构的概念，并将其应用于数据分析平台的多功能定义，并制定功能性、模块化、可伸缩和可扩展的面向功能的架构。为此，我们可以为每个特定特征分配一个层。然后，我们根据这些特性如何相互作用来定义不同层之间的关系。</p><p id="05b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，不言而喻，数据接收将是从外部来源接收原始数据的第一个接触点。下一个数据将需要到达一个商店，在那里它可以被探索和处理。最后，处理后的数据需要暴露给最终用户用来与整个系统交互的可视化工具。</p><p id="24b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">注意:我意识到这是以一种过于简单的方式写出来的，然而，这只是为了提供总体主题的背景。实际的设计过程要复杂得多，需要考虑大量的其他因素。</em></p><p id="375e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们得到的是一个分层的平台架构，将不同的层安排如下。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lv"><img src="../Images/55131f73bca95c452769e5490c5713e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L9s75EUVtzftuWtKMwyeJw.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">高级大数据平台架构</figcaption></figure><p id="8678" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用这样的高级方法，我们可以清楚地描述不同层之间的界限、角色和职责。我们还可以确保每一层都服务于实现功能角色的目的。通过选择合适的技术来构建每一层，我们就可以构建一个功能强大、模块化、可扩展的数据分析平台。</p><h1 id="aaaa" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">进入谷歌云平台</h1><p id="e8e9" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">正如我之前所说的，在我离开在云环境中开发分层大数据平台设计的话题之前，Google Cloud提供了一个丰富的托管和无服务器大数据服务生态系统，包括BigQuery，它与这种分层设计方法非常吻合。以至于如果你拿着上面的图表，选择谷歌在每一个角色中提供的相应服务，你可能会得到类似这样的结果。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lv"><img src="../Images/c75efdc5d3765f2b6c05a8786fe1ddd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fb_UPhx7xJnEyoCZgLja0A.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">谷歌云平台上的高层大数据平台架构</figcaption></figure><p id="b9e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这并不是说，这是唯一的架构，也是唯一正确的服务选择，我会推荐给任何希望在GCP上构建企业级数据平台的人。其他组合也是可能的，并且总是值得尝试，但是我试图让这篇博文尽可能的简洁。</p><p id="53f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，肯定有其他服务选项和组合，每个组织都有自己的要求和特殊性，甚至有可能对特定服务选择产生影响的限制。更不用说我甚至根本没有涉及数据及时性方面(即批处理、微批处理和流)以及对上述服务选择及其集成要求的影响。重要的是要注意，尽管有不同的及时性选项，上面的分层架构仍然是适用的，可以服务于它要达到的目的。</p><h2 id="c241" class="kt jf hi bd jg ku kv kw jk kx ky kz jo iq la lb js iu lc ld jw iy le lf ka lg bi translated">谷歌云的附加值</h2><p id="595d" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">最棒的是，上面确定的每一项服务要么是托管服务，Google负责自动化底层基础设施和部署(即Datalab和Dataproc)，要么是纯粹的无服务器服务，Google完全为您管理整个服务，只提供一个(有点漂亮的)UI和一个与之交互的API(即Storage、BigQuery和Data Studio)；还有云数据流和云数据准备，介于这两个类别之间，但你明白了。</p><p id="7652" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总而言之，正如你所看到的，Google使得即插即用(这是一个我已经几十年没有听到或使用的术语)服务变得非常方便，并且与良好的架构设计实践保持一致。这使得任何组织都可以构建一个企业级和生产就绪型数据分析平台，该平台可以支持其需求，并以极快的速度实现价值。</p><p id="53b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">注意:我没有故意指定数据摄取服务，因为有许多不同的选项可以使用，所有选项都取决于被摄取的数据源的性质。我最喜欢的工具之一是Apache NiFi，原因很简单，因为它功能多样，而且它主要是作为数据摄取工具构建的。然而到目前为止，据我所知，在GCP和其他任何云平台上都没有托管的Apache NiFi服务。如果您更喜欢PaaS部署，另一个很好的数据摄取候选是Google App Engine。</em></p><h1 id="d7f0" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">关键要点—TL；速度三角形定位法(dead reckoning)</h1><ul class=""><li id="5304" class="lh li hi ih b ii kc im kd iq ma iu mb iy mc jc lm ln lo lp bi translated">对于一些人来说，接近企业数据分析平台的概念可能看起来有点像从将所有鸡蛋放入一个篮子中的传统方法的范式转变。</li><li id="ad04" class="lh li hi ih b ii lq im lr iq ls iu lt iy lu jc lm ln lo lp bi translated">建立一个现代化的数据平台不应是一项临时性的活动；慢慢来，定义您的功能，开发分层的面向功能的体系结构，为每一层定义相应的功能角色(根据最初的功能需求)，并选择与每一层的角色最匹配的技术。</li><li id="1557" class="lh li hi ih b ii lq im lr iq ls iu lt iy lu jc lm ln lo lp bi translated">谷歌提供了丰富的托管和无服务器大数据和分析服务产品套件，使任何人在GCP构建数据分析平台时都可以轻松地利用和集成高性能组件。</li></ul></div></div>    
</body>
</html>