<html>
<head>
<title>Using Google Cloud Build for Kubeflow Pipelines CI/CD</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用谷歌云构建Kubeflow Pipelines CI/CD</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/using-google-cloud-build-for-kubeflow-pipelines-ci-cd-b1459b08b158?source=collection_archive---------2-----------------------#2021-02-17">https://medium.com/google-cloud/using-google-cloud-build-for-kubeflow-pipelines-ci-cd-b1459b08b158?source=collection_archive---------2-----------------------#2021-02-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="c07b" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">或者我们如何在Google Cloud Build中使用kubectl port-forward来集成私有k8s服务</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/38e8479ca8bd0235a9777775fe656c92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*4QoB0ogz7DLide994i0e_g.png"/></div></figure><p id="c779" class="pw-post-body-paragraph jl jm hi jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在<a class="ae kj" href="https://imagr-ai.medium.com/" rel="noopener"> Imagr </a>这里，我们正在为我们的一些机器学习工作流程试验<a class="ae kj" href="https://www.kubeflow.org/docs/pipelines/overview/pipelines-overview/" rel="noopener ugc nofollow" target="_blank"> Kubeflow管道</a>。</p><p id="7a27" class="pw-post-body-paragraph jl jm hi jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了自动化Kubeflow管道部署，我们设置了一个简单的云构建作业，该作业编译管道并上传新版本。</p><p id="7d98" class="pw-post-body-paragraph jl jm hi jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">下面的代码片段启动了一个运行<code class="du kk kl km kn b">kubectl port-forward</code>命令的docker容器</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ko kp l"/></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">在docker容器内调用kubectl port-forward，将其作为cloudbuild网络中的服务公开</figcaption></figure><p id="3add" class="pw-post-body-paragraph jl jm hi jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">需要注意的两件最重要的事情是:</p><ol class=""><li id="2695" class="ku kv hi jn b jo jp js jt jw kw ka kx ke ky ki kz la lb lc bi translated"><code class="du kk kl km kn b">--network cloudbuild</code></li><li id="5588" class="ku kv hi jn b jo ld js le jw lf ka lg ke lh ki kz la lb lc bi translated"><code class="du kk kl km kn b">--address 0.0.0.0</code></li></ol><p id="91dc" class="pw-post-body-paragraph jl jm hi jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在下一步中，您应该能够访问公开服务中的端点。在下面的例子中，我使用<code class="du kk kl km kn b">curl</code>来列出现有的Kubeflow管道。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ko kp l"/></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">在端口8888上调用Kubeflow管道API</figcaption></figure><p id="96b8" class="pw-post-body-paragraph jl jm hi jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">当然这不是很有用，所以这里是另一个上传新管道版本的例子:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ko kp l"/></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">上传新的管道版本</figcaption></figure><p id="1ea2" class="pw-post-body-paragraph jl jm hi jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">同样的策略可以很容易地适应与其他内部kubernetes / kubeflow服务的通信。</p></div></div>    
</body>
</html>