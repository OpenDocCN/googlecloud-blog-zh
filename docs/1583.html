<html>
<head>
<title>How to Integrate External Data Sources with BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用BigQuery集成外部数据源</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/how-to-integrate-external-data-sources-with-bigquery-9e126d5751ea?source=collection_archive---------0-----------------------#2020-09-05">https://medium.com/google-cloud/how-to-integrate-external-data-sources-with-bigquery-9e126d5751ea?source=collection_archive---------0-----------------------#2020-09-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f945" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">连接联邦数据源的指导性方法</h2></div><p id="b85a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">数据联合是组织采用的一种整体方法，通过从不同的数据源收集信息来托管统一的数据控制点，从而获得有意义的见解。这使组织能够实施集中式存储库来支持分析。</p><p id="19b2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">联邦数据源，也称为外部数据源，是一个数据基础，可以用来直接从异构数据位置进行查询，即使数据没有存储在BigQuery中。使用这种方法，可以从多个源中以所需的数据格式提取结构化数据，从而避免从源系统复制或传输数据。这篇博客解释了从多个来源查询数据的方法，例如<strong class="iz hj">云存储</strong>、<strong class="iz hj">云SQL </strong>和<strong class="iz hj"> Google Drive </strong>。</p><h2 id="318c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">数据联合架构</h2><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ko"><img src="../Images/b61e53a59927bb42f504b8c8f3920297.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PnCw2SnrlXjXQt_O63W2Ww.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">数据处理流水线</figcaption></figure><h2 id="f435" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">步骤1:将云存储与BigQuery集成</h2><ol class=""><li id="178d" class="le lf hi iz b ja lg jd lh jg li jk lj jo lk js ll lm ln lo bi translated">登录谷歌云平台控制台，打开云存储浏览器。</li><li id="0d94" class="le lf hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">浏览包含源数据的文件的位置。BigQuery需要新的行分隔的JSON文件，每行都用大括号“<strong class="iz hj"> {} </strong>”和键/值对包围。</li><li id="30eb" class="le lf hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">使用外部表定义文件创建外部表。在下面的示例中，使用“<strong class="iz hj"> autodetect </strong>”标志创建表定义文件，以允许BigQuery自动识别模式。</li></ol><figure class="kp kq kr ks fd kt"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h2 id="9bbd" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">步骤2:将云SQL与BigQuery集成</h2><ol class=""><li id="72d2" class="le lf hi iz b ja lg jd lh jg li jk lj jo lk js ll lm ln lo bi translated">登录谷歌云平台控制台，打开云SQL</li><li id="8384" class="le lf hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">单击实例ID以打开概述页面。</li><li id="5c49" class="le lf hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">复制“连接名称”-[项目名称]:[区域]:[实例ID]。</li><li id="1f5f" class="le lf hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">使用“<strong class="iz hj"> bq mk </strong>”命令在云SQL和BigQuery之间创建一个外部连接。虽然可以使用云控制台连接到云SQL，但在下面的示例中，说明了命令行选项。</li></ol><figure class="kp kq kr ks fd kt"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h2 id="e9b3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">第三步:将Google Drive与BigQuery集成</h2><ol class=""><li id="ed77" class="le lf hi iz b ja lg jd lh jg li jk lj jo lk js ll lm ln lo bi translated">登录Google Drive</li><li id="862e" class="le lf hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">浏览要用作外部数据源的逗号分隔值(CSV)文件的位置。</li><li id="b9f3" class="le lf hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">右键单击CSV文件，然后单击“获取可共享链接”图标。</li><li id="7363" class="le lf hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">复制驱动器https://drive.google.com/file/d/[格式:<strong class="iz hj">【文件id】</strong>/查看？usp =分享】。</li><li id="e856" class="le lf hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">制定驱动为<a class="ae lw" href="https://drive.google.com/open?id=[file-id" rel="noopener ugc nofollow" target="_blank">https://drive.google.com/open?id=<strong class="iz hj">【文件编号</strong> </a>】。</li><li id="1e25" class="le lf hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">使用外部表定义文件(schema.json)创建外部表。BigQuery " <strong class="iz hj"> mk </strong>"命令使用模式定义文件读取表定义，并创建一个指向Google Drive的外部表。</li></ol><figure class="kp kq kr ks fd kt"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h2 id="68a4" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">步骤4:用于分析的联合查询:</h2><p id="9558" class="pw-post-body-paragraph ix iy hi iz b ja lg ij jc jd lh im jf jg lx ji jj jk ly jm jn jo lz jq jr js hb bi translated">联邦查询提供了一种统一的方法，即使底层数据源是异构的，也可以用一个查询从多个不连续的数据源中检索数据。单个查询通过访问联邦数据源来显示组合数据结构的视图。</p><figure class="kp kq kr ks fd kt"><div class="bz dy l di"><div class="lu lv l"/></div></figure></div></div>    
</body>
</html>