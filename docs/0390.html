<html>
<head>
<title>Scaled VM: Part 4. Load Balancer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">扩展的虚拟机:第4部分。负载平衡器</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/scaled-vm-part-4-load-balancer-c3e77df03a27?source=collection_archive---------1-----------------------#2017-09-23">https://medium.com/google-cloud/scaled-vm-part-4-load-balancer-c3e77df03a27?source=collection_archive---------1-----------------------#2017-09-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1689" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如何配置自动平衡器来处理“扩展的虚拟机”场景中的请求</p><p id="1073" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在以前的文章中，我描述了如何在托管实例中配置虚拟主机。</p><p id="d40b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我将描述如何配置负载平衡器来处理我们的虚拟机的请求。</p><p id="3528" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[ <a class="ae jd" rel="noopener" href="/@olostan/scaled-vm-part-1-just-scale-my-vm-9384eb67ccef">第一部分:简介</a>[<a class="ae jd" rel="noopener" href="/@olostan/scaled-vm-part-2-shared-fs-and-vm-instances-f90e362cc2f0">第二部分:FS/VM</a>[<a class="ae jd" rel="noopener" href="/@olostan/scaled-vm-part-3-web-hosting-9006705e83e8">第三部分:Web </a> ] [ <a class="ae jd" rel="noopener" href="/@olostan/scaled-vm-part-4-load-balancer-c3e77df03a27">第四部分:负载平衡器</a> ] <strong class="ih hj"> [ </strong> <a class="ae jd" rel="noopener" href="/@olostan/scaled-vm-quick-walkthrough-f695c72dacc3"> <strong class="ih hj">快速演练</strong> </a> <strong class="ih hj"> ] </strong></p></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><h1 id="36e7" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">负载平衡器配置</h1><p id="d1fb" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">现在我们知道我们的实例将提供来自共享文件系统的内容。但是我们需要单个IP来配置我们的DNS。之后，在高负载的情况下，如果实例组的autoscaler决定扩展新的虚拟机来处理负载，负载平衡器应该通过我们的虚拟机来分配负载。</p><p id="7b5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要设置这一点，您应该转到云控制台上的<a class="ae jd" href="https://console.cloud.google.com/net-services/loadbalancing/loadBalancers/list" rel="noopener ugc nofollow" target="_blank">负载平衡器</a>选项卡，并创建新的HTTP(S)负载平衡器(您可以在此处直接按<a class="ae jd" href="https://console.cloud.google.com/net-services/loadbalancing/http/add" rel="noopener ugc nofollow" target="_blank">来完成此操作)</a></p><p id="9eed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输入名称后，您应该单击“后端配置”，然后单击“创建或选择后端服务”和“创建后端服务”:</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ko"><img src="../Images/b8cff2cff9033910513634b16f735fdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pKWScrYEtOBYGKus8jk6-Q.png"/></div></div></figure><p id="dea6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在创建后端服务的过程中，您必须创建新的后端。在那里，您可以选择实例组:</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es la"><img src="../Images/69eb106a4f1a845f7ab160dff8e1d6a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c2i4gm5L4IspxFSi_KaYxw.png"/></div></div></figure><p id="5d11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，您需要创建“健康检查”。请<strong class="ih hj">小心</strong>选择<strong class="ih hj"> HTTP </strong>作为协议进行检查:</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lb"><img src="../Images/c4caec29e61a02ea350c01cb5c9e26ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8K9W5tB3VtCot0Yhnad5Qg.png"/></div></div></figure><p id="cdb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建健康检查后，您可以保存后端配置并继续<strong class="ih hj">前端配置:</strong></p><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lc"><img src="../Images/2cb6fb5833910725c680d85b25f423a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fD7F4JVyie_WRAN4s4PNug.png"/></div></div></figure><p id="9cca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里非常重要的是创建<strong class="ih hj">新的公共IP地址。</strong>该地址将在DNS配置中用于访问您的可扩展设置。</p><p id="e0a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，您应该会看到这样的内容:</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ld"><img src="../Images/06cecf8a4cd25f66f0c31ebacebdafdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMOOORok1tM-yn0OrHberw.png"/></div></div></figure><p id="1aca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你做了所有其他的事情，你应该能够使用公共IP访问你的系统。</p><p id="b06f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一部分，我将描述如何添加最后一个缺失点——cloud SQL作为托管MySQL的替代。</p></div></div>    
</body>
</html>