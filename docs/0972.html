<html>
<head>
<title>Google Cloud Functions Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云功能框架</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/google-cloud-functions-framework-9fbd899c201c?source=collection_archive---------0-----------------------#2019-04-15">https://medium.com/google-cloud/google-cloud-functions-framework-9fbd899c201c?source=collection_archive---------0-----------------------#2019-04-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a1ce916353a427cf17b6006897037126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bl6alboRV3yhP49aFyFQLw.png"/></div></div></figure><p id="acdd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated"><span class="l jp jq jr bm js jt ju jv jw di"> C </span> loud Functions是Google云平台上无服务器功能的托管服务。功能可动态扩展，按使用计费，消除了基础设施管理的繁重工作。那么，我为什么要在不同的环境中运行函数呢？</p><p id="ce63" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我们将使用<strong class="is hj">函数框架</strong>介绍<strong class="is hj">函数</strong> <strong class="is hj">可移植性</strong>的基础知识。我们将向您展示如何通过gcloud CLI、URL和Google Sheets等应用程序在本地使用Google Cloud Functions上的功能。</p><h1 id="389b" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">什么是功能框架？</h1><p id="845b" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">功能框架允许您:</p><ul class=""><li id="62e7" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lf lg lh li bi translated">启动<strong class="is hj">本地开发</strong> <strong class="is hj">服务器</strong>进行快速测试</li><li id="d6c1" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated"><strong class="is hj">调用函数</strong>以响应请求</li><li id="8cf4" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">自动解组符合<a class="ae lo" href="https://cloudevents.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">云事件</strong> </a> <strong class="is hj">规格</strong>的事件</li><li id="0fc1" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated"><strong class="is hj">在无服务器平台之间可移植</strong></li></ul><p id="19b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Google Cloud Functions for Node 10使用Functions框架作为其底层的<em class="lp"> invoker </em>模块。</p><p id="9268" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<a class="ae lo" href="https://github.com/GoogleCloudPlatform/functions-framework-nodejs" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae lo" href="http://npmjs.com/@google-cloud/functions-framework" rel="noopener ugc nofollow" target="_blank"> npm </a> : <code class="du lq lr ls lt b">@google-cloud/functions-framework</code>上是开源的</p><h1 id="e3b7" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">3个演示</h1><p id="f34b" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">下面的演示展示了从本地主机、gcloud CLI、URL和Google Sheets调用云函数。</p><p id="15c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将<code class="du lq lr ls lt b">COINBASE_TOKEN</code>设置为环境变量。在这里创建您的密钥<a class="ae lo" href="https://support.coinbase.com/customer/en/portal/articles/1914910-how-can-i-generate-api-keys-within-coinbase-commerce-" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="8a7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">代码</strong></p><p id="c21a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在节点中，导出一个用美元向<code class="du lq lr ls lt b">api.coinbase.com</code> BTC发出请求的函数。我们可以选择提供一个特定的<code class="du lq lr ls lt b">date</code>作为URL查询参数。</p><figure class="lu lv lw lx fd ij"><div class="bz dy l di"><div class="ly lz l"/></div><figcaption class="ma mb et er es mc md bd b be z dx translated">带有' COINBASE _ TOKEN` env变量的节点10。</figcaption></figure><p id="c900" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于函数框架，该函数可以在多种环境中调用:</p><p id="15d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">本地主机</strong></p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/28527d326337750f9ba3a08e962741c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*JF68bOFZdHleGEkK_xRDKg.gif"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">启动函数框架服务器</figcaption></figure><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/f4ff78866963a68eacd82cd8cac3cd7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NJ4qmA81qFb_T6d96-QgIA.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">转到本地主机:8080</figcaption></figure><p id="9ef6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> gcloud CLI </strong></p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/77914f0a887afe3f8857b046ddcaebbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1g65jIiBOeWIXuxDxaYt4A.gif"/></div></div></figure><p id="7f8c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">部署的网址</strong></p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/03e655ad4185524ef514fa5e79d374d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ni6-47CsYmQ2PZgr0euQ9g.gif"/></div></div></figure><p id="b0ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">谷歌工作表</strong></p><p id="a98f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以用几行应用程序脚本粘合Google Sheets的云功能。</p><figure class="lu lv lw lx fd ij"><div class="bz dy l di"><div class="ly lz l"/></div></figure><p id="597c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在谷歌工作表中，你可以输入<code class="du lq lr ls lt b">=</code>，然后自动完成你的功能。</p><figure class="lu lv lw lx fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/cf5179230eb323813b0f52f847299758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/1*fja8KilknjKgjY3ZY89HWw.gif"/></div><figcaption class="ma mb et er es mc md bd b be z dx translated">通过Google Sheets调用云函数</figcaption></figure><h1 id="c23a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">它是如何工作的</h1><p id="b7b6" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">当您对节点10运行<code class="du lq lr ls lt b">gcloud functions deploy</code>时，我们…</p><ol class=""><li id="46f3" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn mj lg lh li bi translated">将目录上传到文件夹。</li><li id="0bb0" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn mj lg lh li bi translated">用函数框架包装用户代码，这将在容器映像中创建一个HTTP服务器。</li><li id="ed8d" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn mj lg lh li bi translated">为将来函数调用存储容器。</li><li id="fdb3" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn mj lg lh li bi translated">根据需要旋转图像的实例并调用函数。</li></ol><p id="a7ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行任何。跑哪都行。整合任何东西。</p><figure class="lu lv lw lx fd ij"><div class="bz dy l di"><div class="mk lz l"/></div><figcaption class="ma mb et er es mc md bd b be z dx translated">我在Next’19上介绍了云函数。我推荐以1.5x的速度观看。</figcaption></figure><h2 id="d630" class="ml jy hi bd jz mm mn mo kd mp mq mr kh jb ms mt kl jf mu mv kp jj mw mx kt my bi translated">后续步骤</h2><ul class=""><li id="20e6" class="la lb hi is b it kv ix kw jb mz jf na jj nb jn lf lg lh li bi translated">在GitHub 上查看<a class="ae lo" href="https://github.com/GoogleCloudPlatform/functions-framework-nodejs" rel="noopener ugc nofollow" target="_blank">功能框架</a></li><li id="2394" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">阅读我们的<a class="ae lo" href="https://cloud.google.com/blog/products/serverless/announcing-cloud-run-the-newest-member-of-our-serverless-compute-stack" rel="noopener ugc nofollow" target="_blank">无服务器@ Next’19博客</a></li><li id="952f" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">观看<a class="ae lo" href="https://www.youtube.com/watch?v=0ZCcKTlcjgE" rel="noopener ugc nofollow" target="_blank">《云上无服务器》</a></li></ul></div></div>    
</body>
</html>