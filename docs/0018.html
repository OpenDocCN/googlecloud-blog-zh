<html>
<head>
<title>Develop bindings easily with Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Docker轻松开发绑定</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/developing-go-apps-that-depend-on-libraries-without-having-to-install-them-1172deefd171?source=collection_archive---------2-----------------------#2015-08-01">https://medium.com/google-cloud/developing-go-apps-that-depend-on-libraries-without-having-to-install-them-1172deefd171?source=collection_archive---------2-----------------------#2015-08-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="54cf" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">避免在您的机器上安装依赖项</h2></div><p id="2a9a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">想象一下这种情况:你想为你最喜欢的语言编写<a class="ae jt" href="http://ffmpeg.org" rel="noopener ugc nofollow" target="_blank"> FFmpeg </a>的绑定，当然你也想用你的笔记本电脑来这么做。</p><p id="0af5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些是步骤:</p><ol class=""><li id="a6d4" class="ju jv hi iz b ja jb jd je jg jw jk jx jo jy js jz ka kb kc bi translated">在计算机上安装FFmpeg</li></ol><p id="16de" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">等等，你说什么？你不装东西吗？你的笔记本上唯一能运行的是docker容器？？杰西，是你吗？</p><p id="b5f1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好吧，让我再试一次:</p><ol class=""><li id="e277" class="ju jv hi iz b ja jb jd je jg jw jk jx jo jy js jz ka kb kc bi translated">创建一个包含FFmpeg的Docker图像。</li><li id="f8ca" class="ju jv hi iz b ja kd jd ke jg kf jk kg jo kh js jz ka kb kc bi translated">添加你的开发工具，你的代码，你的点文件，和…</li></ol><p id="5ae2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好吧，你不用这么使劲翻白眼，我懂了！<br/>所以你想基本上在你的笔记本电脑上编辑你的代码…但是从容器中编译它？这可能吗？</p><p id="8a66" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">嗯，是的，它是！</p><h2 id="d210" class="ki kj hi bd kk kl km kn ko kp kq kr ks jg kt ku kv jk kw kx ky jo kz la lb lc bi translated">我的发展过程</h2><p id="2c1a" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">剧透:我的解决方案很简单，但我对它的工作方式非常满意，所以我决定分享一下。最后，对于这个例子，我将使用Go作为我的编程语言(毕竟，我是一个gopher ),但是你可以用任何你喜欢的语言做类似的事情。</p><p id="33df" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我基于官方<a class="ae jt" href="https://registry.hub.docker.com/_/golang/" rel="noopener ugc nofollow" target="_blank"> golang </a> Docker镜像写了一个安装FFmpeg的Docker文件。</p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="784c" class="ki kj hi ln b fi lr ls l lt lu">FROM golang</span><span id="7b7d" class="ki kj hi ln b fi lv ls l lt lu"># install FFmpeg<br/>RUN apt-get update &amp;&amp; apt-get install -y yasm pkg-config<br/>RUN git clone <a class="ae jt" href="https://github.com/FFmpeg/FFmpeg.git" rel="noopener ugc nofollow" target="_blank">https://github.com/FFmpeg/FFmpeg.git</a><br/>RUN cd FFmpeg &amp;&amp; ./configure &amp;&amp; make &amp;&amp; make install</span><span id="0b7b" class="ki kj hi ln b fi lv ls l lt lu"># this is the directory where the terminal will start<br/>WORKDIR /go<br/>CMD ["/bin/bash"]</span></pre><p id="35d3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">太好了，让我们建立并运行它！</p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="93a3" class="ki kj hi ln b fi lr ls l lt lu">➜ docker build -t campoy/ffmpeg .<br/>➜ docker run -it campoy/ffmpeg</span></pre><p id="d203" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">是啊！我们现在有一个bash在一个安装了go和FFmpeg的容器中运行！</p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="486c" class="ki kj hi ln b fi lr ls l lt lu"># go version<br/>go version go1.4.2 linux/amd64</span><span id="81b4" class="ki kj hi ln b fi lv ls l lt lu"># ffmpeg -version<br/>ffmpeg version N-74181-gc1bfb99 Copyright (c) 2000–2015 the FFmpeg developers<br/>...</span></pre><p id="4e64" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是我们的代码在哪里？我们可以在docker文件中添加一行来添加我们需要的所有代码，但是每次更改代码时，我们都应该重新构建容器。我们能做得更好吗？</p><h2 id="ff4b" class="ki kj hi bd kk kl km kn ko kp kq kr ks jg kt ku kv jk kw kx ky jo kz la lb lc bi translated">码头卷FTW</h2><p id="823c" class="pw-post-body-paragraph ix iy hi iz b ja ld ij jc jd le im jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">这是很酷的事情发生的地方。我们可以在运行容器时添加代码，而不是使用Docker卷来构建。</p><pre class="li lj lk ll fd lm ln lo lp aw lq bi"><span id="1ac0" class="ki kj hi ln b fi lr ls l lt lu">➜ docker run -it -v $GOPATH:/go/src campoy/ffmpeg</span></pre><p id="d996" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，如果我们从您的主机对映射目录中的任何文件进行更改，容器将立即看到这些更改，反之亦然。因此，我们可以在笔记本电脑上使用我们最喜欢的编辑器，并运行任何需要容器依赖项的工具。</p><figure class="li lj lk ll fd lx er es paragraph-image"><div class="er es lw"><img src="../Images/ada6f62fbba29809dc9705089c63ad76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*tbRNFvGuXKnS7XU5KDEddA.png"/></div><figcaption class="ma mb et er es mc md bd b be z dx translated">您可以使用您的工具来编辑您喜欢的代码，并且您的依赖项保留在您可以运行go install的容器(绿色)中。</figcaption></figure><p id="2a38" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最棒的是，这将有助于人们为您的项目做出贡献！不需要解释如何安装你的项目可能有的所有不同的依赖项，只需将docker文件添加到你的repo中！</p></div><div class="ab cl me mf gp mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hb hc hd he hf"><p id="1afa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢您的阅读，请在此评论或在<a class="ae jt" href="http://twitter.com/francesc" rel="noopener ugc nofollow" target="_blank"> @francesc </a>告诉我您的问题或意见。</p></div></div>    
</body>
</html>