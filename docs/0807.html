<html>
<head>
<title>A first glance at Google Cloud Scheduler</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云调度器一瞥</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/a-first-glance-at-google-cloud-scheduler-60554bc3cff7?source=collection_archive---------0-----------------------#2018-11-06">https://medium.com/google-cloud/a-first-glance-at-google-cloud-scheduler-60554bc3cff7?source=collection_archive---------0-----------------------#2018-11-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="adad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面你可以找到一些信息和我们从新的Google Cloud Scheduler服务中获得的快速见解，我们已经玩了几分钟了。</p><p id="107e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">云调度程序是一种区域资源，您可以选择将其部署在以下区域之一:</p><ul class=""><li id="c30d" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">美国中部</li><li id="09cd" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">欧洲-西方</li><li id="c478" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">亚洲-东北1</li></ul><p id="3ae4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意</strong>:该区域以后不能更改。</p><p id="fc06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择区域后，您可以看到为该区域设置了云调度程序。这大约需要一分钟。下一步是定义名称(对于项目中的cron作业是唯一的)、描述、unix-cron格式的时间表、时区和目标。目标可以是下列之一:</p><ul class=""><li id="e3e6" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">超文本传送协议</li><li id="0efc" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">应用引擎</li><li id="ca6a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">发布/订阅</li></ul><p id="6f0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这个例子，我们使用HTTP。我们将向其发出GET请求的端点将是<a class="ae jr" href="https://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank"> JSONPlaceholder </a>，它可以为我们提供简单的JSON响应，特别是跟随端点的<a class="ae jr" href="https://jsonplaceholder.typicode.com/todos/1" rel="noopener ugc nofollow" target="_blank">:</a></p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/afa9eb7bbceea545b3cbe56846af23d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lHVvsJBeZ3vhf03Br9SQ-g.png"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">计划作业创建菜单</figcaption></figure><p id="041b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们观察到的一件好事是，在输入cron表达式后，它会被验证，如果无效，您会收到一条消息。当长时间后试图编写cron表达式时，我通常会刷新表达式。不知道是不是只有我一个人，但是如果有一个助手能对我放进去的cron时间表做一个简短的解释，那就太好了！</p><p id="8acf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建作业后，您将被定向到一个视图，在该视图中您可以看到所有作业以及以下信息:</p><ul class=""><li id="bd92" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">日程安排</li><li id="24d6" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">如果他们跑了还是没跑</li><li id="39bf" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">上次执行的结果</li><li id="da6a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">点击一个按钮，在Stackdriver中显示作业日志的简单方法</li><li id="c61f" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">手动调用作业的按钮</li></ul><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es ki"><img src="../Images/64a621775aa4e01da20d3910026fd173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K0U4TMd49mGMGvbikp9isQ.png"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">已创建的计划作业的列表视图</figcaption></figure><p id="b24e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Stackdriver日志中，您可以看到每个作业执行的以下信息:</p><ul class=""><li id="0d8d" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">一个<em class="kj">scheduler . logging . attempt started</em>事件，记录调度作业的调用，以及关于作业的一些信息(目标、端点、作业名)</li><li id="efd7" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">一个<em class="kj">scheduler . logging . attempt finished</em>事件，它记录了作业的完成，以及我们从GET请求中获得的响应代码(` httpRequest.status` key)。<strong class="ih hj">日志中没有显示的是实际的响应正文。</strong></li></ul><p id="7681" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">另一个注意事项是不能修改现有的计划作业，必须重新创建才能进行修改。</strong></p><h1 id="6cbe" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">最初印象</h1><p id="c843" class="pw-post-body-paragraph if ig hi ih b ii li ik il im lj io ip iq lk is it iu ll iw ix iy lm ja jb jc hb bi translated">云调度程序目前处于测试阶段，可能会发生变化。它可以作为其余管道的触发器，因为您不能在Cloud Scheduler中直接嵌入任何定制逻辑。例如，您可以创建一个云函数，并将其与云调度程序挂钩，这样您就可以在调度中执行任何类型的逻辑。最后，它还在失败时自动重试(对于HTTP，<a class="ae jr" href="https://cloud.google.com/blog/products/application-development/announcing-cloud-scheduler-a-modern-managed-cron-service-for-automated-batch-jobs" rel="noopener ugc nofollow" target="_blank">失败被认为是</a>非2xx响应，或者对于Pub/Sub为非0)。</p><p id="542f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快速浏览一下，Cloud Scheduler看起来非常有趣，因为它可以作为Google Cloud中调度作业的初始位置。</p></div></div>    
</body>
</html>