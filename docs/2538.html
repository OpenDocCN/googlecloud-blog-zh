<html>
<head>
<title>Google Cloud Pub/Sub: A Messaging Service</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云发布/订阅:一项消息服务</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/google-cloud-pub-sub-a-messaging-service-e139e3397dd7?source=collection_archive---------4-----------------------#2022-11-22">https://medium.com/google-cloud/google-cloud-pub-sub-a-messaging-service-e139e3397dd7?source=collection_archive---------4-----------------------#2022-11-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="b611" class="ig ih hi bd ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd bi translated"><em class="if">酒馆/Sub </em></h1><p id="ca4d" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><em class="kc">Pub/Sub(</em><strong class="jg hj"><em class="kc">Publish/Subscribe</em></strong><em class="kc">)是一种</em> <strong class="jg hj"> <em class="kc">异步消息服务</em> </strong> <em class="kc">设计成具有高度可靠性的</em><strong class="jg hj"><em class="kc"/></strong><em class="kc"/><strong class="jg hj"><em class="kc"/></strong><em class="kc">与</em><strong class="jg hj"><em class="kc"/></strong><em class="kc">的顺序</em> </p><h1 id="3b61" class="ig ih hi bd ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd bi translated"><strong class="ak"> <em class="if">发布/订阅服务中的关键概念</em> </strong></h1><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es kd"><img src="../Images/3a8cf415bfebb29f854cb5b46adb0bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*MBpkIfwt0dplGaiDTqF51Q.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx translated"><em class="if">发布/订阅模式</em></figcaption></figure><ul class=""><li id="8f1a" class="kp kq hi jg b jh kr jl ks jp kt jt ku jx kv kb kw kx ky kz bi translated"><strong class="jg hj"> <em class="kc">主题:</em> </strong> <em class="kc">发布者向其发送消息的命名资源。</em></li><li id="366f" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><strong class="jg hj"> <em class="kc">订阅:</em> </strong> <em class="kc">一个命名的资源，表示来自单个特定主题的消息流，将被传送到订阅应用程序。</em></li><li id="adda" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><strong class="jg hj"> <em class="kc">消息:</em> </strong> <em class="kc">发布者发送给主题的数据和(可选)属性的组合，最终被传递给订阅者。</em></li><li id="066f" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><strong class="jg hj"> <em class="kc">消息属性:</em> </strong> <em class="kc">发布者可以为消息定义的键值对。例如，可以将关键字</em> <code class="du lf lg lh li b"><em class="kc">iana.org/language_tag</em></code> <em class="kc">和值</em> <code class="du lf lg lh li b"><em class="kc">en</em></code> <em class="kc">添加到消息中，以将它们标记为对说英语的订户可读。</em></li><li id="1e4b" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><strong class="jg hj"> <em class="kc">发布者:</em> </strong> <em class="kc">创建并向单个或多个主题发送消息的应用。</em></li><li id="dc2a" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><strong class="jg hj"> <em class="kc">订阅者:</em> </strong> <em class="kc">订阅单个或多个主题以接收消息的应用程序。</em></li><li id="b812" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><strong class="jg hj"><em class="kc">【Ack】:</em></strong><em class="kc">用户成功接收消息后，向发布/订阅发送信号。已确认的消息将从订阅消息队列中删除。</em></li><li id="4c81" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><strong class="jg hj"> <em class="kc">推和拉:</em> </strong> <em class="kc">这两种消息传递方式。订户通过Pub/Sub </em> <strong class="jg hj"> <em class="kc">将</em> </strong> <em class="kc">消息推送到订户选择的端点或者通过订户</em> <strong class="jg hj"> <em class="kc">将</em> </strong> <em class="kc">消息从服务中拉出来接收消息。</em></li></ul><h1 id="0ba6" class="ig ih hi bd ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd bi translated"><em class="if">基本</em> <strong class="ak"> <em class="if">通过发布/订阅</em> </strong>的消息流</h1><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es lj"><img src="../Images/64c8eeca92a8460d5a7443671ebbd6b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jnThoO7vm0yweI70z38vuw.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx translated"><em class="if">通过发布/订阅的基本消息流</em></figcaption></figure><p id="4760" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><em class="kc">在这个场景中，</em></p><ul class=""><li id="210b" class="kp kq hi jg b jh kr jl ks jp kt jt ku jx kv kb kw kx ky kz bi translated">有两个发布者发布关于一个主题的消息。</li><li id="42ba" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><em class="kc">这个话题有两个订阅。第一个订阅有两个订阅者，这意味着消息将在它们之间进行负载平衡，每个订阅者接收一个消息子集。第二个订阅有一个将接收所有消息的订户。</em></li><li id="1e3b" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><em class="kc">消息A来自发布者1，通过订阅1发送给订阅者2，通过订阅2发送给订阅者3。</em></li><li id="d9d5" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><em class="kc">消息B来自发布者2，通过订阅1发送给订阅者1，通过订阅2发送给订阅者3。</em></li></ul><h1 id="febf" class="ig ih hi bd ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd bi translated"><em class="if">发布/订阅关系的类型</em></h1><p id="8577" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><em class="kc">发布/订阅由三种类型的</em>关系<em class="kc"> : </em></p><p id="1435" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><strong class="jg hj"> <em class="kc">一对多(扇出):</em> </strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es lr"><img src="../Images/5f637a2a82491d97bfba0e63f18f368a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*ejzsYkKo3K8l04LDYxhqjg.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx translated"><em class="if">一对多</em></figcaption></figure><p id="0af2" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><strong class="jg hj"> <em class="kc">多对一(扇入):</em> </strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es ls"><img src="../Images/d126bf2b5172cea566947d6c2f0eb67d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*ob3hyRWgcXKm8OgkLgLDMA.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx translated"><em class="if">多对一</em></figcaption></figure><p id="292b" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><strong class="jg hj"> <em class="kc">多对多:</em> </strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es lt"><img src="../Images/fa0eff1307736f0691f480e348db41dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*d9iOoCkglFoY7069x71hZw.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx translated"><em class="if">多对多</em></figcaption></figure><h1 id="0421" class="ig ih hi bd ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd bi translated"><em class="if">发布/订阅服务的类型</em></h1><p id="ff47" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><em class="kc">发布/订阅包含两个服务:</em></p><ul class=""><li id="c353" class="kp kq hi jg b jh kr jl ks jp kt jt ku jx kv kb kw kx ky kz bi translated"><strong class="jg hj"> <em class="kc">发布/订阅服务:</em> </strong> <em class="kc">这种消息服务是大多数用户和应用的默认选择。它提供了最高的可靠性和最大的集成集，以及自动容量管理。发布/订阅保证将所有数据同步复制到至少两个区域，并尽最大努力复制到第三个附加区域。</em></li><li id="6e73" class="kp kq hi jg b jh la jl lb jp lc jt ld jx le kb kw kx ky kz bi translated"><strong class="jg hj"> <em class="kc"> Pub/Sub Lite服务:</em> </strong> <em class="kc">一个独立但相似的消息服务，以较低的成本构建。与发布/订阅相比，它的可靠性较低。它提供区域或地区性主题存储。Zonal Lite主题只存储在一个区域中。区域Lite主题将数据异步复制到第二个区域。此外，发布/订阅精简版要求您预先调配和管理存储和吞吐量。只有在实现低成本需要一些额外的操作工作和较低的可靠性的应用中，才考虑发布/订阅Lite。</em></li></ul><h2 id="5e93" class="lu ih hi bd ii lv lw lx im ly lz ma iq jp mb mc iu jt md me iy jx mf mg jc mh bi translated"><em class="if">功能对照表:发布/订阅与发布/订阅精简版</em></h2><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es mi"><img src="../Images/201d477d49876fe93e791dd43c248e3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-exO48JDiuMX4tJdWkvig.png"/></div></div></figure><h1 id="9a44" class="ig ih hi bd ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd bi translated"><em class="if">将发布/订阅与其他谷歌云产品集成</em></h1><p id="affd" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="jg hj"><em class="kc"/></strong><em class="kc"/><strong class="jg hj"><em class="kc"/></strong><a class="ae mj" href="https://cloud.google.com/dataflow/docs" rel="noopener ugc nofollow" target="_blank"><strong class="jg hj"><em class="kc">数据流</em> </strong> </a> <em class="kc">，包括数据流</em><strong class="jg hj"><em class="kc"/></strong><a class="ae mj" href="https://cloud.google.com/dataflow/docs/concepts/dataflow-templates" rel="noopener ugc nofollow" target="_blank"><strong class="jg hj"><em class="kc">模板</em></strong></a><strong class="jg hj"><em class="kc"/></strong><em class="kc">和</em> <a class="ae mj" href="https://cloud.google.com/dataflow/docs/samples/join-streaming-data-with-sql" rel="noopener ugc nofollow" target="_blank"> <strong class="jg hj"> <em class="kc"> SQL用于将数据从发布/订阅移动到云存储、BigQuery和其他产品的数据流模板可在谷歌云控制台的发布/订阅和数据流用户界面中获得。与</em><a class="ae mj" href="https://cloud.google.com/learn/what-is-apache-spark" rel="noopener ugc nofollow" target="_blank"><strong class="jg hj"><em class="kc">Apache Spark</em></strong></a><em class="kc">集成，特别是管理时与</em><a class="ae mj" href="https://cloud.google.com/dataproc/docs/concepts/overview" rel="noopener ugc nofollow" target="_blank"><strong class="jg hj"><em class="kc">data proc</em></strong></a><em class="kc">也可用。运行在</em><strong class="jg hj"><em class="kc">Spark+Data proc</em></strong><em class="kc">上的集成和处理流水线的可视化组成可以用</em><strong class="jg hj"><em class="kc"/></strong><a class="ae mj" href="https://cloud.google.com/data-fusion/docs/concepts/overview" rel="noopener ugc nofollow" target="_blank"><strong class="jg hj"><em class="kc">数据融合</em> </strong> </a> <em class="kc">来完成。</em></strong></a></p><p id="d364" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><strong class="jg hj"> <em class="kc">监控、告警、日志:</em> </strong> <em class="kc">受监控和日志产品支持。</em></p><p id="fa11" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><strong class="jg hj"> <em class="kc">认证和IAM: </em> </strong> <em class="kc">发布/订阅依赖于其他Google云产品使用的标准OAuth认证，并支持粒度IAM，支持对单个资源的访问控制。</em></p><p id="45f5" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><strong class="jg hj"><em class="kc">API:</em></strong><em class="kc">Pub/Sub使用标准的</em> <a class="ae mj" href="https://cloud.google.com/pubsub/docs/apis" rel="noopener ugc nofollow" target="_blank"> <strong class="jg hj"> <em class="kc"> gRPC和REST服务API技术</em> </strong> </a> <em class="kc">以及用于几种语言的</em> <a class="ae mj" href="https://cloud.google.com/pubsub/docs/reference/libraries" rel="noopener ugc nofollow" target="_blank"> <strong class="jg hj"> <em class="kc">客户端库</em></strong></a><strong class="jg hj"><em class="kc"/></strong><em class="kc">。</em></p><p id="d805" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><strong class="jg hj"> <em class="kc">触发器、通知和webhooks:</em></strong><em class="kc">Pub/Sub向web hooks提供基于推送的消息传递，作为HTTP POST请求。您可以使用</em> <a class="ae mj" href="https://cloud.google.com/functions/docs" rel="noopener ugc nofollow" target="_blank"> <strong class="jg hj"> <em class="kc">云功能</em></strong></a><strong class="jg hj"><em class="kc"/></strong><em class="kc">或其他无服务器产品实现工作流自动化。</em></p><p id="d67f" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><strong class="jg hj"> <em class="kc">编排:</em> </strong> <em class="kc">发布/订阅可以声明式地集成为多步无服务器</em> <a class="ae mj" href="https://cloud.google.com/workflows" rel="noopener ugc nofollow" target="_blank"> <strong class="jg hj"> <em class="kc">工作流</em> </strong> </a> <em class="kc">。大数据和分析编排经常用</em> <a class="ae mj" href="https://cloud.google.com/composer/docs" rel="noopener ugc nofollow" target="_blank"> <strong class="jg hj"> <em class="kc">云作曲</em> </strong> </a> <em class="kc">来完成，它支持发布/订阅触发器。还可以将Pub/Sub与</em> <a class="ae mj" href="https://cloud.google.com/application-integration/docs/overview" rel="noopener ugc nofollow" target="_blank"> <strong class="jg hj"> <em class="kc">应用集成</em></strong></a><strong class="jg hj"><em class="kc">(</em></strong><a class="ae mj" href="https://cloud.google.com/products#product-launch-stages" rel="noopener ugc nofollow" target="_blank"><strong class="jg hj"><em class="kc">预览</em></strong></a><strong class="jg hj"><em class="kc">)</em></strong><em class="kc">集成平台即服务(iPaaS)解决方案。应用集成提供了</em> <a class="ae mj" href="https://cloud.google.com/application-integration/docs/configuring-pubsub-trigger" rel="noopener ugc nofollow" target="_blank"> <strong class="jg hj"> <em class="kc">发布/订阅触发器</em> </strong> </a> <em class="kc">来触发或启动集成。</em></p><p id="5fb9" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><strong class="jg hj"> <em class="kc">集成连接器:</em> </strong> <em class="kc">这些</em> <a class="ae mj" href="https://cloud.google.com/integration-connectors/docs/about-connectors" rel="noopener ugc nofollow" target="_blank"> <strong class="jg hj"> <em class="kc">连接器</em> </strong> </a> <em class="kc">让你连接各种数据源。有了连接器，Google云服务和第三方业务应用程序都通过透明的标准接口向您的集成开放。</em></p><p id="c907" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><em class="kc">如果你想了解更多，你可以参考下面的文件，</em></p><div class="mk ml ez fb mm mn"><a href="https://cloud.google.com/pubsub/docs/publish-receive-messages-console" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">快速入门:使用Google云控制台|云发布/订阅在发布/订阅中发布和接收消息…</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">发送反馈本页向您展示如何使用Google Cloud控制台在发布/订阅中执行基本任务。跟随…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">cloud.google.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb kj mn"/></div></div></a></div><div class="mk ml ez fb mm mn"><a href="https://cloud.google.com/pubsub/docs/overview#common_use_cases" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">什么是Pub/Sub？|云发布/订阅文档|谷歌云</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">要点:了解什么是发布/订阅，为什么企业需要发布/订阅，以及发布/订阅相比于…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">cloud.google.com</p></div></div><div class="mw l"><div class="nc l my mz na mw nb kj mn"/></div></div></a></div><div class="mk ml ez fb mm mn"><a href="https://cloud.google.com/pubsub/docs/choosing-pubsub-or-lite" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">选择发布/订阅或发布/订阅精简版|云发布/订阅文档| Google云</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">本主题旨在帮助您在发布/订阅和发布/订阅精简版之间进行选择。该主题要求您熟悉…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">cloud.google.com</p></div></div><div class="mw l"><div class="nd l my mz na mw nb kj mn"/></div></div></a></div><p id="465a" class="pw-post-body-paragraph je jf hi jg b jh kr jj jk jl ks jn jo jp lo jr js jt lp jv jw jx lq jz ka kb hb bi translated"><strong class="jg hj"> <em class="kc">谢谢:)</em> </strong></p></div></div>    
</body>
</html>