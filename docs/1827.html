<html>
<head>
<title>Dart Functions Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Dart功能框架</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/dart-functions-framework-25a13251a5d?source=collection_archive---------0-----------------------#2021-03-17">https://medium.com/google-cloud/dart-functions-framework-25a13251a5d?source=collection_archive---------0-----------------------#2021-03-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/750f8bb256a4dda6cc0ce8d765e3a35b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_9fiqNLqBa_m6YRpZTzAQ.png"/></div></div></figure><p id="ffe4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Dart函数框架允许您在Dart中编写轻量级的无服务器函数，这些函数可以部署到Google Cloud。</p><p id="7861" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇博客文章中，我们将介绍如何开始使用这个框架，并为云运行部署一个功能💨👟。</p><h2 id="875c" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">安装Dart SDK</h2><p id="14e0" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">您可以在<a class="ae ko" href="https://dart.dev/get-dart" rel="noopener ugc nofollow" target="_blank">dart.dev/get-dart</a>为您的机器安装Dart。</p><p id="3897" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于macOS，运行以下命令:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="d43f" class="jo jp hi ku b fi ky kz l la lb">brew tap dart-lang/dart<br/>brew install dart</span></pre><h2 id="62cd" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">安装Dart函数框架dartfn</h2><p id="55c4" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated"><code class="du lc ld le ku b">dartfn</code>命令行工具有助于搭建功能，如<code class="du lc ld le ku b">helloworld</code>、<code class="du lc ld le ku b">cloudevent</code>和<code class="du lc ld le ku b">json</code>。</p><p id="03e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装Dart功能框架CLI ( <code class="du lc ld le ku b">dartfn</code>)和:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="3833" class="jo jp hi ku b fi ky kz l la lb">dart pub global activate dartfn</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/209bdb2762b5c0fedc590d05281685ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PlDE30ONWnfqMtb6GNq9Kw.gif"/></div></div></figure><p id="61e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用生成器创建一个“Hello，World”函数:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="623c" class="jo jp hi ku b fi ky kz l la lb">mkdir helloworld<br/>cd helloworld<br/>dartfn generate helloworld</span></pre><p id="3813" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将输出:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="40bf" class="jo jp hi ku b fi ky kz l la lb">project: helloworld<br/>Creating helloworld application `helloworld`:<br/>  helloworld/.gitignore<br/>  helloworld/Dockerfile<br/>  helloworld/README.md<br/>  helloworld/analysis_options.yaml<br/>  helloworld/bin/server.dart<br/>  helloworld/lib/functions.dart<br/>  helloworld/pubspec.yaml<br/>  helloworld/test/function_test.dart<br/>8 files written.</span><span id="738d" class="jo jp hi ku b fi lg kz l la lb">--&gt; to provision required packages, run 'pub get'</span></pre><p id="bdb9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，运行<code class="du lc ld le ku b">pub get</code>来安装依赖项。</p><h2 id="e2dc" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">运行您的函数</h2><p id="1f33" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">在引导您的函数后，您可以使用以下命令在本地运行该函数:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="04cd" class="jo jp hi ku b fi ky kz l la lb">dart run bin/server.dart</span></pre><p id="40d2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后您可以使用<code class="du lc ld le ku b">curl</code>在<code class="du lc ld le ku b"><a class="ae ko" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a></code>测试功能:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="c119" class="jo jp hi ku b fi ky kz l la lb"># curl <a class="ae ko" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a><br/>Hello, World!</span></pre><p id="ab9b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不错！🙌</p><h2 id="b9a7" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">部署到云运行</h2><p id="e73c" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">现在，让我们部署到云运行:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="85ef" class="jo jp hi ku b fi ky kz l la lb">gcloud beta run deploy my-dart-function \<br/>  --source=. \<br/>  --region=us-central1 \<br/>  --platform managed \<br/>  --allow-unauthenticated</span></pre><p id="a1d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个命令将按照预先生成的docker文件中的步骤来构建您的函数。</p><blockquote class="lh li lj"><p id="82a7" class="iq ir lk is b it iu iv iw ix iy iz ja ll jc jd je lm jg jh ji ln jk jl jm jn hb bi translated">注意:使用<code class="du lc ld le ku b">—-source</code>标志需要<code class="du lc ld le ku b">gcloud beta</code>。</p></blockquote><p id="5166" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大约一分钟后，您就已经部署了一个云运行服务，在本例中使用了一个公共URL:</p><blockquote class="lo"><p id="9973" class="lp lq hi bd lr ls lt lu lv lw lx jn dx translated"><a class="ae ko" href="https://my-dart-function-q7vieseilq-uc.a.run.app" rel="noopener ugc nofollow" target="_blank">https://my-dart-function-q 7 vieseilq-UC . a . run . app</a></p></blockquote><p id="10de" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">太好了！我们刚刚在Dart中部署了一个自动缩放功能。🎉</p><h1 id="647b" class="md jp hi bd jq me mf mg ju mh mi mj jy mk ml mm kb mn mo mp ke mq mr ms kh mt bi translated">了解更多信息</h1><p id="f5b0" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">如果你喜欢这篇博文，请查看源代码中的<strong class="is hj">文档</strong>:</p><p id="0df4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ko" href="https://github.com/GoogleCloudPlatform/functions-framework-dart" rel="noopener ugc nofollow" target="_blank">https://github . com/Google cloud platform/functions-framework-dart</a></p><p id="91d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者观看<strong class="is hj">视频</strong>构建二维码生成器:</p><figure class="kp kq kr ks fd ij"><div class="bz dy l di"><div class="mu mv l"/></div><figcaption class="mw mx et er es my mz bd b be z dx translated">带Dart教程的云函数</figcaption></figure></div></div>    
</body>
</html>