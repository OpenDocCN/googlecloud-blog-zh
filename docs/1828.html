<html>
<head>
<title>JWT (JSON Web Tokens) Errors | Invalid JWT Signature</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JWT (JSON Web令牌)错误|无效的JWT签名</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/jwt-json-web-tokens-errors-invalid-jwt-signature-8aab13703eb5?source=collection_archive---------0-----------------------#2021-03-18">https://medium.com/google-cloud/jwt-json-web-tokens-errors-invalid-jwt-signature-8aab13703eb5?source=collection_archive---------0-----------------------#2021-03-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="005b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">错误是最好的，尤其是当你以一种破译者的方式写出来的时候。我记得过去的美好时光，我得到的所有错误代码都是数字，也许是字母混合在一起，没有任何在线搜索来轻松获得解释。</p><p id="c757" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我一直在使用谷歌云产品，并从我的笔记本电脑连接到存储和BigQuery等服务。在过去的几个月里，我遇到了几次JWT错误，<code class="du jd je jf jg b"><em class="jh">invalid_grant:Invalid JWT Signature</em></code>，下面提供了我如何解决它的概述，基本上是更新过期的服务帐户密钥。</p><h1 id="0d0f" class="ji jj hi bd jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf bi translated">JWT误差</h1><p id="a5f2" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">“服务器到服务器的认证交互机制要求应用程序创建并加密签署JSON Web令牌(jwt)。”jwt是经过签名的令牌，用于验证服务器到服务器的连接。</p><p id="a2b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于<a class="ae kl" href="https://developers.google.com/identity/protocols/oauth2/service-account#creatinganaccount" rel="noopener ugc nofollow" target="_blank">使用OAuth 2.0进行服务器到服务器应用</a>的页面中间有一个叫做<strong class="ih hj"> JWT错误代码</strong>的部分，它给出了关于你可能看到的不同错误以及如何解决它们的更多细节。这是获取更多信息的好地方。</p><h1 id="c244" class="ji jj hi bd jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf bi translated">JWT签名无效:invalid_grant</h1><p id="551f" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">对于我的错误<code class="du jd je jf jg b"><em class="jh">invalid_grant:Invalid JWT Signature</em></code>，解决的方法不在<strong class="ih hj"> JWT错误代码</strong>的列表中。基本上，服务帐户密钥过期了，我需要生成一个新的。</p><p id="6b75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我确实在StackOverflow线程中找到了一个人，他用下面的评论帮我解决了这个问题:<em class="jh">JWT断言是用一个与客户端电子邮件所标识的服务帐户无关的私钥签名的。</em></p><p id="d245" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我一度认为我的本地gcloud配置下的电子邮件可能是问题，但它最终是过期的密钥。因此，密钥不再与服务帐户相关联。</p><h1 id="2e9e" class="ji jj hi bd jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf bi translated">如何修复|添加新的服务帐户密钥</h1><p id="6308" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">为了解决这个问题，请访问<strong class="ih hj">谷歌云控制台</strong>上的<strong class="ih hj">API&amp;服务</strong>。</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div class="er es km"><img src="../Images/bdc1b1a6b8562705a8d97be43631db0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*KNNgggInjBP4oBtOVGZZmA.png"/></div></figure><p id="9ca9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj">服务帐户</strong>下，查找您的项目所使用的电子邮件帐户。</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div class="er es ku"><img src="../Images/3b21a49c71d9ba9818c4eeb6c97d218f.png" data-original-src="https://miro.medium.com/v2/resize:fit:336/format:webp/1*cMhRoClFjIn4N8jeOR6o-g.png"/></div></figure><p id="e9ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您不记得那个电子邮件地址是什么，那么您可以使用命令来查找它。</p><pre class="kn ko kp kq fd kv jg kw kx aw ky bi"><span id="4949" class="kz jj hi jg b fi la lb l lc ld">gcloud config list</span></pre><p id="606c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj">谷歌云控制台</strong>上，选择你正在使用的电子邮件账户旁边的<em class="jh">编辑符号</em>。</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div class="er es le"><img src="../Images/9317065b482d1e6836cac7a38a8cbb28.png" data-original-src="https://miro.medium.com/v2/resize:fit:86/format:webp/1*WuUBc3vks3zcFgIX1sjDcA.png"/></div></figure><p id="5b22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择<strong class="ih hj">键</strong>部分。</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div class="er es lf"><img src="../Images/166831f6525f09f24846739f0fe22127.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*s1JjAwioCrCNtNjT3ngMIg.png"/></div></figure><p id="b830" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">检查您的服务帐户密钥是<strong class="ih hj">有效</strong>还是<strong class="ih hj">过期</strong>。</p><p id="9d7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您不知道您正在使用的服务帐户密钥，请查看您计算机上正在使用的文件，该文件可能位于~/下。oauth，尤其是在Mac上。如果没有，那么查看与GOOGLE_APPLICATION_CREDENTIALS环境变量相关联的文件路径，以找到服务帐户密钥文件。</p><p id="be7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">部分密钥号可能在文件名中；否则，它将位于服务帐户密钥文件中。</p><p id="2508" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果密钥<strong class="ih hj">已过期</strong>，那么选择<strong class="ih hj">添加密钥</strong>，这将添加一个<strong class="ih hj">活动的密钥</strong>，并将json服务帐户密钥文件下载到您的计算机。</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div class="er es lg"><img src="../Images/e35787fe88e51b3fa40ca9d38d138297.png" data-original-src="https://miro.medium.com/v2/resize:fit:332/format:webp/1*mcvYf4k8YLvg1mOdafQ8YQ.png"/></div></figure><p id="ec43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将json密钥文件移动到引用文件地方。有些gcloud服务器连接会自动在~/下查找。oauth，但是您可以使用GOOGLE_APPLICATION_CREDENTIALS环境变量来更改该位置。</p><p id="d496" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您在~/中定义了GOOGLE_APPLICATION_CREDENTIALS环境变量。bashrc或者~/。bash_profile文件，然后确保更新那里的位置。</p><h1 id="b118" class="ji jj hi bd jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf bi translated">包裹</h1><p id="1f4d" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">这篇文章回顾了JWT错误，特别是如何解决<code class="du jd je jf jg b"><em class="jh">invalid_grant:Invalid JWT Signature </em></code>错误。对于无效的JWT签名，请检查您的服务帐户密钥是否已过期。转到您的<strong class="ih hj">API&amp;服务</strong>来添加一个新的密钥(如果有的话)。</p></div></div>    
</body>
</html>