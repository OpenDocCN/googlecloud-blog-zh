<html>
<head>
<title>What are Quality of Service (QoS) Classes in Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes中的服务质量(QoS)等级是什么</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/quality-of-service-class-qos-in-kubernetes-bb76a89eb2c6?source=collection_archive---------0-----------------------#2017-05-16">https://medium.com/google-cloud/quality-of-service-class-qos-in-kubernetes-bb76a89eb2c6?source=collection_archive---------0-----------------------#2017-05-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1d6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Kubernetes根据他们<strong class="ih hj">的要求</strong>和为他们设定的<strong class="ih hj">限制</strong>向pod提供不同等级的<strong class="ih hj">服务质量</strong>。</p><p id="6a9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要保持运行并持续良好的pod可以请求<strong class="ih hj">保证资源</strong>，而要求不太严格的pod可以使用<strong class="ih hj">保证较少/没有保证的资源</strong>。</p><p id="4f61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于每个资源，容器指定一个<strong class="ih hj">请求</strong>，这是系统将向容器保证的资源数量，以及一个<strong class="ih hj">限制</strong>，这是系统将允许容器使用的最大数量。</p><p id="6232" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">调度基于请求而非限制。</em> </strong></p><h2 id="ddd9" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated"><strong class="ak">定义pod的资源约束</strong></h2><p id="6b29" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd"> CPU </em> </strong></p><p id="ff65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CPU资源以(v)核心当量来衡量。您可以用小数(例如0.5表示半个内核)或百万分位数(例如500m表示半个内核)来指定它们。</p><p id="be2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">记忆<em class="jd">记忆</em>记忆</strong></p><p id="f809" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">内存资源以字节为单位。您可以将它们指定为带有SI后缀(E，P，T，G，M，K)之一的小数，或者它们的2的幂等效值(Ei，Pi，Ti，Gi，Mi，Ki)。例如，以下代表大致相同的值:128974848、129e6、129M、123Mi。</p><p id="eb50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“<strong class="ih hj">请求和限制</strong>”和“<strong class="ih hj"> QoS等级</strong>”是紧密耦合的。</p><blockquote class="ke kf kg"><p id="398f" class="if ig jd ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi">如何实施请求和限制取决于资源是可压缩的还是不可压缩的。</em> </strong></p></blockquote><p id="d49b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">可压缩资源保证:<br/> </em> </strong> - Kubernetes目前只支持CPU。<br/> -如果吊舱超过极限，将被节流。如果未指定limit，则pod可以在可用时使用多余的CPU。</p><p id="01d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">不可压缩资源保证:<br/></em></strong>——Kubernetes目前只是支持内存。<br/>-pod将获得它们请求的内存量，如果它们超过它们的内存请求，它们可能会被杀死(如果一些其他pod需要内存)，但是如果pod消耗的内存比请求的少，它们将不会被杀死。<br/> -当pod使用的内存超过其限制时，在pod的一个容器中使用最多内存的进程将被内核杀死。</p><p id="4895" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果系统运行<strong class="ih hj">耗尽CPU或内存资源</strong>(其中限制总和&gt;机器容量)。<strong class="ih hj"> <em class="jd">理想情况下，kubernetes应该杀死不太重要的容器。</em> </strong></p><blockquote class="ke kf kg"><p id="f99b" class="if ig jd ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated">对于每种资源，Kubernetes将容器分为3个QoS等级:有保证、突发和尽力而为，按优先级降序排列。 </p></blockquote><h2 id="dced" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated"><strong class="ak"><em class="kk">【QoS】</em></strong></h2><p id="bde8" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">豆荚被认为是<strong class="ih hj"> <em class="jd">最优先</em> </strong>并且<strong class="ih hj">保证</strong>到<strong class="ih hj">不会被杀死</strong>直到它们超过它们的极限。</p><p id="13e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">如果为所有容器中的所有资源设置了限制和可选请求(不等于0 ),并且它们相等，则pod被分类为保证。</em></p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es kl"><img src="../Images/3d705269d30b0e24af32de01d721664d.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*934VJXi9SU_CRyz7NvhFrw.png"/></div></figure><h2 id="1923" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">突发(服务质量)</h2><p id="5cf3" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">pod有某种形式的<strong class="ih hj">最小资源保证</strong>，但是在可用时可以使用更多的资源。在系统内存压力下，这些容器一旦超过它们的请求，并且没有尽力而为的容器存在，就更有可能被杀死。</p><p id="4848" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">如果跨一个或多个容器为一个或多个资源设置了请求和可选限制(不等于0 ),并且它们不相等，则pod被分类为可突发的。如果未指定限制，则默认为节点容量。</em></p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es kt"><img src="../Images/01d45b428e33b29db5c809119c2d3cdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*eJnJ38qsZ3b2z3AOi4d9MQ.png"/></div></figure><h2 id="0f8a" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">尽力而为</h2><p id="d284" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">pod将被视为<strong class="ih hj"><em class="jd"/></strong>的最低优先级。如果系统内存不足，这些pod中的进程会首先被杀死。但是，这些容器可以使用节点中任意数量的空闲内存。</p><p id="bbe5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">如果没有为所有容器中的所有资源设置请求和限制，那么pod被分类为尽力而为。</em></p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es ku"><img src="../Images/8ef0138849a151aee9bd25fbf614a092.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*t6XImMf5zvB0MTuRBKFlhw.png"/></div></figure><p id="ce88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"><em class="jd">ref</em></strong>:<a class="ae kv" href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/resource-qos.md" rel="noopener ugc nofollow" target="_blank">https://github . com/kubernetes/community/blob/master/contributors/design-proposals/resource-QoS . MD</a></p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es kw"><img src="../Images/4bcd4cec7ced1f0a5c5dd1ed86e4aeaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/0*VL7py70fl9LeY3GQ.jpg"/></div></figure></div></div>    
</body>
</html>