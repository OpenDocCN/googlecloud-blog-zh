<html>
<head>
<title>Globally Autoscaling Web Services with Health Checks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有健康检查的全局自动伸缩Web服务</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/globally-autoscaling-web-services-4b650cc6fc49?source=collection_archive---------0-----------------------#2020-08-11">https://medium.com/google-cloud/globally-autoscaling-web-services-4b650cc6fc49?source=collection_archive---------0-----------------------#2020-08-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="9db1" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">规模季节</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/6246bd259a72726a60dd6e1064911099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uwuy_aAKkCoeR-tyCTIRqw.gif"/></div></div></figure><h2 id="d836" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">规模季节</h2><p id="7c14" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">“规模季节”是一个博客和视频系列，旨在帮助企业和开发人员在设计模式中构建规模和弹性。在这一系列文章中，我们计划向您介绍一些创建具有弹性和可伸缩性的应用程序的模式和实践，这是许多现代架构实践的两个基本目标。</p><p id="6f3d" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">在第1季中，我们将介绍基础架构自动化和高可用性:</p><ol class=""><li id="0537" class="lf lg hi kj b kk la kn lb ju lh jy li kc lj kz lk ll lm ln bi translated"><a class="ae lo" rel="noopener" href="/google-cloud/scale-and-resilience-arent-just-buzzwords-ce748360e80">可扩展和弹性应用的模式</a></li><li id="ce08" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz lk ll lm ln bi translated"><a class="ae lo" rel="noopener" href="/google-cloud/why-should-you-treat-infrastructure-like-software-3865ed0e4b03">基础设施为代码</a></li><li id="c60c" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz lk ll lm ln bi translated"><a class="ae lo" rel="noopener" href="/google-cloud/sometimes-change-is-bad-immutable-infrastructure-624a8e3482d6">不变的基础设施</a></li><li id="62d2" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz lk ll lm ln bi translated"><a class="ae lo" rel="noopener" href="/@swongful/where-to-scale-your-workloads-6420150bf825">在哪里扩展您的工作负载</a></li><li id="ca1e" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz lk ll lm ln bi translated">全球自动伸缩web服务(本文)</li><li id="4111" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz lk ll lm ln bi translated"><a class="ae lo" rel="noopener" href="/@swongful/give-your-vms-a-steady-pulse-with-autohealing-and-autoupdates-ae2c0828ecc9">高可用性(自动修复&amp;自动更新)</a></li></ol><p id="a72c" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">在这篇文章中，我将带你了解如何在Google Cloud上扩展你的web服务。</p><h1 id="eb9f" class="lu jk hi bd jl lv lw lx jp ly lz ma jt io mb ip jx ir mc is kb iu md iv kf me bi translated">看看这个视频</h1><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mf mg l"/></div></figure><h1 id="22dd" class="lu jk hi bd jl lv lw lx jp ly lz ma jt io mb ip jx ir mc is kb iu md iv kf me bi translated">回顾</h1><p id="2424" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">到目前为止，我们已经了解了Critter Junction是如何在Google Cloud上推出新应用的。我们讨论了谷歌云必须提供的各种<a class="ae lo" rel="noopener" href="/@swongful/where-to-scale-your-workloads-6420150bf825">计算选项</a>——有些包括强大的自动扩展功能。这实际上取决于您的语言需求、控制级别、对操作系统的访问以及其他应用程序特征，如容器化。今天，让我们来看看他们如何让他们的应用程序优雅地处理流量峰值<em class="mh">和</em>下降。</p><h1 id="74c7" class="lu jk hi bd jl lv lw lx jp ly lz ma jt io mb ip jx ir mc is kb iu md iv kf me bi translated">准备就是一切</h1><p id="62b0" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">Critter Junction正变得越来越受欢迎，用户比以往任何时候都多。这个游戏是关于每天玩，收集物品和家具来装饰你的房子，并与其他玩家互动。</p><p id="dd83" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">正如我们在上一篇文章中看到的，他们选择在Cloud Run上运行他们的布局应用程序。但是，他们仍然选择将一些游戏服务器迁移到计算引擎。随着流量的增长，他们很难在一天中的任何给定时间提供额外的全局实例。这导致过度利用计算，并给他们的运营团队带来持续的压力。因此，现在他们正在寻找一种自动化的方法来处理不断增长的用户，并保持性能，以保持用户每天都回来。换句话说，他们如何设置自动缩放实例来检查不健康的实例并在需要时替换它们？</p><h1 id="c053" class="lu jk hi bd jl lv lw lx jp ly lz ma jt io mb ip jx ir mc is kb iu md iv kf me bi translated">全局负载平衡器</h1><p id="232c" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">答案是<a class="ae lo" href="https://cloud.google.com/load-balancing/docs/https" rel="noopener ugc nofollow" target="_blank">谷歌云的全球负载均衡器</a>和<a class="ae lo" href="https://cloud.google.com/compute/docs/instance-groups" rel="noopener ugc nofollow" target="_blank">托管实例组</a>自动扩展和分配流量。这让运营团队和用户对性能优势感到满意。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/c59c2c4e46a87d4bfda90e21455a8152.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1EDv9LP5lsehEA7Q.png"/></div></div></figure><p id="56fa" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">托管实例组提供自动扩展、自动修复、自动更新和区域(多区域)部署等功能。为了更好地理解这一点，让我们后退一步，理解计算引擎实例是如何创建的。</p><h2 id="088a" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">实例创建</h2><p id="3174" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">您为您的应用程序创建一个自定义图像，然后使用它来创建一个实例。为了使其可重用，您创建了一个<a class="ae lo" href="https://cloud.google.com/compute/docs/instance-templates" rel="noopener ugc nofollow" target="_blank">实例模板</a>。使用实例模板，不仅可以设置VM的配置，还可以在机器启动时运行启动脚本来下载最新版本的代码。您还可以附加磁盘模板以及您的应用程序所需的所有软件依赖项，或者将它作为一个空壳，由CI/CD管道填充。然后，这些模板通过托管实例组自动创建大规模的计算引擎实例。</p><h1 id="f780" class="lu jk hi bd jl lv lw lx jp ly lz ma jt io mb ip jx ir mc is kb iu md iv kf me bi translated">MIG +运行状况检查演练</h1><p id="d2fb" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">让我们通过一个简单的web应用程序示例来看看这是如何工作的！</p><h2 id="8172" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">创建防火墙规则</h2><ol class=""><li id="bcfe" class="lf lg hi kj b kk kl kn ko ju mj jy mk kc ml kz lk ll lm ln bi translated">在Google Cloud控制台中，使用以下属性在VPC网络下创建防火墙规则:</li></ol><ul class=""><li id="9d06" class="lf lg hi kj b kk la kn lb ju lh jy li kc lj kz mm ll lm ln bi translated"><strong class="kj hj">允许HTTP流量</strong>进入您即将部署的应用。</li><li id="5c0d" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">提供一个名称:<strong class="kj hj"> default-allow-http </strong></li><li id="5597" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">选择默认网络。</li><li id="bc07" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">对于目标，选择指定的目标标记。</li><li id="e581" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">将目标标签设置为<strong class="kj hj"> http-server </strong>。</li><li id="51f2" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">将源过滤器设置为IP范围，并提供<strong class="kj hj"> 0.0.0.0/0 </strong>以允许所有IP地址的访问。</li><li id="ec0c" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">对于端口和协议，选择<strong class="kj hj"> TCP </strong>并输入<strong class="kj hj"> 80 </strong>。</li><li id="51cf" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">现在点击创建。</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mn"><img src="../Images/7087d6ecee294f07b4c80255c55ab522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*qBkfasPzdxGKB1eDqrq2dQ.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mo"><img src="../Images/91743b2067c56d36dd15ea86f606911a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*Ea4IoAuz2eF9V0qjG43X5A.png"/></div></figure><h2 id="130e" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">创建实例模板</h2><ol class=""><li id="1c08" class="lf lg hi kj b kk kl kn ko ju mj jy mk kc ml kz lk ll lm ln bi translated">转到计算引擎，创建一个具有以下属性的实例模板:</li></ol><ul class=""><li id="8d40" class="lf lg hi kj b kk la kn lb ju lh jy li kc lj kz mm ll lm ln bi translated">给它起个名字:<strong class="kj hj">实例模板。</strong></li><li id="beea" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">选择机器类型。</li><li id="ab7b" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">将启动盘镜像设置为<strong class="kj hj"> Debian9。</strong></li><li id="eab0" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">检查<strong class="kj hj">允许HTTP流量。</strong></li><li id="923f" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">在“管理”选项卡下，找到“自动化”并添加启动脚本。</li></ul><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="eee9" class="jj jk hi mq b fi mu mv l mw mx">sudo apt update &amp;&amp; sudo apt -y install git gunicorn3 python3-pip<br/>git clone https://github.com/GoogleCloudPlatform/python-docs-samples.git<br/>cd python-docs-samples/compute/managed-instances/demo<br/>sudo pip3 install -r requirements.txt<br/>sudo gunicorn3 --bind 0.0.0.0:80 app:app --daemon</span></pre><blockquote class="my mz na"><p id="cc12" class="kh ki mh kj b kk la ij km kn lb im kp nb lc kr ks nc ld ku kv nd le kx ky kz hb bi translated">这个脚本使每个实例在启动时运行一个简单的web应用程序。</p></blockquote><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ne"><img src="../Images/750d70525ff7e58c4d7e5452dff7c2dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*btwhG5GkZAfDr1nobWnjqg.png"/></div></figure><p id="bda5" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">2.最后点击创建。</p><h2 id="3d98" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">使用新模板创建实例</h2><p id="1b40" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">现在您已经有了一个实例模板，您可以使用这个模板创建一个实例组。</p><ol class=""><li id="f15a" class="lf lg hi kj b kk la kn lb ju lh jy li kc lj kz lk ll lm ln bi translated">在“计算引擎实例组”页面上创建具有以下属性的实例组:</li></ol><ul class=""><li id="9dd9" class="lf lg hi kj b kk la kn lb ju lh jy li kc lj kz mm ll lm ln bi translated">给它起个名字。</li><li id="8fb4" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">在位置下，选择多个区域。<strong class="kj hj"> </strong>这可以保护您免受区域故障的影响。</li><li id="f2ea" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">选择一个区域，然后在“实例模板”下选择您刚刚创建的模板。</li><li id="f9d2" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">现在将自动缩放模式设置为<strong class="kj hj">自动缩放。</strong></li><li id="8af6" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">将自动缩放策略设置为<strong class="kj hj"> CPU利用率</strong>。您还可以将策略设置为HTTP负载平衡或监控指标。</li><li id="7f9f" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">将目标CPU使用率设置为<strong class="kj hj"> 60%。</strong></li><li id="4da7" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">将最小实例数设置为<strong class="kj hj"> 3 </strong></li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nf"><img src="../Images/14f8bb19b3b8265e3b2e9b863b2dd013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*HwIB-TT5awu3RNMcdLt6gg.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ng"><img src="../Images/02c6c67cfcbcd54e55b2879849e939fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*2nEIVWbK-5mjH6hvArMPhQ.png"/></div></figure><blockquote class="my mz na"><p id="b25a" class="kh ki mh kj b kk la ij km kn lb im kp nb lc kr ks nc ld ku kv nd le kx ky kz hb bi translated">建议您提供足够的实例，以便在整个区域关闭时，剩余的实例仍能满足所需的最小数量。</p></blockquote><ul class=""><li id="dd6e" class="lf lg hi kj b kk la kn lb ju lh jy li kc lj kz mm ll lm ln bi translated">将最大实例数设置为<strong class="kj hj"> 6 </strong>以确保不会产生额外的成本。</li><li id="cd23" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">我们将冷却时间设置为<strong class="kj hj"> 120秒</strong>。</li></ul><blockquote class="my mz na"><p id="4045" class="kh ki mh kj b kk la ij km kn lb im kp nb lc kr ks nc ld ku kv nd le kx ky kz hb bi translated">确保该数字大于虚拟机的CPU利用率达到初始稳定所需的时间。</p></blockquote><ul class=""><li id="23f8" class="lf lg hi kj b kk la kn lb ju lh jy li kc lj kz mm ll lm ln bi translated">现在跳过设置健康检查，但是我们将在下一篇文章中讨论。</li></ul><p id="983e" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">2.并单击create，然后等待几分钟，直到所有实例都在运行</p><p id="604f" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">3.然后转到虚拟机实例，单击该实例的外部IP以查看演示web应用程序页面。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nh"><img src="../Images/8a81eb5f2c7d9ef352aacebe17f31b7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*olbO6RjqJFrSqooq6zC_Fg.png"/></div></div></figure><h2 id="a61e" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">流量负载测试</h2><p id="315d" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">现在我们已经设置好了，让我们生成流量，这样我们就可以看到自动缩放的效果。</p><ol class=""><li id="e170" class="lf lg hi kj b kk la kn lb ju lh jy li kc lj kz lk ll lm ln bi translated">打开云壳。</li></ol><p id="17fe" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">2.使用<strong class="kj hj"> export PROJECT_ID命令</strong>创建一个本地bash变量。</p><p id="b90b" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">3.运行下面的bash脚本。</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="7403" class="jj jk hi mq b fi mu mv l mw mx">export MACHINES=$(gcloud --project=$PROJECT_ID compute instances list --format="csv(name,networkInterfaces[0].accessConfigs[0].natIP)" | grep "autoscaling-web-app-group")<br/>for i in $MACHINES;<br/>do<br/>  NAME=$(echo "$i" | cut -f1 -d,)<br/>  IP=$(echo "$i" | cut -f2 -d,)<br/>  echo "Simulating high load for instance $NAME"<br/>  curl -q -s "http://$IP/startLoad" &gt;/dev/null --retry 2<br/>done</span></pre><blockquote class="my mz na"><p id="2884" class="kh ki mh kj b kk la ij km kn lb im kp nb lc kr ks nc ld ku kv nd le kx ky kz hb bi translated">这个脚本增加了负载，导致我们的演示应用程序的CPU利用率增加。当它达到60%的目标值时，自动缩放开始增加实例组的大小。</p></blockquote><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ni"><img src="../Images/361ffdabdfed6102baedf02a59afb332.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ued4QnbqDT6ReA13wnH4fA.png"/></div></div></figure><p id="fcfc" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">4.现在导航到我们的实例组中的monitoring选项卡，您可以看到随着CPU使用率的增加，实例的数量也在增加。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nj"><img src="../Images/1e4d3b941c4b2c056d737929df9a2109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qjsLlmp1S0oeM9TlxqLoVQ.png"/></div></div></figure><p id="10dc" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">通过运行一个类似的bash脚本，您应该能够看到缩减的效果，该脚本减少了负载，从而降低了CPU利用率。经过几分钟的稳定期后，autoscaler会提示减小实例组大小，这在monitoring选项卡中是可见的。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nk"><img src="../Images/d2fcdb54e740f69601632efb9e87ff40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FXwQRnR-iCeZMbk0bl1iSw.png"/></div></div></figure><h1 id="c3db" class="lu jk hi bd jl lv lw lx jp ly lz ma jt io mb ip jx ir mc is kb iu md iv kf me bi translated">在每一层使用负载平衡器</h1><p id="63e4" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">Critter junction拥有全球用户。他们希望新加坡的用户最终在东亚服务器上，而美国的用户最终在美国中部地区。</p><p id="ddb6" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">为此，他们将使用全局负载平衡，将流量路由到最近的web服务器实例。这有助于减少延迟并提高性能。从那里，内部负载平衡器分配流量，以管理和维护后端负载。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nl"><img src="../Images/37345c9cf2d02b0be6ac713f79c0756b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jze2kMkPdEl0KlBwlWHzXg.png"/></div></div></figure><p id="d079" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">不同区域中的这些实例组使用HTTP负载平衡策略自动扩展，以便无缝扩展，而不管流量来自何处。</p><h1 id="a5ae" class="lu jk hi bd jl lv lw lx jp ly lz ma jt io mb ip jx ir mc is kb iu md iv kf me bi translated">发布日成功</h1><p id="c4ec" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">Critter Junction不仅能够使用自动扩展和托管实例组自动扩展其计算实例，还能够通过使用全局负载平衡器为离用户最近的实例提供流量服务来提高性能。</p><p id="079b" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">但是扩展还有一步——识别不健康的实例，并自动替换它们！因此，请继续关注下一集，我们将介绍Critter junction如何设置自动修复并让他们的用户满意。</p><p id="8e20" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">记住，永远要做架构设计。</p><h1 id="f7c7" class="lu jk hi bd jl lv lw lx jp ly lz ma jt io mb ip jx ir mc is kb iu md iv kf me bi translated">后续步骤和参考:</h1><ul class=""><li id="4f54" class="lf lg hi kj b kk kl kn ko ju mj jy mk kc ml kz mm ll lm ln bi translated">在<a class="ae lo" href="https://medium.com/google-cloud" rel="noopener">谷歌云平台媒体</a>上关注这个博客系列。</li><li id="f846" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">参考:<a class="ae lo" href="https://cloud.google.com/compute/docs/tutorials/high-scalability-autoscaling?utm_source=youtube&amp;utm_medium=googlecloud&amp;utm_campaign=seasonofscale&amp;utm_content=005" rel="noopener ugc nofollow" target="_blank">为高度可伸缩的应用使用自动伸缩</a>。</li><li id="eb4b" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">跟随<a class="ae lo" href="http://bit.ly/seasonofscale" rel="noopener ugc nofollow" target="_blank">一季的尺度视频系列</a>，订阅谷歌云平台YouTube频道。</li><li id="d165" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">想要更多的故事？给我在<a class="ae lo" rel="noopener" href="/@swongful">中</a>，和<a class="ae lo" href="http://twitter.com/swongful" rel="noopener ugc nofollow" target="_blank">推特</a>上喊一声。</li><li id="79fa" class="lf lg hi kj b kk lp kn lq ju lr jy ls kc lt kz mm ll lm ln bi translated">与我们一起享受这个迷你系列的旅程，并了解更多关于谷歌云解决方案的信息！</li></ul></div></div>    
</body>
</html>