<html>
<head>
<title>Building a FAQ bot in DialogFlow in 15 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在15分钟内在DialogFlow中构建一个FAQ bot</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/building-a-faq-bot-in-dialogflow-in-15-minutes-bfcda2644abc?source=collection_archive---------0-----------------------#2020-04-15">https://medium.com/google-cloud/building-a-faq-bot-in-dialogflow-in-15-minutes-bfcda2644abc?source=collection_archive---------0-----------------------#2020-04-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="38a1" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">上传个知识库就行了！</h2></div><p id="ed5c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我以前从未构建过DialogFlow bot，因此决定需要对此进行补救。所以，我决定建造一个可以回答基本问题的聊天机器人。但是关于什么话题呢？</p><p id="fee6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每个人都对<a class="ae jt" href="https://cloud.google.com/terms/services" rel="noopener ugc nofollow" target="_blank">律师对谷歌云服务</a>的描述着迷，所以我决定建造一个机器人，它将根据律师在服务条款中的描述来解释任何GCP服务:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/9f0a74d7a41574ea6533f9a259f8a5c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D3bSBIH7Sa6vxA0WsIF2eA.png"/></div></div></figure><p id="07ae" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，如果你问机器人“什么是云VPN？”，它应该读出整个段落。让我们开始吧。</p><h2 id="3d5d" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">1.创建代理</h2><p id="6967" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">首先要创建一个DialogFlow代理。转到https://dialogflow.cloud.google.com/#/agents的<a class="ae jt" href="https://dialogflow.cloud.google.com/#/agents" rel="noopener ugc nofollow" target="_blank">并点击按钮创建一个新的代理。代理是一个机器人。</a></p><p id="c366" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将机器人命名为“google-cloud-services”，接受其他默认设置，然后单击Create。</p><p id="8bfe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在左侧菜单中，单击“设置”栏。确定几件事:</p><ul class=""><li id="d646" class="lg lh hi iz b ja jb jd je jg li jk lj jo lk js ll lm ln lo bi translated">设置服务帐户。</li><li id="0b12" class="lg lh hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">您正在使用V2 API。</li><li id="ed95" class="lg lh hi iz b ja lp jd lq jg lr jk ls jo lt js ll lm ln lo bi translated">打开测试版功能。我们将使用“知识库”,这是一个测试功能。</li></ul><p id="8521" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在点击“保存”</p><h2 id="200d" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">2.创建一个意图</h2><p id="48f8" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">点击意向。你应该看到两个意图。据我所知，意图是问答配对。有一个“回退意图”，这是机器人在不理解某个问题时会回答的。和“欢迎意图”，这是机器人如何回答你好。</p><p id="4972" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们添加一个真正的意图。假设用户问我们的机器人“你能做什么？”我们希望机器人能够告诉他们。</p><p id="1ee6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，点击“创建意图”。将这个意图命名为“存在的理由”。</p><p id="190a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，点击“添加培训阶段”,并添加用户可以提出此问题的几种方式:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lu"><img src="../Images/cce1a864f90ba78396a72baeaf80eb10.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*NvOxgEqBvdvmxCk_obOprA.png"/></div></div></figure><p id="9585" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，点击“添加响应”,输入你希望机器人回复的内容:</p><p id="b561" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="lv">我可以告诉你谷歌云服务。试试我。说“什么是BigQuery？”</em></p><p id="98ae" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，点击“保存”。</p><p id="0e5d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在右侧，您会看到一个“立即尝试”框。键入:“你能做什么？”您应该会看到:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lw"><img src="../Images/0b2950ccfe204caba93d7f25401968b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*bGZ69YWWfc8lAg1Bsu7j6w.png"/></div></figure><h2 id="09ac" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">3.创建知识库</h2><p id="456f" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">我们可以到处输入问题和答案，但这会变得相当无聊。相反，让我们将知识库加载到DialogFlow中。</p><p id="91fe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我们必须将知识库创建为CSV文件。我只是将服务条款复制粘贴到一个名为terms.txt的文件中，然后运行以下Python代码:</p><pre class="jv jw jx jy fd lx ly lz ma aw mb bi"><span id="0795" class="kg kh hi ly b fi mc md l me mf">#!/usr/bin/env python3<br/>import pandas as pd</span><span id="eb23" class="kg kh hi ly b fi mg md l me mf">questions = []<br/>answers = []<br/>with open('terms.txt') as ifp:<br/>    for line in ifp.readlines():<br/>        pieces = line.strip().split(':')<br/>        if len(pieces) &gt;= 2:<br/>            term = pieces[0]<br/>            definition = ':'.join(pieces[1:]).strip()<br/>            if len(definition) &gt; 10:<br/>                questions.append("What is {}?".format(term))<br/>                answers.append(definition)</span><span id="bff0" class="kg kh hi ly b fi mg md l me mf">df = pd.DataFrame.from_dict({<br/>    'question': questions,<br/>    'answer': answers<br/>})</span><span id="2fe9" class="kg kh hi ly b fi mg md l me mf">df.to_csv('knowledge_base.csv', index=False, header=False)</span></pre><p id="c08e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将创建一个名为knowledge_base.csv的文件，其中第一列是问题，第二列是答案。这并不完美，因为没有冒号的行将被跳过。但这是一个很好的开始，所以我们继续吧。</p><p id="ea41" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你没有Python或者不想运行上面的程序，我已经把文件放在谷歌云存储上了:</p><pre class="jv jw jx jy fd lx ly lz ma aw mb bi"><span id="96d8" class="kg kh hi ly b fi mc md l me mf">gs://cloud-training-demos/termsbot/knowledge_base.csv</span></pre><h2 id="0662" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">4.加载知识库</h2><p id="c2b2" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">在DialogFlow的左侧菜单中，单击“知识”并选择“创建知识库”。</p><p id="597b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将其命名为“services ”,然后单击Save。然后，通过点击超链接“创建第一个”来创建一个新文档。</p><p id="dcf5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如下填写对话框(如果您实际运行了Python代码，请使用“从您的计算机上传文件”选项)。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es mh"><img src="../Images/e227124e03fd06162d61f5aa8ed03dc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*BB1u0n_7Lj0VtJAw_mcNxA.png"/></div></figure><p id="dce2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这需要一分钟左右的时间。</p><p id="7d4d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，点击“添加响应”</p><p id="4f39" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">默认情况下使用知识库中的答案。</p><p id="43c0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">点击“保存”。</p><h2 id="ca9d" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">4.试试机器人</h2><p id="ea2c" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">键入“什么是BigQuery？”在“立即尝试”框中，您应该会看到:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es mi"><img src="../Images/46c1eb8692130887265e76d9d2fb7e40.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*p_xC7zgVD0Gd4wV0MzUpfA.png"/></div></figure><p id="8408" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就这样了，伙计们。你有一个机器人，它将反刍任何术语表、问答、常见问题、静态信息等。</p><p id="d240" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">点击“在谷歌助手中看看它是如何工作的”，在模拟手机中试用一下。</p><h2 id="1bf0" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">5.部署服务…</h2><p id="364c" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">这不是我干的。但是你应该！</p></div></div>    
</body>
</html>