<html>
<head>
<title>Cloud Run VS Cloud Functions: What’s the lowest cost?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云运行VS云功能:最低成本是多少？</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/cloud-run-vs-cloud-functions-whats-the-lowest-cost-728d59345a2e?source=collection_archive---------0-----------------------#2019-08-02">https://medium.com/google-cloud/cloud-run-vs-cloud-functions-whats-the-lowest-cost-728d59345a2e?source=collection_archive---------0-----------------------#2019-08-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="bc80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我之前的<a class="ae jd" rel="noopener" href="/google-cloud/cloud-run-and-cloud-function-what-i-use-and-why-12bb5d3798e1">故事</a>中，<a class="je jf ge" href="https://medium.com/u/d9ccaaf9ad87?source=post_page-----728d59345a2e--------------------------------" rel="noopener" target="_blank"> Gabriel Flores </a>问我关于成本比较的问题。事实上，从技术角度选择解决方案很重要，但服务的成本不容忽视，因为在自动扩展环境中，<strong class="ih hj">它可能会毫无征兆地爆发</strong>。</p><p id="4fe1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">仅根据每种产品的定价和配额&amp;限制进行比较。在这两种解决方案中，处理性能被认为是相等的。</em></p></div><div class="ab cl jh ji gp jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hb hc hd he hf"><h1 id="b523" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">云函数</h1><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es km"><img src="../Images/1fa34c6d5d675b93e43cd8b6e49aa84e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ishW_SlI7u5P1U91bOevQ.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">云功能的价格表</figcaption></figure><p id="defb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://cloud.google.com/functions/pricing" rel="noopener ugc nofollow" target="_blank">云功能</a>的定价基于以GHz/s为单位的vCPU和以Gb/s为单位的内存，四舍五入到最接近的100毫秒。功能的特殊性在于<strong class="ih hj">您可以调整内存和CPU速度</strong>，但不能单独调整。两者是联系在一起的，如果你想要更多的主频就增加内存，反之亦然</p><p id="3dd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">网络出口价格是0.12美元/Gb的统一费率</p><p id="0014" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，在200万个免费配额之后，请求按0.40美元计费</p><h1 id="ae1d" class="jo jp hi bd jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh lg kj kk kl bi translated">云运行(托管)</h1><figure class="kn ko kp kq fd kr er es paragraph-image"><div class="er es lh"><img src="../Images/237d190d3729ae1b9c0699b96c1f506f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*NY-BEvQCTAX5FyCpLYP8KQ.png"/></div><figcaption class="ky kz et er es la lb bd b be z dx translated">彩色打印清单</figcaption></figure><p id="f334" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://cloud.google.com/run/pricing" rel="noopener ugc nofollow" target="_blank">云运行</a>定价基于vCPU/s和以Gb/s为单位的内存，四舍五入到最接近的100毫秒。不可能对每个实例使用部分vCPU。<strong class="ih hj">您的实例始终分配有1个vCPU。内存可以从128Mb调整到2Gb</strong></p><p id="68f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个实例最多可以处理80个并发请求。因此，对于一个给定的实例，只有当实例处理至少一个请求时，才需要支付费用。</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es li"><img src="../Images/00d1ba91f04bd030a2a64c23e93c3ee4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pZM2CavHI2cDmPrWZ7FAvQ.png"/></div></div></figure><p id="e518" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">网络出口基于1Gb免费层后的<a class="ae jd" href="https://cloud.google.com/network-tiers/pricing#premium-pricing" rel="noopener ugc nofollow" target="_blank">网络高级层</a>定价。</p><p id="b3fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，在200万个自由配额请求之后，请求按每百万个请求0.40美元计费</p><h1 id="b42f" class="jo jp hi bd jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh lg kj kk kl bi translated">摘要</h1><p id="b5d6" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">网络成本略有不同，云功能的出口免费层为5Gb，云运行的出口免费层仅为5Gb，大约相差0.50美元。但是，基于网络高级层，出口Gb价格不一样，而且在云上更复杂。<strong class="ih hj">在欧洲和北美，使用Cloud Run很快就变得更便宜，与亚洲不相上下。</strong></p><p id="c74a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">云功能允许根据使用的内存相应地调整vCPU速度。但是每个实例只能处理一个请求。</p><p id="c414" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">云运行始终使用1个vCPU你只能调整内存。但是Cloud Run可以在同一个实例上处理并发请求。</p><p id="ea17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，请求数量的成本严格相同。</p><p id="fc14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">顺便说一下，我们<strong class="ih hj">可以考虑两种主要的比较情况:只有一个并发请求，和有几个并发请求。</strong></p><p id="5cff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">我建了一个</em> <a class="ae jd" href="https://docs.google.com/spreadsheets/d/1LiN8dNG5jB93KR-Km6UyNvvqXlBRjV9Brs1xIFoHI_Y/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank"> <em class="jg"> GSheet </em> </a> <em class="jg">玩内存，并发，进程需求值。</em></p><h2 id="d4c5" class="lo jp hi bd jq lp lq lr ju ls lt lu jy iq lv lw kc iu lx ly kg iy lz ma kk mb bi translated">一个并发请求案例</h2><p id="ea96" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">在这种情况下，只比较1个请求的处理。在这种情况下，Cloud Run和Cloud Functions正好有一个实例用于处理这个唯一的请求，因此只有这个实例需要付费。</p><p id="7e5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您在云运行中将currency设置为1，或者您对服务有稀疏的顺序请求，就会发生这种情况。</p><p id="feca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在相同的条件下，在1个vCPU (2.4Ghz)和2Gb内存的情况下，<strong class="ih hj">云运行和云功能之间的价格和性能完全相同</strong>。</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es mc"><img src="../Images/77720f2432247cba44bd9aa0b99047a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j5oHoDsXpehENeRT7TOzaA.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">1个请求和2Gb内存的价格比较</figcaption></figure><h2 id="973b" class="lo jp hi bd jq lp lq lr ju ls lt lu jy iq lv lw kc iu lx ly kg iy lz ma kk mb bi translated">多个并发请求的情况</h2><p id="3202" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">大多数情况下，一个服务同时处理几个请求。<strong class="ih hj"> Cloud Run能够对同一个实例处理多达80个并发请求</strong>。</p><p id="3c77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">相反，<strong class="ih hj">云函数创建与并发请求一样多的实例。</strong></p><p id="ecf5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，<strong class="ih hj">云运行并发处理的请求越多，服务就越便宜</strong></p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es md"><img src="../Images/d30e34709c4b179fc5c2187e0cb36f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5J00PGKiz3p8tJrKGmQjNQ.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">10个并发请求和128Mb内存的价格比较</figcaption></figure></div><div class="ab cl jh ji gp jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hb hc hd he hf"><h1 id="4542" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">考虑什么？</h1><p id="b6f6" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">最佳选择取决于您想要优化的内容、您的用例以及您的特定需求。</p><h2 id="65f2" class="lo jp hi bd jq lp lq lr ju ls lt lu jy iq lv lw kc iu lx ly kg iy lz ma kk mb bi translated">最低延迟</h2><p id="d29d" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">如果您的目标是<strong class="ih hj">最低延迟，请选择云运行</strong>。</p><p id="21d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">的确，<strong class="ih hj">云运行始终使用1个vCPU </strong>(至少2.4Ghz)，内存大小可以从128Mb到2Gb选择。</p><p id="7abe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有了<strong class="ih hj">云功能</strong>，想要最好的处理性能(2.4Ghz的CPU)，<strong class="ih hj">就得付出2Gb的内存</strong>。如果您的内存占用量很低，那么2Gb内存的云功能就太过了，而且成本昂贵。</p><h2 id="8cf2" class="lo jp hi bd jq lp lq lr ju ls lt lu jy iq lv lw kc iu lx ly kg iy lz ma kk mb bi translated">最低成本</h2><p id="ad4e" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">削减成本并不总是让客户满意的最佳策略，但商业现实可能需要这样做。无论如何，这很大程度上取决于您的用例</p><p id="0ce8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">云运行和云函数都四舍五入到最接近的100毫秒。正如您可以使用<a class="ae jd" href="https://docs.google.com/spreadsheets/d/1LiN8dNG5jB93KR-Km6UyNvvqXlBRjV9Brs1xIFoHI_Y/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank"> GSheet </a>一样，当一个请求的处理时间低于前100毫秒时，<strong class="ih hj">云函数会更便宜。</strong>事实上，您可以降低云功能vCPU的速度，结果会增加处理的持续时间，但如果调整得当，会保持在100毫秒以下。因此，使用的Ghz/s更少，因此您支付的费用也更少。</p><p id="983f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，对于只需要128Mb内存的低处理要求(需要20Mhz ),您有:</p><ul class=""><li id="5580" class="me mf hi ih b ii ij im in iq mg iu mh iy mi jc mj mk ml mm bi translated">云功能:100毫秒的处理成本为0.23-6美元</li><li id="3e96" class="me mf hi ih b ii mn im mo iq mp iu mq iy mr jc mj mk ml mm bi translated">云运行:8毫秒的处理，成本为2.4e-6美元</li></ul><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es md"><img src="../Images/37943edd5efec13415e8262d5be212e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_uZsx196Zpgh1aLs8hcYw.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">1个并发请求和128Mb内存的价格比较</figcaption></figure><p id="956d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当然，云功能比T4便宜10倍，但是你的客户需要多等10倍。并且只有当您有顺序请求时，这个定价比较才是<strong class="ih hj">真</strong> <strong class="ih hj">。</strong></p><p id="8656" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个例子中，超过<strong class="ih hj"> 10个并发请求，云运行更便宜！</strong>事实上，Cloud Run在创建(和计费)一个新实例之前，可以在同一个实例上处理多达80个并发请求。</p><p id="2a29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">相反，<strong class="ih hj">云函数处理不同实例上的并发请求</strong>，因此，除了<strong class="ih hj">为每个创建的实例支付冷启动过度成本</strong>之外，您还必须为每个运行的实例支付费用。</p><figure class="kn ko kp kq fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es md"><img src="../Images/d30e34709c4b179fc5c2187e0cb36f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5J00PGKiz3p8tJrKGmQjNQ.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">10个并发请求和128Mb内存的价格比较</figcaption></figure><p id="2d4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一种情况是<strong class="ih hj">云功能更便宜</strong>并且降低vCPU速度是个好主意:当一个应用<strong class="ih hj">调用API并等待响应</strong>时。拥有200Mhz的功能就足够了，云运行的完整vCPU是多余的(没有或很少处理),因此非常昂贵。</p><h2 id="bb66" class="lo jp hi bd jq lp lq lr ju ls lt lu jy iq lv lw kc iu lx ly kg iy lz ma kk mb bi translated">实例限制</h2><p id="a3cf" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">在每个产品的限制和配额页面中，并行实例的数量限制为1000。</p><p id="5bb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，<strong class="ih hj">可以设置一个自定义上限</strong>来限制并行实例的数量。最初发布是为了<a class="ae jd" href="https://cloud.google.com/functions/docs/max-instances" rel="noopener ugc nofollow" target="_blank">限制资源使用</a>(例如，数据库连接)，它也是一个很棒的功能，可以限制费用，并设置服务成本的上限。但是在饱和的情况下总是对用户满意度有负面影响。</p><h2 id="e4a3" class="lo jp hi bd jq lp lq lr ju ls lt lu jy iq lv lw kc iu lx ly kg iy lz ma kk mb bi translated">事件处理</h2><p id="1119" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">云功能可以由HTTP请求触发(称为<a class="ae jd" href="https://cloud.google.com/functions/docs/writing/http" rel="noopener ugc nofollow" target="_blank"> HTTP功能</a>)，也可以由谷歌云环境上触发的事件触发(称为<a class="ae jd" href="https://cloud.google.com/functions/docs/writing/background" rel="noopener ugc nofollow" target="_blank">后台功能</a>)</p><p id="d0d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">相反，云运行容器只能被HTTP请求调用。然而，可以使用<a class="ae jd" href="https://cloud.google.com/pubsub/docs/push" rel="noopener ugc nofollow" target="_blank"> PubSub推送订阅</a>来将PubSub事件推送到云运行进行处理。此外，还可以<a class="ae jd" href="https://cloud.google.com/storage/docs/reporting-changes" rel="noopener ugc nofollow" target="_blank">将存储事件发布到PubSub主题</a>，从而<strong class="ih hj">通过PubSub推送订阅再次使用云运行</strong>处理存储事件。但是，没有了。</p><p id="4ab8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，除了PubSub和Storage事件，<strong class="ih hj">云功能对于所有其他类型的事件</strong>都是不可避免的。没有选择的可能。</p><h2 id="3349" class="lo jp hi bd jq lp lq lr ju ls lt lu jy iq lv lw kc iu lx ly kg iy lz ma kk mb bi translated">VPC连接要求</h2><p id="787d" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">您的无服务器应用可能需要一些仅在您的VPC中可用的私有资源。例如，<a class="ae jd" href="https://cloud.google.com/memorystore/docs/redis/" rel="noopener ugc nofollow" target="_blank">内存存储</a>用于低延迟键值存储，或者VPN/直接连接访问用于访问外部资源(在prime或其他云上)。</p><p id="795c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">云功能允许设置一个VPC连接器，用于将您的无服务器功能连接到您的VPC </strong>，从而根据需要路由流量。</p><p id="080a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到目前为止，托管云还不可能运行，但这将在2020年改变。</p><h1 id="c150" class="jo jp hi bd jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh lg kj kk kl bi translated">选什么？</h1><p id="1711" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">在结束之前，我想补充一些额外的注意事项，这些注意事项不直接与平台定价相关，但也涉及开发、服务和监控的整个过程。</p><h2 id="78b3" class="lo jp hi bd jq lp lq lr ju ls lt lu jy iq lv lw kc iu lx ly kg iy lz ma kk mb bi translated">关于成本的其他想法</h2><p id="8499" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">公共云带来了一项新功能:真正了解成本。在我的公司，云成本引发了担忧:<em class="jg">哇，太贵了！不，它不是，但它是已知的，可见的。在前提环境下，很难知道每项服务的真实成本，尤其是人力成本或共有资源(网络、存储、托管等)。</em></p><p id="92ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你选择一个技术解决方案时，重要的是要考虑项目的所有方面，首先是你的人力资源。云函数看起来更便宜，因为你的用例很适合它们。但是，<strong class="ih hj">你的团队能够用现有的语言开发功能吗？</strong></p><p id="4aca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的公司，我们的传统堆栈(和专业知识)是PHP和C++，这不适合云功能。这就是为什么，容器是我们的选择，甚至在云运行产品存在之前。</p><p id="a422" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你真的知道你团队的成本吗？</p><ul class=""><li id="3c63" class="me mf hi ih b ii ij im in iq mg iu mh iy mi jc mj mk ml mm bi translated">因为员工对新堆栈不满意而有辞职的风险</li><li id="9121" class="me mf hi ih b ii mn im mo iq mp iu mq iy mr jc mj mk ml mm bi translated">培训成本以及培训期间的无生产力</li><li id="cd5c" class="me mf hi ih b ii mn im mo iq mp iu mq iy mr jc mj mk ml mm bi translated">由于新的堆栈，缺乏代码质量、可靠性、性能和生产力</li></ul><p id="bb00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">所有这些原因在大多数情况下都远远高于云提供商的成本</strong>。</p><p id="9f1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了人的方面，在可移植性的情况下，重构的<strong class="ih hj">成本</strong>会是多少？由于测试困难或缺乏新语言的经验，多出了X%的bug的成本<strong class="ih hj">会是多少？</strong></p><h2 id="19b7" class="lo jp hi bd jq lp lq lr ju ls lt lu jy iq lv lw kc iu lx ly kg iy lz ma kk mb bi translated">应用关键度</h2><p id="94f2" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">2019年11月，Cloud Run经过6个月的测试后转向GA。</p><p id="58b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Python 3、Node 8和Go 1.11的云功能已正式发布</p><p id="f925" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">显然，这两款产品在谷歌承诺方面没有区别。但是，如果你的应用运行在Python 3.8、Node 10/12或Go 1.12/1.13上，那么就没有关于云函数的GA版本(甚至根本不支持！).使用Cloud Run，GA承诺应用于所有容器，与容器中的语言版本无关。</p><h2 id="666c" class="lo jp hi bd jq lp lq lr ju ls lt lu jy iq lv lw kc iu lx ly kg iy lz ma kk mb bi translated">限额和配额</h2><p id="6e76" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">这两种服务之间几乎没有区别，但它们可能意味着组织变革或技术解决方案设计的重新设计。这是间接成本，但是如果您计划以较高的部署速度部署数百个云功能，就要考虑到这一点。</p><p id="d052" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事实上，云函数被限制为每个项目1000个函数，每天每个项目编译120分钟。</p><p id="60c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Cloud Run中，编译没有限制，因为它是在平台之外执行的，每个项目有1000个服务的限制。<strong class="ih hj">但是一个服务可以服务几个端点。</strong></p><p id="94db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其他限制很难比较，或者与大多数项目无关。</p></div><div class="ab cl jh ji gp jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hb hc hd he hf"><h1 id="2d28" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">结论</h1><p id="f8f5" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">如您所见，云功能和云运行之间的成本比较不仅仅是简单地比较价目表。此外，在您的项目中，您经常需要使用这两种解决方案来利用它们的优势和能力。</p><p id="19e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的开发首选是<strong class="ih hj">云跑。它的可移植性、可测试性、对库、语言和二进制代码的开放性</strong>赋予了它太多的优势，至少对于相似的价格来说是如此，而且通常在成本和性能上具有真正的优势，尤其是对于并发请求。即使您需要相同级别的云功能隔离(每个请求1个实例)，只需将并发参数设置为1！</p><p id="a27e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，云运行的<strong class="ih hj"> GA适用于所有容器，无论使用何种语言和二进制文件</strong>。</p><p id="3333" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，一些原因，VPC能力或事件，可以迫使你选择云功能，但大多数情况下，这不是出于价格原因。</p><p id="392b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，用例的多样性、组织中的差异和人力资源的复杂性(技能、愿望、动机)产生了太多的组合，我只能<strong class="ih hj">提供在你的决策过程中不要忘记的提示</strong>和<strong class="ih hj">事情</strong>。<strong class="ih hj">不可能</strong> <strong class="ih hj">提供唯一的答案</strong>。</p><p id="4717" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在任何情况下，请务必选择合适的合作伙伴，从外部的角度出发，在这个过程中为您提供帮助，与您的团队交流，并自己尝试找到您的使用案例的最佳答案！</p></div></div>    
</body>
</html>