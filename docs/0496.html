<html>
<head>
<title>Security Advice for GCS Buckets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GCS存储桶的安全建议</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/security-advice-for-gcs-buckets-6a6e9825d49f?source=collection_archive---------1-----------------------#2018-01-17">https://medium.com/google-cloud/security-advice-for-gcs-buckets-6a6e9825d49f?source=collection_archive---------1-----------------------#2018-01-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c024" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几乎每个非平凡的网站都会有存储需求。作为谷歌开发者的拥护者，我一直在使用谷歌云存储，并与客户谈论他们在GCS方面的问题和困难。在这些讨论中，安全问题出现过几次。虽然我不能告诉你如何使你的桶和对象100%安全，但是我可以给你一些基本的建议，这些建议是非常普遍适用的。这些信息的绝大部分来自于我在12月初对一个典型用例中的GCS存储桶的安全性进行的为期一周的研究。</p><h1 id="2ebf" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">把你的证件留给你自己</h1><p id="c22b" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我知道不应该共享密码、<a class="ae kg" href="https://cloud.google.com/iam/docs/understanding-service-accounts" rel="noopener ugc nofollow" target="_blank">服务账户</a>、<a class="ae kg" href="https://cloud.google.com/docs/authentication/api-keys" rel="noopener ugc nofollow" target="_blank"> API密匙</a>或其他秘密，这似乎是显而易见的。然而，泄露凭据是安全问题的常见来源。公认的最佳实践是每个人和每个应用程序都应该有自己的凭证。这使得删除一个人的权限变得容易，而不会影响存储桶的任何其他用户。它还可以让您了解谁在使用您的审计日志做什么。但是仅仅给每个人分配一个帐户是不够的。因为一名工程师的证书被泄露，所以发生了一些引人注目的泄密事件。确保凭据的存储足够安全，适合您的使用情形。键盘托盘下的一张纸并不安全，但它比将凭证(或点文件)签入公共源代码库要安全得多。如果您使用密码管理器或将凭据签入源代码，则凭据仅作为密码管理器或源代码库是安全的。</p><h1 id="52ed" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">存储桶名称是可发现的</h1><p id="2efa" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">当我开始在云中存储数据时，我并不清楚存储桶名称经常会被任何人发现。复杂的是，在GCS和其他云存储提供商中，存储桶名称必须是全球唯一的。在这些约束下，将您的项目、公司、应用程序甚至个人证书放入bucket name中是一个不错的主意。我过去常常这样做，因为很容易想到一个以“aja-”为前缀的惟一的bucket名称。一旦我意识到一个足够积极的人可以探查我的桶，我就从桶名中取出所有个人信息。根据您访问存储桶的内容，对象名称也可能出现在URL中，因此也可能出现在浏览器或防火墙日志中。同样，这也是不将秘密放入对象名的另一个好理由。在官方存储最佳实践文档中，Google Cloud建议如果您需要很多存储桶，使用<a class="ae kg" href="https://cloud.google.com/storage/docs/best-practices" rel="noopener ugc nofollow" target="_blank"> guids </a>作为存储桶名称。</p><h1 id="ff8d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">仔细检查权限</h1><p id="2ea3" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我的最后一个技巧是定期审计权限和ACL。当我仔细检查项目的权限时，我发现了配置错误的存储桶。也许您正在设置概念验证，并在整理应用程序的其余部分时使您的bucket全局可读。我们中的大多数人偶尔会做这样的事情，但是如果这个bucket以相同的权限存在于产品中，就会成为一个问题。使用GCS，大多数项目使用IAM权限，但是如果您需要对同一个bucket中的对象拥有不同的权限，您可能需要使用<a class="ae kg" href="https://cloud.google.com/storage/docs/access-control/if" rel="noopener ugc nofollow" target="_blank"> ACLs </a>列表。当我深入研究GCS权限时，我发现我对不同作用域的含义做出了不正确的假设。例如，我假设“AllAuthenticatedUsers”的范围意味着我的云项目的所有用户。当我阅读文档时，我意识到它指的是拥有谷歌账户的任何人。如果我想将访问权限仅限于我项目的合作者，我可以用其他范围来实现。当然，许多项目都有充分的理由让bucket具有全局可读性。也许您正在使用存储桶来存储web应用程序的资产，或者也许您正在使用存储桶来存储与他人共享的科学数据集。只要确保权限适合您的用例，并设置一个提醒来经常审核它们，以确保您的用例没有改变。<br/>这篇博文只涉及了几个要点。在你把你的应用投入生产之前，我建议你在<a class="ae kg" href="https://cloud.google.com/storage/docs/best-practices" rel="noopener ugc nofollow" target="_blank">谷歌云网站</a>上阅读更多关于谷歌云存储最佳实践的信息。与博客帖子不同，该文档会不断更新。</p><p id="b7c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">01/17/18</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><p id="1d65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ko">原载于2018年1月17日</em><a class="ae kg" href="http://www.thagomizer.com/blog/2018/01/17/securing-gcs-buckets.html" rel="noopener ugc nofollow" target="_blank"><em class="ko">www.thagomizer.com</em></a><em class="ko">。</em></p></div></div>    
</body>
</html>