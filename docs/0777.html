<html>
<head>
<title>Continuous Delivery of HashiCorp Vault on Google Kubernetes Engine: Kubernetes Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Google Kubernetes引擎上持续交付hashi corp Vault:Kubernetes架构</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/continuous-delivery-of-hashicorp-vault-on-google-kubernetes-engine-kubernetes-architecture-c94fb5e513b1?source=collection_archive---------4-----------------------#2018-09-27">https://medium.com/google-cloud/continuous-delivery-of-hashicorp-vault-on-google-kubernetes-engine-kubernetes-architecture-c94fb5e513b1?source=collection_archive---------4-----------------------#2018-09-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0e53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">这是一个系列的第三部分:</strong> <a class="ae jd" rel="noopener" href="/@blzysh/continuous-delivery-of-hashicorp-vault-on-google-kubernetes-engine-bcbf4e75f0f6"> <strong class="ih hj">指数</strong> </a></p><h1 id="9f5b" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">概述:</h1><p id="3371" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated"><a class="ae jd" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>集群被分解成几个定制的<a class="ae jd" href="https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/" rel="noopener ugc nofollow" target="_blank">名称空间</a>以将操作服务与应用服务分开。Kubernetes也有几种不同的<a class="ae jd" href="https://kubernetes.io/docs/reference/kubectl/overview/#resource-types" rel="noopener ugc nofollow" target="_blank">资源类型</a>，我将在服务和应用程序中使用它们。下面是集群中使用的一些值得注意的资源类型。</p><p id="c3fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset" rel="noopener ugc nofollow" target="_blank">stat pulsets</a>:我在应用程序中使用StatefulSet的主要原因是为了处理排序问题，因为我们不想让Vault为谁先初始化<a class="ae jd" href="https://github.com/sethvargo/vault-on-gke/blob/master/README.md#faq" rel="noopener ugc nofollow" target="_blank">而争吵。它还为pod提供了可预测的名称。</a></p><ul class=""><li id="d6ea" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc km kn ko kp bi translated"><em class="kq">同样值得注意的是反亲缘关系的概念，它将pod分布在集群中的所有节点上。在这种情况下，保持Vault服务器的一个实例在整个区域的每个分区中运行。</em></li></ul><p id="f172" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment" rel="noopener ugc nofollow" target="_blank">部署</a>:我将部署用于操作服务。部署在回滚和更易管理的配置方面有一些优势。</p><p id="41bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://kubernetes.io/docs/concepts/services-networking/ingress" rel="noopener ugc nofollow" target="_blank"> Ingress </a> (v1beta1):具体来说，我使用<a class="ae jd" href="https://github.com/kubernetes/ingress-gce" rel="noopener ugc nofollow" target="_blank"> ingress-gce </a>为应用程序创建一个外部GCP HTTP(S)负载平衡器。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es kr"><img src="../Images/39b17cbe51136e01cdf5d3ac09cf0ad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DxnGGht7xNvC9ylEYQH07w.png"/></div></div></figure></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="c3c5" class="je jf hi bd jg jh lk jj jk jl ll jn jo jp lm jr js jt ln jv jw jx lo jz ka kb bi translated">容器:</h1><p id="efa5" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">容器(<a class="ae jd" href="https://github.com/lzysh/ops-gke-vault/issues/1" rel="noopener ugc nofollow" target="_blank">将被</a>)被“本地”存储在<a class="ae jd" href="https://cloud.google.com/container-registry" rel="noopener ugc nofollow" target="_blank">谷歌容器注册表</a>中，并由<a class="ae jd" href="https://cloud.google.com/container-registry/docs/get-image-vulnerabilities" rel="noopener ugc nofollow" target="_blank">容器分析</a>进行安全漏洞分析。</p><h2 id="1af7" class="lp jf hi bd jg lq lr ls jk lt lu lv jo iq lw lx js iu ly lz jw iy ma mb ka mc bi translated">应用</h2><p id="7b03" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated"><a class="ae jd" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> vault </a> : Vault是用于安全访问机密和配置的应用程序。<br/> <a class="ae jd" href="https://hub.docker.com/r/sethvargo/vault-init" rel="noopener ugc nofollow" target="_blank"> vault-init </a>:用于自动化初始化和启封保险库的过程。</p><h2 id="7a2b" class="lp jf hi bd jg lq lr ls jk lt lu lv jo iq lw lx js iu ly lz jw iy ma mb ka mc bi translated">运营服务</h2><p id="0835" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/kubernetes-incubator/external-dns" rel="noopener ugc nofollow" target="_blank"> external-dns </a>:用于与Google Cloud DNS同步并公开Kubernetes入口。<br/> <a class="ae jd" href="https://github.com/jetstack/cert-manager" rel="noopener ugc nofollow" target="_blank"> cert-manager </a>:用于自动管理和发放TLS证书。</p><p id="5307" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" rel="noopener" href="/@blzysh/continuous-delivery-of-hashicorp-vault-on-google-kubernetes-engine-initial-setup-39bbe04d0bdd"> <strong class="ih hj">第四部分- &gt; </strong> </a></p></div></div>    
</body>
</html>