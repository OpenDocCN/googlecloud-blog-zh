<html>
<head>
<title>Kubernetes Engine (GKE) multi-cluster life cycle management series</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes发动机(GKE)多集群生命周期管理系列</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/kubernetes-engine-gke-multi-cluster-life-cycle-management-series-17ff892b85c8?source=collection_archive---------2-----------------------#2020-04-21">https://medium.com/google-cloud/kubernetes-engine-gke-multi-cluster-life-cycle-management-series-17ff892b85c8?source=collection_archive---------2-----------------------#2020-04-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="18ba" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">第一部分:对多集群的需求</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/0eee249c6d0acfda61a21c0a7d353567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UOmhMcwGcwO1Dn7s9CeSZQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">GKE上的分布式服务</figcaption></figure><h1 id="eee7" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">介绍</h1><p id="5f88" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">这个由5部分组成的博客系列涵盖了如何在多集群GKE架构中设计、规划和执行升级。本系列的最后一部分是一个分步指南，使用Anthos的<a class="ae lb" href="https://cloud.google.com/kubernetes-engine/docs/concepts/ingress-for-anthos" rel="noopener ugc nofollow" target="_blank">入口</a>进行多集群升级。尽管本教程使用Ingress for Anthos作为示例实现，但是这些概念也可以应用于其他解决方案。</p><p id="a505" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated">该系列分为以下几部分:</p><ul class=""><li id="8ee5" class="lh li hi kh b ki lc kl ld ko lj ks lk kw ll la lm ln lo lp bi translated">第一部分:对多集群的需求(这一部分)</li><li id="8887" class="lh li hi kh b ki lq kl lr ko ls ks lt kw lu la lm ln lo lp bi translated"><a class="ae lb" rel="noopener" href="/@ameericus/gke-multi-cluster-life-cycle-management-series-b0d39080ac6b">第二部分:多集群和分布式服务</a></li><li id="149c" class="lh li hi kh b ki lq kl lr ko ls ks lt kw lu la lm ln lo lp bi translated"><a class="ae lb" rel="noopener" href="/@ameericus/gke-multi-cluster-life-cycle-management-series-a73185392345">第三部分:GKE集群生命周期和自动升级</a></li><li id="e329" class="lh li hi kh b ki lq kl lr ko ls ks lt kw lu la lm ln lo lp bi translated"><a class="ae lb" rel="noopener" href="/@ameericus/kubernetes-engine-gke-multi-cluster-life-cycle-management-series-43ed97142c47">第四部分:GKE多集群生命周期管理规划和策略</a></li><li id="b410" class="lh li hi kh b ki lq kl lr ko ls ks lt kw lu la lm ln lo lp bi translated"><a class="ae lb" rel="noopener" href="/@ameericus/kubernetes-engine-gke-multi-cluster-life-cycle-management-series-ee0f583d9b10">第五部分:使用Ingress for Anthos的GKE多集群升级分步指南</a></li></ul><blockquote class="lv lw lx"><p id="c7a5" class="kf kg ly kh b ki lc ij kk kl ld im kn lz le kq kr ma lf ku kv mb lg ky kz la hb bi translated">特别感谢我的朋友们:杰出的SRE人史蒂夫·麦克格和Kubernetes的专家和爱好者凯文·詹姆斯，感谢他们对这个系列的宝贵投入和反馈。</p></blockquote><h1 id="7771" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">第一部分:对多集群的需求</h1><h2 id="5693" class="me jo hi bd jp mf mg mh jt mi mj mk jx ko ml mm jz ks mn mo kb kw mp mq kd mr bi translated">Kubernetes作为基础设施</h2><p id="eea9" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">在讨论多集群的需求之前，需要注意的是，本系列将Kubernetes集群视为“基础设施”的一部分。用云本地的话说，基础设施是一次性的。不得对任何基础设施组件进行特殊处理。它的存在是有目的的。Kuberenetes的目的是为开发者和运营商提供自动化(和编排),从而为消费者提供基于容器的应用程序和服务。消费者可以是内部团队、其他服务或外部客户。因此，Kubernetes集群是一个基础设施组件，因此应被视为可任意使用的。稍后将详细介绍。</p><h2 id="c345" class="me jo hi bd jp mf mg mh jt mi mj mk jx ko ml mm jz ks mn mo kb kw mp mq kd mr bi translated">常见的多集群场景</h2><p id="abc3" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">尽管有“kubernetes作为基础设施”的说法，但有许多理由支持多集群环境。</p><p id="f402" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated"><strong class="kh hj">地理位置</strong> —许多服务需要位于多个地区。与在单个区域之外提供服务相比，将服务放在离消费者更近的地方(在他们的区域内)会提供更好的体验，因为延迟更低。Kubernetes集群在单个区域中运行。对于多区域部署，需要多个区域中的多个Kubernetes集群。同样，多云或混合云环境也要求每个环境中有多个集群。Kubernetes集群也经常与服务(有状态的)数据源放在一起。某些应用程序可能需要位于与其后端相同的位置(地区和区域),例如RDBMS。</p><p id="4d45" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated"><strong class="kh hj">租户和环境</strong> — Kubernetes集群是为多租户设计的。这意味着多个团队可以共享一个集群来提供各自的服务。Kubernetes提供标准资源(名称空间、RBAC、网络策略、身份验证)来正确配置多租户环境中的访问控制。在某些情况下，某些服务可能无法与其他服务共存于一个集群中。这可能是由于公司政策、隐私、安全或行业法规。在这种情况下，需要多个集群来将某些租户划分到自己的集群中。同样，环境(开发、阶段和生产)也经常被创建为单独的集群。不同环境中安装的应用程序的访问范围和类型差异很大，因此最好将它们作为单独的集群。</p><p id="8c78" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated"><strong class="kh hj">组成和功能</strong> —有时，集群以特定的组成创建，以执行特定的功能。例如，使用<a class="ae lb" href="http://kubeflow.org" rel="noopener ugc nofollow" target="_blank"> kubeflow </a>或数据分析作业的ML工作流可能需要具有GPU或其他特定硬件要求的节点，例如由<a class="ae lb" href="https://cloud.google.com/preemptible-vms" rel="noopener ugc nofollow" target="_blank">可抢占虚拟机</a>组成的集群，以实现批量分析工作负载..这些硬件要求可能不适用于其他服务。这些工作流可能对业务运营并不重要，可能需要临时集群(在关闭集群之前，为执行特定任务而创建的短期集群)。同样，可能有一些共享服务，如可观察性(日志记录、指标、跟踪)和CI/CD工具，它们更适合自己的“platform_admin”集群。对于非业务关键型工作流，通常会看到独立的特定功能集群。</p><p id="f78b" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated"><strong class="kh hj">弹性</strong> —通常使用多个群集来提高环境中的弹性。每个星团都有一个爆炸半径。在这种情况下，爆炸半径是由于群集故障、配置错误或只是群集离线(计划内或计划外维护)而受到不利影响的服务数量。具有大量较小尺寸的簇意味着具有大量较小尺寸的爆炸半径。如果一个服务被部署在两个平均分担负载的集群上，并且其中一个集群离线，那么这将影响50%的用户(假设没有对负载均衡器进行流量分割)。相比之下，假设服务是从单个集群中提供的。该集群上的任何事件都会导致该服务100%中断。同样，多个集群也经常用于灾难恢复。</p><p id="8105" class="pw-post-body-paragraph kf kg hi kh b ki lc ij kk kl ld im kn ko le kq kr ks lf ku kv kw lg ky kz la hb bi translated">对于本系列的剩余部分，我将重点关注多集群的弹性方面，这是多集群GKE生命周期管理中的一个关键组件。</p><blockquote class="lv lw lx"><p id="5184" class="kf kg ly kh b ki lc ij kk kl ld im kn lz le kq kr ma lf ku kv mb lg ky kz la hb bi translated">接下来… <a class="ae lb" rel="noopener" href="/@ameericus/gke-multi-cluster-life-cycle-management-series-b0d39080ac6b">第二部分:多集群和分布式服务</a></p></blockquote></div></div>    
</body>
</html>