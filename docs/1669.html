<html>
<head>
<title>BigQuery create table from Google Sheets causing incorrect column names (string_field_0, ..)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">BigQuery从Google Sheets创建表导致不正确的列名(string_field_0，..)</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/bigquery-create-table-from-google-sheets-causing-incorrect-column-names-string-field-0-134f6ecd3fc8?source=collection_archive---------0-----------------------#2020-11-17">https://medium.com/google-cloud/bigquery-create-table-from-google-sheets-causing-incorrect-column-names-string-field-0-134f6ecd3fc8?source=collection_archive---------0-----------------------#2020-11-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e2a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您从Google Sheets创建一个BigQuery表，并得到不正确的列名，如string_field_x，如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/7c6a984d1e750c36e28519ece687e3be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/0*F3pywmQW8HUoB9Bp"/></div></figure><p id="3f83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大概Google Sheet里所有的数据都是字符串类型。比如:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jl"><img src="../Images/f64c46248d058554e62e90eeeaaa7486.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/0*i3y4EuEvlbHMJ-dL"/></div></figure><p id="34e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">解决这个问题的一个方法是在工作表中添加一个虚拟整数列，如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jm"><img src="../Images/7b77881283c91c99563251ec442d3c65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T3ZC5LU90HMW8KEy"/></div></div></figure><p id="2685" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，您将看到列名被正确识别:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jr"><img src="../Images/dd9e02367c52da7cb37e34f4b5493636.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/0*gYryl8RizXisdY-E"/></div></figure><p id="ea0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我用来加载这个谷歌表单的选项如下:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es js"><img src="../Images/b4e31378b4a64c52d79a851972362d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*YAEgV45EbR-GypiRCRwF1w.png"/></div></figure><p id="6a72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，您可以通过使用CTAS和except创建一个新表来删除该列，例如:</p><p id="8e99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将表“project_id.dataset.table”创建为“project_id.dataset.table_ext”中的<br/>SELECT * except(int _ field)</p></div></div>    
</body>
</html>