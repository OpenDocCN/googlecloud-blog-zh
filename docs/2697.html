<html>
<head>
<title>AlloyDB — New Kid on the HTAP Block</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">alloy db—HTAP街区的新成员</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/alloydb-new-kid-on-the-htap-block-188a732fdd35?source=collection_archive---------3-----------------------#2022-12-28">https://medium.com/google-cloud/alloydb-new-kid-on-the-htap-block-188a732fdd35?source=collection_archive---------3-----------------------#2022-12-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f4ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Gartner在2014年创造了术语HTAP，指具有混合工作负载处理能力的内存数据库，如SAP HANA。然而，技术挑战阻止了HTAP数据库真正流行起来。</p><p id="baac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">直到最近，随着PingCAP的TiDB、Google的AlloyDB、SnowFlake的UniStore和Oracle的HeatWave等现代架构设计的出现，HTAP才开始崛起。</p><p id="8ab2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几十年来，联机事务处理(OLTP)和联机分析处理(OLAP)工作负载一直由不同的数据库系统单独处理。这是多年来的惯例，因为这两种工作负载在延迟、吞吐量和数据一致性等设计因素上有所不同。这也是为什么单个数据库系统可能关注OLTP或OLAP工作负载。以延迟为例，操作数据库通常需要非常短的延迟，但是数据仓库或数据湖系统可以容忍更长的延迟。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/cc1ecd7786ce5a4e15cc99c0fad6bfe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vuivv60kFmDjq5qlJFr-VA.png"/></div></div></figure><p id="f199" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，这也导致了复杂的技术堆栈和数据孤岛，限制了公司的发展速度。这需要一种混合方法。混合事务处理和分析处理(HTAP)数据库可以在同一架构中处理OLTP和OLAP工作负载，而这些工作负载不会相互干扰。</p><h1 id="74c3" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">AlloyDB —全面管理的HTAP服务</h1><p id="9fb9" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">AlloyDB是一个完全托管的PostgreSQL兼容数据库服务，适用于要求最苛刻的企业数据库工作负载。AlloyDB结合了Google的精华和最流行的开源数据库引擎之一PostgreSQL，以获得卓越的性能、规模和可用性。AlloyDB的名字恰如其分，因为alloy的定义是将两种金属结合起来，锻造出一种具有独特性能的新材料。在这种情况下，Alloy DB采用PostgresSQL API，这使它成为一个兼容的平台，吸引了越来越多的PostgreSQL开发人员，并在存储和AI/ML分析层替代了核心的Google技术。其结果是为高吞吐量事务处理和运营分析而设计的数据库。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ks"><img src="../Images/85d5337945492ac23ee74f09086c2775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A8DbnyMs6dzmRvOa_jFlDg.png"/></div></div></figure><p id="5a55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谷歌声称AlloyDB对于事务性工作负载的速度是AWS的同类产品Aurora PostgreSQL的两倍(对于相同的工作负载，比标准PostgreSQL快4倍，对于分析性查询快100倍)。</p><p id="5b44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你深入了解谷歌云生态系统，那么一个完全托管的PostgreSQL数据库服务可能听起来很熟悉。谷歌已经为PostgreSQL和Spanner提供了CloudSQL，这是谷歌云的完全托管、水平可伸缩的关系数据库服务，也提供了一个<a class="ae kt" href="https://cloud.google.com/spanner/docs/postgresql-interface" rel="noopener ugc nofollow" target="_blank"> PostgreSQL接口</a>。但是这些服务提供了与PostgreSQL兼容的接口，允许具有这些技能的开发人员使用这些服务。AlloyDB的核心是标准的PostgreSQL数据库，尽管该团队确实修改了内核，以允许它最大限度地使用谷歌的基础设施，同时允许团队在推出新版本时保持更新。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/d246381cb325fc356166a13388ce1097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fHupAGd2pb4AVbXTQGH_fA.png"/></div></div></figure><h1 id="fcfa" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">关键特征</h1><h2 id="bb7e" class="kv jq hi bd jr kw kx ky jv kz la lb jz iq lc ld kd iu le lf kh iy lg lh kl li bi translated">完全托管的数据库服务</h2><p id="376a" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">AlloyDB是一个完全托管的、PostgreSQL兼容的数据库服务，具有业界领先的性能、可用性和规模。它自动执行备份、复制、修补和容量管理等管理任务，并使用自适应算法和机器学习进行PostgreSQL真空管理、存储和内存管理、数据分层和分析加速，因此您可以专注于构建您的应用程序。</p><h2 id="a7c4" class="kv jq hi bd jr kw kx ky jv kz la lb jz iq lc ld kd iu le lf kh iy lg lh kl li bi translated">快速交易处理</h2><p id="4fe5" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">对于事务性工作负载，AlloyDB比标准PostgreSQL快4倍以上。它适合要求最苛刻的企业工作负载，包括需要高事务吞吐量、大数据量或多个读取副本的工作负载。读取连接在低延迟、横向扩展读取副本池的支持下水平扩展。</p><h2 id="408c" class="kv jq hi bd jr kw kx ky jv kz la lb jz iq lc ld kd iu le lf kh iy lg lh kl li bi translated">高可用性</h2><p id="fd5a" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">AlloyDB提供99.99%的正常运行时间SLA，包括维护。它可以在60秒内自动检测大多数数据库故障并从中恢复，与数据库大小和负载无关。该架构支持无中断的实例大小调整和数据库维护。</p><h2 id="f6d4" class="kv jq hi bd jr kw kx ky jv kz la lb jz iq lc ld kd iu le lf kh iy lg lh kl li bi translated">实时业务洞察</h2><p id="cf50" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">AlloyDB的分析查询速度比标准PostgreSQL快100倍，在运行商业智能、报告以及混合事务和分析工作负载(HTAP)时，对运营性能没有任何影响。与谷歌人工智能平台Vertex AI的内置集成，允许您在查询或交易中直接调用机器学习模型，为您提供低延迟、高吞吐量的增强洞察力，而无需编写任何应用程序代码。</p><h2 id="2c17" class="kv jq hi bd jr kw kx ky jv kz la lb jz iq lc ld kd iu le lf kh iy lg lh kl li bi translated">对客户友好的定价</h2><p id="be79" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">定价透明且可预测，没有昂贵的限制性许可，也没有不透明的I/O费用。存储是自动管理的，只对您使用的内容收费，读取副本没有额外的存储成本。除了实例内存之外，还会自动配置免费的超高速缓存，使您能够最大限度地提高性价比。<a class="ae kt" href="https://cloud.google.com/database-migration" rel="noopener ugc nofollow" target="_blank">数据库迁移服务</a>免费提供易于使用、可靠的迁移。</p><h1 id="a37e" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">AlloyDB在谷歌云数据库产品组合中的位置？</h1><p id="20cd" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">简而言之，AlloyDB:</p><ol class=""><li id="6497" class="lj lk hi ih b ii ij im in iq ll iu lm iy ln jc lo lp lq lr bi translated">为普通PostgreSQL提供了更高性能、更高吞吐量的替代品。</li><li id="033b" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">不会取代Cloud Spanner，因为Spanner的目标是跨越多个地区的全球分布式主动-主动ACID事务工作负载。</li><li id="2432" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">不会取代BigQuery或其他谷歌分析服务。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/b5837deb6188992dfbaf59c214107433.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Y5jitY-1hapISbiQ_VMeg.png"/></div></div></figure><p id="20c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Bigquery有许多相似之处，因为它们都运行在相同的底层存储上，都有缓存功能，都可以在数据库中运行ML模型。但是基本的区别是BigQuery目前不支持PostgreSQL API。Bigquery是无服务器的，而AlloyDB不是。Bigquery一直是为大规模分析而设计的，而AlloyDB主要是为高吞吐量事务处理而设计的，并辅以轻量级运营分析和ML。</p><h1 id="3875" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">TiDB和AlloyDB的比较</h1><p id="c9f4" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated"><a class="ae kt" href="https://github.com/pingcap/tidb" rel="noopener ugc nofollow" target="_blank"> TiDB </a>是一个开源的分布式HTAP数据库。TiDB是唯一提供HTAP功能的开源、兼容MySQL的数据库。它已经被不同行业的数千个生产系统作为主要数据库。TiDB的HTAP架构是典型的，因为它使用分离的架构来分离计算和存储。它利用一些主要技术为混合工作负载实现了行存储和列存储。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ly"><img src="../Images/b63799315056e5dc423988792bb5cd24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VpAt2Opjc6SGFTO8qi0teA.png"/></div></div></figure><h1 id="4b45" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">包扎</h1><p id="4a74" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">AlloyDB可以作为主数据库，帮助用户应对快速增长的复杂业务负载。当单个传统OLTP或OLAP数据库发现处理工作负载极具挑战性时，AlloyDB是一个不错的选择。AlloyDB是一个可靠的解决方案，可以根据生态系统、增长和工作负载来满足企业的需求。HTAP时代即将到来，我们期待越来越多的HTAP系统出现。</p></div></div>    
</body>
</html>