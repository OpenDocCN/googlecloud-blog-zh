<html>
<head>
<title>Automating Cloud Storage Data Classification — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化云存储数据分类—第2部分</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/automating-cloud-storage-data-classification-setup-cloud-storage-and-pub-sub-8cacfcf8ba14?source=collection_archive---------2-----------------------#2020-03-11">https://medium.com/google-cloud/automating-cloud-storage-data-classification-setup-cloud-storage-and-pub-sub-8cacfcf8ba14?source=collection_archive---------2-----------------------#2020-03-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d120" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在云中烹饪</h2></div><p id="dcc0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">作者:<a class="ae jt" href="https://twitter.com/pvergadia" rel="noopener ugc nofollow" target="_blank">普里扬卡·韦尔加迪亚</a>，<a class="ae jt" href="https://twitter.com/jbrojbrojbro" rel="noopener ugc nofollow" target="_blank">珍妮·布朗</a></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/c4bcbde49cdae22ad3e3f5c644ded927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aogq0U1NY2JEfA9jWI4-8g.gif"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">#GetCookingInCloud</figcaption></figure><h1 id="d8a2" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated"><strong class="ak">简介</strong></h1><p id="2507" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">"<a class="ae jt" rel="noopener" href="/@pvergadia/get-cooking-in-cloud-an-introduction-5b3b90de534e"> Get Cooking in Cloud </a>"是一个博客和<a class="ae jt" href="https://www.youtube.com/playlist?list=PLIivdWyY5sqIOyeovvRapCjXCZykZMLAe" rel="noopener ugc nofollow" target="_blank">视频</a>系列，帮助企业和开发者在Google Cloud上构建商业解决方案。在这个系列中，我们计划确定开发人员希望在Google cloud上构建的特定主题。一旦确定，我们就以此为主题制作一个迷你系列。</p><p id="47d3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个迷你系列中，出于安全和组织的目的，我们将介绍Google云存储中数据分类的自动化。</p><ol class=""><li id="26ff" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lm ln lo lp bi translated"><a class="ae jt" rel="noopener" href="/google-cloud/automating-cloud-storage-data-classification-overview-35a63f39bb02">用例及整体流程概述</a></li><li id="17b6" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">深入探讨创建桶和云发布/订阅主题和订阅(<strong class="iz hj">本文</strong>)</li><li id="30ea" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated"><a class="ae jt" rel="noopener" href="/google-cloud/automating-cloud-storage-data-classification-dlp-api-and-cloud-function-7546b3763203">使用DLP API创建云函数并进行测试</a></li></ol><p id="3a30" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将更深入地创建我们需要的不同云存储桶，并设置发布/订阅。</p><h1 id="17ee" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">你将学习和使用的东西</h1><p id="958c" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">如何用谷歌云存储实现数据的自动上传和分类？</p><ul class=""><li id="ee44" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lv ln lo lp bi translated"><strong class="iz hj">前端应用引擎</strong></li><li id="3330" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated"><strong class="iz hj">谷歌云存储</strong>存储菜谱提交文件</li><li id="645f" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated"><strong class="iz hj">发布/订阅</strong>消息</li><li id="0e8b" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated"><strong class="iz hj">云功能</strong>以无服务器方式实现快速自动化</li><li id="24af" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated"><strong class="iz hj"> DLP API </strong>检测私人信息</li><li id="86f7" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated"><a class="ae jt" href="https://cloud.google.com/solutions/automating-classification-of-data-uploaded-to-cloud-storage" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj">此解决方案</strong> </a> <strong class="iz hj"> </strong>用于自动将数据分类上传到云存储</li></ul><h1 id="0527" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">看看这个视频</h1><figure class="jv jw jx jy fd jz"><div class="bz dy l di"><div class="lw lx l"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">视频:自动化云存储分类:设置</figcaption></figure><h1 id="0088" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">回顾</h1><p id="df35" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">晚餐赢家(Dinner Winner)是一个应用程序，它收集了世界各地用户提交的食谱，并发布定期的获奖食谱供大家欣赏。</p><p id="0e9d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">提交的食谱在被送去评审之前，需要被评估是否清晰，是否有任何可识别的信息。匿名评审结束后，获奖者会被联系，他们的食谱会被发布到应用程序中！</p><p id="b8d7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据他们的架构，我们确定了与安全性和交叉污染相关的主要问题，以及巨大的效率差距。当前的手动流程将不可避免地导致系统不堪重负和质量下降，因此我们决定寻求自动化作为我们的主要解决方案。</p><h1 id="58eb" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated"><strong class="ak">四步流程</strong></h1><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ly"><img src="../Images/caba0c398c035a77cac136678e8dd007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*87aGk9IehlCRlYXekE2-rg.gif"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">使用云存储、云发布/订阅、云功能和DLP API的自动化数据分类架构</figcaption></figure><ol class=""><li id="9959" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lm ln lo lp bi translated">创建云存储桶，作为隔离和分类管道的一部分。</li><li id="fad0" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">创建一个云发布/订阅主题和订阅，以便在两个云功能之间进行通知。</li><li id="626c" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">创建两个简单的云函数，一个在文件上传时调用DLP API，另一个使用DLP API检查和分类文件，并将它们移动到适当的存储桶。</li><li id="0fa4" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">将一些样本文件上传到隔离区以调用云功能。</li></ol><p id="a87c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇博客中，我们将回顾第1步和第2步。</p><h1 id="498b" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated"><strong class="ak">设置环境</strong></h1><p id="a6f3" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">在开始创建存储桶之前，我们需要设置我们的环境:</p><ul class=""><li id="338c" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lv ln lo lp bi translated">创建或选择GCP项目，并确保启用开单。</li><li id="fb4a" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">然后转到“API和服务”选项卡，为云功能、云存储和云数据丢失预防API启用API。</li></ul><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lz"><img src="../Images/a83ad02b864f85251ad0dcc59c60d04b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S56JqVM2Recbs8_f"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">步骤2:启用API和服务(1)</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ma"><img src="../Images/2e29782641e25cc2fe20b2f94ead54c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JjOYfVsVq8UK73Ed"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">步骤2:启用API和服务(2)</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mb"><img src="../Images/44d23d2618f3eee2884068dee970c81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ihBiVbXn0rH1OctU"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">步骤2:启用API和服务(3)</figcaption></figure><ul class=""><li id="d442" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lv ln lo lp bi translated">启用正确的权限，以便我们的应用引擎服务帐户可以连接DLP API。</li><li id="4560" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">为此，我们将在项目中打开IAM &amp; Admin页面，找到app engine服务帐户并编辑角色。</li><li id="67a8" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">添加项目“所有者”、“<em class="mc"> DLP管理员</em>”和“<em class="mc"> DLP API服务代理</em>”并保存。注意:由于这是一个演示，为了简单起见，我们在这里使用“所有者”角色，如果您正在开发一个生产应用程序，请指定比<strong class="iz hj">项目&gt;所有者</strong>更细粒度的权限。有关更多信息，请参见<a class="ae jt" href="https://cloud.google.com/iam/docs/granting-roles-to-service-accounts" rel="noopener ugc nofollow" target="_blank">向服务帐户授予角色</a>。</li></ul><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es md"><img src="../Images/10bf4f9f890cf217f3e446afae213317.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yzvx60bFm6KcdXWJ"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">编辑角色</figcaption></figure><ul class=""><li id="ffb3" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lv ln lo lp bi translated">接下来，我们授予DLP服务帐户所需的权限。找到“DLP API服务代理”，并向其添加项目“查看者”角色。</li></ul><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es me"><img src="../Images/5ad46690ef5660993d878a2f899838c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qhOXMlhg1pu2LtTg"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">编辑权限</figcaption></figure><h1 id="b24b" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated"><strong class="ak">创建存储桶</strong></h1><ol class=""><li id="b7e8" class="lh li hi iz b ja lc jd ld jg mf jk mg jo mh js lm ln lo lp bi translated">我们导航到云存储并创建它们。</li><li id="9518" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">我们将需要三个桶，一个用于敏感数据，一个用于非敏感数据，最后一个用于所有文件。用一个全局唯一的名称随意命名存储桶。一旦我们创建了所有三个存储区，您应该能够在存储浏览器中看到它们。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lz"><img src="../Images/b9dfeccbb56275e77e7c9ec085d5384f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-XDlqp7WTo6Bx85Y"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">云存储桶</figcaption></figure><h1 id="e2ed" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated"><strong class="ak">云Pub/Sub话题和订阅</strong>。</h1><ul class=""><li id="bc3a" class="lh li hi iz b ja lc jd ld jg mf jk mg jo mh js lv ln lo lp bi translated">导航到云发布/订阅并创建一个主题，为其提供一个名称并点击创建。</li></ul><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mi"><img src="../Images/a92b596380878de90a336f8f0f0ccf45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bbLDHmYuS5KwZqXd"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">创建发布/订阅主题</figcaption></figure><ul class=""><li id="007e" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lv ln lo lp bi translated">然后，要创建与主题对应的订阅，请单击new subscription，为其提供一个名称并创建。</li></ul><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mj"><img src="../Images/59fef4cfad9da935f32d396888e2b39a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ji2XyAXIzxlD3H6B"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">创建发布/订阅订阅</figcaption></figure><h1 id="9ce9" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">结论</h1><p id="95cf" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">如果您希望以自动化的方式对数据进行分类，现在您知道如何去做了。敬请关注<a class="ae jt" rel="noopener" href="/@pvergadia/get-cooking-in-cloud-an-introduction-5b3b90de534e">云烹饪系列</a>中的更多文章，并查看下面的参考资料了解更多细节。</p><h1 id="a630" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">后续步骤和参考:</h1><ul class=""><li id="0524" class="lh li hi iz b ja lc jd ld jg mf jk mg jo mh js lv ln lo lp bi translated">在<a class="ae jt" href="https://medium.com/google-cloud" rel="noopener">谷歌云平台媒体</a>上关注这个博客系列。</li><li id="97b9" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">参考:<a class="ae jt" href="https://cloud.google.com/solutions/automating-classification-of-data-uploaded-to-cloud-storage?utm_source=youtube&amp;utm_medium=Unpaidsocial&amp;utm_campaign=pri-20200213-Automating-Classification" rel="noopener ugc nofollow" target="_blank">自动化云存储数据分类</a></li><li id="c045" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">由<a class="ae jt" href="https://medium.com/u/e7724d73a96?source=post_page-----35a63f39bb02----------------------" rel="noopener">罗杰·马丁内斯</a>与<a class="ae jt" href="https://medium.com/u/155d53c7be8b?source=post_page-----35a63f39bb02----------------------" rel="noopener">珍妮·布朗</a> : <a class="ae jt" href="https://codelabs.developers.google.com/codelabs/cloud-storage-dlp-functions/#0" rel="noopener ugc nofollow" target="_blank">使用DLP API和云函数对上传到云存储的数据进行自动分类</a></li><li id="c68c" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">关注<a class="ae jt" href="https://www.youtube.com/watch?v=pxp7uYUjH_M" rel="noopener ugc nofollow" target="_blank">获取云端烹饪</a>视频系列，订阅谷歌云平台YouTube频道</li><li id="6568" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">想要更多的故事？在<a class="ae jt" rel="noopener" href="/@pvergadia/">媒体</a>和<a class="ae jt" href="https://twitter.com/pvergadia" rel="noopener ugc nofollow" target="_blank">推特</a>上关注我。</li><li id="b3cb" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lv ln lo lp bi translated">请和我们一起欣赏这部迷你剧，并了解更多类似的谷歌云解决方案:)</li></ul></div></div>    
</body>
</html>