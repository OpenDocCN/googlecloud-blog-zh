<html>
<head>
<title>App Engine : transition your website to HTTPS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">应用引擎:将你的网站转移到HTTPS</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/app-engine-transition-your-website-to-https-b280f0bf5147?source=collection_archive---------0-----------------------#2018-01-05">https://medium.com/google-cloud/app-engine-transition-your-website-to-https-b280f0bf5147?source=collection_archive---------0-----------------------#2018-01-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="01c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">TL；博士</strong>:http://jokigurbyala.com<strong class="ih hj">必须</strong>成为https://jokigurbyala.com</p><p id="a240" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">jokigurbyala.com并不存在。我用它作为一个虚构的自定义域名，你(一个使用App Engine的开发者)可能已经映射到你的应用。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/3dc3d322bc761168be3e0a6bb8f2bc8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*TumO19LtPVfT9iUs_sPj-w.png"/></div></figure><p id="1fae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们只能说Jokigurbyala是一种…变色龙果冻状的…东西。与<a class="ae jl" href="https://spectreattack.com/" rel="noopener ugc nofollow" target="_blank">厉鬼</a>无关！</p><h1 id="b62c" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated"><strong class="ak">第一章:过去的链接</strong></h1><p id="2db7" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi kp translated">当2013年将项目“jokigurbyala”部署到Google App Engine时，您的网站可以立即访问</p><ul class=""><li id="7571" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated"><a class="ae jl" href="http://jokigurbyala.appspot.com" rel="noopener ugc nofollow" target="_blank">https://jokigurbyala.appspot.com</a></li><li id="367e" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><a class="ae jl" href="http://jokigurbyala.appspot.com" rel="noopener ugc nofollow" target="_blank">http://jokigurbyala.appspot.com</a></li></ul><p id="772b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到目前为止，一切顺利。多亏了appspot.com，你得到了零保密HTTPS，所以你的流量被加密了，每个人都感到安全。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lm"><img src="../Images/ca73ea6d3d833e8d1defa6c3d9e68b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*341Vynolqwgqtg02dOExBw.png"/></div></figure><p id="fab5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果有人想使用未加密的HTTP，它也能工作(除非你决定禁用HTTP并强制加密)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lm"><img src="../Images/f61d00f4fe5f2f94ad66f9c0a72454f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*jMey06GjbRgEwQ39-LNjlg.png"/></div></figure><p id="5124" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">然后</strong>，你要做的下一件事就是配置应用程序，让它在你自己的域名jokigurbyala.com上运行，这个域名是你几个月前买的，所以没人会从你这里偷走。</p><p id="6583" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将您的域名映射到应用程序的简单方法是</p><ul class=""><li id="c2cd" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">向谷歌服务证明你拥有该域名(这仍然是一个先决条件)；</li><li id="dfba" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">将DNS条目设置为指向Google基础架构主机(这仍然是先决条件)；</li><li id="ec39" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">仅使用<strong class="ih hj">HTTP</strong>；</li><li id="5ec6" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">如果您想避免管理任何SSL证书，请不要使用HTTPS。你不能再在appspot.com的零机密HTTPS上搭便车了。</li></ul><p id="732d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到目前为止，一切都很好，如果你不是银行、网店或社交私人数据泵，你可能会认为(在2013年)你真的不需要花哨的加密。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lm"><img src="../Images/1749342278ff1ed923f87f5fe116fff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*7tA-IE7YlLDlQ_IGYLD5xw.png"/></div></figure><h1 id="cb3d" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">第二章:注定</h1><p id="a4f0" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi kp translated"><span class="l kq kr ks bm kt ku kv kw kx di"> It </span>原来你多年来运行良好(通过HTTP)的网站现在被Chrome视为<strong class="ih hj">可疑</strong>:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ln"><img src="../Images/fa68f71d767e342403eb2ed0aef94b4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*oyb_zZ3Wfynx1_5-KDCvrQ.png"/></div></figure><p id="a252" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">…在我看来，它甚至可能在几个月内<strong class="ih hj">被主流浏览器<strong class="ih hj"> </strong>屏蔽</strong>，很可能是在2020年之前。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lo"><img src="../Images/bdf2886ac462652b86eee097805b10ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*YTtG10TG6vr0791f0q1Z2A.png"/></div></figure><h1 id="8d13" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">第三章:如何修复和发光</h1><p id="2305" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated"><em class="lp">编辑:以下程序包含命令行步骤，但您可以使用web界面</em> <a class="ae jl" href="https://console.cloud.google.com/appengine/settings/domains" rel="noopener ugc nofollow" target="_blank"> <em class="lp">应用引擎&gt;设置&gt;自定义域</em> </a> <em class="lp">来实现相同的目标。</em></p><ul class=""><li id="53ff" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">保持选项卡打开，显示<a class="ae jl" href="https://cloud.google.com/appengine/docs/standard/python/mapping-custom-domains" rel="noopener ugc nofollow" target="_blank">映射定制域</a>文档</li><li id="6f37" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">确保您的gcloud env具有正确的<strong class="ih hj">账户</strong>和<strong class="ih hj">项目</strong>值:</li></ul><pre class="je jf jg jh fd lq lr ls lt aw lu bi"><span id="61a3" class="lv jn hi lr b fi lw lx l ly lz">$ gcloud config list</span></pre><ul class=""><li id="e9d2" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">确保您的域名被谷歌云平台视为“已验证”:</li></ul><pre class="je jf jg jh fd lq lr ls lt aw lu bi"><span id="0189" class="lv jn hi lr b fi lw lx l ly lz">$ gcloud domains verify jokigurbyala.com</span><span id="1eb2" class="lv jn hi lr b fi ma lx l ly lz">You are already a verified owner of jokigurbyala.com.</span></pre><p id="f2c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(因为，记住，你不久前就这么做了。如果没有，请遵循文档选项卡中的过程)</p><ul class=""><li id="8142" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">然后:</li></ul><pre class="je jf jg jh fd lq lr ls lt aw lu bi"><span id="a899" class="lv jn hi lr b fi lw lx l ly lz">$ gcloud beta app domain-mappings update jokigurbyala.com  --certificate-management='automatic'</span><span id="fb44" class="lv jn hi lr b fi ma lx l ly lz">Waiting for operation [apps/jokigurbyala/operations/7bcb666b-blah-blah-blah-blah] to complete...done.                                                                <br/>Updated [jokigurbyala.com].</span></pre><ul class=""><li id="97bb" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">使用以下内容检查映射:</li></ul><pre class="je jf jg jh fd lq lr ls lt aw lu bi"><span id="a88f" class="lv jn hi lr b fi lw lx l ly lz">$ gcloud app domain-mappings list</span><span id="1ff5" class="lv jn hi lr b fi ma lx l ly lz">ID                SSL_CERTIFICATE_ID<br/>jokigurbyala.com  2380146</span></pre><ul class=""><li id="00d1" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">瞧啊。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lm"><img src="../Images/5239805e23c245744042093bb4d9008c.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*G4pm2hQ3TgPXxKyHOipTPg.png"/></div></figure><p id="2e0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">SSL/HTTPS配置完成(非常感谢<a class="ae jl" href="https://letsencrypt.org/" rel="noopener ugc nofollow" target="_blank">让我们加密</a>)。</p><p id="65ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一些注意事项:</p><ul class=""><li id="0026" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">确保<strong class="ih hj">你所有的资产</strong> (JS，图片等。)从它们各自的域名服务于HTTPS。不允许混合！浏览器会认为整个网站是不连贯和不安全的。</li><li id="58f6" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">除了HTTPS和SSL之外，还有很多东西可以让你的网站“安全”。<a class="ae jl" href="https://cloud.google.com/security-scanner/docs/" rel="noopener ugc nofollow" target="_blank">修复你的前端漏洞</a>，修补你的后端库，不要选择“password”作为你的数据库密码。</li><li id="9152" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">保留传统的HTTP访问并不是一个很好的特性，你真的应该禁用它并重定向到HTTPS。在你的<a class="ae jl" href="https://cloud.google.com/appengine/docs/standard/go112/config/appref?hl=fr#handlers_secure" rel="noopener ugc nofollow" target="_blank"> YAML配置</a>中配置参数“安全”。</li></ul><h1 id="0091" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">收场白</h1><p id="c3ff" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi kp translated">这就是我最终如何保护https://www.programming-idioms.org的原因。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/98630ff69ea42294988ad9b032e68dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/0*qpJxgUX15egGBbbC.png"/></div></figure></div></div>    
</body>
</html>