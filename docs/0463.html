<html>
<head>
<title>Google App Engine Cron Job Monitoring</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌应用引擎Cron作业监控</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/google-app-engine-cron-job-monitoring-bbf5c2ed6ca3?source=collection_archive---------0-----------------------#2017-12-16">https://medium.com/google-cloud/google-app-engine-cron-job-monitoring-bbf5c2ed6ca3?source=collection_archive---------0-----------------------#2017-12-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6d7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用Stackdriver对GAE Cron作业进行简单监控</p><p id="45b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您在GAE编写Cron作业，您可能希望在作业本身之外添加对它们的监控。Stackdriver提供各种监控功能，作为免费基础层的一部分，只需几秒钟即可完成设置。</p><p id="d14a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇短文详细介绍了如何用免费的Stackdriver为GAE的Cron任务添加监控。</p><h1 id="18f6" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">启用堆栈驱动程序</h1><p id="117c" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">第一步是启用Stackdriver，如果你还没有为你的谷歌计算平台(GCP)项目。前往https://app.google.stackdriver.com/<a class="ae kg" href="https://app.google.stackdriver.com/" rel="noopener ugc nofollow" target="_blank">的</a>出发。该向导将引导您选择要启用的项目。</p><p id="d171" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要考虑两点:</p><ol class=""><li id="e717" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc km kn ko kp bi translated">如果你有多个项目，我建议你创建一个<strong class="ih hj">新的</strong> GCP项目，以一种合理的方式命名，以便能够在Stackdriver中对你的项目进行分组。Stackdriver不允许任意的父命名，并重用您开始的项目(<a class="ae kg" href="https://twitter.com/mediocrity/status/937727889646141440" rel="noopener ugc nofollow" target="_blank">来吧Stackdriver！</a>)。这有点烦人，但是只需点击几下或者一个<em class="kq"> gcloud </em>命令就可以创建一个新的GCP项目。</li><li id="e8da" class="kh ki hi ih b ii kr im ks iq kt iu ku iy kv jc km kn ko kp bi translated">Stackdriver会自动为您注册30天的高级层，30天后会自动将您降级到基本层。你不必在这里做任何事情，这只是一个参考。我还没看到有什么办法可以禁用这种无用。</li></ol><p id="ca57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成演练，跳过所有与AWS、每日/每周报告等的连接。如果您愿意，可以在以后更改所有这些内容，这与添加监控无关。</p><h1 id="d8ff" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">创建警报策略</h1><p id="aa10" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">在左侧菜单中，选择<strong class="ih hj">警报</strong>选项卡和<strong class="ih hj">创建策略</strong>。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div class="er es kw"><img src="../Images/c01589eb52a237460aebfe7e9c690b8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*Wje2YEZmQCaspal3jc1TLQ.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx translated">警报&gt;创建策略</figcaption></figure><p id="d941" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过选择<strong class="ih hj">添加条件</strong>从顶部开始。对于我编写的Cron作业类型，最简单的方法是选择<strong class="ih hj">度量缺失</strong>。如果一切按预期进行，我通常编写的所有作业都将返回HTTP <strong class="ih hj"> 200 </strong>响应，这似乎很常见。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/191ac76c3904389f7a0dd14eccbf322f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EO6QyrElO3iIbmL0CPn8QA.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">度量缺勤&gt;选择</figcaption></figure><p id="c140" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj">目标&gt;资源类型</strong>下，选择<strong class="ih hj">应用引擎</strong>。您可以选择将此警报策略应用于该Stackdriver帐户中的单个项目或所有项目。就我个人而言，为了更精细的控制，我已经单独选择了每个项目。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es ln"><img src="../Images/eab53e66176b43ee781e849cacfa5f46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-qnfTBdvI8Yazy2D1yVDRA.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">度量缺勤配置</figcaption></figure><p id="ef7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的情况下，没有<strong class="ih hj"> 2XX响应</strong>被认为是可报警的情况。还需要配置<strong class="ih hj">缺席时间段</strong>的选择。在我的例子中，对于这个特定的用例，作业每小时运行一次，在2小时时，我希望得到提醒(每小时+运行时间)。</p><blockquote class="lo lp lq"><p id="3f7b" class="if ig kq ih b ii ij ik il im in io ip lr ir is it ls iv iw ix lt iz ja jb jc hb bi translated">多个cron任务:此时，您似乎无法区分在一个<strong class="ih hj">项目下是否安排了多个Cron任务。也许来自<a class="lu lv ge" href="https://medium.com/u/4f3f4ee0f977?source=post_page-----bbf5c2ed6ca3--------------------------------" rel="noopener" target="_blank"> Google Cloud </a>的某个人会读到这篇文章并提交一个功能请求。非常感谢。:)</strong></p></blockquote><p id="3db6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果通知相同，您可以将多个作业/项目的多个条件添加到单个策略中(以节省您的配置时间)。添加每个条件后，您需要选择一个<strong class="ih hj">策略触发器</strong>，设置一个<strong class="ih hj">通知</strong>方法(有很多选项！)，添加<strong class="ih hj">文档</strong>文本并<strong class="ih hj">保存</strong>策略。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es lw"><img src="../Images/9a0ac42fc800c2d660369155ef3df234.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hPwYvnmr-FbPK4MbIT_-Ew.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">警报策略配置</figcaption></figure><p id="b255" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">保存每个策略后，您将能够在“Alerting”&gt;“Policies”页面上查看(和编辑)每个策略。</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es ln"><img src="../Images/dc4c15f730b77e033ce1bc60f2cbaa88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cHTqe25m54IWzRgA4WSkuQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">警报策略</figcaption></figure><h1 id="20fc" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">鳍状物</h1><p id="6992" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">就是这样！使用Stackdriver对Google计算平台上的Google应用引擎Cron作业进行快速、简单(且免费)的监控。说快10倍！</p></div></div>    
</body>
</html>