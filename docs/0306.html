<html>
<head>
<title>How to Push Docker Image to Google Container Registry (GCR) through Jenkins Job</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过Jenkins Job将Docker图像推送到Google容器注册中心(GCR)</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/how-to-push-docker-image-to-google-container-registry-gcr-through-jenkins-job-52b9d5ce9f7f?source=collection_archive---------0-----------------------#2017-06-10">https://medium.com/google-cloud/how-to-push-docker-image-to-google-container-registry-gcr-through-jenkins-job-52b9d5ce9f7f?source=collection_archive---------0-----------------------#2017-06-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="041c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我假设您已经运行了容器引擎集群，并将Jenkins作为POD部署在容器引擎集群上。</p><p id="3995" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1) </strong>安装所需的Jenkins插件</p><p id="83fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">谷歌OAuth凭证插件</em></p><p id="3898" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd"> Docker管道插件</em></p><p id="218a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">谷歌容器注册认证插件</em></p><p id="cdfa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2) </strong>创建服务帐户。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/8670fc320a6f6999a6aec6dd0ce13d05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lYS5g_l_qGF0VWv9fvvXEQ.png"/></div></div></figure><p id="cd29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">附加角色:</strong> <em class="jd">存储- &gt;存储管理员&amp;存储对象查看器</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jq"><img src="../Images/7e8c7766bd4642b92cbaaf56a64269cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*ljIJ0if-7h2bbyqS7mtYLw.png"/></div></figure><p id="c5a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以<em class="jd"> json </em>格式创建<strong class="ih hj">服务账户密钥</strong>。下载的密钥保持安全，我们将需要在进一步的配置。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jr"><img src="../Images/86674787d3f5c091005483a8916e22fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8lzw72KuLonzGwHimltRw.png"/></div></div></figure><p id="9e97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤3) </strong>我们必须添加全局凭证</p><p id="7ac0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">詹金斯- &gt;凭证- &gt;全局凭证- &gt;添加凭证</strong></p><p id="7b68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">从私钥中选择种类</strong> : <em class="jd">谷歌服务账户</em></p><p id="acfd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提供<strong class="ih hj">项目名称</strong>(可以是任何东西)并点击JSON key单选按钮，然后附上我们在步骤2中已经下载的<em class="jd"> json </em>文件。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es js"><img src="../Images/b7864a3cd5fbe7c627541c1b08390794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iC_FAx4T6bJWsyWn8kUc4Q.png"/></div></div></figure><p id="2587" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤4) </strong>在<strong class="ih hj">詹金斯项目- &gt;配置- &gt;构建- &gt;下选择Docker构建和发布’</strong></p><p id="55f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">必填字段:</p><p id="b215" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">存储库名称</strong>(给出您的Google容器存储库名称):&lt;项目id或项目名称&gt; /sample-php-app</p><p id="86a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">标签</strong> : ${BUILD_NUMBER}</p><p id="389d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Docker注册表URL </strong>(如果您的存储库位置是美国):<a class="ae jt" href="https://us.gcr.io/" rel="noopener ugc nofollow" target="_blank"> https://us.gcr.io </a></p><p id="3e87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注册表凭证</strong>(在<strong class="ih hj">步骤3 </strong>中添加全局凭证时提供的项目名称:&lt;项目名称&gt; Google容器注册表帐户</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ju"><img src="../Images/4925e386eb661cba01dac9f203cac0be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iGVTMKYM3eYUemB6Stbs0w.png"/></div></div></figure><p id="451e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">`<strong class="ih hj">让我们来试试吧！！！！！！！</strong></p></div></div>    
</body>
</html>