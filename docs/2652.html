<html>
<head>
<title>Auth0 as SAML Identity Provider (IdP) for Apigee Integrated Developer Portal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Auth0作为Apigee集成开发人员门户的SAML身份提供者(IdP)</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/auth0-as-saml-identity-provider-for-apigee-developer-portal-eb137fd95c11?source=collection_archive---------3-----------------------#2022-12-20">https://medium.com/google-cloud/auth0-as-saml-identity-provider-for-apigee-developer-portal-eb137fd95c11?source=collection_archive---------3-----------------------#2022-12-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="755a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">在本文中，我们将了解如何配置SAML身份提供者(本例中为Auth0)来登录Apigee的集成开发人员门户。</em></p><p id="875c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">登录Apigee集成开发人员门户的传统方式是通过内置的身份提供者选项。它要求用户传递他们的凭证(用户名和密码；如果不是现有用户，则应进行用户注册)到集成门户进行身份验证。创建新门户时，将配置并启用内置身份提供者。要从用户的角度理解登录体验，请参见<a class="ae je" href="https://cloud.google.com/apigee/docs/api-platform/publish/portal/portal-interact#built-in" rel="noopener ugc nofollow" target="_blank">使用用户凭证登录门户(内置提供者)</a>。</p><p id="ba5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">API gee Integrated Developer Portal现在可以配置任何支持SAML的第三方身份提供者(集成功能目前处于公开预览中)。安全声明标记语言(SAML)是实施单点登录(SSO)的标准协议。使用SAML的SSO身份验证使用户能够使用他们在身份提供者处注册的现有帐户登录到您的Apigee集成开发人员门户，而无需创建新帐户。用户可以使用集中管理的帐户凭据登录。</p><p id="2c6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将SAML配置为集成开发人员门户的身份提供者有以下好处:</p><ul class=""><li id="0bad" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jk jl jm jn bi translated"><strong class="ih hj">只需设置一次开发者计划，就可以在多个集成门户中重复使用。</strong>在创建您的集成开发者门户时，选择您的开发者计划。随着需求的发展，轻松更新或更改开发人员计划。</li><li id="6dce" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated"><strong class="ih hj">完全控制用户管理<br/> </strong>将您公司的SAML服务器连接到集成开发人员门户。当用户离开您的组织并被集中取消供应时，他们将不再能够通过您的SSO服务进行身份验证来使用集成开发人员门户。</li></ul><p id="3c6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">注意:SAML provider处于Apigee </em> <em class="jd">开发者门户</em>的测试版</p><p id="fbd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要配置SAML提供者，我们需要配置服务提供者(Apigee)和身份提供者(如Auth0 ),如下所示</p><p id="b3be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">配置服务提供商(Apigee) : </strong></p><ol class=""><li id="4a62" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jt jl jm jn bi translated">选择侧面导航栏中的<strong class="ih hj">发布&gt;门户</strong>，显示门户列表。</li><li id="e170" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jt jl jm jn bi translated">在门户登陆页面点击<strong class="ih hj">账户</strong>。或者，您可以在顶部导航栏的门户下拉菜单中选择<strong class="ih hj">账户</strong>。</li><li id="8ce2" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jt jl jm jn bi translated">点击<strong class="ih hj">认证</strong>标签。</li><li id="87cc" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jt jl jm jn bi translated">在<strong class="ih hj">身份提供者</strong>部分，单击<strong class="ih hj"> SAML </strong>提供者类型。</li><li id="021e" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jt jl jm jn bi translated">选择<strong class="ih hj">启用</strong>复选框以启用身份提供者。</li><li id="85db" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jt jl jm jn bi translated">点击<strong class="ih hj">保存</strong>。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/897fc166b9e91aabfe1d0fd6589f8471.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vavUHBx5qGuYLNV_"/></div></div></figure><p id="1c63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您现在将能够看到SP元数据URL。使用浏览器访问它，并使用任何xml阅读器打开下载的XML文件。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kg"><img src="../Images/114b09d8ef3b7333ccb9abb73900fa9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BzLg58GzO75UBkS7"/></div></div></figure><p id="0ccc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要从这个文件中获取AssertionConsumerService URL，如下所示。</p><ul class=""><li id="8000" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jk jl jm jn bi translated"><assertionconsumerservice binding="”urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST”" location="”&lt;strong" class="ih hj">https://diyyaedfgchrbui-a5 vnmtygh 8 qzekbd . portal-log in . API gee . com/SAML/SSO/alias/diyyaumzqchrbui-a5 vnmu 1 sp 8 qzekbd . API gee-SAML-log inindex = " 0 " is default = " true "/&gt;</assertionconsumerservice></li></ul><p id="d119" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">配置身份提供者时将使用此位置值。</p><p id="55df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还需要在SAML设置中填写登录URL、IdP实体ID，并在Apigee SAML身份提供者页面中上传证书。我们将从Auth0身份提供者获取这些信息，如下所示。</p><p id="2097" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">配置身份提供者身份验证0 : </strong></p><ol class=""><li id="e652" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jt jl jm jn bi translated">在applications选项卡下创建可以服务于此SAML集成的应用程序。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kh"><img src="../Images/c485bd8157dc918e24183c909010acfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r7icMyXa5vp1B4OD"/></div></div></figure><p id="633a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.点击新创建的应用程序，滚动到<strong class="ih hj">高级设置</strong>下拉菜单并选择<strong class="ih hj">证书</strong>选项卡。</p><p id="fafd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.下载。pem文件，并使用它上载到Apigee SAML身份提供者配置。</p><p id="046d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.在Auth0 Applications页面的<strong class="ih hj"> Add Ons </strong>选项卡下，启用<strong class="ih hj"> SAML2 WEB APP </strong></p><p id="c494" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.单击SAML2 WEB，您将看到一个弹出窗口，显示<strong class="ih hj">发行者</strong>，它将是<strong class="ih hj"> IdP实体ID </strong>，身份提供商登录URL将是<strong class="ih hj">登录URL。</strong>在Apigee SAML身份提供者配置中更新这些值。</p><p id="7bed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.在SAML2 WEB应用程序弹出窗口的<strong class="ih hj">设置</strong>选项卡下，我们将使用之前获取的<strong class="ih hj">AssertionConsumerService URL</strong>值，并将其用作应用程序回调URL。</p><p id="37b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd"> 7。请注意，Apigee要求</em><strong class="ih hj"><em class="jd">name identifier</em></strong><em class="jd">为电子邮件id。因此，我们需要在Auth0中创建一个规则，将属性映射到email id，而不是如下所示的</em> <strong class="ih hj"> <em class="jd"> nameid、</em> </strong> <em class="jd">。如果其他身份提供者。</em></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kh"><img src="../Images/44b47e487a2578d4d3b46dff8811e9b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*piVCuNwY6Ofql_0L"/></div></div></figure><p id="0300" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样我们就可以测试SAML集成了。启动您的Apigee集成开发人员门户，然后单击登录。我们应该看到一个带有SAML选项的登录，如下所示。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kh"><img src="../Images/b292aa7d8b63b34387cfce79730bdc37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3tKM72abRry8eZxM"/></div></div></figure><p id="7c8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果出现任何错误，请使用浏览器开发人员控制台跟踪网络，并使用Auth0监控日志进行调试。</p><p id="9aa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您现在可以禁用内置身份提供者(如果需要)，如下所示</p><h1 id="5262" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">禁用内置身份提供者</h1><p id="3b2d" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">要禁用内置身份提供者，请执行以下操作:</p><ol class=""><li id="f557" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jt jl jm jn bi translated"><a class="ae je" href="https://cloud.google.com/apigee/docs/api-platform/publish/portal/portal-identity-provider#access" rel="noopener ugc nofollow" target="_blank">访问内置身份提供者页面</a>。</li><li id="adc2" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jt jl jm jn bi translated">点击</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es ll"><img src="../Images/f4380af7bd4a25e3425c655bc5123aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:64/0*Mz5OzN-ReJbR-JvV"/></div></figure><ol class=""><li id="a6bf" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jt jl jm jn bi translated">在<strong class="ih hj">提供者配置</strong>部分。</li><li id="4696" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jt jl jm jn bi translated">取消选择<strong class="ih hj">启用</strong>复选框以禁用身份提供者。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lm"><img src="../Images/1ac133ec8aa11ec28e2b6b870cd1e42b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WagxqftDLGAOntuG"/></div></div></figure><p id="32f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>必须至少启用一个身份提供者以允许用户登录。</p><p id="3313" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.点击<strong class="ih hj">保存</strong>。</p></div></div>    
</body>
</html>