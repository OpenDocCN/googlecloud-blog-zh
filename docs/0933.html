<html>
<head>
<title>Colopl open sourced a Cloud Spanner driver for Laravel framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Colopl开源了一个用于Laravel框架的云扳手驱动</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/colopl-open-sourced-a-cloud-spanner-driver-for-laravel-framework-4ca1db018a3?source=collection_archive---------0-----------------------#2019-02-23">https://medium.com/google-cloud/colopl-open-sourced-a-cloud-spanner-driver-for-laravel-framework-4ca1db018a3?source=collection_archive---------0-----------------------#2019-02-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6f2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天，我想与大家分享我们在日本最重要的客户之一Colopl所做的工作。在日本以外，你可能不知道这家公司，但Colopl是日本主要手机游戏公司之一。他们发布了多个热门手机游戏，如<a class="ae jd" href="https://colopl.co.jp/shironekoproject/" rel="noopener ugc nofollow" target="_blank"> Shironeko Project </a>(动作RPG)或<a class="ae jd" href="https://colopl.co.jp/magicianwiz/" rel="noopener ugc nofollow" target="_blank"> The World of Mystic Wiz </a>(智力竞赛RPG)，它们在Google Play商店中排名前20。</p><p id="1b8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为一个背景，Colopl决定从2017年9月开始将所有游戏迁移到GCP，并于2018年11月结束迁移。我们今天刚刚在GCP日本博客<a class="ae jd" href="https://cloudplatform-jp.googleblog.com/2019/02/COLOPL-Google-Cloud-Platform.html" rel="noopener ugc nofollow" target="_blank">上发布了他们的用例</a>(只有日文)，但总结一下这篇文章，他们迁移到GCP使用<a class="ae jd" href="https://cloud.google.com/kubernetes-engine/" rel="noopener ugc nofollow" target="_blank"> Google Kubernetes引擎</a> (GKE)和<a class="ae jd" href="https://cloud.google.com/spanner/" rel="noopener ugc nofollow" target="_blank"> Cloud Spanner </a>(水平可扩展的强一致性关系数据库)以减少基础设施和运营成本(他们实际上减少了30%)。</p></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/0e000110272e48633ca284da94cd60d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YLpJSlV6Bej80ftwP6uI-A.png"/></div></div></figure><p id="d427" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谈到Cloud Spanner，Colopl已经使用这个数据库一年了，他们的后端应用程序是用PHP编写的。今天，他们刚刚为Laravel框架开源了一个<a class="ae jd" href="https://github.com/colopl/laravel-spanner" rel="noopener ugc nofollow" target="_blank">云扳手驱动程序，这是PHP最流行的框架之一。Github repo是英文的，所以不要担心，你会找到自己使用驱动程序的方法:)(这个项目的首席工程师也能说流利的英语)</a></p><div class="jx jy ez fb jz ka"><a href="https://github.com/colopl/laravel-spanner" rel="noopener  ugc nofollow" target="_blank"><div class="kb ab dw"><div class="kc ab kd cl cj ke"><h2 class="bd hj fi z dy kf ea eb kg ed ef hh bi translated">colopl/laravel扳手</h2><div class="kh l"><h3 class="bd b fi z dy kf ea eb kg ed ef dx translated">谷歌云扳手的Laravel数据库驱动。通过创建一个……</h3></div><div class="ki l"><p class="bd b fp z dy kf ea eb kg ed ef dx translated">github.com</p></div></div><div class="kj l"><div class="kk l kl km kn kj ko jv ka"/></div></div></a></div><p id="5b82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个来自Colopl的后端工程师，<a class="ae jd" rel="noopener" href="/@awata"> Hiroki Awata </a>刚刚发表了<a class="ae jd" rel="noopener" href="/google-cloud-jp/laravel-spanner-4d9f20eaeea3">一篇关于他们工作的文章</a>(同样是日文的),所以我想我可以在这里用英文帮助和总结他们的文章:)</p></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><p id="21d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是文章原文。</p><div class="jx jy ez fb jz ka"><a rel="noopener follow" target="_blank" href="/google-cloud-jp/laravel-spanner-4d9f20eaeea3"><div class="kb ab dw"><div class="kc ab kd cl cj ke"><h2 class="bd hj fi z dy kf ea eb kg ed ef hh bi">Laravel 用の Cloud Spanner ドライバを公開しました</h2><div class="kh l"><h3 class="bd b fi z dy kf ea eb kg ed ef dx">株式会社コロプラの粟田です。前回は PHP ではじめる Cloud Spanner という記事を書き、Cloud Spanner に接続する最小限のコードを紹介しました。</h3></div><div class="ki l"><p class="bd b fp z dy kf ea eb kg ed ef dx translated">medium.com</p></div></div><div class="kj l"><div class="kp l kl km kn kj ko jv ka"/></div></div></a></div><h1 id="06df" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">colopl/laravel扳手特征</h1><ul class=""><li id="b1fa" class="lo lp hi ih b ii lq im lr iq ls iu lt iy lu jc lv lw lx ly bi translated">为Cloud Spanner提供大部分Laravel数据库特性</li><li id="373b" class="lo lp hi ih b ii lz im ma iq mb iu mc iy md jc lv lw lx ly bi translated">支持雄辩的</li><li id="884c" class="lo lp hi ih b ii lz im ma iq mb iu mc iy md jc lv lw lx ly bi translated">支持交叉表和索引的创建</li><li id="4bb8" class="lo lp hi ih b ii lz im ma iq mb iu mc iy md jc lv lw lx ly bi translated">他们最新游戏服务器的良好记录</li></ul><h1 id="6aae" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">装置</h1><p id="a923" class="pw-post-body-paragraph if ig hi ih b ii lq ik il im lr io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">请遵循<a class="ae jd" href="https://github.com/colopl/laravel-spanner" rel="noopener ugc nofollow" target="_blank"> Github repo </a>上的自述文件，其中包括使驱动程序工作的所有步骤。</p><h1 id="ef48" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">限制</h1><p id="e984" class="pw-post-body-paragraph if ig hi ih b ii lq ik il im lr io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">看一下Github repo上的<a class="ae jd" href="https://github.com/colopl/laravel-spanner#limitations" rel="noopener ugc nofollow" target="_blank">限制部分</a>，了解这个驱动程序与如何使用Cloud Spanner相关的限制。</p><p id="2bab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在这篇文章中只提到一个。这是关于AUTO_INCREMENT。Cloud Spanner不提供AUTO_INCREMENT，因为这代表了一种反模式(参见<a class="ae jd" href="https://cloud.google.com/spanner/docs/whitepapers/optimizing-schema-design#anti-pattern_timestamp_ordering" rel="noopener ugc nofollow" target="_blank">本文</a>以了解潜在的原因)并可能导致热点。由于这个原因，驱动程序本身没有提供任何使用AUTO_INCREMENT的Laravel特性。</p><p id="ba62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回购中提到:</p><blockquote class="mh mi mj"><p id="9746" class="if ig mk ih b ii ij ik il im in io ip ml ir is it mm iv iw ix mn iz ja jb jc hb bi translated">可以使用<code class="du mo mp mq mr b">SchemaBuilder</code>(如<code class="du mo mp mq mr b">Schema</code>门面、<code class="du mo mp mq mr b">Blueprint</code>的大部分功能。但是，<code class="du mo mp mq mr b">artisan migrate</code>命令不起作用，因为Google Cloud Spanner中不存在AUTO_INCREMENT。</p></blockquote></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><p id="359c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您有任何要求或发现任何bug，请不要犹豫，在Github问题中报告它们。在Cloud Spanner获得新功能的同时，Colopl将继续维护这个项目。</p><p id="1c42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这个Laravel的驱动程序能帮助PHP开发者以一种更友好的方式使用Cloud Spanner！</p></div></div>    
</body>
</html>