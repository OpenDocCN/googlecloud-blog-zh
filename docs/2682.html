<html>
<head>
<title>Teradata to BigQuery Migration Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Teradata到BigQuery迁移指南</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/teradata-to-bigquery-migration-guide-b053c262b3e2?source=collection_archive---------0-----------------------#2022-12-27">https://medium.com/google-cloud/teradata-to-bigquery-migration-guide-b053c262b3e2?source=collection_archive---------0-----------------------#2022-12-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b9ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi jd translated">对于希望利用BigQuery的可扩展性和成本效益来满足数据分析需求的企业来说，将数据从Teradata迁移到Google BigQuery是一个常见的用例。</p><p id="33d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将数据从Teradata迁移到BigQuery时，可以采用几种不同的方法。最适合您组织的方法将取决于您的特定需求和要求。</p><p id="46c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一些常见的方法包括:</p><ol class=""><li id="5ed6" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc jr js jt ju bi translated"><strong class="ih hj">直接导出和导入:</strong>这种方法包括使用Teradata Parallel Transporter(TPT)或Teradata Studio等工具从Teradata导出数据，然后使用BigQuery web UI、CLI或API将数据导入BigQuery。这是一种简单的方法，适用于中小型数据集。</li><li id="d9f4" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated"><strong class="ih hj">使用BQ数据传输进行数据传输:</strong>BigQuery数据传输服务是一种完全托管的云原生数据集成服务，允许您计划和自动将来自各种来源的数据传输到big query，包括Teradata等本地数据库..这种方法适用于一次性或定期的数据传输，尤其适用于需要在BigQuery中自动迁移分区和集群数据的情况。</li><li id="2588" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated"><strong class="ih hj">使用云数据流的ETL(提取、转换、加载):</strong> Google Cloud Dataflow是一个完全托管的云原生数据处理服务，允许您为ETL、批处理和流处理构建和执行数据管道。数据流是数据迁移的有用工具，特别是对于较大的数据集或需要更复杂转换的情况。总的来说，使用云数据流进行Teradata到BigQuery的迁移允许您构建和执行完全托管的数据管道，该管道可以处理您的迁移项目的ETL或ELT需求。</li></ol><p id="d5ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总的来说，将数据从Teradata迁移到BigQuery的过程需要仔细规划和执行，以确保数据的成功传输。</p><h1 id="7e9b" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">方法1: BigQuery数据传输服务</h1><h1 id="9413" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">Teradata实例设置</h1><p id="da44" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">出于测试目的，可以在Google Cloud上设置Teradata实例。如果您在本地服务器或任何其他云环境上运行Teradata，您可能需要为该实例设置网络和防火墙规则。这可能涉及创建虚拟私有云(VPC)并配置必要的防火墙规则，以允许传入流量进入实例。</p><h2 id="1f38" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">为数据传输创建服务帐户</h2><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="9ba2" class="ma kb hi lw b be mb mc l md me"># Set the PROJECT variable<br/>export PROJECT=$(gcloud config get-value project)<br/><br/># Create a service account<br/>gcloud iam service-accounts create td2bq-transfer</span></pre><h2 id="ba35" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">BigQuery和云存储管理员角色绑定</h2><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="b165" class="ma kb hi lw b be mb mc l md me"># Set TD2BQ_SVC_ACCOUNT = service account email<br/>export TD2BQ_SVC_ACCOUNT=td2bq-transfer@${PROJECT}.iam.gserviceaccount.com<br/><br/># Bind the service account to the BigQuery Admin role<br/>gcloud projects add-iam-policy-binding ${PROJECT} \<br/>  --member serviceAccount:${TD2BQ_SVC_ACCOUNT} \<br/>  --role roles/bigquery.admin<br/><br/># Bind the service account to the Storage Admin role<br/>gcloud projects add-iam-policy-binding ${PROJECT} \<br/>  --member serviceAccount:${TD2BQ_SVC_ACCOUNT} \<br/>  --role roles/storage.admin</span></pre><h2 id="0f5a" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">创建Teradata GCE实例</h2><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="cc19" class="ma kb hi lw b be mb mc l md me"># Create the Teradata GCE instance<br/>gcloud compute instances create teradata-vantage-express \<br/>  --zone=us-central1-a \<br/>  --machine-type=n2-custom-4-8192 \<br/>  --create-disk=boot=yes,device-name=ve-disk,image-project=ubuntu-os-cloud,image-family=ubuntu-2004-lts,size=70,type=pd-balanced \<br/>  --enable-nested-virtualization \<br/>  --tags=ve<br/>  --service-account=${TD2BQ_SVC_ACCOUNT}</span></pre><h2 id="67dd" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">遵循Teradata官方指南在Google Cloud上运行Vantage Express</h2><p id="6b16" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated"><a class="ae mf" href="https://quickstarts.teradata.com/vantage.express.gcp.html" rel="noopener ugc nofollow" target="_blank">https://quickstarts.teradata.com/vantage.express.gcp.html</a></p><h2 id="3a1e" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">在计算引擎实例上启动Teradata虚拟机</h2><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="ee23" class="ma kb hi lw b be mb mc l md me"># ssh to the VM<br/>gcloud compute ssh teradata-vantage-express --zone=us-central1-a<br/><br/># switch to root user<br/>sudo -i</span></pre><pre class="mg lv lw lx bn ly lz bi"><span id="12ae" class="ma kb hi lw b be mb mc l md me">export VM_IMAGE_DIR="/opt/downloads/VantageExpress17.20_Sles12"<br/>DEFAULT_VM_NAME="vantage-express"<br/>VM_NAME="${VM_NAME:-$DEFAULT_VM_NAME}"<br/>vboxmanage createvm - name "$VM_NAME" - register - ostype openSUSE_64<br/>vboxmanage modifyvm "$VM_NAME" - ioapic on - memory 6000 - vram 128 - nic1 nat - cpus 4<br/>vboxmanage storagectl "$VM_NAME" - name "SATA Controller" - add sata - controller IntelAhci<br/>vboxmanage storageattach "$VM_NAME" - storagectl "SATA Controller" - port 0 - device 0 - type hdd - medium "$(find $VM_IMAGE_DIR -name '*disk1*')"<br/>vboxmanage storageattach "$VM_NAME" - storagectl "SATA Controller" - port 1 - device 0 - type hdd - medium "$(find $VM_IMAGE_DIR -name '*disk2*')"<br/>vboxmanage storageattach "$VM_NAME" - storagectl "SATA Controller" - port 2 - device 0 - type hdd - medium "$(find $VM_IMAGE_DIR -name '*disk3*')"<br/>vboxmanage modifyvm "$VM_NAME" - natpf1 "tdssh,tcp,,4422,,22"<br/>vboxmanage modifyvm "$VM_NAME" - natpf1 "tddb,tcp,,1025,,1025"<br/>vboxmanage startvm "$VM_NAME" - type headless<br/>vboxmanage controlvm "$VM_NAME" keyboardputscancode 1c 1c</span></pre><h2 id="9f9a" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">下载Teradata客户端和jar</h2><ul class=""><li id="b92c" class="jm jn hi ih b ii ky im kz iq mh iu mi iy mj jc mk js jt ju bi translated">导航至<a class="ae mf" href="https://downloads.teradata.com/download/tools/teradata-tools-and-utilities-linux-installation-package-0" rel="noopener ugc nofollow" target="_blank"> Teradata工具和实用程序下载页面</a></li><li id="27ee" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">点击你想下载的文件</li><li id="0672" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">从浏览器复制下载URL并运行<code class="du ml mm mn lw b">curl</code>命令，如下所示:</li></ul><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="e753" class="ma kb hi lw b be mb mc l md me"># Download file<br/>curl -o FILE_NAME "URL"<br/><br/># Extract the file<br/>tar -xvf TeradataToolsAndUtilitiesBase__ubuntu_x8664.17.20.08.00.tar.gz</span></pre><p id="e1a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">解压实用程序文件后，安装<code class="du ml mm mn lw b">tptbase</code>以使用<code class="du ml mm mn lw b">tbuild</code>实用程序</p><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="f5fb" class="ma kb hi lw b be mb mc l md me"># Change directory<br/>cd TeradataToolsAndUtilitiesBase<br/><br/># Install<br/>./setup.sh tptbase</span></pre><p id="b943" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按照相同的步骤从<a class="ae mf" href="https://downloads.teradata.com/download/connectivity/jdbc-driver" rel="noopener ugc nofollow" target="_blank"> Teradata JDBC驱动程序下载页面</a>下载Teradata JDBC驱动程序</p><ul class=""><li id="1057" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">解压主目录下的文件，得到<code class="du ml mm mn lw b">terajdbc4.jar</code></li></ul><h2 id="f393" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">安装转移代理</h2><p id="e66c" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">该代理是BigQuery数据传输服务的一部分，可以自动在Teradata和BigQuery之间移动数据</p><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="74af" class="ma kb hi lw b be mb mc l md me"># Install Java<br/>sudo apt-get install openjdk-8-jre-headless<br/><br/># Download transfer agent<br/>sudo wget -P /root/ \<br/>https://storage.googleapis.com/data_transfer_agent/latest/mirroring-agent.jar</span></pre><h2 id="58f8" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">到虚拟机和查询数据库的ssh</h2><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="5372" class="ma kb hi lw b be mb mc l md me"># ssh to Vantage Express VM. Use root as password<br/>ssh -p 4422 root@localhost<br/><br/># Validate if the DB is up<br/>pdestate -a</span></pre><p id="55e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦Vantage Express启动并运行，启动<code class="du ml mm mn lw b">bteq</code>客户端命令行客户端。当询问密码时，输入<code class="du ml mm mn lw b">dbc</code></p><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="b4ab" class="ma kb hi lw b be mb mc l md me">&gt;&gt; bteq<br/>Enter your logon or BTEQ command:<br/>.logon localhost/dbc<br/>Password: dbc</span></pre><h2 id="9cf9" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">运行测试查询</h2><p id="4e83" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">最初，不会出现任何数据库或表。您需要从本地文件导入表，或者使用SQL创建表并手动插入数据。在这一步中，根据您的要求创建环境结构。</p><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="52fb" class="ma kb hi lw b be mb mc l md me">SELECT * FROM HR.Employees;<br/><br/># Close BTEQ<br/>.QUIT</span></pre><h1 id="1898" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">使用BigQuery控制台创建传输</h1><p id="b96a" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">在谷歌云控制台中，</p><ul class=""><li id="5698" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">转到BigQuery页面</li><li id="e6e8" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">点击<code class="du ml mm mn lw b"><strong class="ih hj">Data transfers</strong></code></li><li id="41a6" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">点击<code class="du ml mm mn lw b"><strong class="ih hj">Create transfer</strong></code></li></ul><p id="a4e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据要求提供适当的信息。</p><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es mo"><img src="../Images/e4503fc07b450a82447e28b305b8c7bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6Gw_vMBfxCy9pdxu"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">数据传输配置详细信息</figcaption></figure><p id="f94e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提供目标和源的详细信息:</p><ul class=""><li id="5fd5" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">目标数据集</li><li id="eaaa" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">源数据库类型。选择<code class="du ml mm mn lw b">Teradata.</code></li><li id="7022" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">提供云存储桶路径。这个存储桶将用于在迁移过程中存储中间数据。</li><li id="8814" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">源数据库名称</li><li id="5c55" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated"><strong class="ih hj">表名模式</strong> <br/> -选择特定的表，提供管道分隔的表名<code class="du ml mm mn lw b">table1|table2</code> <br/> -指定<code class="du ml mm mn lw b">.*</code>处理源数据库中的所有表</li><li id="7256" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">对于<strong class="ih hj">服务帐户电子邮件</strong>，输入IAM服务帐户附带的电子邮件。</li><li id="cd21" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">对于<strong class="ih hj">模式文件路径</strong>选项，提供自定义模式文件的路径。如果不想使用，就让它为空，BigQuery会自动检测表模式。</li></ul><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es na"><img src="../Images/d9241e59c4f46508cee571cafadafea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UiJg3Y3IA5GL2uAwbul33g.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">数据传输源详细信息</figcaption></figure><ul class=""><li id="f0af" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">点击<strong class="ih hj">保存</strong></li></ul><p id="c7dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将成功创建传输。您可以在传输详细信息页面上查看详细信息，如显示名称、时间表、目标数据集等。</p><ul class=""><li id="1ff3" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">在<strong class="ih hj">传输详情</strong>页面，点击<strong class="ih hj">配置</strong>选项卡。<br/> -记下资源名称，因为我们将在接下来的步骤中使用它来运行迁移代理。</li></ul><h2 id="4e36" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">自定义模式文件</h2><p id="97c0" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">下面的json是一个样本模式文件。迁移后，您可以在<code class="du ml mm mn lw b">originalName</code>下指定源数据库名称，在<code class="du ml mm mn lw b">name</code>下指定目标数据库名称。表中的所有列也是如此。此外，您可以为一个列指定目标数据类型，而<code class="du ml mm mn lw b">usageType.</code>指定<strong class="ih hj">默认</strong>作为使用类型。此usageType表示该列在源系统中没有特殊用途。这是默认值。</p><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="90e1" class="ma kb hi lw b be mb mc l md me">{<br/>  "databases": [<br/>    {<br/>      "name": "hr",<br/>      "originalName": "hr",<br/>      "tables": [<br/>        {<br/>          "name": "employees",<br/>          "originalName": "employees",<br/>          "columns": [<br/>            {<br/>              "name": "ID",<br/>              "originalName": "ID",<br/>              "type": "INT64",<br/>              "originalType": "integer",<br/>              "usageType": [<br/>                "DEFAULT"<br/>              ]<br/>            },<br/>            {<br/>              "name": "NAME",<br/>              "originalName": "NAME",<br/>              "type": "STRING",<br/>              "originalType": "character",<br/>              "usageType": [<br/>                "DEFAULT"<br/>              ]<br/>            },<br/>            {<br/>              "name": "UPDATE_DATE",<br/>              "originalName": "UPDATE_DATE",<br/>              "type": "DATE",<br/>              "originalType": "date",<br/>              "usageType": [<br/>                "PARTITIONING"<br/>              ]<br/>            },<br/>            {<br/>              "name": "DEPARTMENT_CODE",<br/>              "originalName": "DEPARTMENT_CODE",<br/>              "type": "STRING",<br/>              "originalType": "character",<br/>              "usageType": [<br/>                "DEFAULT"<br/>              ]<br/>            }<br/>          ]<br/>        }<br/>      ]<br/>    }<br/>  ]<br/>}</span></pre><h2 id="5824" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">增量更新</h2><ul class=""><li id="f253" class="jm jn hi ih b ii ky im kz iq mh iu mi iy mj jc mk js jt ju bi translated">为了处理增量更新，您可以将<strong class="ih hj"> COMMIT_TIMESTAMP </strong>指定为<code class="du ml mm mn lw b">usageType</code>，并支持相同的数据类型，即时间戳或日期。到目前为止，对于这种使用类型，我们只能为每个表指定一列。该列用于提取自上次传输运行以来创建/更新的行。</li></ul><h2 id="e282" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">分区表</h2><ul class=""><li id="662a" class="jm jn hi ih b ii ky im kz iq mh iu mi iy mj jc mk js jt ju bi translated">如果您有要迁移的分区表，您可以将<strong class="ih hj">分区</strong>指定为<code class="du ml mm mn lw b">usageType</code>，并支持相同的数据类型，即时间戳或日期。该列用于包含<em class="nb">表</em>对象的分区表定义中。</li></ul><h2 id="e871" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">使聚集</h2><ul class=""><li id="ab30" class="jm jn hi ih b ii ky im kz iq mh iu mi iy mj jc mk js jt ju bi translated">如果您有要迁移的分区表，您可以将<strong class="ih hj">集群</strong>指定为<code class="du ml mm mn lw b">usageType</code> <strong class="ih hj"> </strong>我们可以用这种用法类型注释最多四列。聚类的列顺序是根据它们在自定义架构中出现的顺序来确定的。</li></ul><h1 id="2f33" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">初始化代理</h1><p id="a05d" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">切换回Teradata终端。按照以下格式初始化bigquery迁移代理:</p><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="244f" class="ma kb hi lw b be mb mc l md me">java -cp terajdbc4.jar:mirroring-agent.jar com.google.cloud.bigquery.dms.Agent - initialize</span></pre><p id="e9b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出现提示时，配置以下选项:</p><ul class=""><li id="61e5" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">为本地提取的文件提供目录</li><li id="a031" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated"><code class="du ml mm mn lw b">localhost</code>作为数据库主机名</li><li id="9903" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">提供连接端口或输入以使用默认端口</li><li id="8af0" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">键入<code class="du ml mm mn lw b">yes</code>使用TPT卸载数据</li><li id="210a" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">提供数据库身份证明文件的路径，或输入以在运行时提供身份证明。凭据文件的示例内容:</li></ul><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="b75c" class="ma kb hi lw b be mb mc l md me">username=dbc<br/>password=dbc</span></pre><ul class=""><li id="b401" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">在配置名称中提供从BigQuery传输详细信息控制台复制的资源名称。</li><li id="d1a9" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">最后，配置文件路径。</li></ul><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="f425" class="ma kb hi lw b be mb mc l md me">root@teradata-vantage-express:~/export_data# java -cp ~/mirroring-agent.jar com.google.cloud.bigquery.dms.Agent - initialize<br/>Reading data from gs://data_transfer_agent/latest/version<br/><br/>Would you like to write the default TPT template to disk? (yes/no): yes<br/>Enter path to write default TPT script template: tpt_template<br/>Enter directory path for locally extracted files: /tmp<br/>Enter Database hostname: localhost<br/>Enter Database connection port (press enter to use default port):<br/>Would you like to use Teradata Parallel Transporter (TPT) to unload data? Recommended - yes. (yes/no): yes<br/>Enter database credentials file path:<br/>Enter BigQuery Data Transfer Service config name (press enter to create new transfer config): projects/project-id/locations/us/transferConfigs/639641d3–0000–2061–9b3a-240588725d64<br/>Enter configuration file path: config.json<br/><br/>Configuration file successfully created!</span></pre><p id="5838" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有了以上细节，初始化过程将创建两个文件:<code class="du ml mm mn lw b">tpt_template</code>和<code class="du ml mm mn lw b">config.json</code></p><h2 id="1d1c" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">步骤4:运行代理</h2><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="95e9" class="ma kb hi lw b be mb mc l md me">java -cp ~/mirroring-agent.jar:terajdbc4.jar com.google.cloud.bigquery.dms.Agent --configuration-file=config.json</span></pre><p id="f58a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果出现提示，请提供Teradata用户名和密码。</p><p id="90d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果提供的所有配置都正确，代理将列出指定的表，并将它们传输到BigQuery中的目标数据集。</p></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><h1 id="e7fc" class="ka kb hi bd kc kd nj kf kg kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx bi translated">方法2:使用TPT导出工具+ gsutil</h1><p id="467f" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi jd translated"><span class="l je jf jg bm jh ji jj jk jl di">一般来说，任何数据传输都可以分为<strong class="ih hj"> ETL </strong>过程或<strong class="ih hj"> ELT </strong>过程。如果我们不想对源数据执行任何转换，BigQuery数据传输服务是一个不错的选择。</span></p><p id="b7ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您的用例需要对源数据进行任何转换或预处理，使用<strong class="ih hj">云存储</strong>作为中转区，并通过<strong class="ih hj">数据流</strong>执行转换可能是解决方案之一。</p><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es no"><img src="../Images/b42012027cf67183489a3f785d2a5d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*468CoosUDdenLPdU"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">使用TPT导出和数据流的数据传输流</figcaption></figure><h1 id="8846" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">从Teradata导出数据</h1><p id="3e5b" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">Teradata提供了两个能够从Teradata平台发送数据的数据导出实用程序:</p><ul class=""><li id="939a" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">BTEQ和</li><li id="ef6c" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">快速出口</li></ul><p id="78df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Teradata并行传输实用程序(TPT) </strong>将Fastload、Multiload、TPUMP、BTEQ和Fastexport的功能合并到一个实用程序中。</p><h1 id="0944" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">过程</h1><h2 id="3d34" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">定义TPT脚本</h2><p id="10fe" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">脚本中有3个组件</p><ul class=""><li id="2be2" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">定义<code class="du ml mm mn lw b">EXPORT_DATA</code>工作。这包括操作符的类型，在我们的例子中是Consumer_Opp，模式和输出属性，比如输出文件名、分隔符、模式等。</li><li id="2743" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">然后是需要导出的表的模式。</li><li id="0342" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">最后，生产者出口经营者。在这里，我们定义源数据库凭证、teradata进程id、会话信息等。你必须在这里提供<code class="du ml mm mn lw b">SelectStmt</code>，可以修改它来创建<code class="du ml mm mn lw b">full-load</code>和<code class="du ml mm mn lw b">incremental-load</code></li></ul><p id="e2da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">样本<code class="du ml mm mn lw b">td_export.tpt</code>文件</p><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="d292" class="ma kb hi lw b be mb mc l md me">DEFINE JOB EXPORT_DATA<br/>(<br/>    DEFINE OPERATOR Consumer_Opp<br/>    DESCRIPTION 'Consumer Operator'<br/>    TYPE DATACONNECTOR CONSUMER<br/>    SCHEMA *<br/>    ATTRIBUTES<br/>    (<br/>        VARCHAR FileName='employee.csv',<br/>        VARCHAR FORMAT= 'DELIMITED',<br/>        VARCHAR OpenMode='Write',<br/>        VARCHAR TextDelimiter = ','<br/>);<br/>DEFINE SCHEMA Employee_Schema<br/>(<br/>   GlobalID INTEGER,<br/>   FirstName VARCHAR(30),<br/>   LastName VARCHAR(30),<br/>   DateOfBirth CHAR(10),<br/>   JoinedDate CHAR(10),<br/>   DepartmentCode BYTEINT<br/>);<br/>DEFINE OPERATOR Producer_Export<br/>TYPE EXPORT<br/>SCHEMA Employee_Schema<br/>ATTRIBUTES<br/>(<br/>   VARCHAR UserName='dbc',<br/>   VARCHAR UserPassword='dbc',<br/>   VARCHAR SelectStmt = 'select * from HR.EMPLOYEES;',<br/>   VARCHAR Tdpid='localhost',<br/>   INTEGER MaxSessions=5,<br/>   INTEGER minsessions=1,<br/>   VARCHAR DateForm='ANSIDATE'<br/>);<br/>APPLY<br/>TO OPERATOR( Consumer_Opp )<br/>SELECT * FROM OPERATOR( Producer_Export[2] );<br/>);</span></pre><h2 id="a65a" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">运行脚本:</h2><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="4586" class="ma kb hi lw b be mb mc l md me">tbuild -f td_export.tpt</span></pre><ul class=""><li id="084b" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">在本地服务器上输出CSV文件</li></ul><h2 id="5af7" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">使用gsutil将本地文件导出到GCS:</h2><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="6f86" class="ma kb hi lw b be mb mc l md me">gsutil cp *.csv gs://bucket-name/dest-folder</span></pre><p id="2f11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成这一步后，有两种方法可以将数据加载到BigQuery中。</p><h2 id="fa01" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">路线1:直接加载到BQ</h2><p id="2919" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">通过提供源数据格式、gcs文件路径和输出模式文件，使用<code class="du ml mm mn lw b">bq load</code>命令将数据从云存储数据源直接加载到BigQuery。</p><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="a9f9" class="ma kb hi lw b be mb mc l md me">bq load \<br/> --source_format=CSV \<br/> td2bq.employees_gcs \<br/> gs://bucket-name/dest-folder/employee.csv \<br/> ./employee_schema.json</span></pre><h2 id="99b4" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">路线2:使用数据流</h2><p id="923b" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">如果需要在加载到BigQuery之前对源数据执行任何数据清理或转换，可以使用Dataflow。Dataflow是一种无服务器、快速且经济高效的服务，支持流和批处理。</p><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es np"><img src="../Images/543f42a18900afdcb08630d9ce6629d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LA1uSnGXKzh2ySuYd1N7oA.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">使用数据流进行数据质量检查的数据传输流程</figcaption></figure><p id="f222" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">流程:</strong></p><ul class=""><li id="7d4e" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">启用数据流API</li><li id="3b1d" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">Dataflow使用云存储桶作为暂存位置来存储临时文件。为暂存和临时数据创建GCS文件夹<gs:> &amp; <gs:/></gs:></li><li id="523a" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">转到谷歌云控制台</li><li id="0148" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">点击<code class="du ml mm mn lw b">Activate Cloud Shell</code></li><li id="e704" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">安装apache beam依赖关系<code class="du ml mm mn lw b">sudo pip3 install apache_beam[gcp]</code></li><li id="217c" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">如下图所示创建<code class="du ml mm mn lw b">quality_check.py</code>:</li></ul><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="41f0" class="ma kb hi lw b be mb mc l md me">import apache_beam as beam<br/>from apache_beam.options.pipeline_options import PipelineOptions<br/><br/>FILEPATH = 'gs://bucket-name/employee.csv'<br/><br/><br/>def calculate_age(data):<br/>    from datetime import date, datetime<br/>    today = date.today()<br/>    dob = datetime.strptime(data['date_of_birth'], '%Y-%m-%d')<br/>    data['age'] = today.year - dob.year - ((today.month, today.day) &lt; (dob.month, dob.day))<br/>    return data<br/><br/><br/>def run():<br/>    with beam.Pipeline(options=PipelineOptions()) as pipeline:<br/>        (pipeline | 'Read Data' &gt;&gt; beam.io.ReadFromText(FILEPATH)<br/>         | beam.Map(lambda x: x.split(','))<br/>         | 'Convert to Dictionary' &gt;&gt; beam.Map(<br/>                    lambda x: {"id": x[0], "first_name": x[1], "last_name": x[2], "date_of_birth": x[3],<br/>                               "date_of_joining": x[4], "department_code": x[5]})<br/>         | 'CalculateAge' &gt;&gt; beam.Map(calculate_age)<br/>         | 'WriteToBigQuery' &gt;&gt; beam.io.WriteToBigQuery(<br/>                    project='project-id',<br/>                    dataset='td2bq',<br/>                    table='emp_data',<br/>                    schema='id:INTEGER,first_name:STRING,last_name:STRING,date_of_birth:STRING,'<br/>                           'date_of_joining:STRING,' 'department_code:INTEGER,age:INTEGER',<br/>                    write_disposition=beam.io.BigQueryDisposition.WRITE_APPEND,<br/>                    create_disposition=beam.io.BigQueryDisposition.CREATE_IF_NEEDED<br/>                )<br/>         )<br/><br/><br/>if __name__ == '__main__':<br/>    run()</span></pre><p id="07ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面是一个示例python脚本，它从GCS bucket中读取数据，从<code class="du ml mm mn lw b">date_of_birth</code>中填充<code class="du ml mm mn lw b">age</code>字段，并将这些数据写回到具有新模式的目标BigQuery表中。</p><p id="efc0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以修改上面的脚本来应用数据清理、转换、验证和其他数据质量检查。</p><ul class=""><li id="f1a4" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">运行数据流作业</li></ul><pre class="lr ls lt lu fd lv lw lx bn ly lz bi"><span id="d030" class="ma kb hi lw b be mb mc l md me">python3 quality_check.py \<br/>--runner DataFlowRunner \<br/>--project jarvis-365810 \<br/>--temp_location gs://bucket-name/GCS_to_BQ_Dataflow/temp \<br/>--staging_location gs://bucket-name/GCS_to_BQ_Dataflow/staging \<br/>--region us-central1 \<br/>--job_name gcs2bq</span></pre><p id="8bb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在谷歌云控制台中:</p><ul class=""><li id="a845" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">转到数据流</li><li id="84f9" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">点击<code class="du ml mm mn lw b">Jobs</code></li><li id="db0f" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">从<code class="du ml mm mn lw b">Job details</code>页面点击作业名称并跟踪进度。</li></ul><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es nq"><img src="../Images/f0c97fa2bcb05ebbe1d7422b5cfac35d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xbb7TZWCZ9EphdAWlEEkpg.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">数据流作业</figcaption></figure><p id="af9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作业成功完成后，将在BigQuery的数据集<code class="du ml mm mn lw b">td2bq</code>下创建表<code class="du ml mm mn lw b">emp_data</code>。检查模式&amp;预览表以检查数据的正确性。</p></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><h1 id="3ccc" class="ka kb hi bd kc kd nj kf kg kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx bi translated">翻译查询</h1><p id="77d2" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">使用BigQuery，您可以用两种不同的方式翻译SQL查询:</p><ul class=""><li id="2af9" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">使用<a class="ae mf" href="https://cloud.google.com/bigquery/docs/batch-sql-translator" rel="noopener ugc nofollow" target="_blank">批处理SQL翻译</a>批量迁移您的SQL脚本</li><li id="bd2c" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated"><a class="ae mf" href="https://cloud.google.com/bigquery/docs/interactive-sql-translator" rel="noopener ugc nofollow" target="_blank"> interactive SQL翻译</a>翻译特定查询。</li></ul><h2 id="c4c4" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">1.使用批量SQL转换</h2><p id="3b03" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">在谷歌云控制台中，</p><ul class=""><li id="4998" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">转到BigQuery页面</li><li id="17fc" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">在<code class="du ml mm mn lw b">Migration</code>下点击<code class="du ml mm mn lw b">SQL Translation</code></li><li id="f414" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">点击<code class="du ml mm mn lw b">Start Translation</code></li></ul><p id="a32d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按如下方式指定转换配置:</p><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es nr"><img src="../Images/57929a98c683098783a86d555049c83d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d4GGO680Ejm_hNmxw4a44w.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">SQL转换配置</figcaption></figure><p id="81d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Source details部分，提供GCS文件夹的位置，该文件夹包含需要转换为BigQuery SQL的所有Teradata兼容的SQL脚本。</p><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es ns"><img src="../Images/4f170744e4116796e594b96e76d5710e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NPtIQiplsSvj9-mzp4lsRQ.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">SQL转换的来源详细资料</figcaption></figure><p id="8316" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，在“目标详细信息”部分，提供输出脚本的目标路径。</p><p id="20e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在可选设置中，</p><ul class=""><li id="1ee9" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">您可以提供默认的数据库名称。当源查询没有指定名称时，它会选择这个名称。</li><li id="9489" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">您还可以通过json文件提供源-目的地名称映射</li><li id="e7d7" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">或者，通过手动输入，您可以提供名称映射对</li></ul><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es nt"><img src="../Images/06d4faf9e5fcc4cfe8de34de6683ebcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_3cg7FqdnmgJr8BclR2ywQ.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">可选设置</figcaption></figure><p id="6e43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击<code class="du ml mm mn lw b">Create</code>后，将同时创建并触发一个翻译作业。您可以通过单击作业名称来查看进度和翻译详细信息。</p><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es nu"><img src="../Images/e9b7a1571081b254370c45df50b1c07c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EZ73gEPzRjMpXCvH71UWrg.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">SQL转换详细资料页</figcaption></figure><p id="a9ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦作业完成，您可以检查目标详细信息部分中提供的目标GCS路径。在输出文件夹中，如果作业对所有文件成功运行，您将找到所有BigQuery兼容的SQL脚本。</p><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es nv"><img src="../Images/0d9a9f7d5b737cc8ae73f530222d55bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NOI_3Z8dQkgEd7PjHOfhsw.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">输出桶内容</figcaption></figure><p id="3f18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">批处理SQL转换器将以下文件输出到指定的目标:</p><ul class=""><li id="351b" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">翻译后的文件。</li><li id="011f" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">CSV格式的翻译摘要报告。</li><li id="eb75" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">JSON格式的消费输出名称映射。</li></ul><h2 id="e5c5" class="ld kb hi bd kc le lf lg kg lh li lj kk iq lk ll ko iu lm ln ks iy lo lp kw lq bi translated">2.交互式SQL翻译</h2><p id="843e" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">在谷歌云控制台中，</p><ul class=""><li id="dda2" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc mk js jt ju bi translated">转到BigQuery页面</li><li id="91e2" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">转到<code class="du ml mm mn lw b">SQL Workspace</code></li><li id="473f" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">在查询编辑器中，点击<code class="du ml mm mn lw b">MORE</code>并选择<code class="du ml mm mn lw b">Enable SQL Translation</code></li><li id="92fb" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">窗户将会一分为二。在左侧编辑器窗口中，点击<code class="du ml mm mn lw b">Translating from</code>，选择源数据仓库<code class="du ml mm mn lw b">Teradata</code></li><li id="acba" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">将Teradata SQL查询粘贴到编辑器中。单击<code class="du ml mm mn lw b">Translate</code>,这将为您提供等效的BigQuery标准SQL查询。</li></ul><figure class="lr ls lt lu fd mp er es paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="er es nw"><img src="../Images/2bf832cb7673d41d6f997f30258e2f10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*18py-090mQGcpf04lvWFpw.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">即席查询翻译</figcaption></figure><h1 id="bdee" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">进一步的步骤</h1><ul class=""><li id="fbaf" class="jm jn hi ih b ii ky im kz iq mh iu mi iy mj jc mk js jt ju bi translated">迁移业务应用程序</li><li id="9c72" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">迁移数据管道</li><li id="aa18" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">优化性能</li><li id="ab42" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc mk js jt ju bi translated">验证和确认</li></ul></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><blockquote class="nx ny nz"><p id="67f2" class="if ig nb ih b ii ij ik il im in io ip oa ir is it ob iv iw ix oc iz ja jb jc hb bi translated">如果你喜欢读这篇文章或者觉得它有用，请留下一些掌声和评论。我很乐意听到你的反馈和鼓励来写更多关于数据工程的东西。</p><p id="d9bb" class="if ig nb ih b ii ij ik il im in io ip oa ir is it ob iv iw ix oc iz ja jb jc hb bi translated"><em class="hi">请随时在</em> <a class="ae mf" href="https://www.linkedin.com/in/darshanbarapatre" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> LinkedIn </em> </a>上与我联系</p></blockquote></div></div>    
</body>
</html>