<html>
<head>
<title>The fastest way to learn SQL with Bitcoin data on a live database from Google — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从谷歌实时数据库中用比特币数据学习SQL的最快方法——第2部分</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/the-fastest-way-to-learn-sql-with-bitcoin-data-on-a-live-database-from-google-part-2-c00ff1067343?source=collection_archive---------0-----------------------#2021-02-17">https://medium.com/google-cloud/the-fastest-way-to-learn-sql-with-bitcoin-data-on-a-live-database-from-google-part-2-c00ff1067343?source=collection_archive---------0-----------------------#2021-02-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="667a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<a class="ae jd" href="https://rifkiamil.medium.com/the-fastest-way-to-learn-sql-with-bitcoin-data-on-a-live-database-from-google-part-1-c10480041f0a" rel="noopener">第1部分</a>中，我们在真实的数据库上运行了两个不同的SQL查询，并体验了处理大量数据的现实。</p><h1 id="9bbc" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">我将在第2部分中介绍的内容:</h1><ul class=""><li id="4c45" class="kc kd hi ih b ii ke im kf iq kg iu kh iy ki jc kj kk kl km bi translated">使用电子表格类比的数据库术语</li><li id="e3fa" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">编写我们的第一个SQL查询来获取比特币数据。</li><li id="b3eb" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">理解SQL中的SELECT、FROM和WHERE子句</li></ul><h1 id="e358" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">使用电子表格类比的数据库术语</h1><p id="f8e0" class="pw-post-body-paragraph if ig hi ih b ii ke ik il im kf io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">你会在里面找到一张带有比特币数据的<a class="ae jd" href="https://docs.google.com/spreadsheets/d/1-n4HIc6ECpmHkOqOj96WcdvzeM1jnHLm0ZS-qu_xMDs/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank">谷歌表单(就像一个Excel电子表格)。我创建了这个电子表格来帮助进行类比。</a></p><blockquote class="kv kw kx"><p id="ec43" class="if ig ky ih b ii ij ik il im in io ip kz ir is it la iv iw ix lb iz ja jb jc hb bi translated">类比是将信息或意义从一个特定的主题转移到另一个主题的认知过程。</p></blockquote><p id="a387" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我假设有些人了解电子表格是什么样子的，并且对使用微软Excel或谷歌工作表(使用电子表格的两种最流行的方式)有一些了解</p><p id="e99b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">比特币电子表格</strong></p><p id="4f74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我用四个数字标记了谷歌表单图像，并列出了我们在电子表格中用来描述每个部分的常用术语。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lc"><img src="../Images/3cc491be3464ab9ecbcdb5f337c0ebbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/format:webp/1*yuqOgIjzgWmwKd9Iiy2FLg.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">包含常用电子表格术语的比特币电子表格的四个部分</figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lo"><img src="../Images/32ad0f3a997eb3daca0252de4f4575cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mRoh_YXHV_S3MlwbycIO-w.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">电子表格-<a class="ae jd" href="https://docs.google.com/spreadsheets/d/1-n4HIc6ECpmHkOqOj96WcdvzeM1jnHLm0ZS-qu_xMDs/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank">big query-public-data:crypto _bit币</a></figcaption></figure><p id="57cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面，我创建了一个表格，使用电子表格中的四个红色框来概述等效的SQL术语。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lt"><img src="../Images/f999946004c428675118fca1a37baebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*sCM4vi0TlueGjIRShpXQ_Q.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">电子表格术语和用于SQL的等效术语</figcaption></figure><p id="3062" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">以太网谷歌版</strong></p><p id="4c9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您在电脑上创建一个新的电子表格文件，或者在Google Drive上创建一个新的Google Sheet，这将会是<strong class="ih hj">类似于创建一个新的数据库</strong>，然后您会有两个数据库，big query-public-data:crypto _bit币和big query-public-data:crypto _ ether eum。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lu"><img src="../Images/1907f2e25ede8d8915d7efdb89742f75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9TJxO1CO2FCoZgT2sfr3Mg.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">电子表格-big query-public-data:crypto _ ether eum</figcaption></figure><p id="44b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">比较以太网/比特币</strong></p><p id="cc77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下表汇总了。</p><ul class=""><li id="f306" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated">以太网/比特币电子表格的四个部分</li><li id="2bb4" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">电子表格术语</li><li id="8fb4" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">等效的SQL术语</li></ul><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es ly"><img src="../Images/26731d014d70fa5b4949903e07902f79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M0t2m-eoPwk1pmCExCLOQA.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated"><strong class="bd jg">比较以太网/比特币数据库。</strong></figcaption></figure><ul class=""><li id="e4b6" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated">您可以看到，我们在比特币和以太网数据库中的表格名称非常不同。由于区块链技术的差异，以太网数据库比比特币数据库有更多的表格。</li><li id="2432" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">您也可以在交易表中看到比特币和以太网数据库之间的列差异。</li></ul><p id="0465" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们刚才所做工作的总结！</p><ul class=""><li id="6951" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated">涵盖了电子表格中使用的术语。</li><li id="d0f6" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">我们学习了在使用SQL时使用的等价术语，例如，如果您使用一个新表，它就相当于在电子表格中使用一个新表。</li><li id="7862" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">我们比较了比特币和以太坊的区别。</li></ul><h1 id="7748" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">编写我们的第一个SQL查询来获取比特币数据</h1><p id="10f3" class="pw-post-body-paragraph if ig hi ih b ii ke ik il im kf io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我们将使用名为big query-public-data:crypto _ bitcoin的Google工作表作为指南，帮助我们编写第一个SQL查询</p><p id="cf22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1。</strong>打开名为<a class="ae jd" href="https://docs.google.com/spreadsheets/d/1-n4HIc6ECpmHkOqOj96WcdvzeM1jnHLm0ZS-qu_xMDs/edit#gid=604405486" rel="noopener ugc nofollow" target="_blank">big query-public-data:crypto _ bit coin</a>的谷歌表单</p><p id="ccc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。</strong>转到名为交易的表格</p><p id="8ebd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3。</strong>进入<a class="ae jd" href="https://console.cloud.google.com/bigquery" rel="noopener ugc nofollow" target="_blank">https://console.cloud.google.com/bigquery</a>打开Google Bigquery</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lz"><img src="../Images/6e3faf3b5fc84b55d6ffdc5253f36a5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mhnC9QeoVDFuU11vPrUFPg.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">您可能仍然会看到从第1部分运行的最后一个查询。</figcaption></figure><p id="9db3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4。</strong>打开新的查询</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es ma"><img src="../Images/05fe0b4799678d60e2091d85268e7fc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mbrj5DeQuzkVx7gPX-361g.png"/></div></div></figure><p id="1729" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 5。</strong>我们现在将从数据库big query-public-data:crypto _ bit coin中获取三列数据block_timestamp、block_timestamp_month和output_value</p><blockquote class="kv kw kx"><p id="4864" class="if ig ky ih b ii ij ik il im in io ip kz ir is it la iv iw ix lb iz ja jb jc hb bi translated">我将电子表格窗口放在了BigQuery查询窗口的顶部，以便于引用。</p></blockquote><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lu"><img src="../Images/1282dba0e897f2870bb4655294a8ad54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9tj1GCJ3ksXgFbhEPA3wiA.png"/></div></div></figure><p id="3e2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在BigQuery中写<code class="du mb mc md me b">SELECT</code>，做一个新的行然后写<code class="du mb mc md me b">FROM</code>，这是大多数人从空白屏幕开始写SQL的一个非常常见的方式。</p><pre class="ld le lf lg fd mf me mg mh aw mi bi"><span id="1104" class="mj jf hi me b fi mk ml l mm mn">SELECT<br/>FROM</span></pre><p id="3fc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您愿意，可以将SQL复制并粘贴到BigQuery中。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es mo"><img src="../Images/b17508cd6da9c7c6c091bfcde51527ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WpxsfNw5pR_5uL0UXQIHog.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">现在已经在BigQuery中有了SELECT FROM。您可以在第2行看到一个红点和一个语法错误。现在还好，因为我们还没有完成SQL查询的编写。</figcaption></figure><p id="8e9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在将从电子表格中写出以下姓名。</p><ol class=""><li id="5a86" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc mp kk kl km bi translated">数据库名称-big query-public-data . crypto _ bit coin</li><li id="750d" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc mp kk kl km bi translated">交易记录表的名称</li><li id="28ae" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc mp kk kl km bi translated">列名——块时间戳、块时间戳、月、输出值(每列用两个逗号分隔)</li></ol><p id="42b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">SQL将如下所示</p><pre class="ld le lf lg fd mf me mg mh aw mi bi"><span id="8cbb" class="mj jf hi me b fi mk ml l mm mn">SELECT block_timestamp, block_timestamp_month, output_value<br/>FROM `bigquery-public-data.crypto_bitcoin.transactions`</span></pre><p id="9af5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以将SQL复制并粘贴到BigQuery中</p><blockquote class="kv kw kx"><p id="4497" class="if ig ky ih b ii ij ik il im in io ip kz ir is it la iv iw ix lb iz ja jb jc hb bi translated">有些时候可能很难看到，但是我们使用了反勾<strong class="ih hj"> </strong> <code class="du mb mc md me b"><strong class="ih hj">`</strong></code> <strong class="ih hj"> </strong>和<code class="du mb mc md me b">‘</code>单引号。随意复制粘贴帖子里的人物。</p></blockquote><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lz"><img src="../Images/6612bfe9432596d3ec76b837616955fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7K3V_KEytgNImb7EqOzOaA.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">一切都应该是绿色的，如果我们运行查询，它将处理每月免费的1000 GiB中的18.4 GIB。</figcaption></figure><p id="98e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 6。</strong>我们现在要运行SQL查询</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lz"><img src="../Images/d228c528190e520bfe795b0805ba19c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dM-JbrIl-6J7zxYTR40rBA.png"/></div></div></figure><p id="6a20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以看到SQL查询给出了以下结果</p><ul class=""><li id="75f2" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated">三列</li><li id="1c8d" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">616471961行</li></ul><p id="e166" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">616，471，961是很多行数据。通常，使用SQL的人不希望看到那么多未经过滤的数据。</p><p id="c43d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 7。</strong>过滤SQL查询中的数据</p><p id="a1c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Google工作表中，我们看到<strong class="ih hj"> block_timestamp_month </strong>包含2013年12月1日的数据，格式为2013–12–01(YYYY-MM-DD)。我们将通过使用一个<code class="du mb mc md me b">WHERE</code>子句在SQL中进行过滤</p><pre class="ld le lf lg fd mf me mg mh aw mi bi"><span id="88d0" class="mj jf hi me b fi mk ml l mm mn">SELECT block_timestamp, block_timestamp_month, output_value<br/>FROM `bigquery-public-data.crypto_bitcoin.transactions`<br/>WHERE</span></pre><p id="4937" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在把列名<strong class="ih hj"> block_timestamp_month </strong>放在要过滤的<code class="du mb mc md me b">WHERE</code>之后</p><pre class="ld le lf lg fd mf me mg mh aw mi bi"><span id="5a16" class="mj jf hi me b fi mk ml l mm mn">SELECT block_timestamp, block_timestamp_month, output_value<br/>FROM `bigquery-public-data.crypto_bitcoin.transactions`<br/>WHERE block_timestamp_month</span></pre><p id="46d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们需要输入2013年12月1日要过滤的月份的SQL</p><pre class="ld le lf lg fd mf me mg mh aw mi bi"><span id="12fe" class="mj jf hi me b fi mk ml l mm mn">SELECT block_timestamp, block_timestamp_month, output_value<br/>FROM `bigquery-public-data.crypto_bitcoin.transactions`<br/>WHERE block_timestamp_month = '2013-12-01'</span></pre><p id="a229" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以将SQL复制并粘贴到BigQuery中。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lz"><img src="../Images/8c83bf8032e1075a36d9ce4b79cba154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zw9VCIX5KzILe7jiIcthDA.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">一切都应该是绿色的，如果我们运行查询，它将处理63.2 MiB。</figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es mq"><img src="../Images/cc7ad4d37fe57e6c869f3e60e0f1d780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eUK4IoT_z1NmHxYxVEEVOQ.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">通过添加WHERE on block_timestamp_month，您每个月可以自由处理1000 GiB的数据，从而将数据量从18.4 GIB降至0.06 GiB。</figcaption></figure><p id="4c08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在MiB、GiB和TiB之间切换可能会令人困惑。有时使用谷歌搜索会有所帮助。</p><p id="bcaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8。我们现在将使用WHERE运行SQL查询</p><p id="3216" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行以下SQL查询</p><pre class="ld le lf lg fd mf me mg mh aw mi bi"><span id="1bbc" class="mj jf hi me b fi mk ml l mm mn">SELECT block_timestamp, block_timestamp_month, output_value<br/>FROM `bigquery-public-data.crypto_bitcoin.transactions`<br/>WHERE block_timestamp_month = '2013-12-01'</span></pre><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lz"><img src="../Images/7cbdba67470049c47cd9ae81db346489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AzY7sEvm6EKJQV5JkkPlJw.png"/></div></div></figure><p id="f225" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过添加<code class="du mb mc md me b">WHERE</code>子句，我们可以在SQL查询的结果中看到以下变化</p><ul class=""><li id="ae05" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated">正在处理的数据量从18.4千兆字节降至63.2兆字节</li><li id="f915" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">运行SQL查询的时间从16.5秒减少到6.9秒</li><li id="af1c" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">从616，471，961返回到1，935，103的行数</li><li id="bf36" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">block_timestamp_month的每一行的值是2013–12–01</li></ul><p id="86d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9。关于比特币我们了解到了什么</p><ul class=""><li id="85f4" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated">比特币总共有616，471，961笔交易</li></ul><figure class="ld le lf lg fd lh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><ul class=""><li id="59ce" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated">2013年12月，比特币有1935103笔交易。</li></ul><figure class="ld le lf lg fd lh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><h1 id="5c40" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">理解SQL中的SELECT、FROM和WHERE子句</h1><p id="c6dc" class="pw-post-body-paragraph if ig hi ih b ii ke ik il im kf io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">让我们对SQL语言有更多的了解，但更深入地研究一下<code class="du mb mc md me b">SELECT</code>、<code class="du mb mc md me b">FROM</code>和<code class="du mb mc md me b">WHERE</code>子句。</p><blockquote class="kv kw kx"><p id="a9b0" class="if ig ky ih b ii ij ik il im in io ip kz ir is it la iv iw ix lb iz ja jb jc hb bi translated">一个<strong class="ih hj">子句</strong>只是一个SQL语句的逻辑块。</p></blockquote><p id="1d5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保从句的顺序正确是很重要的。</p><pre class="ld le lf lg fd mf me mg mh aw mi bi"><span id="c082" class="mj jf hi me b fi mk ml l mm mn">SELECT<br/>FROM<br/>WHERE</span></pre><p id="e808" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我通常在每个新查询的开头输入SELECT FROM。</p><p id="0eae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">来自</strong></p><p id="0aaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您开始编写SQL查询时，考虑数据库和表是最好的起点。这可能感觉有点违反直觉，因为<code class="du mb mc md me b">SELECT</code>子句必须总是写在<code class="du mb mc md me b">FROM</code>子句之上。</p><p id="d1d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">子句是我们写下将要使用的表和/或数据库的名称的地方。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mt"><img src="../Images/5bb6f0a904aca15661f306e1ea39aec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:534/format:webp/1*MgOJQmq4lXux5E6x0Ci1uQ.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">在FROM子句中，数据库和表之间总是有一个点。带反斜杠<code class="du mb mc md me b"><em class="mu">` ` on both sides.</em></code></figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mv"><img src="../Images/16515f4741dce8eadface30d821fc4a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*j4DKf_YAoXjxnouXpVyPGQ.png"/></div></figure><p id="acab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于空格、句号和反勾号的规则与<code class="du mb mc md me b">FROM</code>子句</p><ul class=""><li id="fc11" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated"><code class="du mb mc md me b">FROM</code>总是在<code class="du mb mc md me b">SELECT</code>之后</li><li id="a522" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated"><code class="du mb mc md me b">FROM</code>后面总是有一个空格</li><li id="881d" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">在键入数据库名称之前，你有一个反勾<strong class="ih hj"> </strong> <code class="du mb mc md me b"><strong class="ih hj">`</strong></code></li><li id="6823" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">键入数据库的名称后，你有一个句号<code class="du mb mc md me b"><strong class="ih hj">.</strong></code></li><li id="d901" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">在键入表格的名称后，你有另一个勾号<strong class="ih hj"> </strong> <code class="du mb mc md me b"><strong class="ih hj">`</strong></code></li><li id="32bc" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">当使用数据库和表格名称时，我们使用反勾<strong class="ih hj">，请</strong>不要与<strong class="ih hj"> </strong>撇号或单引号混淆</li></ul><p id="b321" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">选择</strong></p><p id="bc3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du mb mc md me b">SELECT</code>是我们写下将要使用的列名的地方。我们也能够用SQL写一些类似于电子表格公式的东西。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mw"><img src="../Images/84f6a1de283d0ec7842c5b1fddbf7600.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*mM8XCXM6hZhanQW-bB9UuQ.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">SELECT和FROM的格式</figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mx"><img src="../Images/2d7e06d12954bcfc688d6bcfdcd9db44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*3QfUCCWByEay8Uy3uMOK2w.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">只有一个列名的SELECT和FROM格式！没有逗号</figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es my"><img src="../Images/622c691b10137b8abe62201826d6802f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*EG8_rXa5xHzMRFHiq95pzg.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">只有两个列名的SELECT和FROM格式！有1个逗号</figcaption></figure><p id="03aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于空格、句号和反勾号的规则与<code class="du mb mc md me b">SELECT</code>条款</p><ul class=""><li id="23b6" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated"><code class="du mb mc md me b">SELECT</code>后面总是有一个空格</li><li id="dc01" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">如果有不止一列，用逗号<code class="du mb mc md me b">,</code>隔开</li><li id="095e" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated"><code class="du mb mc md me b">FROM</code>子句前的最后一列名没有逗号<code class="du mb mc md me b">,</code></li></ul><p id="ac4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">哪里</strong></p><p id="058e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">子句是我们如何告诉数据库我们希望如何过滤我们的数据。<code class="du mb mc md me b">WHERE </code>子句应该只影响符合指定标准的行。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mz"><img src="../Images/f5fb832b8400f134c62120c06fc85585.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*KsTlU3PFsX9O9gwk8jK55w.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">SELECT、FROM和WHERE的顺序</figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es na"><img src="../Images/4c0ebc280dcaad59780f6ce5c0b1d82b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*hNicucEbOZMYU06NTTkpZA.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">该WHERE子句的标准是我们只显示2013–12–01的行</figcaption></figure><p id="33fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与<code class="du mb mc md me b">WHERE</code>子句有关的空格、句号和反勾号规则</p><ul class=""><li id="9b4e" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated"><code class="du mb mc md me b">WHERE</code>后面总是有一个空格</li><li id="40fd" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated"><code class="du mb mc md me b">WHERE</code>总是在<code class="du mb mc md me b">FROM</code>之后</li><li id="dd31" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">该值的两边大部分时间都有一个单引号<code class="du mb mc md me b">'</code> <code class="du mb mc md me b">'</code></li><li id="3d0d" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated"><a class="ae jd" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/operators" rel="noopener ugc nofollow" target="_blank">操作员</a>可以是<code class="du mb mc md me b">=</code>、<code class="du mb mc md me b">&gt;</code>、<code class="du mb mc md me b">&lt;</code>、<code class="du mb mc md me b">&gt;=</code>和<code class="du mb mc md me b">=&lt;</code></li></ul><figure class="ld le lf lg fd lh"><div class="bz dy l di"><div class="mr ms l"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">SQL查询示例— <a class="ae jd" href="https://console.cloud.google.com/bigquery?sq=819168234572:23a25ba09bb341f8a091a7b7613c4cab" rel="noopener ugc nofollow" target="_blank">在Google BigQuery </a>中打开SQL查询</figcaption></figure><ul class=""><li id="83f3" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated">这个示例SQL查询在<code class="du mb mc md me b">WHERE</code>子句中有三个标准</li><li id="0c12" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">使用<code class="du mb mc md me b">&gt;</code>操作者要求超过1个比特币的交易</li><li id="0a85" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">1比特币是10000000，因为它目前有八位小数</li><li id="88b8" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">列名<strong class="ih hj"> hash </strong>需要有<strong class="ih hj">反勾</strong> <code class="du mb mc md me b"><strong class="ih hj">`</strong></code> <strong class="ih hj"> </strong>，因为hash是SQL 中的<a class="ae jd" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/lexical#reserved_keywords" rel="noopener ugc nofollow" target="_blank">保留字</a></li><li id="d51f" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">我使用制表符来布局这个SQL查询的文本，与以前有所不同，这并没有改变它的运行方式。它可以都在一行中，但这将使它更难阅读。</li></ul><p id="6616" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们刚刚做的总结！</p><ul class=""><li id="4de1" class="kc kd hi ih b ii ij im in iq lv iu lw iy lx jc kj kk kl km bi translated">条款<code class="du mb mc md me b">SELECT</code>、<code class="du mb mc md me b">FROM</code>和<code class="du mb mc md me b">WHERE</code>总是按照这个顺序</li><li id="74be" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">当您刚接触SQL时，在做任何事情之前，先选择要使用的表和数据库</li><li id="0ee9" class="kc kd hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">使用<code class="du mb mc md me b">WHERE</code>的<code class="du mb mc md me b">=</code>和<code class="du mb mc md me b">&gt;</code>操作符来查找比特币交易</li></ul><h1 id="fdbd" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">然后</h1><p id="b2e0" class="pw-post-body-paragraph if ig hi ih b ii ke ik il im kf io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">现在，我们复习了SQL中使用的术语(数据库名称、表、列和行)，并通过学习<code class="du mb mc md me b">SELECT</code>、<code class="du mb mc md me b">FROM</code>和<code class="du mb mc md me b">WHERE</code>子句来查看构造SQL查询。</p><p id="c852" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一篇文章将介绍如何在Google BigQuery上探索更多的公共数据库，并使用这种能力探索其他表来编写下一组SQL查询。</p><h1 id="c899" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">问题？</h1><p id="08fe" class="pw-post-body-paragraph if ig hi ih b ii ke ik il im kf io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">如果你对这篇博文有任何疑问，欢迎留言或给我发<a class="ae jd" href="https://twitter.com/rifkiamil" rel="noopener ugc nofollow" target="_blank"> Tweet @rifkiamil </a></p></div></div>    
</body>
</html>