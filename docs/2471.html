<html>
<head>
<title>Everything you should know about VPC Peering in GCP!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该知道的关于VPC在GCP窥视的一切！</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/everything-you-should-know-about-vpc-peering-in-gcp-9d7ae5dff81d?source=collection_archive---------0-----------------------#2022-11-02">https://medium.com/google-cloud/everything-you-should-know-about-vpc-peering-in-gcp-9d7ae5dff81d?source=collection_archive---------0-----------------------#2022-11-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="82a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你与任何云提供商合作过，你可能会经常听说<em class="jd"> VPC对等</em>这个术语，你一定想知道，VPC对等到底是什么！<strong class="ih hj">🤷‍♂️ </strong></p><p id="61f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谷歌云VPC网络对等允许两个VPC网络之间的内部IP地址连接。这些VPC网络可能来自同一项目或组织，也可能来自不同的项目或组织。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/98539e1b00e15b2a900e45dac10ae604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I_SeVoJVVV2_ld5-HIaw-w.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">什么是VPC对等</figcaption></figure><blockquote class="ju jv jw"><p id="3c51" class="if ig jd ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">流量留在谷歌主干网内，不通过互联网传输。</p></blockquote></div><div class="ab cl ka kb gp kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hb hc hd he hf"><p id="5464" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">与使用外部IP地址或VPN连接网络相比，VPC网络对等技术有几个优势:</strong></p><ul class=""><li id="e552" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc km kn ko kp bi translated">使用内部IP地址的连接比使用外部IP地址的连接延迟更低，因为对等连接之间没有跳或设备。</li><li id="4cca" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">服务不需要向公共互联网公开，也不需要处理相关的风险。</li><li id="e822" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">通过使用内部IPs，您可以节省外出通信成本。因此，它比外部IP连接更便宜。</li></ul><p id="bc76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">🤷‍♂️如何在两个VPC之间创建VPC对等:</strong></p><p id="5565" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设一个组织需要在project-DR中的网络a和project-prod中的网络b之间建立VPC网络对等。为了成功建立VPC网络对等，网络a和网络b的管理员必须分别配置对等关联。</p><p id="cd19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">先决条件设置:</strong></p><ul class=""><li id="5ea3" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc km kn ko kp bi translated">VPC A有一个CIDR范围为<strong class="ih hj"> 10.0.0.0/16 </strong>的子网</li><li id="0160" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">VPC B也有一个CIDR范围为<strong class="ih hj"> 10.8.0.0/16 </strong>的子网</li><li id="c3a4" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">每个子网都有一个Google Compute实例，您可能希望通过它们的私有IP地址来连接它。</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kv"><img src="../Images/580d9b9ca43476f07e7cc67b1776d65d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RWHuhaFZ8N_xOEW1qoJZLQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">VPC对等的先决条件</figcaption></figure></div><div class="ab cl ka kb gp kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hb hc hd he hf"><p id="2e21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">按照以下步骤创建对等连接:</strong></p><ol class=""><li id="406d" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc kw kn ko kp bi translated">从VPC A，您创建一个连接，并输入您想与之对等的项目和网络，即项目生产中的VPC-B。</li></ol><p id="17cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.您单击(启用)导入和导出自定义路由并创建对等连接。此连接将从灾难恢复→生产创建。</p><blockquote class="ju jv jw"><p id="afa3" class="if ig jd ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">此时，对等状态保持不活动，因为在项目b的网络b中没有匹配的配置。</p></blockquote><p id="c0ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3)project-prod中的网络管理员或具有适当IAM权限的用户必须从prod →dr配置匹配的配置，以便对等在两端都处于活动状态。</p><p id="9bd7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.您按照VPC网络B中的相同步骤创建从生产→灾难恢复的连接</p><p id="5a23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.一旦对等进入活动状态，子网路由和自定义路由就会交换，两个网络中的虚拟机就可以通过各自的私有IP相互通信。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kx"><img src="../Images/94da738dd2cd88b28df99a27c22e58ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ce_kBfmo-FHgNdya4vSUA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">GCP的VPC对等网络设置</figcaption></figure></div><div class="ab cl ka kb gp kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hb hc hd he hf"><p id="08b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">传递性对等不是GCP中的❌supported，我们来看看到底什么是传递性对等。</strong></p><p id="7ae0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们有三个VPC网络，VPC A，VPC B和VPC C</p><p id="c548" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果VPC A与VPC B对等，VPC B与VPC C对等，这并不意味着VPC A自动与VPC C对等。这称为可传递对等，但不受支持。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ky"><img src="../Images/a750c9e7831f6f002295b80a8a894fb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vlItESWVLg54wsmqMygDRA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">VPC的传递对等</figcaption></figure><p id="2e18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要记住的几个要点🎯对于GCP的VPC对等:</p><ul class=""><li id="92c2" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc km kn ko kp bi translated">不允许子网CIDR范围重叠。</li><li id="86cb" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">不支持可传递对等。</li><li id="9bb9" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">一个VPC网络最多只能有25个<strong class="ih hj"> </strong>连接。</li><li id="449e" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">要删除VPC网络，您必须首先删除网络中的所有对等配置。</li><li id="7b74" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">要在GCP创建/删除VPC对等，您至少应该拥有roles/editor或roles/compute.networkAdmin IAM角色。</li><li id="203b" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">VPC网络对等与计算引擎、GKE和应用引擎灵活环境一起工作。</li></ul><p id="6238" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">观看下面的视频了解更多关于VPC窥视的细节</strong></p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kz la l"/></div></figure></div><div class="ab cl ka kb gp kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hb hc hd he hf"><p id="61a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">喜欢这个视频吗？随意鼓掌跟我来！</p><p id="b555" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，您可以订阅我的YouTube频道，了解令人惊叹的DevOps和云内容！</p><p id="6f0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参考资料:</p><div class="lb lc ez fb ld le"><a href="https://cloud.google.com/vpc/docs/vpc-peering" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab dw"><div class="lg ab lh cl cj li"><h2 class="bd hj fi z dy lj ea eb lk ed ef hh bi translated">VPC网络对等|谷歌云</h2><div class="ll l"><h3 class="bd b fi z dy lj ea eb lk ed ef dx translated">谷歌云VPC网络对等允许跨两个虚拟专用云(VPC)的内部IP地址连接…</h3></div><div class="lm l"><p class="bd b fp z dy lj ea eb lk ed ef dx translated">cloud.google.com</p></div></div><div class="ln l"><div class="lo l lp lq lr ln ls jo le"/></div></div></a></div></div></div>    
</body>
</html>