<html>
<head>
<title>3 Great Options for Persistent Storage with Cloud Run</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云运行持久存储的3大选择</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/3-great-options-for-persistent-storage-with-cloud-run-f1581ee05164?source=collection_archive---------0-----------------------#2020-01-13">https://medium.com/google-cloud/3-great-options-for-persistent-storage-with-cloud-run-f1581ee05164?source=collection_archive---------0-----------------------#2020-01-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8151dc828e790deab157031262328a36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DXgJRJt9Q0Moo2t4RgBrEg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">使用云存储、云Firestore和云SQL运行云</figcaption></figure><p id="d7a5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Cloud Run是一个托管计算平台，可以自动扩展您的无状态容器。云运行是无服务器的:它将所有基础设施管理抽象化，因此您可以专注于最重要的事情—构建优秀的应用程序。</p><p id="cd82" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然而，大多数应用程序都是<strong class="iw hj">有状态的</strong>。作为开发人员，如何永久存储图像、数据库记录和其他数据？</p><p id="a717" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本文中，我们将讨论3种使用Cloud Run在Google云平台上存储数据的示例方法。</p><h1 id="0797" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">谷歌云存储</h1><p id="0a6a" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">根据应用程序的需求，在Google Cloud上存储数据有多种方式。在这个假想的应用程序中，让我们创建一个电子商务鞋店。以下是我们将用于存储不同类型数据的三种存储选项:</p><h2 id="123c" class="kv jt hi bd ju kw kx ky jy kz la lb kc jf lc ld kg jj le lf kk jn lg lh ko li bi translated">云存储</h2><p id="ccc9" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">对于存储<strong class="iw hj">文件/对象</strong>，如图像和视频，或存档备份，<a class="ae lj" href="https://cloud.google.com/storage/docs" rel="noopener ugc nofollow" target="_blank">谷歌云存储</a>是这类数据的绝佳选择。以下是Node中可用于云运行的示例代码片段:</p><figure class="lk ll lm ln fd ij"><div class="bz dy l di"><div class="lo lp l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">将文件上传到Google云存储</figcaption></figure><h2 id="b9c4" class="kv jt hi bd ju kw kx ky jy kz la lb kc jf lc ld kg jj le lf kk jn lg lh ko li bi translated">云Firestore</h2><p id="f47d" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">对于存储<strong class="iw hj">非结构化</strong>数据，或者创建灵活的NoSQL云数据库，<a class="ae lj" href="https://firebase.google.com/docs/firestore" rel="noopener ugc nofollow" target="_blank"> Cloud Firestore </a>是移动、web和服务器开发的绝佳解决方案。在这个示例中，我们希望为鞋子数据存储灵活的JSON对象:</p><figure class="lk ll lm ln fd ij"><div class="bz dy l di"><div class="lo lp l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">向Firestore添加doc/JSON记录</figcaption></figure><h2 id="b94e" class="kv jt hi bd ju kw kx ky jy kz la lb kc jf lc ld kg jj le lf kk jn lg lh ko li bi translated">云SQL</h2><p id="82b8" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">对于在RDBMS中存储<strong class="iw hj">结构化</strong>数据，比如MySQL、PostgreSQL、SQL Server，<a class="ae lj" href="https://cloud.google.com/sql/" rel="noopener ugc nofollow" target="_blank"> Cloud SQL </a>可以连接到一个很好的接口来存储和查询你的数据。这里创建了一个客户表，我们可以使用熟悉的SQL来创建强大的查询:</p><figure class="lk ll lm ln fd ij"><div class="bz dy l di"><div class="lo lp l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">从云SQL表中读取</figcaption></figure><blockquote class="lq lr ls"><p id="2bb6" class="iu iv lt iw b ix iy iz ja jb jc jd je lu jg jh ji lv jk jl jm lw jo jp jq jr hb bi translated">注意:有关如何连接和一起使用这些服务的完整文档，请参见<a class="ae lj" href="https://cloud.google.com/sql/docs/mysql/connect-run" rel="noopener ugc nofollow" target="_blank"> <em class="hi">从云运行连接到云SQL(完全托管)</em> </a>。</p></blockquote><p id="6321" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是在GCP存储数据的3个存储选项。其他产品包括<a class="ae lj" href="https://cloud.google.com/filestore/" rel="noopener ugc nofollow" target="_blank">云文件存储</a>、【Firebase云存储、<a class="ae lj" href="https://cloud.google.com/products/databases/" rel="noopener ugc nofollow" target="_blank">其他数据库</a>中的<a class="ae lj" href="http://Cloud Memorystore" rel="noopener ugc nofollow" target="_blank">云存储</a>。</p><h1 id="3ba8" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">其他提示</h1><p id="5cb0" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">有时，您的数据存储可能需要更多配置。这里有两个提示:</p><ul class=""><li id="3004" class="lx ly hi iw b ix iy jb jc jf lz jj ma jn mb jr mc md me mf bi translated">Cloud Run的<strong class="iw hj">“Max Instances”</strong>特性可以限制处理运行服务的实例数量。这反过来会限制对存储服务的请求数量。<a class="ae lj" href="https://cloud.google.com/run/docs/configuring/max-instances" rel="noopener ugc nofollow" target="_blank">阅读更多🔗</a>。</li><li id="802b" class="lx ly hi iw b ix mg jb mh jf mi jj mj jn mk jr mc md me mf bi translated"><strong class="iw hj">具有每个队列速率限制的云任务</strong>可以放在云运行服务之前，以平滑快速或不稳定的请求。<a class="ae lj" href="https://cloud.google.com/tasks/" rel="noopener ugc nofollow" target="_blank">阅读更多🔗</a>。</li></ul><h1 id="c3b0" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">参考</h1><p id="666b" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">感谢阅读。如果您想了解更多关于使用GCP存储数据的信息，请点击以下链接:</p><ul class=""><li id="8e81" class="lx ly hi iw b ix iy jb jc jf lz jj ma jn mb jr mc md me mf bi translated">🗃 <a class="ae lj" href="http://cloud.google.com/solutions/data-management" rel="noopener ugc nofollow" target="_blank">解决方案:谷歌云的数据管理产品</a></li><li id="ab97" class="lx ly hi iw b ix mg jb mh jf mi jj mj jn mk jr mc md me mf bi translated">🖼 <a class="ae lj" href="https://cloud.google.com/run/docs/tutorials/image-processing" rel="noopener ugc nofollow" target="_blank">教程:使用云运行和云存储处理图像</a></li></ul></div></div>    
</body>
</html>