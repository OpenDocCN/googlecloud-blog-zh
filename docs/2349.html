<html>
<head>
<title>Seamlessly encrypt traffic from any apps in your Service Mesh to Memorystore (Redis)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无缝加密从服务网格中的任何应用到Memorystore (Redis)的流量</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/seamlessly-encrypt-traffic-from-any-apps-in-your-mesh-to-memorystore-redis-64b71969318d?source=collection_archive---------0-----------------------#2022-09-08">https://medium.com/google-cloud/seamlessly-encrypt-traffic-from-any-apps-in-your-mesh-to-memorystore-redis-64b71969318d?source=collection_archive---------0-----------------------#2022-09-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="19a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">2022年12月16日更新，通过其</em> <a class="ae je" rel="noopener" href="/google-cloud/246119e46d53"> <em class="jd">掌舵图</em> </a> <em class="jd">部署线上精品。</em></p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/b156323f123748756c7e0b12d6863f81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4W-eTpDkjrWr_YLazZamPQ.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">使用Memorystore (Redis)的在线精品示例应用程序架构</figcaption></figure><p id="ae3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Anthos Service Mesh (ASM)是一个托管的Istio实现，可以<a class="ae je" href="https://cloud.google.com/service-mesh/docs/security/anthos-service-mesh-security-best-practices" rel="noopener ugc nofollow" target="_blank">改善您的Kubernetes集群和应用的安全状况</a>。Istio的目标是在没有任何配置的情况下为用户带来尽可能多的价值。除此之外，ASM还简化了控制平面和数据平面的所有管理，以及与监控和日志记录的集成。毫无疑问，您网格中的应用将受益于流量加密、日志记录、追踪等高级功能。而无需更新应用程序的代码。</p><p id="b4a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将看到通过利用Istio/ASM来加密从在线精品示例应用程序到Memorystore (Redis)的流量是多么容易和无缝。为此，借助Istio配置，我们将在<code class="du jv jw jx jy b">cartservice</code>应用上设置TLS发起。</p><blockquote class="jz ka kb"><p id="d033" class="if ig jd ih b ii ij ik il im in io ip kc ir is it kd iv iw ix ke iz ja jb jc hb bi translated">当Istio代理(边车或出口网关)被配置为接受未加密的内部HTTP连接，加密请求，然后将它们转发到使用简单或双向TLS保护的HTTPS服务器时，就会发生TLS发起。这与TLS终止相反，在TLS终止中，入口代理接受传入的TLS连接，解密TLS，并将未加密的请求传递给内部网格服务。</p></blockquote><h1 id="dd03" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">目标</h1><ul class=""><li id="4c99" class="ld le hi ih b ii lf im lg iq lh iu li iy lj jc lk ll lm ln bi translated">创建一个Google Kubernetes引擎(GKE)集群</li><li id="9c9d" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">使用集群内redis数据库部署在线精品示例应用程序</li><li id="4773" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">提供仅允许传输加密的Memorystore (Redis)实例</li><li id="6af8" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">将<code class="du jv jw jx jy b">cartservice</code>应用连接到Memorystore (Redis)实例</li><li id="fec9" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">在此集群上启用托管Anthos服务网格(ASM)</li><li id="af58" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">配置从<code class="du jv jw jx jy b">cartservice</code>应用程序到Memorystore (Redis)实例的TLS发起</li><li id="b23e" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">验证<code class="du jv jw jx jy b">cartservice</code>应用程序是否通过TLS与Memorystore (Redis)实例成功通信</li></ul></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="5b15" class="kf kg hi bd kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky me la lb lc bi translated">设置您的环境</h1><p id="24d0" class="pw-post-body-paragraph if ig hi ih b ii lf ik il im lg io ip iq mf is it iu mg iw ix iy mh ja jb jc hb bi translated">这假设您已经创建了一个Google Cloud项目，我们将在这里提供本教程所需的所有资源。</p><p id="6a56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">初始化本教程中使用的通用变量:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="6677" class="mm kg hi jy b fi mn mo l mp mq">PROJECT_ID=FIXME-WITH-YOUR-EXISTING_PROJECT-ID<br/>REGION=us-east4<br/>ZONE=us-east4-a<br/>PROJECT_NUMBER=$(gcloud projects describe ${PROJECT_ID} --format='get(projectNumber)')</span></pre><p id="c0a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了避免在整个教程中重复命令中的<code class="du jv jw jx jy b">--project</code>，让我们设置当前项目:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="08a7" class="mm kg hi jy b fi mn mo l mp mq">gcloud config set project ${PROJECT_ID}</span></pre><h1 id="bba8" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">启用所需的API</h1><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="b67e" class="mm kg hi jy b fi mn mo l mp mq">gcloud services enable \<br/>    redis.googleapis.com \<br/>    mesh.googleapis.com</span></pre><h1 id="ca34" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">创建GKE集群</h1><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="a9de" class="mm kg hi jy b fi mn mo l mp mq">CLUSTER=redis-tls-tutorial<br/>gcloud container clusters create ${CLUSTER} \<br/>    --zone ${ZONE} \<br/>    --machine-type=e2-standard-4 \<br/>    --num-nodes 4 \<br/>    --workload-pool ${PROJECT_ID}.svc.id.goog \<br/>    --labels mesh_id=proj-${PROJECT_NUMBER} \<br/>    --network default</span></pre></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="2d3e" class="kf kg hi bd kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky me la lb lc bi translated">部署在线精品示例应用程序</h1><p id="c814" class="pw-post-body-paragraph if ig hi ih b ii lf ik il im lg io ip iq mf is it iu mg iw ix iy mh ja jb jc hb bi translated">默认情况下，使用集群内Redis数据库部署在线精品示例应用程序:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="3b61" class="mm kg hi jy b fi mn mo l mp mq">NAMESPACE=onlineboutique<br/>helm upgrade onlineboutique oci://us-docker.pkg.dev/online-boutique-ci/charts/onlineboutique \<br/>    --install \<br/>    --create-namespace \<br/>    -n ${NAMESPACE}</span></pre><p id="59ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所有应用程序成功部署后，您可以点击以下链接导航至在线精品网站:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="65e3" class="mm kg hi jy b fi mn mo l mp mq">echo -n "http://" &amp;&amp; kubectl get svc frontend-external -n ${NAMESPACE} -o json | jq -r '.status.loadBalancer.ingress[0].ip'</span></pre></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="4c26" class="kf kg hi bd kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky me la lb lc bi translated">提供仅允许传输加密的Memorystore (Redis)实例</h1><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="8dcf" class="mm kg hi jy b fi mn mo l mp mq">REDIS_NAME=redis-tls-tutorial<br/>gcloud redis instances create ${REDIS_NAME} \<br/>    --size 1 \<br/>    --region ${REGION} \<br/>    --zone ${ZONE} \<br/>    --redis-version redis_6_x \<br/>    --network default \<br/>    --transit-encryption-mode SERVER_AUTHENTICATION</span></pre><p id="e1c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意事项:</p><ul class=""><li id="d90e" class="ld le hi ih b ii ij im in iq mr iu ms iy mt jc lk ll lm ln bi translated">您可以从位于同一区域的GKE集群连接到Memorystore (Redis)实例，并使用与您的实例相同的网络。</li><li id="6fe2" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">如果未启用VPC本地/IP别名，则无法从GKE集群连接到Memorystore (Redis)实例。</li><li id="25a1" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">传输加密仅在创建Memorystore (Redis)实例时可用。证书授权有效期为10年，<a class="ae je" href="https://cloud.google.com/memorystore/docs/redis/in-transit-encryption#certificate_authority_rotation" rel="noopener ugc nofollow" target="_blank">每5年轮换一次</a>。</li></ul><p id="d5d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">等待Memorystore (Redis)实例成功预配，并获取刚刚预配的Memorystore (Redis)实例的连接信息，我们将在以下部分需要这些信息:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="2b30" class="mm kg hi jy b fi mn mo l mp mq">REDIS_IP=$(gcloud redis instances describe ${REDIS_NAME} \<br/>    --region ${REGION} \<br/>    --format 'get(host)')<br/>REDIS_PORT=$(gcloud redis instances describe ${REDIS_NAME} \<br/>    --region ${REGION} \<br/>    --format 'get(port)')</span></pre><h1 id="1afa" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">将在线精品示例应用程序连接到Memorystore (Redis)实例</h1><p id="6de2" class="pw-post-body-paragraph if ig hi ih b ii lf ik il im lg io ip iq mf is it iu mg iw ix iy mh ja jb jc hb bi translated">通过Helm图表更新在线精品店部署:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="cfa2" class="mm kg hi jy b fi mn mo l mp mq">helm upgrade onlineboutique oci://us-docker.pkg.dev/online-boutique-ci/charts/onlineboutique \<br/>    --install \<br/>    --create-namespace \<br/>    -n <!-- -->${NAMESPACE}<!-- --> \<br/>    --set cartDatabase.inClusterRedis.create=false \<br/>    --set cartDatabase.connectionString=<!-- -->${REDIS_IP}:${REDIS_PORT}</span></pre><p id="f341" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一部署将:</p><ul class=""><li id="6acd" class="ld le hi ih b ii ij im in iq mr iu ms iy mt jc lk ll lm ln bi translated">更新<code class="du jv jw jx jy b">cartservice</code>的环境变量以指向Memorystore (Redis)实例；</li><li id="510c" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">移除不再需要的默认集群内<code class="du jv jw jx jy b">redis</code>数据库。</li></ul><p id="4bf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击以下链接，浏览在线精品店网站:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="049a" class="mm kg hi jy b fi mn mo l mp mq">echo -n "http://" &amp;&amp; kubectl get svc frontend-external -n ${NAMESPACE} -o json | jq -r '.status.loadBalancer.ingress[0].ip'</span></pre><p id="2515" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此时，您应该有一个<code class="du jv jw jx jy b">HTTP Status: 500 Internal Server Error</code>页面。这是意料之中的，因为我们还没有在<code class="du jv jw jx jy b">cartservice</code>和Memorystore (Redis)实例之间建立TLS通信。在接下来的部分中，我们将利用ASM和Istio来完成这一部分并解决问题！</p></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="ad6b" class="kf kg hi bd kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky me la lb lc bi translated">在此集群上安装受管ASM</h1><p id="0440" class="pw-post-body-paragraph if ig hi ih b ii lf ik il im lg io ip iq mf is it iu mg iw ix iy mh ja jb jc hb bi translated">将您的集群注册到一个<a class="ae je" href="https://cloud.google.com/anthos/fleet-management/docs/fleet-concepts" rel="noopener ugc nofollow" target="_blank">舰队</a>:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="7a48" class="mm kg hi jy b fi mn mo l mp mq">gcloud container fleet memberships register ${CLUSTER} \<br/>    --gke-cluster ${ZONE}/${CLUSTER} \<br/>    --enable-workload-identity</span></pre><p id="621d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的<a class="ae je" href="https://cloud.google.com/anthos/fleet-management/docs/fleet-concepts" rel="noopener ugc nofollow" target="_blank">车队中启用ASM</a>:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="3278" class="mm kg hi jy b fi mn mo l mp mq">gcloud container fleet mesh enable</span></pre><p id="f461" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">启用ASM自动控制平面管理，让Google应用ASM的推荐配置:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="6de3" class="mm kg hi jy b fi mn mo l mp mq">gcloud container fleet mesh update \<br/>    <!-- -->--management<!-- --> automatic \<br/>    --memberships ${CLUSTER}</span></pre><h1 id="e87f" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">配置从网格到内存存储(Redis)实例的TLS源</h1><p id="cf37" class="pw-post-body-paragraph if ig hi ih b ii lf ik il im lg io ip iq mf is it iu mg iw ix iy mh ja jb jc hb bi translated">获取Memorystore (Redis)实例的证书颁发机构:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="36bf" class="mm kg hi jy b fi mn mo l mp mq">REDIS_CERT=$(gcloud redis instances describe ${REDIS_NAME} \<br/>    --region ${REGION} \<br/>    --format 'get(serverCaCerts[0].cert)')</span></pre><p id="7813" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过Helm图表更新在线精品店部署:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="c80f" class="mm kg hi jy b fi mn mo l mp mq">helm upgrade onlineboutique oci://us-docker.pkg.dev/online-boutique-ci/charts/onlineboutique \<br/>    --install \<br/>    --create-namespace \<br/>    -n ${NAMESPACE} \<br/>    --set cartDatabase.inClusterRedis.create=false \<br/>    --set cartDatabase.connectionString=${REDIS_IP}:${REDIS_PORT} \<br/>    --set cartDatabase.externalRedisTlsOrigination.enable=true \<br/>    --set cartDatabase.externalRedisTlsOrigination.certificate="${REDIS_CERT}" \<br/>    --set cartDatabase.externalRedisTlsOrigination.endpointAddress=${REDIS_IP} \<br/>    --set cartDatabase.externalRedisTlsOrigination.endpointPort=${REDIS_PORT}</span></pre><p id="1ec8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一部署将:</p><ul class=""><li id="9519" class="ld le hi ih b ii ij im in iq mr iu ms iy mt jc lk ll lm ln bi translated">注释<code class="du jv jw jx jy b">cartservice</code>部署通过其<code class="du jv jw jx jy b">istio-proxy</code>边车挂载<code class="du jv jw jx jy b">redis-cert</code>秘密；</li><li id="0682" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">部署一个<code class="du jv jw jx jy b">ServiceEntry</code>来注册Mesh中的Memorystore (Redis)实例，作为具有私有IP地址和端口的外部端点；</li><li id="5b0d" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">部署一个<code class="du jv jw jx jy b">DestinationRule</code>来配置到这个Memorystore (Redis)实例的传出连接，其中TLS处于<code class="du jv jw jx jy b">SIMPLE</code>模式(而不是<code class="du jv jw jx jy b">MUTUAL</code>)并带有相关的证书颁发机构。</li></ul><p id="db03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给在线精品店<code class="du jv jw jx jy b">Namespace</code>贴上标签，在其应用中注入Istio/ASM sidecar代理:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="3c34" class="mm kg hi jy b fi mn mo l mp mq">kubectl label namespace ${NAMESPACE} istio-injection=enabled</span></pre><p id="e974" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">等待ASM在集群上正确安装。运行以下命令，直到看到值为<code class="du jv jw jx jy b">REVISION_READY</code>的字段<code class="du jv jw jx jy b">servicemesh.controlPlaneManagement.details[].code</code>:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="f17a" class="mm kg hi jy b fi mn mo l mp mq">gcloud container fleet mesh describe</span></pre><p id="4508" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">重启<code class="du jv jw jx jy b">cartservice</code>应用程序，以注入我们之前刚刚部署的Istio/ASM边车代理和配置:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="3528" class="mm kg hi jy b fi mn mo l mp mq">kubectl rollout restart deployment cartservice \<br/>    -n ${NAMESPACE}</span></pre><p id="1552" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">作为旁注，自从</em> <a class="ae je" href="https://github.com/GoogleCloudPlatform/microservices-demo/releases/tag/v0.3.8" rel="noopener ugc nofollow" target="_blank"> <em class="jd">在线精品v0.38.0 </em> </a> <em class="jd">之后，</em> <code class="du jv jw jx jy b"><a class="ae je" href="https://github.com/GoogleCloudPlatform/microservices-demo/pull/838" rel="noopener ugc nofollow" target="_blank"><em class="jd">cartservice</em></a></code> <a class="ae je" href="https://github.com/GoogleCloudPlatform/microservices-demo/pull/838" rel="noopener ugc nofollow" target="_blank"> <em class="jd"> app得到了修复</em> </a> <em class="jd">允许让这个TLS发起正常工作。</em></p><p id="1329" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击以下链接，浏览在线精品店网站:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="bc9e" class="mm kg hi jy b fi mn mo l mp mq">echo -n "http://" &amp;&amp; kubectl get svc frontend-external -n ${NAMESPACE} -o json | jq -r '.status.loadBalancer.ingress[0].ip'</span></pre><p id="fed3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！您现在应该看到在线精品网站再次成功运行，现在只通过TLS连接到Memorystore (Redis)实例。恭喜你。</p></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="b956" class="kf kg hi bd kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky me la lb lc bi translated">清理</h1><p id="7c32" class="pw-post-body-paragraph if ig hi ih b ii lf ik il im lg io ip iq mf is it iu mg iw ix iy mh ja jb jc hb bi translated">为了避免向您的Google Cloud帐户收取费用，您可以删除本教程中使用的资源。</p><p id="cb5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从<a class="ae je" href="https://cloud.google.com/anthos/fleet-management/docs/fleet-concepts" rel="noopener ugc nofollow" target="_blank">舰队中注销GKE集群</a>:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="c57f" class="mm kg hi jy b fi mn mo l mp mq">gcloud container fleet memberships unregister ${CLUSTER} \<br/>    --project=${PROJECT_ID} \<br/>    --gke-cluster=${ZONE}/${CLUSTER}</span></pre><p id="7f87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">删除GKE群集:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="be68" class="mm kg hi jy b fi mn mo l mp mq">gcloud container clusters delete ${CLUSTER} \<br/>    --zone ${ZONE}</span></pre><p id="195e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">删除Memorystore (Redis)实例:</p><pre class="jg jh ji jj fd mi jy mj mk aw ml bi"><span id="df85" class="mm kg hi jy b fi mn mo l mp mq">gcloud redis instances delete ${REDIS_NAME}</span></pre></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="88b7" class="kf kg hi bd kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky me la lb lc bi translated">下一步是什么</h1><ul class=""><li id="0e37" class="ld le hi ih b ii lf im lg iq lh iu li iy lj jc lk ll lm ln bi translated">在YouTube上观看这一集<a class="ae je" href="https://youtu.be/C1y_Ix3ws68" rel="noopener ugc nofollow" target="_blank"> ASM值超过Istio OSS </a>集。</li><li id="0467" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">了解更多关于ASM安全最佳实践的信息。</li><li id="64a3" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">在YouTube上观看这一集<a class="ae je" href="https://youtu.be/D_TBDp9tK9w" rel="noopener ugc nofollow" target="_blank">与GKE和ASM一起构建零信任网络</a></li><li id="ca1d" class="ld le hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">了解有关如何通过ASM和Anthos配置管理来<a class="ae je" href="https://cloud.google.com/service-mesh/docs/strengthen-app-security" rel="noopener ugc nofollow" target="_blank">增强应用安全性的更多信息。</a></li></ul></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><p id="2230" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">原帖</em><a class="ae je" href="https://mathieu-benoit.github.io/" rel="noopener ugc nofollow" target="_blank"><em class="jd">Mathieu-Benoit . github . io</em></a><em class="jd">。</em></p></div></div>    
</body>
</html>