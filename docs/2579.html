<html>
<head>
<title>Binary Authorization | Google Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">二进制授权|谷歌云</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/binary-authorization-google-cloud-8bd96e6a3c4?source=collection_archive---------1-----------------------#2022-12-01">https://medium.com/google-cloud/binary-authorization-google-cloud-8bd96e6a3c4?source=collection_archive---------1-----------------------#2022-12-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="bd8e" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">二进制授权</strong></h1><p id="3ba8" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">二进制授权是Google Cloud提供的一项服务，旨在确保只有授权的构建映像才会部署在GKE或cloudrun上。它有助于验证部署在容器环境中的映像，这些映像是由授权的团队来证明的。它通过确保只部署授权的映像来帮助开发运维团队。它帮助团队加强环境的安全态势，并与GKE和Cloudrun等谷歌云服务进行本机集成。</p><h1 id="3633" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">二进制授权的关键要求</strong></h1><p id="af3a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">软件供应链安全是任何企业安全的关键要求之一，它旨在确保根据内部最佳实践采购、构建、测试和发布软件，以减少攻击面，并拥有安全的简化部署流程</p><p id="e441" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">随着团队转向完全分离的微服务架构，发布周期更短，并包括持续集成(CI)和持续部署(CD)，二进制授权有助于让安全团队证明部署，从而降低部署未经授权的易受攻击软件的风险</p><h1 id="2dd8" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">二进制授权的主要特点</strong></h1><p id="e418" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">政策执行</strong></p><p id="f3c2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">二进制授权集成了容器注册表漏洞扫描和第三方工具。可以在项目、集群级别定义策略。团队可以为不同的环境创建不同的策略集。它还提供了在紧急情况下绕过策略的选项，并且策略提供了在实施前测试更改的试运行选项</p><p id="27ed" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">整合</strong></p><p id="ebf1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">二进制授权可以与安全命令中心集成，为违反策略的情况提供单一窗口视图。将违规记录到审计日志中。与KMS整合为签名图像。还可以与云构建、GKE和云运行相集成以进行部署。它还可以与第三方解决方案集成，如Cloudbees、Palo Alto Networks和Terraform</p><p id="c0b9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">证明</strong></p><p id="54b7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">证明是确保映像已完成前一阶段的过程。可以将二进制授权配置为在允许部署映像之前检查特定证明。不同类型的证明包括:构建验证，其中二进制授权使用证明来检查映像是否由特定的构建系统构建</p><p id="ab2f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">例如，漏洞扫描证明是一个过程，其中二进制授权检查映像是否通过容器分析检查，以及部署是否安全。也可以手动提供证明，例如QA检查特征并手动证明图像</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/01d730b97c08d79895bbc047d4b333c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l3ZlI5QQAomZ8srGIwAUAg.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">二元授权流</figcaption></figure><h1 id="cf7f" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">二进制授权在起作用</strong></h1><p id="0cdc" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">要启用和设置二进制授权，请遵循以下步骤:-</p><ul class=""><li id="cf29" class="kw kx hi jf b jg kb jk kc jo ky js kz jw la ka lb lc ld le bi translated">在项目中启用所需的API</li><li id="68aa" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">创建一个Google Kubernetes引擎(GKE)集群(启用二进制授权)</li><li id="fbd1" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">创建证明者</li><li id="42f7" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">生成用于证明的密钥对</li><li id="5b2d" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">创建或配置自定义策略</li><li id="41c5" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">测试策略</li><li id="fc43" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">创建证明</li></ul><p id="6d26" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 1。启用项目中所需的APIs】</strong></p><p id="ae9b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们需要为这个任务启用二进制授权api以及容器注册中心/工件注册中心和Kubernetes引擎API。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="aee3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 2。创建Google Kubernetes引擎(GKE)集群(启用二进制授权)</strong></p><p id="4bfa" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们将在区域<em class="lm"> us-central1-a </em>中创建一个区域集群<em class="lm">二元认证集群</em></p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/2f677d7ff14828da6d7bae0d86f46fdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UV9DMkv0ncxbmLN4"/></div></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/2f50e1a8d3fbd801f6ebdfed5787b8b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Emqu4l6YsNLraujJ"/></div></div></figure><p id="6b28" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">配置或更新您的kubectl配置</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="1aae" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 3。创建证明人</strong></p><p id="48d7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">证明者创建过程分为两步，首先创建证明者注释，然后创建证明者本身。然后，我们将证明者注释分配给新创建的证明者。证明者注释(也称为容器分析注释)用于存储授权过程中使用的可信元数据。</p><p id="34ed" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> a)创建证明人注释</strong></p><p id="4b79" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">让我们定义证明者名称和节点id。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="29e1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">b)在<em class="lm"> note_payload.json </em>中创建一个描述证明者注释的JSON文件:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="8c71" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">c)通过向容器分析REST API发送HTTP请求来创建注释:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/51c5f43849bb68bf64aa4da7bae62528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SOMNkcnaSHNYzNVQ"/></div></div></figure><p id="1534" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">d)验证是否创建了注释:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/60b6be41a82719d4128512c05a3f9382.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4pIaVNeRVtfpN5EX"/></div></div></figure><p id="0e3e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> e)创建证明人</strong></p><p id="ea1c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在二进制授权中创建证明者</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="807e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> f)验证证明人</strong></p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/a057bb3b84ba0e7a07914ee89cfc723d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VtQjKNeAhDc45IGk"/></div></div></figure><p id="ac2b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们已经创建了证明者，但是要使用证明者，我们需要将一个PKIX密钥对与其相关联。让我们创建一个PKIX密钥对并关联。</p><h2 id="4c39" class="lo ig hi bd ih lp lq lr il ls lt lu ip jo lv lw it js lx ly ix jw lz ma jb mb bi translated">4.生成密钥对</h2><p id="32d0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">二进制授权使用<a class="ae mc" href="https://cloud.google.com/binary-authorization/docs/key-concepts#cryptographic_keys" rel="noopener ugc nofollow" target="_blank">密钥</a>来安全地验证<a class="ae mc" href="https://cloud.google.com/binary-authorization/docs/key-concepts#signers" rel="noopener ugc nofollow" target="_blank">签名者</a>的身份。这确保了只能部署授权的容器映像。密钥对由一个私钥和一个公钥组成。<a class="ae mc" href="https://cloud.google.com/binary-authorization/docs/key-concepts#signers" rel="noopener ugc nofollow" target="_blank">签名者</a>使用私钥对容器映像摘要进行签名，生成一个签名，然后存储在<a class="ae mc" href="https://cloud.google.com/binary-authorization/docs/key-concepts#attestations" rel="noopener ugc nofollow" target="_blank">证明</a>中。公钥存储在<a class="ae mc" href="https://cloud.google.com/binary-authorization/docs/key-concepts#attestors" rel="noopener ugc nofollow" target="_blank">证明者</a>中。在部署时，二进制授权实施器使用证明者的公钥来验证证明中的签名，然后才允许部署容器。</p><p id="6b07" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">a)创建私钥</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="aada" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">b)从私钥中提取公钥</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="f328" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">c)向证明者添加ECDSA公钥</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/b3477de0259ea33f5b374c854cbbf100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4njtGnu9Dr_ePAI1"/></div></div></figure><p id="7023" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">d)保存公钥ID</p><p id="cc72" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">要保存公钥ID，您可以从上面的public-keys add的输出中复制它。要在将证明者添加到证明者后查看其公钥ID，请使用gcloud container binauthz证明者描述＄{证明者名称}</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="1ae4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 5。创建和配置策略</strong></p><p id="7647" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">二进制授权中的<a class="ae mc" href="https://cloud.google.com/binary-authorization/docs/key-concepts#policies" rel="noopener ugc nofollow" target="_blank">策略</a>是一组控制容器映像部署的规则。每个项目可以有一个策略。默认策略被配置为允许部署所有容器映像。</p><p id="915b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们将根据需要修改默认策略并应用。在我们的例子中，我们修改策略以允许<a class="ae mc" href="https://cloud.google.com/binary-authorization/docs/key-concepts#google-maintained_system_images" rel="noopener ugc nofollow" target="_blank"> Google维护的系统映像</a>，将<a class="ae mc" href="https://cloud.google.com/binary-authorization/docs/policy-yaml-reference#evaluationmode" rel="noopener ugc nofollow" target="_blank">评估模式</a>设置为REQUIRE _ establishment，并添加一个名为<a class="ae mc" href="https://cloud.google.com/binary-authorization/docs/policy-yaml-reference#requireattestationsby" rel="noopener ugc nofollow" target="_blank">requirementationsby</a>的节点，该节点引用您创建的证明者</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="36ca" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">将策略YAML文件导入二进制授权:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/a2c7f8e639f5b5fa1897c25d90ef072d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FKO4CINK73MNsX4X"/></div></div></figure><h2 id="b75f" class="lo ig hi bd ih lp lq lr il ls lt lu ip jo lv lw it js lx ly ix jw lz ma jb mb bi translated">6.测试策略</h2><p id="0bba" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">您可以通过尝试将一个示例容器映像部署到集群来测试您上面配置的策略。该策略将阻止部署，因为尚未进行所需的证明。</p><p id="1087" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">将示例映像部署到集群</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="cc4a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，验证二进制授权是否阻止了部署:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="eba6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">您可以获得关于部署的更多细节</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="6876" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">让我们删除此部署，并部署一个新的部署，同时为映像分配证明。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="61dd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，我们将使用已创建的证明者为要部署的映像分配证明。</p><h2 id="95dc" class="lo ig hi bd ih lp lq lr il ls lt lu ip jo lv lw it js lx ly ix jw lz ma jb mb bi translated">7)创建证明</h2><p id="0358" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">I)设置存储注册表路径和映像摘要的变量</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="56de" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">ii)生成证明有效负载</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="e749" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">iii)有效载荷JSON文件包含以下内容</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="8be2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">iv)用您的PKIX私钥签署有效负载，并输出签名文件</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="2941" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">v)创建和验证证明</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="9b03" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">其中，公钥id是您在上面的生成PKI密钥对中找到的公钥ID。验证标志检查您在策略中配置的证明者是否可以验证该证明。</p><p id="6fb3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">vi)验证证明已创建</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/bf00a33370be56b37295aa737132c6f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JhNXlfoprYj2Tl4e"/></div></div></figure><h1 id="a086" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">重新测试策略</strong></h1><p id="378b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">同样，通过将示例容器映像部署到集群来测试策略。</p><p id="102d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">要部署映像，请执行以下步骤:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="4adf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">验证映像是否已部署</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="0174" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">该命令会打印类似以下内容的消息，表明部署成功</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="2c27" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">在您的Cloudbuild CI/CD管道中集成二进制授权</strong></p><p id="7e99" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在cloudbuild.yaml下面是一个CD管道，它自动化了到GKE的映像部署的二进制授权过程。你可以参考Cloudbuild文档为GKE <a class="ae mc" href="https://cloud.google.com/build/docs/deploying-builds/deploy-gke" rel="noopener ugc nofollow" target="_blank">这里</a> <strong class="jf hj">设置Cloudbuild。</strong></p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lk ll l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es md"><img src="../Images/36381be135df4d9d96d828b85a9cede5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yUrGCwZvfvqHbVG3EI9Jvg.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">Cloudbuild管道截图</figcaption></figure></div><div class="ab cl me mf gp mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hb hc hd he hf"><p id="8fe6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这篇博客是由谷歌云的合作伙伴工程师普拉桑娜·巴斯卡兰·苏伦兰和联合创始人云边科技共同撰写的</p></div></div>    
</body>
</html>