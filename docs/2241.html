<html>
<head>
<title>Automate annotations for Vertex AI text datasets with Cloud Vision API and BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cloud Vision API和BigQuery自动标注顶点人工智能文本数据集</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/automate-annotations-for-vertex-ai-text-datasets-with-cloud-vision-api-and-bigquery-fe1a58473c86?source=collection_archive---------3-----------------------#2022-06-29">https://medium.com/google-cloud/automate-annotations-for-vertex-ai-text-datasets-with-cloud-vision-api-and-bigquery-fe1a58473c86?source=collection_archive---------3-----------------------#2022-06-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="75c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">机器学习实践者面临的主要挑战之一是带注释的训练数据集的可用性或缺乏。在许多情况下，从业者可以访问已经手动提取的现有数据集，他们可以使用这些数据集来加速他们的模型训练。</p><p id="48e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我们展示了如何使用Google Cloud AI/ML产品来训练专利申请pdf的文本实体提取模型。我们使用BigQuery、Vision API和Jupyter Notebook来自动注释用于模型训练的现有数据集。虽然我们不会深入每个步骤的细节，但你可以在<a class="ae jd" href="https://github.com/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/community/ml_ops/stage2/get_started_with_visionapi_and_automl.ipynb" rel="noopener ugc nofollow" target="_blank">这个Jupyter笔记本</a>中查看完整版本，它是作为<a class="ae jd" href="https://github.com/GoogleCloudPlatform/vertex-ai-samples" rel="noopener ugc nofollow" target="_blank"> Vertex AI样本GitHub资源库</a>的一部分发布的。</p><h1 id="e931" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">样本数据集</h1><p id="f180" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">本例中使用的数据集是从<a class="ae jd" href="https://cloud.google.com/bigquery/public-data" rel="noopener ugc nofollow" target="_blank"> BigQuery公共数据集</a>中提取结构化数据的<a class="ae jd" href="https://console.cloud.google.com/marketplace/product/global-patents/labeled-patents" rel="noopener ugc nofollow" target="_blank">专利PDF样本。它包含存储在谷歌云存储中的美国和欧盟专利子集的第一页的pdf链接。该数据集还包含多个专利实体的标签，包括申请号、专利发明人和发表日期。这为我们的下一步提供了理想的数据集。</a></p><h1 id="c53a" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">使用云视觉API预处理PDF文档</h1><p id="3c04" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">今天，Vertex AI AutoML实体提取仅支持训练数据集的文本数据。我们使用PDF文件的第一步是将它们转换成文本格式。<a class="ae jd" href="https://cloud.google.com/vision" rel="noopener ugc nofollow" target="_blank"> Cloud Vision API </a>提供了一个<a class="ae jd" href="https://cloud.google.com/vision/docs/pdf" rel="noopener ugc nofollow" target="_blank">文本检测功能</a>，它使用光学字符识别(OCR)来检测和提取PDF和TIFF文件中的文本。它提供了批处理操作模式，允许我们一次处理多个文件。</p><h1 id="36cf" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">准备训练数据集</h1><p id="9a9d" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">Vertex AI提供了多种方式来上传我们的训练数据集。在我们的例子中，最方便的选择是使用导入文件将注释作为导入过程的一部分。导入文件遵循一种<a class="ae jd" href="https://cloud.google.com/vertex-ai/docs/datasets/prepare-text#entity-extraction" rel="noopener ugc nofollow" target="_blank">特定的格式</a>，它指定了我们想要训练的每个标签的内容和注释列表。</p><p id="224e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了生成注释，我们将查询存储在BigQuery中的现有数据，并找到每个文件中提取的实体的位置。如果一个实体在文本中出现多次，所有的出现都包括在注释中。然后，我们将以<a class="ae jd" href="https://cloud.google.com/vertex-ai/docs/datasets/prepare-text#entity-extraction" rel="noopener ugc nofollow" target="_blank"> JSON Lines格式</a>将注释导出到Google云存储中的一个文件，并在我们的模型训练中使用该文件。我们还可以在Google Cloud控制台中查看带注释的数据集，以确保注释的准确性。</p><h1 id="158d" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">训练模型</h1><p id="fb27" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">一旦导入文件准备就绪，我们就可以在Vertex AI中创建新的文本数据集，并使用该数据集来训练新的实体提取模型。几个小时后，模型就可以进行部署和测试了。</p><h1 id="274b" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">评估模型</h1><p id="1700" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">模型训练完成后，您可以在Google Cloud控制台中查看模型的评估结果。<a class="ae jd" href="https://cloud.google.com/vertex-ai/docs/training/evaluating-automl-models#evaluation_metrics_returned_by" rel="noopener ugc nofollow" target="_blank">点击这里</a>了解更多关于如何评估Vertex AI AutoML模型的信息。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/0eafec3b7dec7c50b2239a58ed7ecbcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SAvmKAdHOBL0GKaY.png"/></div></div></figure><h1 id="7826" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">把所有的放在一起</h1><p id="41b1" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">下图显示了用于构建完整解决方案的各种组件以及它们之间的交互方式。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kt"><img src="../Images/5f463202aeb82bf094ee0a58070564b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*R0VBd6S0R2At66yS.png"/></div></div></figure><p id="ef2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ku">注意:这个图表是使用免费的</em> <a class="ae jd" href="http://bit.ly/GCPArchitecture" rel="noopener ugc nofollow" target="_blank"> <em class="ku"> Google云架构图表工具</em> </a> <em class="ku">创建的，它可以轻松地记录您的Google云架构。检查它，并开始在您自己的项目中使用它！</em></p><h1 id="06ef" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">摘要</h1><p id="7637" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">在这篇文章中，我们学习了如何使用BigQuery和Vision API来注释地面真实数据，从而训练一个顶点AI文本实体提取模型。通过使用这种方法，您可以更容易地复制这种解决方案，并利用现有的数据集来加速您的AI/ML之旅。</p><h1 id="3531" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">后续步骤</h1><p id="7cf7" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">你可以用<a class="ae jd" href="https://github.com/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/community/ml_ops/stage2/get_started_with_visionapi_and_automl.ipynb" rel="noopener ugc nofollow" target="_blank">这款Jupyter笔记本</a>试试这个解决方案。你可以在你的机器上运行这个笔记本，在<a class="ae jd" href="https://colab.research.google.com/" rel="noopener ugc nofollow" target="_blank"> Colab </a>或者在<a class="ae jd" href="https://cloud.google.com/vertex-ai-workbench" rel="noopener ugc nofollow" target="_blank"> Vertex AI Workbench </a>中。你也可以查看<a class="ae jd" href="https://github.com/GoogleCloudPlatform/vertex-ai-samples" rel="noopener ugc nofollow" target="_blank"> Vertex AI示例GitHub知识库</a>以获得更多关于使用Google Cloud Vertex AI开发和管理机器学习工作流的示例。</p><p id="92e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想查看更多谷歌云为ML从业者提供的最新工具，你可以观看第二届谷歌云应用ML峰会的录像。了解最新的产品发布、专家见解和客户案例，帮助您在创新的步伐中提高技能。</p><p id="c0a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们祝你机器学习之旅愉快！</p><p id="244b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ku">特别感谢Karl Weinmeister、Andrew Ferlitsch和Daniel Wang帮助审阅本文内容，并感谢Terrie Pugh的编辑支持。你真棒！</em></p></div></div>    
</body>
</html>