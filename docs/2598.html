<html>
<head>
<title>How to plan Domain Migration for Google Workspace without affecting workloads in Google Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为Google Workspace规划域迁移而不影响Google Cloud中的工作负载</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/how-to-plan-domain-migration-for-google-workspace-without-affecting-workloads-in-google-cloud-5f9203d0f617?source=collection_archive---------0-----------------------#2022-12-07">https://medium.com/google-cloud/how-to-plan-domain-migration-for-google-workspace-without-affecting-workloads-in-google-cloud-5f9203d0f617?source=collection_archive---------0-----------------------#2022-12-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b181" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每当两个或更多被收购的公司合并时，都需要大量的规划来绘制路线图，以同步组织之间的领域、平台和实践。</p><p id="148b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果这两家公司已经在使用谷歌工作空间和谷歌云平台，那么域名迁移可能会变得容易。这篇文章强调了一些关于预期问题及其解决方案的要点。</p><p id="ee83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着业务快速增长，收购如今变得非常普遍。</p><p id="ad5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将被收购的实体与其自己的规则/流程和平台同步往往是母实体最乏味和最伤脑筋的活动。</p><p id="8884" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于任何收购者来说，蛋糕上的樱桃将是意识到Aquiree已经使用了类似的平台(谷歌工作空间，谷歌云等。)和工具。</p><p id="a744" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然这对双方来说都很容易进行数字合并，但仍有一些小问题可以看到。</p><p id="ae94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我想概述一些要点，这些要点可以加快Google Workspace域迁移之旅，同时对Google Cloud上托管的应用程序和基础架构产生最小的影响。</p><blockquote class="jd je jf"><p id="a079" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">客户计划进行域名迁移的几个原因:</strong></p></blockquote><ol class=""><li id="6552" class="jk jl hi ih b ii ij im in iq jm iu jn iy jo jc jp jq jr js bi translated">客户收购了一家新公司，希望更高效地合作</li><li id="94cc" class="jk jl hi ih b ii jt im ju iq jv iu jw iy jx jc jp jq jr js bi translated">客户希望用新的名称或实体重塑自己的品牌</li><li id="d0be" class="jk jl hi ih b ii jt im ju iq jv iu jw iy jx jc jp jq jr js bi translated">客户希望将其一个部门拆分成一个具有新域名的独立实体</li></ol><p id="9069" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本帖中，我们将介绍最常见的场景(第1点)以及如何高效地完成域名迁移，同时将业务中断降至最低。</p><blockquote class="jd je jf"><p id="5377" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">收购方和被收购方同时利用Google Workspace和Google Cloud时的域名转让类型:</strong></p></blockquote><ol class=""><li id="5dfe" class="jk jl hi ih b ii ij im in iq jm iu jn iy jo jc jp jq jr js bi translated"><strong class="ih hj"> <em class="jg">完成域名转移</em> - </strong></li></ol><p id="b559" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，子实体的Google Workspace和Google Cloud项目被完全合并到父实体中。</p><p id="9661" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"><em class="jg"/></strong>-工作区用户/谷歌云项目/内部应用等。所有这些都在同一个屋檐下/组织下。</p><p id="29a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jg">缺点</em></strong>——虽然Google Workspace域迁移在这两种场景中都很常见，但是将Google Cloud项目从一个实体迁移到另一个实体需要付出巨大的努力，这种情况下需要很多检查点和配置更新。此外，与此类用例所涉及的工作和成本相比，将Google Cloud项目从一个领域迁移到另一个领域的附加值非常有限。</p><p id="9a05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">②<em class="jg">。部分域名转移</em> - </strong></p><p id="7570" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里只有子实体的Google Workspace被合并到父实体的Google Workspace中。Google Cloud组织/项目不会从子项目迁移到父项目。</p><p id="0924" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jg">好处</em></strong>——Google PSO为客户提供无缝的Google Workspace域名迁移服务。客户可以与新收购的实体在所有Google Workspace产品、应用程序和服务上无缝协作，而不必迁移/中断他们的Google云。谷歌云方面的工作很少，也没有额外的成本。</p><p id="299b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">).</strong></p><blockquote class="jd je jf"><p id="f35c" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">如何在不将Google Cloud项目迁移到新域名的情况下成功完成域名迁移？</strong></p></blockquote><p id="f4ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在任何域转移场景中，所有内部用户都被转移到新域。想想看，当你的谷歌云项目托管你的内部应用程序留在旧域，但用户已经转移到另一个域，会发生什么？</p><p id="7f38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的，你猜对了，这些用户将成为旧域的外部用户。这将基本上阻止他们访问他们自己的内部应用程序，除非有某种解决方案。《出埃及记》设置为内部的内部应用程序OAuth同意屏幕将认为试图进行身份验证的用户是外部用户，并将拒绝他们的访问。</p><p id="c680" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想象一下，如果您大量使用OAuth同意屏幕，以前您将它用作内部屏幕，现在您可能会考虑将同意屏幕更改为外部屏幕，作为允许您的用户从新域访问它的唯一可行的解决方案。这种解决方案打开了一个安全漏洞，任何拥有有效gmail帐户的人都可以通过互联网访问您的应用程序，即使您说有VPN作为第二层防御，但这仍然不能证明损害第一层安全是合理的。</p><p id="a7f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了解决这个问题，有一个解决方案，但还没有正式发布。在本解决方案中，需要完成以下活动:</p><ol class=""><li id="3f3c" class="jk jl hi ih b ii ij im in iq jm iu jn iy jo jc jp jq jr js bi translated">客户应该从“应用程序安全团队”的bug门户网站为Google创建一个内部票证，并提及其新旧域名的Google Workspace客户ID的详细信息以及新旧域名的详细信息。</li></ol><p id="3898" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">前母公司Google Workspace客户ID—254 XXX</p><p id="9883" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">子Google Workspace客户ID — 261XXXX</p><p id="3b01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">父域名-xyzcompany.com</p><p id="a5a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">子域—123company.com</p><p id="d997" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这张票中，他们应该要求谷歌将子域列入父域的白名单。</p><p id="5e60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.一旦谷歌确认他们已经完成了白名单。程序，然后转到父域的Google Workspace管理控制台，具有管理员/所有者权限-&gt;访问和数据控制-&gt; API控制-&gt;检查标记“信任内部，域拥有的应用程序”</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es jy"><img src="../Images/e644cdd9a58295e793f124e29eed3d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*32Ysz2nFOfGxq5_Z"/></div></div></figure><p id="682b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成后，父域将开始将所有其子域的应用程序视为自己的应用程序，并且父域中的所有用户将能够像以前一样(在域转移之前)访问内部应用程序。</p><blockquote class="jd je jf"><p id="1feb" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">好处:</strong></p></blockquote><ol class=""><li id="28a1" class="jk jl hi ih b ii ij im in iq jm iu jn iy jo jc jp jq jr js bi translated">随着客户不断收购新公司，他们可以通过一劳永逸的方法无缝地进行域名迁移。他们可以要求白名单尽可能多的子域，因为他们希望在未来。</li><li id="762b" class="jk jl hi ih b ii jt im ju iq jv iu jw iy jx jc jp jq jr js bi translated">OAuth同意屏幕前端没有打开安全漏洞，因为在这个用例中屏幕保持原样(内部)。</li><li id="6895" class="jk jl hi ih b ii jt im ju iq jv iu jw iy jx jc jp jq jr js bi translated">这种设置很简单，并且可以预先提供(白名单可以在D日之前预先完成)。</li><li id="c19a" class="jk jl hi ih b ii jt im ju iq jv iu jw iy jx jc jp jq jr js bi translated">当谈到互操作性和协作时，客户可以看到最好的谷歌产品和服务。</li></ol></div></div>    
</body>
</html>