<html>
<head>
<title>How to Protect Your Google Cloud Organization from Security Misconfigurations Using Cloud Native Auto Remediation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用云原生自动补救来保护您的Google云组织免受安全错误配置的影响</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/how-to-protect-your-google-cloud-org-from-security-misconfigs-using-cloud-native-auto-remediation-4553d878e270?source=collection_archive---------0-----------------------#2022-04-20">https://medium.com/google-cloud/how-to-protect-your-google-cloud-org-from-security-misconfigs-using-cloud-native-auto-remediation-4553d878e270?source=collection_archive---------0-----------------------#2022-04-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a2c906b81d929678e81964914182a617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AG3Kr5raBG29jH2A"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">来自Pixabay的标题照片</figcaption></figure><h1 id="c128" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">为什么我们需要自动修复？</h1><p id="44fb" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如今，许多公司都在寻找一种昂贵的方式，即在架构规划过程中应该更加强调安全性。例如，一个S3桶暴露了加纳<a class="ae kq" href="https://portswigger.net/daily-swig/insecure-amazon-s3-bucket-exposed-personal-data-on-500-000-ghanaian-graduates" rel="noopener ugc nofollow" target="_blank"> </a>超过50万学生的个人信息。另一个S3桶为一家日本医疗保健公司<a class="ae kq" href="https://www.hackread.com/japan-medical-services-doctors-me-exposed-patients-images/" rel="noopener ugc nofollow" target="_blank"> </a>曝光了12000名患者的图像。丝芙兰最近被发现有一个S3桶泄露了超过49万名顾客的私人信息，包括卡号、全名、电子邮件地址和电话号码<a class="ae kq" href="https://vpnoverview.com/news/sephora-data-leak-impacts-nearly-500000-customers/" rel="noopener ugc nofollow" target="_blank"> </a>。根据趋势科技的数据，在2018年和2019年，云错误配置导致的违规行为给公司造成了近5万亿美元的损失<a class="ae kq" href="https://www.trendmicro.com/vinfo/us/security/news/virtualization-and-cloud/the-most-common-cloud-misconfigurations-that-could-lead-to-security-breaches#:~:text=In%202018%20and%202019%2C%20cloud,companies%20almost%20US%245%20trillion." rel="noopener ugc nofollow" target="_blank"> ⁴ </a>。让我们谈谈那个。假设一名开发人员在您管理的Google Cloud项目上创建了一个SQL实例，而您的组织中有一个安全策略，规定所有流量都应该加密。在这篇文章发表的时候，Google Cloud还没有办法通过组织策略约束<a class="ae kq" href="https://cloud.google.com/resource-manager/docs/organization-policy/org-policy-constraints#constraints-for-specific-services" rel="noopener ugc nofollow" target="_blank"> ⁵ </a>来强制只针对SQL实例的SSL连接。微软Azure通过Azure策略提供了一种在API级别实施这一点的方法，亚马逊网络服务(AWS)允许您创建粒度IAM策略来拒绝不允许的资源。AWS还提供了<a class="ae kq" href="https://aws.amazon.com/about-aws/whats-new/2019/09/use-aws-config-rules-to-automatically-remediate-non-compliant-resources/" rel="noopener ugc nofollow" target="_blank"> AWS配置</a>，允许您自动修复不符合要求的资源。目前，谷歌云没有任何补救资源的原生服务，如Azure Policy或AWS Config所以…我们到了。</p><h1 id="9f8e" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">防止错误配置资源的防线</h1><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/9214f701678462e087e65181a94af91d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*czKsE3xw1uHXT0hD"/></div></div></figure><p id="d7a4" class="pw-post-body-paragraph js jt hi ju b jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl la kn ko kp hb bi translated">让我们讨论一下可以防止和检测错误配置的资源部署的不同领域。我们称之为你的“防线”。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/1755bffa0a88f93595ecc1705eb7a55d.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/0*nDBNQ61e4NISunfc"/></div></figure><p id="fd21" class="pw-post-body-paragraph js jt hi ju b jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl la kn ko kp hb bi translated">您的第一道防线是经过安全团队认可的兼容Terraform模块。这些模块符合安全团队定义的标准，并且包含基线安全的正确配置。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/3407c383ed151fa4613fa816435e68a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/0*IX6-TH10wcz4YhQL"/></div></figure><p id="63d6" class="pw-post-body-paragraph js jt hi ju b jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl la kn ko kp hb bi translated">如果出于某种原因，用户能够签入未经安全部门批准的Terraform代码，那么您的下一道防线将是CI/CD管道中的安全门。集中运行Terraform的位置不仅允许组织控制可以部署的内容，还让他们能够在实际部署之前添加安全检查。在我们的例子中，我们有IAC(作为代码的基础设施)安全检查，要么使用像<a class="ae kq" href="https://github.com/aquasecurity/tfsec" rel="noopener ugc nofollow" target="_blank"> tfsec </a>或<a class="ae kq" href="https://snyk.io/product/infrastructure-as-code-security/" rel="noopener ugc nofollow" target="_blank"> Snyk </a>这样的工具，在应用之前扫描我们的Terraform代码。</p><p id="aa67" class="pw-post-body-paragraph js jt hi ju b jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl la kn ko kp hb bi translated">事情变得有点有趣了。我们可以说，下一道防线是您的组织策略和VPC服务控制。然而，如果出于某种原因，组织政策或VPC服务控制不能涵盖我们试图阻止的事情，我们应该为它建立护栏。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/1e2c74a3d341dda01e164d019d71fadd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dp35hSO_mX3ciO2e"/></div></div></figure><p id="c24c" class="pw-post-body-paragraph js jt hi ju b jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl la kn ko kp hb bi translated">我们可以在这里看两个示例用例。第一个是仅对SQL实例实施SSL连接，我已经在简介中介绍过了。另一个用例几乎是任何组织都可能发生的场景。超级管理员用户或拥有过多权限的人试图更改您组织中的某些内容。在这种情况下，让我们以IAM角色为例。用户为某个人分配整个组织的所有者角色。如果这是一个有效的变化，当然，我们可以让它滑动。但那是另一个不同的讨论。在我们的例子中，这不是一个有效的改变。</p><p id="35aa" class="pw-post-body-paragraph js jt hi ju b jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl la kn ko kp hb bi translated">这就是护栏出现的地方。我们实际上有一个组织日志接收器过滤API调用，例如专门针对IAM的具有所有者角色的调用。如果发生这种情况，该日志将被发送到一个发布/订阅主题，并触发云功能删除该更改，并将该更改通知安全团队。这种补救可能只是阻止了某些人访问他们不应该访问的数据。</p><h1 id="41ee" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">原生修复事物的价值</h1><p id="1bb9" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">但是Don，我们不能用供应商的工具吗？？？是的，当然，但是有了这个原生功能，你只需为你在谷歌云中使用的服务付费。反应和补救接近实时。您不必等待日志转到第三方工具，因为函数在API调用时被触发。除了谷歌云中使用的服务成本之外，没有许可成本或其他开销需要担心。您可以看到在您的函数上运行的代码。您有权根据您组织的用例编写自己的函数。</p><h1 id="f69a" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">关于唐</h1><p id="cad9" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">Don是埃森哲公司的安全经理，主要负责应用安全、云安全和开发安全。他在财富100强公司中担任角色，负责运行云和应用程序安全评估，同时围绕客户的生态系统实施安全测试和控制。有兴趣将其部署到您的环境中吗？让我们<a class="ae kq" href="https://linkedin.com/in/donsantos" rel="noopener ugc nofollow" target="_blank">连线</a>！</p><h2 id="d2d4" class="le iv hi bd iw lf lg lh ja li lj lk je kd ll lm ji kh ln lo jm kl lp lq jq lr bi translated">免责声明:</h2><p id="eea2" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">我的帖子反映了我自己的观点，不一定代表我的雇主埃森哲的观点。</p><p id="fbcf" class="pw-post-body-paragraph js jt hi ju b jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl la kn ko kp hb bi translated">这篇博文中的信息是一般性的，没有考虑到您的IT生态系统和网络的具体需求，这些需求可能会有所不同，需要采取独特的措施。在决定使用上述任何工具时，您应该独立评估您的具体需求。tfsec和Snyk等。工具不是埃森哲的工具。埃森哲不表示其已审查或认可这些工具，埃森哲对这些工具的使用、有效性或因使用这些工具而导致的任何中断或损失不承担任何责任。</p></div><div class="ab cl ls lt gp lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="hb hc hd he hf"><p id="edd4" class="pw-post-body-paragraph js jt hi ju b jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl la kn ko kp hb bi translated">【https://www.linkedin.com】最初发表于<a class="ae kq" href="https://www.linkedin.com/pulse/how-protect-your-google-cloud-organization-from-security-santos/" rel="noopener ugc nofollow" target="_blank"><em class="lz"/></a><em class="lz">。</em></p></div></div>    
</body>
</html>