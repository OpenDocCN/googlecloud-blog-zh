<html>
<head>
<title>How to create a custom private Google Home Action with API.AI and Google App Engine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用API创建自定义私有Google Home动作？人工智能和谷歌应用引擎</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/how-to-create-a-custom-private-google-home-action-260e2c512fc?source=collection_archive---------0-----------------------#2017-02-20">https://medium.com/google-cloud/how-to-create-a-custom-private-google-home-action-260e2c512fc?source=collection_archive---------0-----------------------#2017-02-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/556be84112333b74bde81111bc1fb4e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AHvJYm-sU-jTNaytWh8liQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">谷歌家庭助手[图片:thegadgetflow.com]</figcaption></figure><p id="4628" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Google Home是一款由谷歌助手驱动的声控扬声器。它已经有内置的动作，但也可以添加自定义的动作。</p><p id="884a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">本教程一步一步地详细介绍了如何建立一个助手动作，以及如何保持它的私密性(即您可以在自己的Google Home设备中使用该操作，但不会公开发布)。</p><p id="5e42" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">基本思想是创建一个运行在Google App Engine服务器上的应用程序(webhook ),它由API.AI构建的动作触发。</p><p id="0a45" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我假设您知道如何使用shell，以及如何用Google App Engine 支持的编程语言和环境<a class="ae js" href="https://cloud.google.com/appengine/docs" rel="noopener ugc nofollow" target="_blank">编写应用程序(在本教程中，我从Node.js模板开始)。此外，本教程中的链接引用了适用于任何平台的文档，但我只在我的macOS Sierra上测试过。</a></p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="e038" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第一步。创建API。人工智能和谷歌云账户。</strong>您必须使用您用来控制Google Home的相同Google电子邮件创建帐户。</p><ul class=""><li id="4505" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">在<a class="ae js" href="https://api.ai/" rel="noopener ugc nofollow" target="_blank"> API上创建一个账户。AI</a>；</li><li id="9a04" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">在<a class="ae js" href="https://console.cloud.google.com/start" rel="noopener ugc nofollow" target="_blank">谷歌云</a>上创建账户；</li></ul></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="f217" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第二步。在API.AI. </strong> API上创建一个助手动作。AI是对话端点的开发工具。它允许为谷歌主页创建一个自然语言交互动作。</p><ul class=""><li id="0c20" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">关注谷歌官方视频，了解如何创建一个动作:<a class="ae js" href="https://www.youtube.com/watch?v=9SUAuy9OJg4" rel="noopener ugc nofollow" target="_blank">谷歌上的动作:使用API构建助手动作。AI </a>。<br/> <strong class="iw hj"> Achtung！！</strong>如果您希望您的助手操作保持私密，请在13:50分钟停止视频，并且不要点击API上的“部署”。人工智能控制台。</li><li id="9509" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">记下您在Google Cloud中创建的项目ID。</li></ul><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ks kt l"/></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="7cae" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">步骤三。当被意图</strong>触发时，对助手的行为进行编码。例如，当你问“你有快速热汤的配方吗？”时，助理应该怎么做？。API。人工智能识别单词'快'，'热'和'汤'，但我们需要一个应用程序来处理这些单词，并给我们一个快速热汤的食谱。这被称为<em class="ku"> webhook </em>。<br/>你可以从模板开始在Node.js中创建一个webhook。</p><ul class=""><li id="909a" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">在你的工作区创建一个文件夹，我将这个文件夹命名为<em class="ku"> &lt; my_project_dir &gt;。</em></li><li id="30a0" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">在<em class="ku">&lt;my _ project _ dir&gt;</em>里面创建一个文件夹，我将这个文件夹称为<em class="ku"> &lt; template_dir &gt; </em>。</li><li id="9c6f" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">从github下载模板zip:<a class="ae js" href="https://github.com/actions-on-google/apiai-webhook-template-nodejs" rel="noopener ugc nofollow" target="_blank"><em class="ku">apiai-web hook-template-nodejs</em></a>，解压并移动文件到<em class="ku"> &lt; template_dir &gt;。</em></li><li id="6138" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">下载并安装<a class="ae js" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a></li><li id="4c9f" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">在本地node_modules文件夹中安装节点依赖项，打开终端并运行:</li></ul><blockquote class="kv kw kx"><p id="eb31" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">$ cd <template_dir> <br/> $ npm安装</template_dir></p></blockquote><ul class=""><li id="0c2f" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">使用文本编辑器或您喜欢的javascript IDE打开<em class="ku"> &lt; template_dir &gt; </em>中的“<em class="ku"> app.js </em>”文件，并在函数中编写您的webhook逻辑:</li></ul><blockquote class="kv kw kx"><p id="aba2" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">function response handler(assistant){<br/>//完成您的履行逻辑并发送响应<br/> }</p></blockquote><p id="909e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="ku">注意</em>:当一个意图(在你的API中描述。AI动作)被触发时，一个Json post被发送到应用程序正在监听的服务器。Json包含触发您意图的实体作为参数，它们可以通过解析<em class="ku"> app.post </em>方法中的‘req’参数来检索。<br/>要获取发送到服务器的Json示例，请转到API。人工智能，测试你的意图在右边的面板“<em class="ku">现在就试试</em>”然后点击“显示JSON”按钮。</p><p id="16bb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="ku">举例为第三步。</em> </strong></p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/461d470947106c9e651d48338c62f441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mr53ZOh2JkRnQa0L2_bPLg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">API。AI动作(左)和相对的webhook(右)</figcaption></figure><p id="8989" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">上面的截图展示了一个API的例子。API操作(左侧)和webhook(右侧)。<br/>API中的动作。AI包含实体'<em class="ku">命令</em>，以'<em class="ku">床</em>'、<em class="ku">电视</em>'、<em class="ku">再见</em>'和'<em class="ku">圣诞节</em>'为关键字(带有相对同义词)。例如，如果一个意图被触发，说“是时候看电视了！”，该动作识别具有值'<em class="ku"> tv </em>'的实体'<em class="ku">命令</em>，并用包含参数<em class="ku"> "command": "tv "的Json向webhook发送POST请求。</em></p><p id="b26f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后webhook以这种方式解析Json(第35行右侧):</p><blockquote class="kv kw kx"><p id="2187" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">var command = req . body . result . parameters . command；</p></blockquote><p id="de4a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">并且基于变量<em class="ku">命令</em>的值，它发送一个<em class="ku"> POST </em>请求。<br/>在“<em class="ku"> tv </em>”示例中，它发送一个POST请求，如下所示:</p><blockquote class="kv kw kx"><p id="2181" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">request . post(" http://website . com/light _ TV _ on ")；</p></blockquote><p id="8ef5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要了解更多关于我的光控项目，请访问我的GitHub页面:<a class="ae js" href="https://github.com/sarettasarda/project-smars" rel="noopener ugc nofollow" target="_blank">https://github.com/sarettasarda/project-smars</a></p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="054f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第四步。本地测试Node.js应用程序</strong>。在将应用程序部署到服务器之前，请确保它能按预期工作。因为部署过程需要几分钟，所以在本地运行时调试应用程序会更快。</p><ul class=""><li id="baee" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">要启动您的应用程序，请打开终端并运行:</li></ul><blockquote class="kv kw kx"><p id="8f4f" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">$ cd <template_dir> <br/> $ npm开始</template_dir></p></blockquote><ul class=""><li id="de66" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">如果你的应用没有任何bug(并且你没有在文件底部的' app.js '中修改服务器的启动部分)，你会在终端上看到:“<em class="ku"> App监听端口8080 </em>”。</li><li id="5655" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">要简单地触发您的应用程序，打开第二个终端，尝试将带有<em class="ku"> curl </em>的Json发送到您正在运行的本地webhook:</li></ul><blockquote class="kv kw kx"><p id="bb69" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">$ curl-X POST-H " Content-Type:application/JSON " http://localhost:8080</p></blockquote><ul class=""><li id="a1ca" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">如果你想用类似于API发送的Json进行测试。AI你可以用<em class="ku"> curl </em>发送JSON体来测试一下:</li></ul><blockquote class="kv kw kx"><p id="b120" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">$ curl-X POST-H " Content-Type:application/JSON "-d '[JSON _ here]' http://localhost:8080</p></blockquote><p id="8ca3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">[json_here]是您期望从API接收的json。AI行动。如前一步所述，您可以获得API中Json的示例。AI项目尝试意图(在右边面板)并点击“显示JSON”按钮。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="2ba7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第五步。在Google App Engine </strong>中部署项目。如果你的webhook运行正常，你就可以把它上传到服务器了。我将引用<em class="ku"> &lt; project_id &gt; </em>作为您在步骤2中创建的项目的id，同时遵循“Google上的操作:使用API构建助手操作”。AI’视频教程。</p><ul class=""><li id="4572" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">按照<a class="ae js" href="https://cloud.google.com/sdk/downloads" rel="noopener ugc nofollow" target="_blank">文档</a>在您的机器上下载、安装和初始化Google Cloud SDK，或者对于从命令行运行的Mac用户:</li></ul><blockquote class="kv kw kx"><p id="13f0" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">$ curl https://sdk.cloud.google.com | bash<br/>$ source ~/。bash_profile</p></blockquote><ul class=""><li id="5c95" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">要在Google App Engine中部署应用程序，请运行:</li></ul><blockquote class="kv kw kx"><p id="1864" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">$ cd <template_dir> <br/> $ gcloud配置集项目&lt;project _ id&gt;<br/>$ g cloud应用部署</template_dir></p></blockquote><ul class=""><li id="ae0a" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">您应该会看到类似以下示例的日志输出。记下端点URL。在下一节中，您将需要它来配置webhook URL。</li></ul><blockquote class="kv kw kx"><p id="40e5" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">更新服务[默认]…完成。<br/>将服务[默认]部署到https://[project-id]. appspot . com</p><p id="33a3" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">您可以通过运行:<br/> $ gcloud app logs read从命令行读取日志</p><p id="082e" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">要在网络浏览器中查看您的应用程序，请运行:<br/> $ gcloud应用程序浏览</p></blockquote><ul class=""><li id="f199" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">您的申请现已在“<em class="ku"> https://【项目id】上线。</em><strong class="iw hj"><em class="ku">appspot-preview</em></strong><em class="ku">。' com '。<br/></em>URL的'-preview '部分是Google为预览您的应用程序而进行的重定向，如果您决定公开您的应用程序，一旦您的应用程序被Google团队审查并接受，它将在'<em class="ku">https://[project-id]. appspot . com '</em>中更改。<br/>在本教程中，我们将实现一个私有操作，因此我们不会发布该操作，我们将只使用'<em class="ku"> https://[project-id]。</em><strong class="iw hj"><em class="ku">appspot-preview</em></strong><em class="ku">。地址。</em></li></ul></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="688e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第六步。连接您的API。AI行动到你的webhook </strong>。</p><ul class=""><li id="7ce7" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">打开API。AI项目。</li><li id="a5d8" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">打开右侧面板上的“履行”窗口。</li><li id="9d01" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">复制您的应用程序的网址'<em class="ku">' https://[项目id]。</em> <strong class="iw hj"> <em class="ku">【预览】</em> </strong> <em class="ku">。com' </em>到API.AI中的URL字段</li><li id="f8ad" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">保存实现。</li><li id="2bed" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">在任何相关意向中，启用回应的实现:打开“意向”窗口，打开您要连接的意向，向下滚动到“实现”部分，选中“使用webhook”。</li><li id="aa9f" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">确保“域”窗口中的所有域都已关闭。</li></ul><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/8af52205e97f70e91a5082c0b78a2502.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VwFb-kwDzEz-eVwZRuQwrw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">复制您的应用程序的URL '<em class="ld">https://[project-id]。将appspot-preview.com' </em>添加到API.AI中的URL字段</figcaption></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="9bb9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第七步。测试助手操作。</strong></p><ul class=""><li id="2d8c" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">在API上。人工智能打开右边面板的“集成”窗口。</li><li id="c520" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">启用谷歌上的<em class="ku">动作，打开设置</em></li><li id="483d" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">点击右下角的“授权”按钮，然后点击“预览”按钮。<br/> <strong class="iw hj"> Achtung！！</strong>如果您希望您的助手操作保持私密，请不要点击“部署”!</li><li id="9797" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">你可以直接对着你的Google Home " <em class="ku"> Ok Google，talk to&lt;your _ Action _ name&gt;</em>"或者在API里测试这个动作。AI项目右侧面板中的<em class="ku">现在就试试</em>。</li></ul><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/5758bdd038c3090410a65cf82af209b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QYYseQ-Pn7nS1lquIK7Jtg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">对我的“smeagol”项目的Google设置的操作。</figcaption></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="e6e9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第八步。</strong>设置无限预览*。动作预告只会持续30分钟。您可以选择部署和公开您的助手操作(仅当大G喜欢您的工作时),单击“部署”按钮<strong class="iw hj">或</strong>通过将它设置为无限预览来保持您的操作的私密性。为了让你的行动保密:</p><ul class=""><li id="eda0" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">下载Google<a class="ae js" href="https://developers.google.com/actions/tools/gactions-cli" rel="noopener ugc nofollow" target="_blank"><em class="ku">g actions CLI</em></a>(g action是一个自我更新的命令行界面，可以让你测试你的动作)。<a class="ae js" href="https://developers.google.com/actions/tools/gactions-cli" rel="noopener ugc nofollow" target="_blank"> <br/> </a>注意:在Mac和Linux上，在终端中运行“<em class="ku"> $chmod +x gactions </em>”以使二进制文件可执行。</li><li id="aa27" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">复制<em class="ku"> &lt; my_project_dir &gt;里面的可执行文件。</em></li><li id="334b" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">初始化gaction，打开终端并运行:</li></ul><blockquote class="kv kw kx"><p id="416f" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">$ cd <my_project_dir> <br/> $美元。/g操作初始化</my_project_dir></p></blockquote><ul class=""><li id="a943" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">gaction在<em class="ku">&lt;my _ project _ dir&gt;</em>中创建一个名为“<em class="ku"> action.json </em>的文件，将该json文件移动到<em class="ku"> &lt; template_dir &gt;中。</em></li><li id="b1e1" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">打开一个浏览器开发者控制台(对于Chrome:点击右上角的三个点-&gt;更多工具-&gt;开发者工具)。</li><li id="06c8" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">单击“网络”选项卡。</li><li id="1898" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">打开你的API。AI项目并打开“集成”窗口。</li><li id="af9b" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">打开“Google上的操作”设置(Google集成上的操作应该已经打开)。</li><li id="e51d" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">点击“授权”按钮。</li><li id="dae1" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">点击“预览”按钮。</li><li id="ed2e" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">在浏览器开发人员控制台中，检查来自以下位置的XHR响应:</li></ul><blockquote class="kv kw kx"><p id="768e" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">https://console.api.ai/api/agent/googleassistant/preview</p></blockquote><ul class=""><li id="ae85" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">复制响应内容，粘贴到<em class="ku"> &lt; template_dir &gt; </em>内的文件'<em class="ku"> action.json </em>'中。</li><li id="49ae" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">保存文件。</li><li id="7739" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">要将预览设置为永久持续，请打开终端并运行:</li></ul><blockquote class="kv kw kx"><p id="78d0" class="iu iv ku iw b ix iy iz ja jb jc jd je ky jg jh ji kz jk jl jm la jo jp jq jr hb bi translated">$ CD<my_project_dir>T5【美元】。/ga actions preview-action _ package&lt;template _ dir&gt;/action . JSON-preview _ mins 99999999-invocation _ name[invocation _ name _ here]</my_project_dir></p></blockquote><p id="f398" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">该命令将发送动作('<em class="ku"> action.json' </em>)文件，与API相同。AI项目)到你的Google Home，并将它作为预览运行999999999分钟(约2000年)。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es lf"><img src="../Images/9038ad20d3e1f0acba18b37c7aeb4493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/1*BRzyiSfBy4kUvkuj3DRwEw.gif"/></div></figure><p id="9273" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">*感谢<em class="ku"> Brady </em>在“<a class="ae js" href="http://stackoverflow.com/a/41205026/1699586" rel="noopener ugc nofollow" target="_blank">让google actions开发项目预览持续更长时间</a>”提供无限预览技巧和视频！</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="27c0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">感谢您跟随教程！</p></div></div>    
</body>
</html>