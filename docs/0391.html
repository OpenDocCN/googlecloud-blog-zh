<html>
<head>
<title>How to convert a simple python application to a containerized (Docker) one</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将简单的python应用程序转换成容器化的(Docker)应用程序</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/how-to-convert-a-simple-python-application-to-a-containerized-docker-one-d6103bfffc7b?source=collection_archive---------0-----------------------#2017-09-24">https://medium.com/google-cloud/how-to-convert-a-simple-python-application-to-a-containerized-docker-one-d6103bfffc7b?source=collection_archive---------0-----------------------#2017-09-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="69a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">TL；DR -&gt;容器化一个python应用。推送图像并从Google Cloud执行。</p><p id="46c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在一个悠闲的周六下午，我觉得玩容器很不错。</p><p id="ea13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我对将应用程序容器化并在不同环境中运行的想法很感兴趣。当我这样做时，比仅仅阅读更容易理解一些东西。</p><p id="7fa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要求:</p><p id="db32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">python ≥2.7(和pip)</p><p id="dfed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Docker ≥1.13.1</p><p id="da3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">docker hub和google cloud中的一个帐户。(两者都有免费层$)</p><p id="62f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个简单的python程序，我想将其容器化。</p><blockquote class="jd"><p id="929a" class="je jf hi bd jg jh ji jj jk jl jm jc dx translated">导入请求</p><p id="64f7" class="je jf hi bd jg jh ji jj jk jl jm jc dx translated">city = "洛杉矶"</p><p id="e301" class="je jf hi bd jg jh ji jj jk jl jm jc dx translated">打印“我来自% s %城市”</p><p id="cd58" class="je jf hi bd jg jh ji jj jk jl jm jc dx translated">r = requests . get(' http://www . Google . com ')</p><p id="c217" class="je jf hi bd jg jh ji jj jk jl jm jc dx translated">打印状态代码</p></blockquote><p id="4f79" class="pw-post-body-paragraph if ig hi ih b ii jn ik il im jo io ip iq jp is it iu jq iw ix iy jr ja jb jc hb bi translated">安装包<em class="js">请求</em>使用<em class="js"> pip </em>在本地执行该程序。</p><p id="bb06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我写了一个<a class="ae jt" href="https://github.com/vr001/python_docker/blob/master/Dockerfile" rel="noopener ugc nofollow" target="_blank"> Dockerfile </a>，它基本上捆绑了基本映像、执行命令和安装其他包。</p><p id="9f66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后通过执行<strong class="ih hj"><em class="js">docker build-t&lt;imageName&gt;构建一个docker映像。</em> </strong> <em class="js"> </em>您可以通过运行<em class="js"> docker images来验证图像。(记下图像id) </em>测试图像是否按预期工作<em class="js"> docker运行&lt;imageName&gt;T15】</em></p><p id="d9ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不想就此打住。在不同的服务器上运行这个镜像将会是多么酷啊！！？。</p><p id="7ba2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好的，您需要将您在本地构建的docker映像推送到docker hub，这样您就可以从不同的服务器获取并运行映像。</p><p id="ef41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">准备推送docker图像。</p><p id="4b41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js"> docker标签&lt;imageid&gt;T30】docker hub username&gt;/&lt;imageName:最新&gt;T17】</em></p><p id="f58e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js"> docker登录(提供docker用户名/密码)</em></p><p id="6361" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js"> docker推送&lt;docker hub username&gt;/&lt;imageName&gt;</em></p><p id="7e41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您已成功将docker映像推送到docker hub！！。</p><p id="ab69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要真正理解容器化的使用，您需要从不同的环境运行这个映像。嗯！！？最简单的方法是，如果你有一个虚拟机，你可以使用它(或不同的计算机)。如果你两者都没有，那么你可以从谷歌云启动一个虚拟机。(或来自任何其他提供商)。</p><p id="80d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:有包括Docker的操作系统映像。所以，你甚至不需要在虚拟机中安装Docker。</p><p id="17f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">引导盘:容器优化操作系统61–9765 . 66 . 0稳定</p><p id="db45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">内核:ChromiumOS-4 . 4 . 70 Kubernetes:1 . 6 . 10 Docker:17 . 03 . 2</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/ad1594c3f0a022c9558104628354426d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fZma6uK94mA5GP9OCQN37A.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">启动谷歌计算引擎(VM)</figcaption></figure><p id="e91f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您创建了虚拟机，ssh到机器。你应该在仪表盘上看到。然后按照下面截图中的命令操作。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kk"><img src="../Images/dde8bc116bd81680d66d89aad70b9c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m9ART3eW6BV_oO6LI6690A.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">从谷歌计算引擎运行docker图像。</figcaption></figure><p id="754b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不用安装Python，不用安装包(请求)。一切都捆绑在映像中，只需执行它！！</p><p id="1754" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">源代码:</strong>【https://github.com/vr001/python_docker】T2</p><p id="ead7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">码头工人形象</strong>:<a class="ae jt" href="https://hub.docker.com/r/vira28/python_docker/" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/r/vira28/python_docker/</a></p><p id="dd97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">参考:</strong></p><div class="kl km ez fb kn ko"><a href="http://www.python-requests.org/en/master/" rel="noopener  ugc nofollow" target="_blank"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd hj fi z dy kt ea eb ku ed ef hh bi translated">请求:人类HTTP请求2.18.4文档</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">Twitter，Spotify，微软，亚马逊，Lyft，BuzzFeed，Reddit，美国国家安全局，英国政府，谷歌，Twilio…</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">www.python-requests.org</p></div></div></div></a></div><div class="kl km ez fb kn ko"><a href="https://runnable.com/docker/python/dockerize-your-python-application" rel="noopener  ugc nofollow" target="_blank"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd hj fi z dy kt ea eb ku ed ef hh bi translated">将您的Python应用程序归档</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">Dockerfiles使您能够创建自己的图像。docker文件描述了组成映像的软件…</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">runnable.com</p></div></div><div class="kx l"><div class="ky l kz la lb kx lc ke ko"/></div></div></a></div></div></div>    
</body>
</html>