<html>
<head>
<title>Cloud Build notification to Slack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向Slack发送云构建通知</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/google-cloud-build-slack-4eb0e6dd0226?source=collection_archive---------0-----------------------#2019-08-04">https://medium.com/google-cloud/google-cloud-build-slack-4eb0e6dd0226?source=collection_archive---------0-----------------------#2019-08-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1761" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">针对Google Cloud Build的Slack集成，使用Google Cloud函数在构建达到特定状态时向Slack发布消息。</p><p id="2779" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Github_Repo : <a class="ae jd" href="https://github.com/harsh4870/Cloud-build-slack-notification" rel="noopener ugc nofollow" target="_blank">点击_此处</a></p><h1 id="da65" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">设置</h1><ol class=""><li id="43ad" class="kc kd hi ih b ii ke im kf iq kg iu kh iy ki jc kj kk kl km bi translated">创建一个Slack应用程序，并复制webhook URL:</li></ol><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="8d9a" class="kw jf hi ks b fi kx ky l kz la">Add the value in Index.js File SLACK_WEBHOOK_URL=''</span></pre><p id="1b46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.设置一个github令牌，以获取slack消息中的github提交作者信息(如果适用)。</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="7047" class="kw jf hi ks b fi kx ky l kz la">Add the value in Index.js File GITHUB_TOKEN=''</span></pre><ol class=""><li id="4aba" class="kc kd hi ih b ii ij im in iq lb iu lc iy ld jc kj kk kl km bi translated">使用<a class="ae jd" href="https://github.com/harsh4870/Cloud-build-slack-notification/blob/master/README.md#serverless" rel="noopener ugc nofollow" target="_blank">无服务器框架(选项1) </a>创建功能</li></ol><h1 id="d89e" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">选项1:使用无服务器框架部署</h1><ol class=""><li id="c428" class="kc kd hi ih b ii ke im kf iq kg iu kh iy ki jc kj kk kl km bi translated">安装<code class="du le lf lg ks b">serverless</code></li></ol><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="9e6b" class="kw jf hi ks b fi kx ky l kz la">npm install serverless -g</span></pre><ol class=""><li id="ea3c" class="kc kd hi ih b ii ij im in iq lb iu lc iy ld jc kj kk kl km bi translated">确保<code class="du le lf lg ks b">serverless.yml</code>中<code class="du le lf lg ks b">project.credentials</code>的值指向具有适当角色的<a class="ae jd" href="https://serverless.com/framework/docs/providers/google/guide/credentials#get-credentials--assign-roles" rel="noopener ugc nofollow" target="_blank">凭证，Serverless可以使用这些凭证在您的项目</a>中创建资源。</li><li id="13ec" class="kc kd hi ih b ii lh im li iq lj iu lk iy ll jc kj kk kl km bi translated"><a class="ae jd" href="https://serverless.com/framework/docs/providers/google/cli-reference/deploy/" rel="noopener ugc nofollow" target="_blank">展开</a></li></ol><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="6fbb" class="kw jf hi ks b fi kx ky l kz la">serverless deploy</span></pre><h1 id="bbd9" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">拆卸</h1><h1 id="7b0f" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">如果使用无服务器框架部署</h1><p id="c4ba" class="pw-post-body-paragraph if ig hi ih b ii ke ik il im kf io ip iq lm is it iu ln iw ix iy lo ja jb jc hb bi translated"><a class="ae jd" href="https://serverless.com/framework/docs/providers/google/cli-reference/remove/" rel="noopener ugc nofollow" target="_blank">移除</a></p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="bda7" class="kw jf hi ks b fi kx ky l kz la">serverless remove</span></pre><h1 id="2482" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">常见问题解答</h1><h1 id="7da4" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">这要花多少钱？</h1><p id="7f09" class="pw-post-body-paragraph if ig hi ih b ii ke ik il im kf io ip iq lm is it iu ln iw ix iy lo ja jb jc hb bi translated">每次构建调用3次函数:</p><ul class=""><li id="0095" class="kc kd hi ih b ii ij im in iq lb iu lc iy ld jc lp kk kl km bi translated">当构建排队时</li><li id="ace1" class="kc kd hi ih b ii lh im li iq lj iu lk iy ll jc lp kk kl km bi translated">当构建开始时</li><li id="34d2" class="kc kd hi ih b ii lh im li iq lj iu lk iy ll jc lp kk kl km bi translated">当构建达到最终状态时。</li></ul></div></div>    
</body>
</html>