<html>
<head>
<title>Explorer for Google Groups</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google群组浏览器</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/explorer-for-google-groups-4de258b1344f?source=collection_archive---------1-----------------------#2020-12-26">https://medium.com/google-cloud/explorer-for-google-groups-4de258b1344f?source=collection_archive---------1-----------------------#2020-12-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3586" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">边和节点数天</h2></div><p id="74e9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有没有碰到过谷歌<a class="ae jt" href="https://support.google.com/a/answer/33343" rel="noopener ugc nofollow" target="_blank">管理员管理的群组</a>母公司<a class="ae jt" href="https://support.google.com/a/answer/6099642?hl=en#membershiplimits" rel="noopener ugc nofollow" target="_blank">限制</a>？对于B2B多租户应用程序授权来说，它们可能是一个问题，特别是如果您以差异化的方式提供Google云存储对象。</p><p id="528c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用<a class="ae jt" href="https://github.com/demoforwork/public/tree/master/Groupcount" rel="noopener ugc nofollow" target="_blank">这个工具</a>来主动检查你是否正在接近这些极限，并了解热点。</p><ul class=""><li id="0a48" class="ju jv hi iz b ja jb jd je jg jw jk jx jo jy js jz ka kb kc bi translated">它为离线分析提供了可视化工具和CSV</li><li id="72a3" class="ju jv hi iz b ja kd jd ke jg kf jk kg jo kh js jz ka kb kc bi translated">批处理模式使您能够在低加载时间运行它，并在以后分析缓存的结果</li></ul><p id="7607" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以搜索要映射其祖先的身份(用户、服务帐户或组)，或者搜索要显示其摘要统计信息的组前缀。</p><p id="e0b2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您还可以在可视化工具中突出显示组的父组，以识别潜在的组优化。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ki"><img src="../Images/be5e9b8ec6be4ca3d8bdd566b049d260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3pLBZ-ycov51Vdqi7e1dbQ.png"/></div></div></figure><h1 id="0e94" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">考虑</h1><p id="1ed4" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">效用不包括组所有权，组所有权计入配额；除了扫描整个组树之外，没有其他方法可以做到这一点。</p><p id="1a43" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每条边通过多个组将子节点连接到单个父节点(即菱形图案)算；对于某些孩子，实际组限制的计算方式可能会有所不同。</p><h1 id="d42c" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">缩放比例</h1><p id="30d5" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">除了前面提到的批处理模式之外，该实用程序还采取了许多措施来解决性能和可伸缩性问题；它…</p><ul class=""><li id="0c22" class="ju jv hi iz b ja jb jd je jg jw jk jx jo jy js jz ka kb kc bi translated">缓存以前的查询结果。</li><li id="239c" class="ju jv hi iz b ja kd jd ke jg kf jk kg jo kh js jz ka kb kc bi translated">支持多个服务帐户，因为<a class="ae jt" href="https://developers.google.com/admin-sdk/directory/v1/limits" rel="noopener ugc nofollow" target="_blank"> Admin SDK Directory API </a>组配额指标的某些方面是基于身份的；两个服务帐户似乎足以支持读取近5k个组。</li><li id="d35d" class="ju jv hi iz b ja kd jd ke jg kf jk kg jo kh js jz ka kb kc bi translated">利用与<a class="ae jt" href="https://gobyexample.com/waitgroups" rel="noopener ugc nofollow" target="_blank"> WaitGroups </a>的Go并发性。</li><li id="3251" class="ju jv hi iz b ja kd jd ke jg kf jk kg jo kh js jz ka kb kc bi translated">实现<a class="ae jt" href="https://github.com/golang/go/wiki/RateLimiting" rel="noopener ugc nofollow" target="_blank">基于通道的节流</a>。</li></ul><p id="530e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注意，对于像这个实用程序这样的恒定负载应用程序，<a class="ae jt" href="https://developers.google.com/admin-sdk/directory/v1/limits#backoff" rel="noopener ugc nofollow" target="_blank">指数补偿</a>实际上增加了负载；它只对尖峰负载用例有用。</p><h1 id="5ef7" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">网络服务器</h1><p id="7339" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">Go webserver实现了特定于端点的方法来提供静态文件、动态生成的JSON和交互式查询响应。</p><h1 id="0d4c" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">形象化</h1><p id="6ee7" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">图形可视化基于<a class="ae jt" href="https://visjs.github.io/vis-network/examples/" rel="noopener ugc nofollow" target="_blank"> vis.js网络图</a>，包括一个用于模拟的样本数据生成器。</p><p id="fd69" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为5k节点调优可视化需要一点反复试验。例如，<a class="ae jt" href="https://visjs.github.io/vis-network/docs/network/physics.html" rel="noopener ugc nofollow" target="_blank">基于物理的图</a>改善了大型图的节点间距，但对于数千个节点来说太慢了；然而，一些物理选项仍然有一个有用的效果，尽管它不同于启用物理时的效果。</p></div><div class="ab cl lr ls gp lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hb hc hd he hf"><h1 id="c9cc" class="ku kv hi bd kw kx ly kz la lb lz ld le io ma ip lg ir mb is li iu mc iv lk ll bi translated">题外话:限速器</h1><p id="45ed" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">为了测试Explorer实用程序的伸缩性，我需要一个具有足够嵌套的大型组层次结构，这又意味着另一个实用程序。创建组层次比阅读它的性能差得多。</p><p id="10bc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Explorer实用程序使用<a class="ae jt" href="https://github.com/golang/go/wiki/RateLimiting" rel="noopener ugc nofollow" target="_blank">基于通道的节流</a>，但是显然这种方法<a class="ae jt" href="https://rodaine.com/2017/05/x-files-time-rate-golang/" rel="noopener ugc nofollow" target="_blank">在开销</a>上花费了不成比例的时间，一旦你每秒处理几十个查询，那么最好使用<a class="ae jt" href="https://pkg.go.dev/golang.org/x/time/rate?tab=doc" rel="noopener ugc nofollow" target="_blank">速率限制器包</a>。</p><p id="7475" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据<a class="ae jt" href="https://pkg.go.dev/golang.org/x/time/rate#Limiter" rel="noopener ugc nofollow" target="_blank">限速器文档</a>，大多数呼叫者应该使用等待；然而，我找到的所有代码示例都使用了Allow和Reserve。Daz Wilkin提供了这个很棒的片段，演示了上下文和突发参数的正确使用。</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="md me l"/></div></figure></div><div class="ab cl lr ls gp lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hb hc hd he hf"><h1 id="d3c0" class="ku kv hi bd kw kx ly kz la lb lz ld le io ma ip lg ir mb is li iu mc iv lk ll bi translated">下一步是什么</h1><p id="865a" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">将该实用程序升级到:</p><ul class=""><li id="d6cd" class="ju jv hi iz b ja jb jd je jg jw jk jx jo jy js jz ka kb kc bi translated"><a class="ae jt" href="https://cloud.google.com/identity/docs/reference/rest" rel="noopener ugc nofollow" target="_blank">云身份API</a>；它提供了比Admin SDK API配额高得多的默认读取配额。</li><li id="4cb7" class="ju jv hi iz b ja kd jd ke jg kf jk kg jo kh js jz ka kb kc bi translated"><a class="ae jt" href="https://pkg.go.dev/golang.org/x/time/rate?tab=doc" rel="noopener ugc nofollow" target="_blank">速率限制器包</a>原因在文中讨论。</li></ul><p id="6d64" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">调查这个<a class="ae jt" href="https://github.com/salrashid123/gsuites_gcp_graphdb" rel="noopener ugc nofollow" target="_blank">综合组、IAM策略和项目可视化实用程序</a>是否更好地满足您的需求。</p><ul class=""><li id="4cb4" class="ju jv hi iz b ja jb jd je jg jw jk jx jo jy js jz ka kb kc bi translated">它包括层次结构中的云IAM策略和项目。</li><li id="21f5" class="ju jv hi iz b ja kd jd ke jg kf jk kg jo kh js jz ka kb kc bi translated">它将数据加载到JanusGraph数据库中，您可以使用多种工具对其进行可视化。</li></ul><p id="6257" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">审查您是否可以通过降低<a class="ae jt" href="https://cloud.google.com/iam/docs/downscoping-short-lived-credentials" rel="noopener ugc nofollow" target="_blank">凭证访问边界</a>的范围来替换部分或全部管理Google云存储访问的小组。</p><ul class=""><li id="d121" class="ju jv hi iz b ja jb jd je jg jw jk jx jo jy js jz ka kb kc bi translated">这些在存储桶和对象级别都受支持。</li><li id="792a" class="ju jv hi iz b ja kd jd ke jg kf jk kg jo kh js jz ka kb kc bi translated">您可以创建一个可以访问您拥有的每个云存储桶的服务帐户，然后应用一个凭据访问边界，只允许访问包含您客户数据的桶。</li><li id="391b" class="ju jv hi iz b ja kd jd ke jg kf jk kg jo kh js jz ka kb kc bi translated">您可以创建一个IAM条件，为名称以特定前缀开头的对象提供权限。</li></ul></div></div>    
</body>
</html>