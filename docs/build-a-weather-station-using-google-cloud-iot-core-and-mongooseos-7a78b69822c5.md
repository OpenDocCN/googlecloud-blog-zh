# ä½¿ç”¨è°·æ­Œäº‘ç‰©è”ç½‘æ ¸å¿ƒå’Œ MongooseOS æž„å»ºæ°”è±¡ç«™

> åŽŸæ–‡ï¼š<https://medium.com/google-cloud/build-a-weather-station-using-google-cloud-iot-core-and-mongooseos-7a78b69822c5?source=collection_archive---------0----------------------->

## ä½¿ç”¨æ‰˜ç®¡çš„æ— æœåŠ¡å™¨æž¶æž„æ”¶é›†å¤§é‡æ•°æ®ï¼Œè¿™æ ·æ‚¨å°±ä¸ä¼šåœ¨æ­¤è¿‡ç¨‹ä¸­è‡ªå¯»çƒ¦æ¼ã€‚

å¥½çš„ï¼Œæœ‰å¾ˆå¤šæ•™ç¨‹æ•™ä½ å¦‚ä½•å»ºç«‹ä¸€ä¸ªæ°”è±¡ç«™ï¼Œå› ä¸ºæœ‰å¾ˆå¤šæ–¹æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„é¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘ä¼šåŠªåŠ›ä¸“æ³¨äºŽå»ºç«‹ä¸€ä¸ªç«¯åˆ°ç«¯çš„è§£å†³æ–¹æ¡ˆï¼Œä»Žæ”¶é›†æ•°æ®åˆ°å¯¹æ‚¨çš„æ•°æ®è¿›è¡Œåˆ†æžã€‚æ‰€æœ‰è¿™äº›éƒ½å°†ä½¿ç”¨æ‰˜ç®¡çš„è°·æ­Œäº‘æœåŠ¡ï¼Œæ¦‚è¿°å¦‚ä½•æž„å»ºä¸€ä¸ªå®Œæ•´çš„ç‰©è”ç½‘è§£å†³æ–¹æ¡ˆã€‚æœ€åŽï¼Œæ‚¨å¯ä»¥åŸºäºŽæ‚¨çš„æ•°æ®æž„å»ºæŠ¥å‘Šï¼Œå¹¶é€šè¿‡ web è®¿é—®å®ƒã€‚åœ¨è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°å®ƒçš„æ ·å­:

![](img/0266720d4a968d977796c7d40932f8e4.png)![](img/5263999358bf7d335a269cdc2bf0299f.png)

æˆ‘ä»¬é¡¹ç›®çš„æœ€ç»ˆå¤–è§‚

> æˆ‘ä»¬å®Œæˆçš„ web app:[https://weather-station-iot-170004.firebaseapp.com](https://weather-station-iot-170004.firebaseapp.com)/
> 
> æ•°æ®å·¥ä½œå®¤æŠ¥é“:[https://data Studio . Google . com/reporting/0 b 0 w5 dnm 9 BD 8 SD y1 or 1 lzq 0 l4 VMC](https://datastudio.google.com/reporting/0B0w5dnm9bD8sdy1OR1lZQ0l4Vmc)

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿è¡Œ **MongooseOS** çš„ WiFi å¾®æŽ§åˆ¶å™¨æž„å»ºä¸€ä¸ªæ°”è±¡ç«™ï¼Œå®ƒä½¿ç”¨ MQTT åè®®é€šè¿‡**äº‘ç‰©è”ç½‘æ ¸å¿ƒ**å®‰å…¨åœ°å‘é€æ•°æ®ï¼Œç„¶åŽä½¿ç”¨ **Firebase äº‘å‡½æ•°**ä»¥åŸºäºŽäº‹ä»¶çš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œè¿™äº›å‡½æ•°å°†åŽŸå§‹æ•°æ®ä¿å­˜åœ¨ **BigQuery** ä¸­ï¼Œå¹¶æ›´æ–° **Firebase å®žæ—¶æ•°æ®åº“**ä¸­çš„è®¾å¤‡å½“å‰çŠ¶æ€ã€‚ç„¶åŽå¯ä»¥é€šè¿‡ **DataStudio** å’Œ **Firebase Hosting** ä¸Šæ‰˜ç®¡çš„ç®€å• WebApp è®¿é—®æ•°æ®ã€‚æœ‰è®¸å¤šäº§å“ï¼Œä½†æˆ‘å°†å±•ç¤ºå¦‚ä½•è½»æ¾åœ°è¿žæŽ¥æ¯ä¸€ä¸ªäº§å“ï¼Œä»¥éƒ¨ç½²ä¸€ä¸ªæŒ‰éœ€æ‰©å±•çš„äº§å“ã€‚æˆ‘ä»¬çš„æž¶æž„å°†ä¼šæ˜¯è¿™æ ·çš„:

![](img/e9bac6b4c00bf5a65f10bf88fda0e87a.png)

æˆ‘ä»¬çš„é¡¹ç›®æž¶æž„

ä¸ºäº†ä¾¿äºŽå¼€å‘ï¼Œæˆ‘å°†ä½¿ç”¨ MongooseOSï¼Œå®ƒå·²ç»æœ‰ä¸€ä¸ªç”¨äºŽäº‘ç‰©è”ç½‘æ ¸å¿ƒçš„è¿žæŽ¥å™¨ï¼Œå¹¶æœ‰åŠ©äºŽä¸ºè®¾å¤‡æä¾›è¯ä¹¦ã€WiFi é…ç½®å’Œå…¶ä»–è‡ªå®šä¹‰é…ç½®çš„è¿‡ç¨‹ã€‚

æˆ‘ä»¬å°†å­¦åˆ°ä»€ä¹ˆ:

*   åˆ›å»ºäº‘ç‰©è”ç½‘æ ¸å¿ƒè®¾å¤‡æ³¨å†Œè¡¨ã€‚
*   åˆ›å»º PubSub ä¸»é¢˜ä»¥æŽ¥æ”¶å’Œå‘é€æ•°æ®ã€‚
*   å®‰è£… MongooseOS å‘½ä»¤è¡Œå·¥å…·â€” *mosã€‚*
*   ä½¿ç”¨ *mos å¯¹ ESP32/ESP8266 è¿›è¡Œç¼–ç¨‹ã€‚*
*   ä¸ºè®¾å¤‡æä¾›è¯ä¹¦å’Œ WiFi é…ç½®ã€‚
*   è®¾ç½® BigQuery å’Œ Firebase æ¥æŽ¥æ”¶æ•°æ®ã€‚
*   éƒ¨ç½² Firebase äº‘åŠŸèƒ½æ¥æŽ¥æ”¶æ•°æ®ã€‚
*   åœ¨ Firebase æ‰˜ç®¡ä¸­éƒ¨ç½²ä¸€ä¸ªåŸºæœ¬çš„ WebAppã€‚
*   ä½¿ç”¨ Data Studio åœ¨ BigQuery ä¸­åˆ¶ä½œæŠ¥è¡¨ã€‚

è¯´å¾—å¤Ÿå¤šäº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ðŸš€ã€‚

## è®¾ç½®è°·æ­Œäº‘é¡¹ç›®å’Œäº‘ç‰©è”ç½‘æ ¸å¿ƒ

è°·æ­Œæœ€è¿‘å…¬å¼€æŽ¨å‡ºäº† beta Cloud IoT Coreï¼Œè¿™æ˜¯ä¸€ç§æ‰˜ç®¡æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨é€šç”¨åè®®(MQTT å’Œ HTTP)å®‰å…¨åœ°ä¸Žç‰©è”ç½‘è®¾å¤‡è¿›è¡Œé€šä¿¡ï¼Œå¹¶ä»¥ç®€å•çš„æ–¹å¼ç®¡ç†è¿™äº›è®¾å¤‡ã€‚åŸºæœ¬ä¸Šï¼Œæœ‰äº†è¿™é¡¹æœåŠ¡ï¼Œä½ å¯ä»¥æ’å…¥è®¸å¤šå…¶ä»–è°·æ­ŒæœåŠ¡æ¥å¤„ç†ã€å­˜å‚¨å’Œåˆ†æžä½ çš„è®¾å¤‡äº§ç”Ÿçš„æ‰€æœ‰æ•°æ®ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªä½¿ç”¨äº‘ç‰©è”ç½‘æ ¸å¿ƒçš„æŽ¨èæž¶æž„ç¤ºä¾‹ã€‚

![](img/d9abec421644e9a0285e53cdd24e027f.png)

æµç»è®¸å¤šè°·æ­ŒæœåŠ¡çš„æ•°æ®ã€‚

äº‘ç‰©è”ç½‘æ ¸å¿ƒæœ‰ä¸€ä¸ªè®¾å¤‡æ³¨å†Œè¡¨çš„æ¦‚å¿µï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†å¯¹ä¸€ç³»åˆ—ç±»ä¼¼çš„è®¾å¤‡è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ä¸Žè¯¥æ³¨å†Œè¡¨ç›¸å…³è”ã€‚è¦å¼€å§‹ä½¿ç”¨è°·æ­Œäº‘ï¼Œä½ å¯ä»¥åœ¨äº‘æŽ§åˆ¶å° web ç•Œé¢ä¸Šåšæ‰€æœ‰çš„äº‹æƒ…ï¼Œä½†å‘½ä»¤è¡Œå·¥å…·æ˜¯ä¸€ä¸ªæ›´å¼ºå¤§çš„å·¥å…·ï¼Œä¹Ÿæ˜¯æˆ‘é€‰æ‹©åœ¨è¿™ä¸ªé¡¹ç›®ä¸Šä½¿ç”¨çš„å·¥å…·ã€‚

è¦ä½¿ç”¨`gcloud`å‘½ä»¤è¡Œå·¥å…·ï¼Œ[æŒ‰ç…§è¿™é‡Œçš„è¯´æ˜Žä¸‹è½½å¹¶å®‰è£…å®ƒ](https://cloud.google.com/sdk/downloads)ã€‚

 [## å®‰è£… Cloud SDK | Cloud SDK æ–‡æ¡£| Google äº‘å¹³å°

### ç¼–è¾‘æè¿°

cloud.google.com](https://cloud.google.com/sdk/downloads) 

å®‰è£… SDK åŽï¼Œæ‚¨åº”è¯¥å®‰è£…æµ‹è¯•ç‰ˆå·¥å…·æ¥è®¿é—®äº‘ç‰©è”ç½‘æ ¸å¿ƒå‘½ä»¤ã€‚æ­¤å¤–ï¼Œåœ¨æ­¤ä¹‹åŽï¼Œæ‚¨åº”è¯¥éªŒè¯å¹¶åˆ›å»ºä¸€ä¸ªåœ¨æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„é¡¹ç›®ï¼Œå°†æ‚¨çš„ _PROJECT_NAME æ›¿æ¢ä¸ºæ‚¨å¸Œæœ›ç”¨äºŽæ­¤é¡¹ç›®çš„åç§°:

```
# Install beta components:
**gcloud components install beta** # Authenticate with Google Cloud:
**gcloud auth login** # Create cloud project â€” choose your unique project name:
**gcloud projects create YOUR_PROJECT_NAME** # Set current project **gcloud config set project YOUR_PROJECT_NAME**
```

çŽ°åœ¨åœ¨äº‘ç‰©è”ç½‘æ ¸å¿ƒç«¯ï¼Œä½ é¦–å…ˆåº”è¯¥é…ç½®ä¸€äº›ä¸Žäº‘ç‰©è”ç½‘æ ¸å¿ƒä½¿ç”¨çš„ä¸»è¦ç»„ä»¶ä¹‹ä¸€ Cloud PubSub ç›¸å…³çš„ç»„ä»¶ã€‚åœ¨ä¸‹é¢çš„å‘½ä»¤ä¸­ï¼Œæ‚¨å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œ:

1.  æŽˆäºˆäº‘ç‰©è”ç½‘æ ¸å¿ƒåœ¨ PubSub ä¸Šå‘å¸ƒæ¶ˆæ¯çš„æƒé™ã€‚
2.  åˆ›å»ºä¸€ä¸ªåä¸º *telemetry-topicã€*çš„**ä¸»é¢˜**ï¼Œè¿™äº›æ¶ˆæ¯å°†åœ¨è¿™é‡Œå‘å¸ƒã€‚
3.  åˆ›å»ºä¸€ä¸ªåä¸º*é¥æµ‹è®¢é˜…*çš„**è®¢é˜…**ï¼Œæˆ‘ä»¬ç¨åŽå°†ä½¿ç”¨å®ƒæ¥è¯»å–ä¸»é¢˜ä¸­çš„ä¸€äº›æ¶ˆæ¯ã€‚
4.  åˆ›å»ºä¸€ä¸ªåä¸º*weather-station-Registry*çš„**æ³¨å†Œè¡¨**ï¼Œæˆ‘ä»¬çš„è®¾å¤‡å°†åœ¨å…¶ä¸­æ³¨å†Œï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿žæŽ¥åˆ°**äº‘ç‰©è”ç½‘æ ¸å¿ƒ**ã€‚è¿™é‡Œæˆ‘ä»¬è”æƒ³åˆ°**ä¸»é¢˜**çš„åˆ›å»ºã€‚

```
# Add permissions for IoT Core **gcloud projects add-iam-policy-binding YOUR_PROJECT_NAME --member=serviceAccount:cloud-iot@system.gserviceaccount.com --role=roles/pubsub.publisher** # Create PubSub topic for device data:
**gcloud beta pubsub topics create telemetry-topic** # Create PubSub subscription for device data:
**gcloud beta pubsub subscriptions create --topic telemetry-topic telemetry-subscription** # Create device registry:
**gcloud beta iot registries create weather-station-registry --region us-central1 --event-pubsub-topic=telemetry-topic**
```

å¦‚æžœæ‚¨è®¿é—® Google Cloud æŽ§åˆ¶å°ï¼Œæ‚¨å¯ä»¥éªŒè¯å®ƒå·²ç»åˆ›å»ºå¹¶é…ç½®å®Œæ¯•ã€‚

![](img/b844898850547c552e42cfb15af13c8c.png)

å·²åˆ›å»ºå¹¶ä¸Žå‘å¸ƒè®¢é˜…ä¸»é¢˜ç›¸å…³è”çš„æ³¨å†Œè¡¨

## çŒ«é¼¬æ“ä½œç³»ç»Ÿå’Œ ESP32/ESP8266

å¯¹äºŽè¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘å°†ä½¿ç”¨æœ€æ–°çš„ ESP32 WiFi å¾®æŽ§åˆ¶å™¨ï¼Œå¯¹äºŽé‚£äº›è¿˜ä¸çŸ¥é“å®ƒçš„äººæ¥è¯´ï¼Œå®ƒæ˜¯ ExpressIf éžå¸¸è‘—åçš„ ESP8266 çš„ç»§ä»»è€…ï¼Œä½†çŽ°åœ¨å…·æœ‰æ›´å¤šåŠŸèƒ½ï¼Œå¦‚å†…ç½®è“ç‰™ LEã€æ—¶é’Ÿé¢‘çŽ‡ä¸º 240MHz çš„åŒæ ¸å¤„ç†å™¨ã€è§¦æ‘¸ä¼ æ„Ÿå™¨å’Œå¯¹é—ªå­˜åŠ å¯†çš„æ”¯æŒï¼Œæ‰€ä»¥æ²¡æœ‰äººå¯ä»¥è®¿é—®æ‚¨çš„ä»£ç ã€‚ä¸€æ¬¡å‡çº§ã€‚

![](img/2df098949ad778786485cd77424cedff.png)

çŒ«é¼¬æ“ä½œç³»ç»Ÿå’Œè°·æ­Œç‰©è”ç½‘æ ¸å¿ƒåŒ…ï¼Œå¸¦é˜¿è¾¾æžœç¾½æ¯› huzzah 32â€”[https://www.adafruit.com/product/3606](https://www.adafruit.com/product/3606)

Adafruit å‡ºå”®ä¸€ä¸ªéžå¸¸æ£’çš„å·¥å…·åŒ…ï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨ ESP32 å’Œè°·æ­Œäº‘ï¼Œå®ƒåŒ…å«äº†è¿™ä¸ªé¡¹ç›®å’Œè®¸å¤šå…¶ä»–é¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼Œæ‰€ä»¥å¦‚æžœä½ æƒ³èµ°ç®€å•çš„è·¯ï¼Œä½ å¯ä»¥è´­ä¹°å…¶ä¸­ä¸€ä¸ªã€‚(åªæ˜¯ç»™ä½ ä¸€ä¸ªæƒ³æ³•[é˜¿è¾¾æžœå·¥ä¸š](https://medium.com/u/c9914184139c?source=post_page-----7a78b69822c5--------------------------------)ï¼Œæˆ‘æ²¡æœ‰è¿™äº›ï¼Œåªæ˜¯è¯´â€¦)

![](img/22f7f7df94e2f730981d399c3f717c16.png)

è¯¥é¡¹ç›®é‡‡ç”¨ ESP å¾®æŽ§åˆ¶å™¨ ESP32 å’Œ ESP8266ã€‚

è¿™ä¸ªé¡¹ç›®ä¹Ÿå¯ä»¥åœ¨ ESP8266 ä¸Šè¿è¡Œï¼Œæ‰€ä»¥è¿™é‡Œæä¾›çš„ä»£ç å’ŒåŽŸç†å›¾å¯ä»¥åœ¨ä¸¤ä¸ªå¾®æŽ§åˆ¶å™¨ä¸Šè¿è¡Œã€‚è¯¥é¡¹ç›®çš„ç”µè·¯éžå¸¸ç®€å•ï¼Œåªéœ€å°† DHT ä¼ æ„Ÿå™¨è¿žæŽ¥åˆ° ESP32/ESP8266ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:

![](img/f5765b5c88d2b178c9a2776706fcc3ec.png)

ä½¿ç”¨ ESP32 å’Œ ESP8266 çš„é¡¹ç›®åŽŸç†å›¾

ä¸ºäº†å¯¹å¼€å‘æ¿è¿›è¡Œç¼–ç¨‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ MongooseOSï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºå•†ä¸šäº§å“å¼€å‘çš„æ“ä½œç³»ç»Ÿï¼Œå…·æœ‰è®¸å¤šä»¤äººæƒŠå¹çš„åŠŸèƒ½ã€‚å®ƒæ”¯æŒä¸€äº›å¾®æŽ§åˆ¶å™¨ï¼Œå¦‚ CC3200ã€ESP32 å’Œ ESP8266ã€‚å®ƒçš„ä¸€ä¸ªå¾ˆé…·çš„åŠŸèƒ½æ˜¯å¯ä»¥ä½¿ç”¨ Javascript å¿«é€ŸåŽŸåž‹åŒ–æ‚¨çš„åµŒå…¥å¼åº”ç”¨ï¼Œå®ƒæœ‰ä¸€ä¸ªåä¸º *mos* çš„å·¥å…·ï¼Œä½¿ç¼–ç¨‹ã€ä¾›åº”å’Œé…ç½®åœ¨é‚£äº›æ”¯æŒçš„æ¿ä¸Šå˜å¾—éžå¸¸å®¹æ˜“ã€‚

è¦ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦ä»Žå®˜æ–¹ç½‘ç«™ä¸‹è½½å¹¶å®‰è£…å®ƒã€‚éµå¾ª[https://mongoose-os.com/docs/quickstart/setup.html](https://mongoose-os.com/docs/quickstart/setup.html)ä¸Šçš„å®‰è£…è¯´æ˜Žã€‚

[](https://mongoose-os.com/docs/quickstart/setup.html) [## Mongoose æ“ä½œç³»ç»Ÿæ–‡æ¡£

### Mongoose æ“ä½œç³»ç»Ÿæ–‡æ¡£å’Œç”¨æˆ·æŒ‡å—

mongoose-os.com](https://mongoose-os.com/docs/quickstart/setup.html) 

## ç¡¬ä»¶ç¼–ç¨‹å’Œè®¾ç½®æˆ‘ä»¬çš„åŽç«¯

å®‰è£…å¥½å·¥å…·åŽï¼Œä¸‹è½½é“¾æŽ¥åˆ°è¿™é‡Œçš„ [Github åº“ä¸Šçš„é¡¹ç›®ä»£ç ](https://github.com/alvarowolfx/weather-station-gcp-mongoose-os)ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥åœ¨è®¾å¤‡ä¸Šæž„å»ºå’Œéƒ¨ç½²å®ƒäº†ã€‚

[](https://github.com/alvarowolfx/weather-station-gcp-mongoose-os) [## alvarowolfx/æ°”è±¡ç«™-GCP-mongose-OS

### ä¸€ä¸ªç”¨ ESP32 åˆ¶ä½œçš„æ°”è±¡ç«™ï¼Œé€šè¿‡è°·æ­Œäº‘ç‰©è”ç½‘æ ¸å¿ƒå’Œâ€¦

github.com](https://github.com/alvarowolfx/weather-station-gcp-mongoose-os) 

çŸ¥è¯†åº“ç”± **3 ä¸ªå­é¡¹ç›®**ç»„æˆ:

*   **å›ºä»¶**:è¿è¡Œåœ¨å¾®æŽ§åˆ¶å™¨ä¸Šçš„ MongooseOS é¡¹ç›®ï¼Œæ”¶é›†ä¼ æ„Ÿå™¨æ•°æ®å¹¶é€šè¿‡äº‘ç‰©è”ç½‘æ ¸å¿ƒå‘é€
*   **åŠŸèƒ½**:å°†éƒ¨ç½²åˆ° Firebase ä¸Šçš„äº‘åŠŸèƒ½ã€‚è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯¹ PubSub ä¸Šçš„æ–°æ•°æ®åšå‡ºååº”ï¼Œç„¶åŽå‘é€åˆ° BigQuery å’Œ Firebase å®žæ—¶æ•°æ®åº“ã€‚è¿˜æœ‰å¦ä¸€ä¸ªåŠŸèƒ½ï¼Œå®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ª HTTP ç«¯ç‚¹ï¼ŒæŸ¥è¯¢ BigQuery ä»¥èŽ·å–æˆ‘ä»¬çš„ WebApp è¦ä½¿ç”¨çš„æœ€è¿‘ 7 å¤©çš„æ•°æ®ã€‚
*   **public** :ä¸€ä¸ªç®€å•çš„ WebAppï¼Œå°†è¢«éƒ¨ç½²åœ¨ Firebase ä¸»æœºä¸Šï¼Œå®ƒå‚è€ƒæˆ‘ä»¬çš„æ•°æ®åº“æ¥æ˜¾ç¤ºæˆ‘ä»¬çš„ä¼ æ„Ÿå™¨æ•°æ®ã€‚

ä¸‹é¢æ˜¯å¯¹**å›ºä»¶**é¡¹ç›®çš„ä¸€äº›æè¿°:

*   fs :è¿™é‡Œæ˜¯æˆ‘ä»¬çš„ Javascript ä»£ç ï¼Œå®ƒåŒ…å«äº†æ‰€æœ‰æ”¶é›†æ•°æ®çš„é€»è¾‘ï¼Œå¹¶ä»¥å›ºå®šçš„æ—¶é—´é—´éš”é€šè¿‡ MQTT å‘é€ã€‚
*   src :æˆ‘ä»¬æœ¬åœ° C ä»£ç ï¼Œbasic å¯åŠ¨äº† Google Cloud libraryï¼Œæ‰€ä»¥å®ƒè‡ªåŠ¨é…ç½®æˆ‘ä»¬çš„é¡¹ç›®æ¥è¿žæŽ¥ Google MQTT æœåŠ¡å™¨ã€‚
*   **mos.yml å’Œ mos_esp8266.yml** :æˆ‘ä»¬çš„é¡¹ç›®é…ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬å£°æ˜Žæˆ‘ä»¬çš„é¡¹ç›®ä¾èµ–é¡¹ï¼Œè¿™é‡Œæ˜¯ GCP åº“ï¼ŒDHT ä¼ æ„Ÿå™¨åº“å’Œ mJS åº“ï¼Œæœ€åŽä¸€ä¸ªå¢žåŠ äº†å¯¹ Javascript embedded çš„æ”¯æŒã€‚è¿™é‡Œæˆ‘ä»¬å£°æ˜Žäº†ä¸€ä¸ªåä¸º **app.dht çš„è‡ªå®šä¹‰é…ç½®å˜é‡ï¼Œ**è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ›´æ”¹è¿™ä¸ªé…ç½®æ¥æ›´æ”¹ dht å¼•è„šï¼Œè¿™å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸Šè¿›è¡Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡ *mos* å·¥å…·è¿›è¡Œã€‚æ­¤å¤–ï¼Œè¿™ç§é…ç½®åœ¨ä¸åŒçš„å¾®æŽ§åˆ¶å™¨ä¹‹é—´ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œå¢žåŠ äº†å¯¹å…·æœ‰ç›¸åŒä»£ç çš„ä¸¤ä¸ªå¾®æŽ§åˆ¶å™¨çš„æ”¯æŒã€‚

è¦å¯¹ç¡¬ä»¶è¿›è¡Œç¼–ç¨‹ï¼Œè¯·è¿›å…¥**å›ºä»¶**æ–‡ä»¶å¤¹å¹¶è¿è¡Œä»¥ä¸‹æŒ‡ä»¤æ¥åˆ·æ–°å›ºä»¶ã€é…ç½® WiFi å¹¶åœ¨äº‘ç‰©è”ç½‘æ ¸å¿ƒä¸Šé…ç½®è®¾å¤‡:

*   æ ¹æ®æ‰€é€‰ç¡¬ä»¶è¿è¡Œ`mos build --arch esp32`æˆ–`mos build --arch esp8266`ã€‚è¿™ä¸ªå‘½ä»¤æž„å»ºæˆ‘ä»¬ç¡¬ä»¶çš„å›ºä»¶ã€‚
*   é€šè¿‡ USB è¿žæŽ¥ç¡¬ä»¶è¿è¡Œ`mos flash`ï¼Œåˆ·æ–°å›ºä»¶ã€‚
*   è¿è¡Œ`mos wifi your_ssid your_pass`åœ¨æ‚¨çš„è®¾å¤‡ä¸Šé…ç½® WiFiã€‚
*   è¿è¡Œä»¥ä¸‹å‘½ä»¤åœ¨äº‘ IoT ä»£ç ä¸Šæ³¨å†Œæ­¤è®¾å¤‡ã€‚è¯¥å‘½ä»¤ç”Ÿæˆç”¨äºŽé€šä¿¡çš„å…¬é’¥å’Œç§é’¥ï¼Œå°†ç§é’¥æ”¾åœ¨è®¾å¤‡ä¸Šï¼Œå°†å…¬é’¥å‘é€åˆ°äº‘ç‰©è”ç½‘æ ¸å¿ƒå¹¶æ³¨å†Œè®¾å¤‡ï¼Œä»Ž ESP èŽ·å–è®¾å¤‡ Idã€‚è°¢è°¢è’™å¤äººâ¤.

```
mos gcp-iot-setup --gcp-project **YOUR_PROJECT_NAME** --gcp-region us-central1 --gcp-registry **YOUR_REGISTRY**
```

å°±æ˜¯è¿™æ ·ï¼Œä½ çš„è®¾å¤‡å°†å¼€å§‹å‘äº‘ç‰©è”ç½‘æ ¸å¿ƒå‘é€æ•°æ®ã€‚è¿™äº›é¡¹ç›®è¢«é…ç½®ä¸ºæ¯åˆ†é’Ÿå‘é€æ•°æ®ï¼Œä½†æ˜¯æ‚¨å¯ä»¥ç¨åŽåœ¨ **fs/init.js** æ–‡ä»¶ä¸­æ›´æ”¹è¿™ä¸€ç‚¹ï¼Œæˆ–è€…æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå®šåˆ¶çš„é…ç½®å˜é‡æ¥æ›´æ”¹æ—¶é—´ã€‚æˆ‘ä¼šæŠŠè¿™ä¸ªä½œä¸ºå®¶åº­ä½œä¸šã€‚ä½ å¯ä»¥ä½¿ç”¨`mos console`å·¥å…·çœ‹åˆ°è®¾å¤‡ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆã€‚ä½ ä¼šçœ‹åˆ°å®ƒè¯•å›¾ä¸Ž mqtt.googleapis.com å»ºç«‹è”ç³»ã€‚

```
$ mos console
Using port /dev/cu.SLAB_USBtoUART
[Oct 15 18:17:47.230] pm open,type:2 0
[Oct 15 18:17:47.234] mgos_sntp_ev         SNTP reply from 192.99.2.8: time 1508102268.124028, local 15.317275, delta 1508102252.806753
[Oct 15 18:17:47.448] mgos_mqtt_ev         MQTT CONNACK 4
[Oct 15 18:17:47.455] mgos_mqtt_ev         MQTT Disconnect
[Oct 15 18:17:47.463] mqtt_global_reconnec MQTT connecting after 2017 ms
[Oct 15 18:17:48.167] Info: {"hum":34,"temp":30,"free_ram":35.593750,"total_ram":51.218750} 
[Oct 15 18:17:49.487] mgos_mqtt_global_con MQTT connecting to mqtt.googleapis.com:8883
```

è¦æŸ¥çœ‹ PubSub ä¸Šçš„æ•°æ®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ gcloud å‘½ä»¤æ¥æŸ¥è¯¢æˆ‘ä»¬åˆ›å»ºçš„è®¢é˜…:

```
$ gcloud beta pubsub subscriptions pull --auto-ack telemetry-subscription
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            DATA                           â”‚    MESSAGE_ID   â”‚                                                                                    ATTRIBUTES                                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {"hum":35,"temp":32,"free_ram":167344,"total_ram":253928} â”‚ 158362578982703 â”‚ deviceId=esp32_02455C deviceNumId=2799497560622332 deviceRegistryId=weather-station-registry deviceRegistryLocation=us-central1 projectId=weather-station-iot-170004 subFolder= â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å¦‚æžœä½ çœ‹åˆ°æŽ§åˆ¶å°ä¸Šçš„æ•°æ®ï¼Œä½ å¯ä»¥å¼€å§‹åº†ç¥ï¼Œæˆ‘ä»¬èµ°åœ¨æ­£ç¡®çš„é“è·¯ä¸ŠðŸŽ‰ðŸ†ã€‚

## åœ¨ BigQuery ä¸Šå­˜å‚¨æ•°æ®

ç›´æŽ¥ä»Žå®˜ç½‘èŽ·å–å®šä¹‰:

> BigQuery æ˜¯ Google çš„ä½Žæˆæœ¬ã€å®Œå…¨å¯ç®¡ç†çš„ Pb çº§å¯æ‰©å±•æ•°æ®å­˜å‚¨æœåŠ¡ã€‚BigQuery æ˜¯ç‹¬ç«‹çš„ï¼Œä¸éœ€è¦ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œä¹Ÿä¸éœ€è¦æ•°æ®åº“ç®¡ç†å‘˜ï¼Œå› ä¸ºå®ƒå¯ä»¥éšæ•°æ®æ‰©å±•ã€‚

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥å­˜å‚¨æˆ‘ä»¬æ”¶é›†çš„æ‰€æœ‰ä¼ æ„Ÿå™¨æ•°æ®ï¼Œä»¥è¿è¡Œä¸€äº›æŸ¥è¯¢ï¼Œå¹¶åœ¨ä»¥åŽä½¿ç”¨ Data Studio æž„å»ºæŠ¥å‘Šã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª**æ•°æ®é›†**å’Œä¸€ä¸ª**è¡¨**æ¥å­˜å‚¨æˆ‘ä»¬çš„æ•°æ®ã€‚ä¸ºæ­¤ï¼Œ[æ‰“å¼€ BigQuery Web UI](https://bigquery.cloud.google.com/) ï¼Œå¹¶æŒ‰ç…§è¯´æ˜Žè¿›è¡Œæ“ä½œ:

1.  å•å‡»å‘ä¸‹ç®­å¤´å›¾æ ‡ï¼Œç„¶åŽå•å‡»â€œåˆ›å»ºæ–°æ•°æ®é›†**â€**ã€‚
2.  æŠŠä½ çš„**æ•°æ®é›†**å‘½åä¸ºâ€œweather_station_iot **â€ã€‚**
3.  ä½¿ç”¨ä»¥ä¸‹å­—æ®µå’Œç±»åž‹åˆ›å»ºä¸€ä¸ª**è¡¨"** raw_data **"** :

![](img/1e76b5de757bd5a1733133feba585c36.png)

æˆ‘ä»¬çš„ BigQuery è¡¨æ¥å­˜å‚¨ä¼ æ„Ÿå™¨æ•°æ®ã€‚

## éƒ¨ç½² Firebase æ•°æ®åº“å’Œäº‘åŠŸèƒ½

çŽ°åœ¨ï¼Œä¸ºäº†åœ¨ BigQuery ä¸Šæ’å…¥æ•°æ®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Firebase äº‘å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥é…ç½®ä¸ºåŸºäºŽè®¸å¤šä¸åŒçš„è§¦å‘å™¨å’Œäº‹ä»¶æ¥æ‰§è¡Œã€‚å…¶ä¸­ä¸€ä¸ªè§¦å‘å™¨æ˜¯æ’å…¥åˆ° PubSub ä¸»é¢˜ä¸­çš„æ–°æ•°æ®ï¼Œå› æ­¤æˆ‘ä»¬å°†ä¾¦å¬ä¸Žæˆ‘ä»¬çš„è®¾å¤‡æ³¨å†Œè¡¨ç›¸å…³è”çš„ä¸»é¢˜ï¼Œå¯¹äºŽæ¯ä¸ªåˆ°è¾¾çš„æ•°æ®ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå°†æ•°æ®å­˜å‚¨åœ¨ BigQuery ä¸­ï¼Œå¹¶åœ¨ Firebase å®žæ—¶æ•°æ®åº“ä¸­ç»´æŠ¤æœ€æ–°çš„è®¾å¤‡æ•°æ®ã€‚

![](img/e9e8d36deb6a8886a23ba0ce027d9200.png)

Firebase äº‘åŠŸèƒ½çš„è§¦å‘å› ç´ â€” Google Cloud Next 2017

Firebase å®žæ—¶æ•°æ®åº“æ˜¯ä¸€é¡¹éžå¸¸æœ‰ç”¨çš„æŠ€æœ¯ï¼Œå¯ä»¥ç»´æŠ¤å®žæ—¶æ•°æ®ï¼Œåœ¨æ‰€æœ‰è¿žæŽ¥çš„å®¢æˆ·ç«¯ä¹‹é—´æä¾›å…è´¹çš„è‡ªåŠ¨åŒæ­¥ã€‚[ç”šè‡³è°·æ­Œä¹Ÿå»ºè®®å®ƒä¿æŒç‰©è”ç½‘è®¾å¤‡çš„å®žæ—¶çŠ¶æ€ï¼Œå°±åƒæˆ‘ä»¬åœ¨è¿™é‡Œçœ‹åˆ°çš„](https://cloud.google.com/solutions/iot-overview)ã€‚

![](img/44486c551b4026abb9967e1faa2cde29.png)

ä½¿ç”¨ Firebase çš„ç‰©è”ç½‘æž¶æž„â€”ã€https://cloud.google.com/solutions/iot-overview 

æˆ‘ä»¬çš„å‡½æ•°çš„ä»£ç å¯ä»¥åœ¨ä¸Šé¢çœ‹åˆ°ï¼Œå®ƒåŸºæœ¬ä¸Šå¯¹ PubSub äº‹ä»¶ä½œå‡ºååº”ï¼Œå¹¶æ’å…¥åˆ° BigQuery ä¸­ï¼Œç„¶åŽæ›´æ–° Firebase ä¸Šçš„å½“å‰çŠ¶æ€ã€‚

*Firebase å‘½ä»¤è¡Œå·¥å…·*éœ€è¦èŠ‚ç‚¹ã€‚js å’Œ npm [ã€](https://www.npmjs.org/)å¯ä»¥æŒ‰ç…§[https://Nodejs.org/.](https://nodejs.org/)å®‰è£… node ä¸Šçš„è¯´æ˜Žå®‰è£…ï¼ŒJS ä¹Ÿä¼šå®‰è£… npmã€‚

å®‰è£…èŠ‚ç‚¹å’Œ NPM åŽï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Firebase CLIã€‚

```
npm install -g firebase-tools
```

çŽ°åœ¨ï¼Œè¦ç”¨æˆ‘ä»¬çš„é¡¹ç›®é…ç½® firebase å¹¶éƒ¨ç½²åŠŸèƒ½ï¼Œåœ¨é¡¹ç›®æ ¹æ–‡ä»¶å¤¹ä¸­ï¼Œéµå¾ªä¸Šé¢çš„è¯´æ˜Ž:

*   è¿è¡Œ`firebase login`å‘ Google è®¤è¯å¹¶è®¾ç½®å‘½ä»¤è¡Œå·¥å…·
*   è¿è¡Œ`firebase init`å°†æœ¬åœ°é¡¹ç›®ä¸Žæ‚¨çš„ Firebase é¡¹ç›®å…³è”èµ·æ¥ã€‚
*   è¿è¡Œä¸Šé¢çš„ä»£ç æ¥è®¾ç½®ä¸€äº›çŽ¯å¢ƒå˜é‡ï¼ŒæŒ‡å‘æˆ‘ä»¬çš„ BigQuery æ•°æ®é›†å’Œè¡¨ã€‚

```
firebase functions:config:set bigquery.datasetname="weather_station_iot" bigquery.tablename="raw_dataâ€
```

*   æœ€åŽè¿è¡Œ`firebase deploy`åœ¨å…¬å…±æ–‡ä»¶å¤¹ä¸Šéƒ¨ç½²å‡½æ•°å’Œ Webappã€‚

![](img/d9e4de9e251a4243b0259887f8f14fdc.png)

æ‰€æœ‰è¿™äº›éƒ½å¯ä»¥é€šè¿‡ Firebase è½»æ¾éƒ¨ç½²ã€‚

ä½¿ç”¨éƒ¨ç½²çš„åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥æŽ¥æ”¶è®¾å¤‡å‘é€çš„é¥æµ‹æ•°æ®ï¼Œå¹¶å­˜å‚¨åœ¨ä¸¤ä¸ªå­˜å‚¨è§£å†³æ–¹æ¡ˆä¸­ã€‚æ‚¨å¯ä»¥åœ¨ Firebase æŽ§åˆ¶å°ä¸Šçœ‹åˆ°æ‰€æœ‰éƒ¨ç½²çš„èµ„æºã€‚

![](img/44278c960a178024a9783f2f0ae36fd1.png)

æ‚¨å¯ä»¥çœ‹åˆ°åœ¨ Firebase ä¸Šè¿è¡Œçš„å‡½æ•°çš„æ‰§è¡Œå’Œæ—¥å¿—ã€‚

æ‚¨å¯ä»¥çœ‹åˆ°ä¸Šé¢å‡½æ•°çš„ä»£ç :

æˆ‘ä»¬çš„äº‘åŠŸèƒ½è´Ÿè´£å‘ BigQuery å’Œ Firebase å®žæ—¶æ•°æ®åº“å‘é€æ•°æ®

*firebase-tools* ä¹Ÿæœ‰ä¸€ä¸ªå†…ç½®çš„æœåŠ¡å™¨ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œ **firebase serve** çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸Šå¯åŠ¨å®ƒï¼Œå®ƒä¼šé»˜è®¤åœ¨ç«¯å£ 5000 ä¸Šå¯åŠ¨ä¸€ä¸ª web æœåŠ¡å™¨ã€‚

![](img/9dda8031f15f91b2d9e5eb67e8435e8f.png)

ä½¿ç”¨ Firebase æœåŠ¡å™¨è¿è¡Œæœ¬åœ°

webapp å¯ä»¥ç›´æŽ¥åœ¨ **public** ç›®å½•çœ‹åˆ°ï¼Œé€»è¾‘åœ¨ **public/app.js** ï¼Œå‰ç«¯åœ¨ **public/index.html** ã€‚æŒºåŸºç¡€çš„ï¼Œå°± Javascriptï¼Œ [Web ç´ æç»„ä»¶](http://material-components-web.appspot.com)å’Œ[å›¾è¡¨ã€‚å›¾è¡¨ã€‚](http://chartjs.org)

å¦‚æžœä¸€åˆ‡è®¾ç½®æ­£ç¡®ï¼Œé‚£ä¹ˆä½ å¯ä»¥å†æ¬¡åº†ç¥ï¼Œå› ä¸ºä½ å¼€å‘äº†ä¸€ä¸ªç«¯åˆ°ç«¯çš„ç‰©è”ç½‘è§£å†³æ–¹æ¡ˆï¼Œè€Œæ— éœ€æŽ¥è§¦é«˜çº§æœåŠ¡å™¨è®¾ç½®ã€‚

## æœ€åŽä¸€ç«™ï¼Œè°·æ­Œæ•°æ®å·¥ä½œå®¤

Data Studio æ˜¯ä¸€ä¸ªéžå¸¸ç›´è§‚çš„å·¥å…·ï¼Œæˆ‘ä¸ä¼šåœ¨è¿™é‡ŒæŽ¢ç©¶å®ƒï¼Œæ‰€ä»¥æœ¬æ•™ç¨‹å˜å¾—ä¸å¤ªå…¨é¢ï¼Œä½†æ˜¯ä¸ºäº†è®©æ‚¨çŸ¥é“ï¼ŒData Studio æœ‰ä¸€ä¸ª BigQuery è¿žæŽ¥å™¨ï¼Œæ‰€ä»¥åªéœ€å¯¼å…¥æ‚¨çš„è¡¨å¹¶ä½¿ç”¨è¿™ä¸ªå¼ºå¤§å·¥å…·æä¾›çš„ä¸åŒå¯è§†åŒ–ã€‚åŽ» datastudio.google.com çŽ©å§ã€‚

![](img/2316513056127a0ac60926d9fec128d9.png)

Data Studio BigQuery è¿žæŽ¥å™¨ã€‚

![](img/8ed668b0ef5c5c9d206bec821a488206.png)

ä½¿ç”¨ Data Studio çš„ç®€å•æŠ¥å‘Šã€‚

## è¿›ä¸€æ­¥é˜…è¯»

è¿™å°±æ˜¯æœ¬æ•™ç¨‹ï¼Œå¸Œæœ›ä½ å¯¹è°·æ­Œäº‘ç‰©è”ç½‘æ ¸å¿ƒæ„Ÿå…´è¶£ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æœåŠ¡ï¼Œä½ å¯ä»¥ç”¨å®ƒåšå¼ºå¤§çš„äº‹æƒ…ã€‚è¿™ç¯‡æ–‡ç« æ¯”æˆ‘é¢„æœŸçš„è¦é•¿ä¸€ç‚¹ï¼Œä½†æˆ‘ç›¸ä¿¡å®ƒå¾ˆå¥½åœ°æ¦‚è¿°äº†è°·æ­Œäº‘å¹³å°ä¸Šçš„è®¸å¤šå·¥å…·ã€‚

è¿™ä¸ªé¡¹ç›®çš„ä»£ç å¯ä»¥åœ¨æˆ‘çš„ Github ä¸Šæ‰¾åˆ°ï¼Œä¸€äº›æœ‰è¶£çš„é“¾æŽ¥åœ¨ä¸‹é¢çš„éƒ¨åˆ†ï¼Œç¨åŽé˜…è¯»:

[](https://github.com/alvarowolfx/weather-station-gcp-mongoose-os) [## alvarowolfx/æ°”è±¡ç«™-GCP-mongose-OS

### ä¸€ä¸ªç”¨ ESP32 åˆ¶ä½œçš„æ°”è±¡ç«™ï¼Œé€šè¿‡è°·æ­Œäº‘ç‰©è”ç½‘æ ¸å¿ƒå’Œâ€¦

github.com](https://github.com/alvarowolfx/weather-station-gcp-mongoose-os) 

*   [https://Cloud platform . Google blog . com/2017/09/announcing-Cloud-IoT-Core-public-beta . html](https://cloudplatform.googleblog.com/2017/09/announcing-Cloud-IoT-Core-public-beta.html)
*   http://mongoose-os.com/gcp
*   ã€https://cloud.google.com/iot/docs/quickstart 
*   [https://mongose-OS . com/docs/libraries/cloud _ integrations/GCP . html](https://mongoose-os.com/docs/libraries/cloud_integrations/gcp.html)
*   [https://www.adafruit.com/product/3606](https://www.adafruit.com/product/3606)
*   [https://github . com/alvarowolfx/weather-station-GCP-mongose-OS](https://github.com/alvarowolfx/weather-station-gcp-mongoose-os)

> ä½ å–œæ¬¢è¿™ä¸ªå¸–å­å—ï¼Ÿæ‰€ä»¥ä¸è¦å¿˜äº†è®©ä½ çš„æ‹æ‰‹ç»§ç»­ðŸ‘ä¸‹é¢ï¼ŒæŽ¨èä¸€ä¸‹ï¼Œåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚
> 
> ä½ ç”¨è¿™ä¸ªæ•™ç¨‹åšäº†ä»€ä¹ˆå¥½äº‹å—ï¼Ÿæ˜¾ç¤ºåœ¨ä¸‹é¢çš„è¯„è®ºéƒ¨åˆ†ã€‚
> 
> å¦‚æžœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨è¯„è®ºä¸­ç•™è¨€ï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©ä½ ã€‚