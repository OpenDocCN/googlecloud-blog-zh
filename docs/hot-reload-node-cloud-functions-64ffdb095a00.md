# çƒ­é‡è£…èŠ‚ç‚¹äº‘åŠŸèƒ½

> åŸæ–‡ï¼š<https://medium.com/google-cloud/hot-reload-node-cloud-functions-64ffdb095a00?source=collection_archive---------0----------------------->

Google Cloud Function Framework for Node å…è®¸æ‚¨åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šæœ¬åœ°å¼€å‘æ— æœåŠ¡å™¨åŠŸèƒ½**ï¼Œæ–¹æ³•æ˜¯ä»¥ä¸ Google Cloud Functions ä¸Šè¿è¡Œçš„*ç›¸åŒçš„æ–¹å¼*æ—‹è½¬ web æœåŠ¡å™¨ã€‚æ­£å¦‚æ‚¨å¯èƒ½çŸ¥é“çš„ï¼Œæœ¬åœ°å¼€å‘å¤§å¤§æé«˜äº†å¼€å‘é€Ÿåº¦ï¼Œè€Œä¸æ˜¯å¿…é¡»ç­‰å¾… 1-2 åˆ†é’Ÿæ¥éƒ¨ç½²æ‚¨çš„åŠŸèƒ½ã€‚**

*ç„¶è€Œï¼Œ*ä¸€ä¸ªå¸¸è§çš„å¼€å‘è€…é—®é¢˜æ˜¯ï¼Œä¸€æ—¦ä½ çš„å‡½æ•°åœ¨å‡½æ•°æ¡†æ¶ä¸­è¿è¡Œï¼Œä»»ä½•å¯¹ä½ çš„æºä»£ç **çš„**æ›´æ–°**éƒ½ä¸ä¼šåœ¨è¿è¡Œçš„ HTTP æœåŠ¡å™¨ä¸­å¾—åˆ°åæ˜ **ã€‚

åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘å°†ç®€è¦ä»‹ç»å¦‚ä½•**å°†** **çƒ­é‡è£…**æ·»åŠ åˆ°**èŠ‚ç‚¹äº‘å‡½æ•°å¼€å‘è€…å·¥ä½œæµ**ä¸­ã€‚

![](img/876ebe9d7b371775830d916c98c58822.png)

è¿™æ˜¯ä¸€å¼ æˆ‘åœ¨å—å¡ç½—æ¥çº³å·çº³å¡”è±æ–¯æ¸¯å–æ‹¿é“çƒ­è´Ÿè·ä¼‘æ¯çš„ç…§ç‰‡ã€‚æˆ‘ä»æ¥æ²¡æœ‰åœ¨ç¼–ç çš„æ—¶å€™å¯¹å¦ä¸€æ¯æ‹¿é“è¯´â€œä¸â€ã€‚

Node Functions æ¡†æ¶æ˜¯ä¸€ä¸ªè½»é‡çº§çš„åº“ï¼Œå®ƒåŒ…è£…äº†æµè¡Œè€Œç†Ÿæ‚‰çš„ TJ Holowaychuk çš„ *Express.js* æ¡†æ¶ã€‚è¯¥æ¡†æ¶å…è®¸æ‚¨ç¼–å†™ä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨ï¼Œåœ¨æ”¶åˆ° HTTP è¯·æ±‚æ—¶è°ƒç”¨æ‚¨çš„å‡½æ•°:

> [https://github . com/Google cloud platform/functions-framework-nodejs/](https://github.com/GoogleCloudPlatform/functions-framework-nodejs/)

## è¿è¡Œç®€å•çš„äº‘å‡½æ•°

åœ¨`index.js`æœ‰ä¸€ä¸ªç®€å•çš„å‡½æ•°:

è¿™é‡Œæœ‰ä¸€ä¸ªæœ€å°çš„`package.json`:

è¦æµ‹è¯•æ­¤åŠŸèƒ½:

*   è¿è¡Œ`npm i`æ¥å®‰è£…å‡½æ•°æ¡†æ¶
*   è¿è¡Œ`npm start`å¯åŠ¨åŠŸèƒ½æ¡†æ¶

ç„¶åï¼Œæ‚¨å¯ä»¥è½¬åˆ°`[http://localhost:8080/](http://localhost:8080/)`å¹¶çœ‹åˆ°è¯¥å‡½æ•°è¢«è°ƒç”¨ï¼Œå…¶å“åº”ä¸º:`Hot-reload me?`ã€‚

ç„¶è€Œï¼Œå¦‚æœæ‚¨å°†`'Hot-reload me?'`æ›´æ”¹ä¸º`'Why isn't it working???Â¿?'`å¹¶åˆ·æ–°é¡µé¢ï¼Œæ‚¨ä»ç„¶ä¼šçœ‹åˆ°æ—§çš„å“åº”ã€‚:(

è¿™ä¸ªç»“æœæ˜¯å› ä¸ºèŠ‚ç‚¹ç¨‹åºåªåœ¨å¯åŠ¨æ¡†æ¶(ç”¨`npm start`)å’Œå¯åŠ¨ web æœåŠ¡å™¨æ—¶åŠ è½½ä¸€æ¬¡å‡½æ•°ã€‚

æˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ

## ä»‹ç»å›½å®¶é¢„é˜²æœºåˆ¶è§‚å¯Ÿ

ç†æƒ³æƒ…å†µä¸‹ï¼Œæ— è®ºä½•æ—¶æˆ‘ä»¬çš„æºä»£ç å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›*è‡ªåŠ¨*é‡å¯å‡½æ•°æ¡†æ¶ã€‚

ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ æ–¹ä¾¿çš„`npm-watch`åŒ…:

è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨`*.js`æ–‡ä»¶å‘ç”Ÿä»»ä½•å˜åŒ–æ—¶ï¼Œè¿è¡Œ`npm run watch`æ¥é‡æ–°è¿è¡Œ`start`å‘½ä»¤:

![](img/24ac5badf67de49af5ef77f1a2d722c0.png)

é€šè¿‡ nodemon é‡æ–°åŠ è½½å‡½æ•°

æ„Ÿè°¢é˜…è¯»ï¼

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªï¼Œä¸€å®šè¦é¼“æŒğŸ‘ï¼Œæˆ–è€…å†™ä¸€ç¯‡âœï¸çš„è¯„è®ºï¼Œå¯èƒ½ä¼šå‡ºç°åœ¨ä»¥åçš„å¸–å­é‡Œï¼).æˆ‘ä¸å†å†™é‚£ä¹ˆå¤šåšå®¢äº†ï¼Œä½†æ˜¯è®©æˆ‘çŸ¥é“å®ƒä»¬æ˜¯å¦ä»¤äººæ„‰å¿«ï¼Œæˆ‘å¯èƒ½ä¼šæ”¹å˜è¿™ä¸€ç‚¹:)

> æ„Ÿè°¢ Preston Holmes å¯¹ GitHub é—®é¢˜çš„å…³æ³¨å’Œå¼€æºç¤¾åŒºçš„çƒ­çƒˆè®¨è®º:[https://GitHub . com/Google cloud platform/functions-framework-nodejs/issues/24](https://github.com/GoogleCloudPlatform/functions-framework-nodejs/issues/24)