<html>
<head>
<title>Istio 101 with Minikube</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带Minikube的Istio 101</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/istio-101-with-minikube-9a748ec59546?source=collection_archive---------1-----------------------#2018-04-24">https://medium.com/google-cloud/istio-101-with-minikube-9a748ec59546?source=collection_archive---------1-----------------------#2018-04-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/591d50a07716ba13717197dccfe89f66.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*xYvYviOaecKomFTU."/></div></figure><p id="3fd1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">作为我的Istio 101演讲的一部分，我喜欢在本地展示演示(因为会议Wifi可能不可靠)，而<a class="ae jk" href="https://github.com/kubernetes/minikube" rel="noopener ugc nofollow" target="_blank"> Minikube </a>非常适合这一点。Minikube为您提供了一个本地Kubernetes集群，您可以在其上安装Istio。</p><p id="94a1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇文章中，我想展示如何在Minikube上做Istio 101。更具体地说，我将展示如何安装Istio，部署一个示例应用程序，安装像<a class="ae jk" href="https://prometheus.io/" rel="noopener ugc nofollow" target="_blank"> Prometheus </a>、<a class="ae jk" href="https://grafana.com/" rel="noopener ugc nofollow" target="_blank"> Grafana </a>、<a class="ae jk" href="https://zipkin.io/" rel="noopener ugc nofollow" target="_blank"> Zipkin </a>、<a class="ae jk" href="https://github.com/istio/istio/tree/master/addons/servicegraph" rel="noopener ugc nofollow" target="_blank"> ServiceGraph </a>这样的附加组件，并动态地改变流量路线。</p><h1 id="df84" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">Minikube和kubectl</h1><p id="50db" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">首先，你需要安装Minikube。Minikube <a class="ae jk" href="https://github.com/kubernetes/minikube" rel="noopener ugc nofollow" target="_blank">页面</a>上有说明。安装后，您可以使用<em class="ko"> minikube start </em>命令启动它，并确保它以<em class="ko"> minikube status </em>运行:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="f63f" class="ky jm hi ku b fi kz la l lb lc">&gt; minikube status minikube: Running cluster: Running kubectl: Correctly configured: pointing to minikube-vm at ...</span></pre><p id="e187" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">还要确保<em class="ko"> kubectl </em>指向您的minikube集群:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="d67b" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl config use-context minikube Switched to context "minikube"</span></pre><h1 id="6512" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">下载和设置Istio</h1><p id="c052" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">让我们下载最新的Istio(从今天起为0.7.1):</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="31f2" class="ky jm hi ku b fi kz la l lb lc">&gt; curl -L <a class="ae jk" href="https://git.io/getLatestIstio" rel="noopener ugc nofollow" target="_blank">https://git.io/getLatestIstio</a> | sh -</span></pre><p id="a7d9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">将Istio的命令行工具<em class="ko"> istioctl </em>添加到您的路径中。我们以后会用到它:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="d57f" class="ky jm hi ku b fi kz la l lb lc">&gt; export PATH="$PATH:./istio-0.7.1/bin"</span></pre><h1 id="cd61" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">安装Istio</h1><p id="d2b2" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">现在是时候安装Istio了。您可以在服务之间启用或不启用相互TLS的情况下安装Istio。既然这样，那就用互TLS吧。istio文件夹内:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="b6de" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl apply -f install/kubernetes/istio-auth.yaml ... <br/>service "istio-pilot" created <br/>serviceaccount "istio-pilot-service-account" created deployment.extensions "istio-pilot" created <br/>service "istio-ingress" created <br/>serviceaccount "istio-ingress-service-account" created deployment.extensions "istio-ingress" created <br/>serviceaccount "istio-ca-service-account" created deployment.extensions "istio-ca" created ...</span></pre><p id="84cf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这将把Istio及其核心组件如ingress、mixer、pilot安装到一个单独的<em class="ko"> istio-system </em>名称空间中。让我们确保Istio相关的pod和服务正在运行:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="b1f6" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl get svc -n istio-system </span><span id="b76b" class="ky jm hi ku b fi ld la l lb lc">NAME TYPE CLUSTER-IP EXTERNAL-IP istio-ingress LoadBalancer 10.99.175.236 &lt;pending&gt; istio-mixer ClusterIP 10.101.16.135 &lt;none&gt; istio-pilot ClusterIP 10.97.241.47 &lt;none&gt; &gt; kubectl get pods -n istio-system NAME READY STATUS istio-ca-86f55cc46f-p8npd 1/1 Running istio-ingress-868d5f978b-nsjt6 1/1 Running istio-mixer-65dc5549d6-cqg4j 3/3 Running istio-pilot-657cb5ddf7-8dsr7 2/2 Running</span></pre><h1 id="0b36" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">部署BookInfo应用程序</h1><p id="db11" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">现在，我们可以部署一个示例应用程序，并由Istio管理它。你有两个选择。首先，你可以安装Istio初始化器。这样，当创建一个pod时，将自动创建一个sidecar Envoy代理，但这需要使用WebHooks和证书进行更复杂的设置。您的第二个选择是使用<em class="ko"> istioctl </em>命令，并在创建应用程序窗格时自己注入sidecar代理。我将选择第二个选项，因为它更容易设置。</p><p id="ce94" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Istio在<em class="ko"> samples </em>文件夹下附带了许多示例应用程序。让我们使用<em class="ko"> BookInfo </em>应用程序:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="d680" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl create -f &lt;(istioctl kube-inject -f samples/bookinfo/kube/bookinfo.yaml service "details" created </span><span id="6501" class="ky jm hi ku b fi ld la l lb lc">deployment.extensions "details-v1" created service "ratings" created deployment.extensions "ratings-v1" created service "reviews" created deployment.extensions "reviews-v1" created deployment.extensions "reviews-v2" created deployment.extensions "reviews-v3" created service "productpage" created deployment.extensions "productpage-v1" created ingress.extensions "gateway" created</span></pre><p id="faa5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如您所见，这创建了一堆微服务，一些微服务也有不同的版本。</p><h1 id="f2cb" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">显示BookInfo应用程序</h1><p id="b3e8" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">现在，我们来看看这个应用程序。Minikube不支持外部负载平衡器。但是，您可以使用入口服务的主机IP和节点端口来访问入口。为此，我们将设置一个<em class="ko"> GATEWAY_URL </em>变量:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="5f7c" class="ky jm hi ku b fi kz la l lb lc">&gt; export GATEWAY_URL=$(kubectl get po -l istio=ingress -n istio-system -o 'jsonpath={.items[0].status.hostIP}'):$(kubectl get svc istio-ingress -n istio-system -o 'jsonpath={.spec.ports[0].nodePort}')</span></pre><p id="e266" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">并用curl进行测试:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="7ae3" class="ky jm hi ku b fi kz la l lb lc">&gt; curl -o /dev/null -s -w "%{http_code}\n" <a class="ae jk" rel="noopener ugc nofollow" target="_blank" href="/${GATEWAY_URL}/productpage">http://${GATEWAY_URL}/productpage</a> 200</span></pre><p id="89c7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您也可以打开浏览器，查看产品页面的web前端:</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/9612e743e8f816d6f53fe78e94b4b585.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_9m3cGKd1tPBWQdo."/></div></div></figure><p id="9bb2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">此时，我们已经通过Istio的基本安装部署和管理了应用程序。接下来，我们将安装一些附加组件。</p><h1 id="34c9" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">度量标准的普罗米修斯</h1><p id="fa9e" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">我们将安装的第一个附加组件是Prometheus for metrics。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="35cf" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl apply -f install/kubernetes/addons/prometheus.yaml configmap "prometheus" created service "prometheus" created deployment.extensions "prometheus" created serviceaccount "prometheus" created clusterrole.rbac.authorization.k8s.io "prometheus" configured clusterrolebinding.rbac.authorization.k8s.io "prometheus" configured</span></pre><p id="6d53" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在一个单独的命令选项卡中，开始向我们的应用程序发送一些流量，这样我们就可以在系统中流动一些指标:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="b0ab" class="ky jm hi ku b fi kz la l lb lc">&gt; for i in {1..10}; do curl -o /dev/null -s -w "%{http_code}\n" <a class="ae jk" rel="noopener ugc nofollow" target="_blank" href="/${GATEWAY_URL}/productpage;">http://${GATEWAY_URL}/productpage;</a> done 200 200 ...</span></pre><p id="76fa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">并设置端口转发，这样我们可以看看Prometheus:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="3cd9" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl -n istio-system port-forward $(kubectl -n istio-system get pod -l app=prometheus -o jsonpath='{.items[0].metadata.name}') 9090:9090</span></pre><p id="6453" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">可以导航到<a class="ae jk" href="http://localhost:9090/" rel="noopener ugc nofollow" target="_blank">T3 http://localhost:9090T5】查询一些指标，比如<em class="ko"> istio_request_count: </em></a></p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/c1b17c97f2106a7ae85afea10a50328d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kq28qzJQLiaTmkq9."/></div></div></figure><h1 id="d2d3" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">仪表板的Grafana</h1><p id="fc53" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">为了在一个漂亮的仪表板中可视化指标，我们可以安装Grafana。首先安装Grafana附加组件:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="4ab7" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl apply -f install/kubernetes/addons/grafana.yaml</span></pre><p id="e3ea" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后设置端口转发:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="5b1e" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl -n istio-system port-forward $(kubectl -n istio-system get pod -l app=grafana -o jsonpath='{.items[0].metadata.name}') 3000:3000</span></pre><p id="fc18" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">导航到<a class="ae jk" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"><em class="ko">http://localhost:3000</em></a>并转到<em class="ko"> Istio Dashboard </em>查看仪表板:</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/2cd2548039b82730de6992ea03a11dee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*31fdTh-85pgk2aQR."/></div></div></figure><h1 id="e4b7" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">追踪用Zipkin</h1><p id="c665" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">另一个有用的插件是用于分布式HTTP跟踪的Zipkin。就像其他附加组件一样，首先安装它:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="7509" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl apply -f install/kubernetes/addons/zipkin.yaml deployment.extensions "zipkin" created service "zipkin" created</span></pre><p id="44eb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后，设置端口转发:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="9155" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl port-forward -n istio-system $(kubectl get pod -n istio-system -l app=zipkin -o jsonpath='{.items[0].metadata.name}') 9411:9411</span></pre><p id="f1ab" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">导航到<a class="ae jk" href="http://localhost:9411/" rel="noopener ugc nofollow" target="_blank"><em class="ko">http://localhost:9411</em></a>以查看<em class="ko">产品页面:</em>的跟踪信息</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/8967be804bb46f038afbde159e97370a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T-yGLut6yIXdAKwd."/></div></div></figure><h1 id="7f2f" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">依赖关系可视化的ServiceGraph</h1><p id="0882" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">最后，我们要看的最后一个附加组件是我最喜欢的ServiceGraph。它为我们的服务网格中的所有微服务依赖关系提供了一个很好的图表。首先，安装它:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="3c79" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl apply -f install/kubernetes/addons/servicegraph.yaml deployment.extensions "servicegraph" created service "servicegraph" created</span></pre><p id="ff9d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后，设置端口转发:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="4769" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl -n istio-system port-forward $(kubectl -n istio-system get pod -l app=servicegraph -o jsonpath='{.items[0].metadata.name}') 8088:8088</span></pre><p id="6de6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">有几个不同的图表你可以看看:</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/3041f826d88ab89b27d8f14f30e1b9f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*crcuIUlFVDGFGzW4."/></div></div></figure><h1 id="9b50" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">交通管理</h1><p id="871c" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">Istio的一个优点是，您可以动态地更改微服务之间的路由规则。默认情况下，没有路由规则，您可以通过以下方式查看:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="aca1" class="ky jm hi ku b fi kz la l lb lc">&gt; istioctl get routerules No resources found.</span></pre><p id="4463" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当你进入BookInfo应用的产品页面，做几次浏览器刷新，你会看到右边的评论部分一直在变(星星变颜色)。这是因为有3个不同的审查微服务，每次都调用不同的微服务。</p><p id="07e5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">不过，将微服务固定到某个版本非常容易。例如，让我们将所有微服务固定到版本1:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="26e4" class="ky jm hi ku b fi kz la l lb lc">&gt; istioctl create -f samples/bookinfo/kube/route-rule-all-v1.yaml Created config route-rule/default/productpage-default at revision 185533 Created config route-rule/default/reviews-default at revision 185534 Created config route-rule/default/ratings-default at revision 185535 Created config route-rule/default/details-default at revision 185536</span></pre><p id="2988" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，如果您返回到产品页面并刷新浏览器，什么都不会改变，因为reviews microservice现在已固定到版本1。</p><p id="3d10" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你可以做更复杂的路由规则。例如，您可以将特定用户绑定到特定版本的微服务。在这种情况下，让我们锁定用户“Jason”:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="2446" class="ky jm hi ku b fi kz la l lb lc">&gt; istioctl create -f samples/bookinfo/kube/route-rule-reviews-test-v2.yaml Created config route-rule/default/reviews-test-v2 at revision 185630</span></pre><p id="cb10" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">根据此规则，如果您使用用户名“Jason”登录产品页面，您应该会看到评论微服务的v2版本。</p><h1 id="6026" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">清除</h1><p id="4514" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">这包含了我想在Minikube中展示的Istio的所有基本功能。</p><p id="2beb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了清理，让我们首先删除路由规则:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="b3f5" class="ky jm hi ku b fi kz la l lb lc">&gt; istioctl delete -f samples/bookinfo/kube/route-rule-all-v1.yaml Deleted config: route-rule/default/productpage-default Deleted config: route-rule/default/reviews-default Deleted config: route-rule/default/ratings-default Deleted config: route-rule/default/details-default &gt; istio-0.7.1 istioctl delete -f samples/bookinfo/kube/route-rule-reviews-test-v2.yaml Deleted config: route-rule/default/reviews-test-v2</span></pre><p id="e693" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要删除Istio:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="35b7" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl delete -f install/kubernetes/istio-auth.yaml</span></pre><p id="db37" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">此时，与Istio相关的所有内容都被删除了，但是示例应用程序正在运行。只是不再由Istio管理了。如果您还想删除示例应用程序:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="6d7a" class="ky jm hi ku b fi kz la l lb lc">&gt; kubectl delete -f samples/bookinfo/kube/bookinfo.yaml service "details" deleted deployment.extensions "details-v1" deleted service "ratings" deleted deployment.extensions "ratings-v1" deleted service "reviews" deleted deployment.extensions "reviews-v1" deleted deployment.extensions "reviews-v2" deleted deployment.extensions "reviews-v3" deleted service "productpage" deleted deployment.extensions "productpage-v1" deleted ingress.extensions "gateway" deleted</span></pre></div><div class="ab cl lj lk gp ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hb hc hd he hf"><p id="c13f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="ko">原载于2018年4月24日</em><a class="ae jk" href="https://meteatamel.wordpress.com/2018/04/24/istio-101-with-minikube/" rel="noopener ugc nofollow" target="_blank"><em class="ko">【meteatamel.wordpress.com】</em></a><em class="ko">。</em></p></div></div>    
</body>
</html>