<html>
<head>
<title>Google Cloud Dataplex -Part 1-Lakes, Zones, Assets and discovery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google Cloud data plex-第1部分-湖泊、区域、资产和发现</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/google-cloud-dataplex-part-1-lakes-zones-assets-and-discovery-5f288486cb2f?source=collection_archive---------0-----------------------#2022-05-27">https://medium.com/google-cloud/google-cloud-dataplex-part-1-lakes-zones-assets-and-discovery-5f288486cb2f?source=collection_archive---------0-----------------------#2022-05-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="c13d" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">介绍</h1><p id="9707" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><em class="kb">声明:本文中表达的所有观点都是我个人的，仅代表我个人，不代表我现在或以前的雇主。</em></p><p id="c3d9" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我打算在Google Cloud Dataplex上发布一系列帖子，从最基础的开始，到最终执行逐渐变得更加复杂的任务。这是本系列的第1部分，面向希望开始使用Dataplex的L100从业者。</p><p id="4607" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">根据Gartner(此处为<a class="ae kh" href="https://www.gartner.com/smarterwithgartner/data-fabric-architecture-is-key-to-modernizing-data-management-and-integration" rel="noopener ugc nofollow" target="_blank"/>)的说法，数据结构是一个数据平台设计概念，其中数据发现、数据监管和数据处理是在发现的元数据上连续处理的。</p><p id="ceab" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">当企业数据工程团队创建跨LoB(业务线)数据应用程序/数据产品时，高级决策者的业务需求通常会超越LoB，以从多个LoB中提取洞察力。</p><p id="19aa" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">像Google Cloud <a class="ae kh" href="https://cloud.google.com/dataplex" rel="noopener ugc nofollow" target="_blank"> Dataplex </a>这样的智能数据结构提供了发现、收集不同数据源的元数据的能力，并使用Apache Spark这样的流行框架运行数据监管工作。</p><p id="f39e" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">在discovery之上，Dataplex还充当现代数据平台的中央数据治理组件。在后续的文章中，我将展示Dataplex如何使完成诸如数据质量检查、托管数据安全策略等任务变得容易..</p><p id="ee34" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">随着ELT(提取-加载-转换)作为在云上运行分析工作负载的模式的出现和随后的广泛采用，像Dataplex这样的产品的重要性变得更加突出。如今，全球许多企业客户将从不同数据源(如ERP、OLTP RDBMS系统、实时流系统以及合作伙伴组织数据)中提取的大量数据集复制到云中。通常，在对原始数据应用后续转换之前，复制的数据保存在指定的原始区域中。</p><p id="b1f9" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">Google Cloud、AWS和Azure等云提供商在Data Lake raw zones上提供这种提取数据的持久存储，其中文件保存在对象存储中。</p><p id="602f" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">对于云数据湖原始区，原始数据的转换主要是使用高性能分布式数据处理框架完成的，如Apache Spark、Apache Beam和Apache Flink(用于流系统)。</p><p id="a580" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">ELT在原始数据保存在指定的原始区域的云数据仓库中也很普遍，很好的例子是Google BigQuery、Snowflake等...</p><p id="0e09" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">有强大的转换框架，如<a class="ae kh" href="https://github.com/dbt-labs/dbt-core" rel="noopener ugc nofollow" target="_blank"> dbt </a>和<a class="ae kh" href="https://dataform.co/" rel="noopener ugc nofollow" target="_blank"> dataform </a>，它们允许对保存在云数据仓库中的原始数据进行复杂的数据管理、数据质量和数据新鲜度检查。</p><p id="d234" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">对于上述数据湖和云数据仓库的情况，数据监管和后续数据转换的基本方面依赖于数据发现和元数据的收集，并根据元数据做出决策。</p><p id="a5a0" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">在这个博客系列中，将涵盖Google Cloud Dataplex的数据发现、数据监管和数据处理方面。第1部分将重点介绍如何在Google云存储(GCS)上获取结构化的CSV文件，以及随后如何以表格的形式发现元数据。</p><h1 id="3a66" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">Dataplex数据发现</h1><p id="a4a9" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了理解执行Dataplex数据发现所需的步骤，让我们首先模拟一个业务场景。“sales.csv”和“customers.csv”是OLTP数据被复制到Google Cloud Data Lake并作为对象存储在Google Cloud Storage中的两个模拟示例。</p><p id="d99e" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">步骤1:模拟数据创建</strong></p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="87a0" class="kr ig hi kn b fi ks kt l ku kv">orderno,orderlineno,orderqty,unitprice,year,custid<br/>97274,3,23,103.5,2019,32<br/>97282,6,12,44.0,2019,55<br/>97355,2,14,12.5,2019,68</span></pre><p id="2cf0" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">将上述文件另存为“sales.csv”</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="4a4f" class="kr ig hi kn b fi ks kt l ku kv">custid,custname,email,country<br/>32,ross brown,rossb@fmail.com,US<br/>55,emily fay,efay@fmail.com,US<br/>68,jane rock,jrock@fmail.com,US</span></pre><p id="59da" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">将该文件另存为“customers.csv”。</p><p id="9a1d" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">第二步:谷歌云存储和前缀</strong></p><p id="f0a2" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">选择Google Cloud项目，在那里进行团队实验，并启用Google Cloud Storage API(如果尚未启用)。将上面创建的文件上传到Google云存储。首先，让我们创建一个名为“rawoltpsales”的存储桶。在这个桶内，我们创建一个文件夹——“销售”。类似地，创建另一个bucket“ravoltpcustomers ”,并在这个bucket中创建一个文件夹“customers”。</p><p id="5e5e" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">两个铲斗都将具有以下配置:</p><p id="56f5" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">名称:rawaltpsales/rawaltpcustomers</p><p id="4e09" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">位置类型:地区(美国中部1)</p><p id="dc0f" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">默认存储类别:标准</p><p id="af9f" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">访问控制:统一</p><p id="6ad2" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">数据加密:谷歌管理的密钥</p><p id="29b9" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">一旦创建了存储桶，就在各自的存储桶中创建两个文件夹，并将这些文件夹分别命名为:sales和customers</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es kw"><img src="../Images/67145390d2e3a98390bc6644cd8d3af9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y5nicq73lslw9AzxBjtUqA.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">在存储桶内创建“销售”文件夹</figcaption></figure><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es li"><img src="../Images/ae0a12bd650369cbeb1a7117572abfe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eYZyUSd54nIVq1-WsTqEnw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">在存储桶内创建“客户”文件夹</figcaption></figure><p id="f025" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">现在，分别将“sales.csv”上传到“ravoltpsasles/sales”文件夹，将“customers.csv”上传到“ravoltpcustomers/customers”文件夹。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lj"><img src="../Images/fd482b3038d6508c8d4a5a9ff6107f1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pi-LzYBZc9VtPq-FU0BlQQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">将customers.csv上传到GS://rawaltpcustomers/customers/folder</figcaption></figure><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lk"><img src="../Images/66e16a28818cc19e0354736631032316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DEMTd2F4M3x1qsLEz0eSiQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">将sales.csv上传到GS://ravoltpsales/sales/folder</figcaption></figure><p id="568d" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">步骤3:数据复用湖、区域和资产</strong></p><p id="abc2" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">既然OLTP模拟数据被复制到各自的GCS存储桶/文件夹中，那么就可以开始使用Dataplex进行数据发现了。</p><p id="0cb6" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">Dataplex将存储在Google云存储和BigQuery中的数据组织成“湖”和“区”。参考Dataplex <a class="ae kh" href="https://cloud.google.com/dataplex/docs/quickstart-guide" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="b4d7" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">Dataplex lake通常映射到一个数据网格域。不严格地说，我们可以将湖泊与吸收和处理数据的业务线联系起来。例如，我们的例子可以是市场营销，它使用销售和客户数据来构建“数据产品”。</p><p id="0ff8" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">在Dataplex湖中，区域在逻辑上隔离原始数据和精选数据。</p><p id="29ed" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">在区域内，Dataplex将结构化和非结构化数据组织为“资产”。资产映射到云存储或BigQuery中存储的数据。您可以将存储在单独的Google Cloud项目中的数据作为资产映射到湖中的一个区域。您可以附加现有的云存储桶或BigQuery数据集，以便从湖中进行管理。</p><p id="825c" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">资产遵循Hive风格的约定，因此，bucket中的一个文件夹(也称为“前缀”)代表一个实体或一组具有相似模式的实体。这就是为什么在存储桶中创建了一个文件夹——一个用于销售，一个用于客户，这样，Dataplex将这些资产作为两个独立的表来发现。每个文件夹可以存放许多Hive风格的分区文件，只要这些文件具有相同的模式，dataplex就会发现这些文件并创建一个表。</p><p id="b6e8" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">步骤4:创建一个数据湖</strong></p><p id="ac76" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">现在，我们已经定义了湖泊、区域和资产，让我们一个接一个地创建这些构造。</p><p id="3bd2" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">为了在<a class="ae kh" href="https://cloud.google.com/dataplex/docs/metadata#accessing_metadata_in_spark" rel="noopener ugc nofollow" target="_blank"> Spark查询</a>中使用Hive Metastore访问Dataplex元数据，Dataproc Metastore服务实例需要与Dataplex lake相关联。因此，应该首先创建一个支持gRPC的data proc Metastore(3 . 1 . 2或更高版本)。</p><p id="3175" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">在谷歌云控制台的搜索栏中，搜索“Dataproc”。</p><p id="e194" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">确保您在google cloud项目上启用了Dataproc Metastore API。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ll"><img src="../Images/5e11e2a14f3c0937289623494d9cac94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ILJ2k1dCh2CUGnTdTml6A.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">启用Dataproc Metastore API</figcaption></figure><p id="b528" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">创建Dataproc Metastore服务</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lm"><img src="../Images/6f00371423dadacf8e081b8762af918e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5lvZXcRFXEfyxXNZwcKTfw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">创建Dataproc Metastore服务</figcaption></figure><p id="d714" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">分配一个服务名，选择“服务层”作为“开发者”,并选择您的VPC网络。为简单起见，我选择了默认网络</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ln"><img src="../Images/1c5d409535f4f31b2fd3f3e9887945d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rROLafZx8PYRUjKJLix8cw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">Dataproc Metastore服务名</figcaption></figure><p id="20fb" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">将其余部分保留为默认值，但选择gRPC作为端点协议:</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div class="er es lo"><img src="../Images/a221f1c15b0abd7139ccb9f1918bdc98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*REca_dakrLbvjsRFETGR3g.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx translated">Dataproc Metastore端点协议</figcaption></figure><p id="f693" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">创建服务需要一段时间(我的大约需要15分钟)。</p><p id="7cf1" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">现在，我们可以创建Dataplex湖。在Google Cloud console中搜索“Dataplex ”,并启用Google Cloud Dateplex API(如果尚未启用)。通常情况下，一个湖和一个域会有1:1的映射。一个域中的数据产品将以湖作为统一存储抽象来构建。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lp"><img src="../Images/c2e0fe4caa5e141a8dd69dcbf82218ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N3pMjZryBPzH6ztxzQAcXw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">创建Dataplex湖</figcaption></figure><p id="a085" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">让我们称数据复合湖为“市场1”</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lq"><img src="../Images/1d28bed00b7f2db528eae8f08437453a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fsSPNdddTufklR0Dtfu8qA.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">选择先前为Dataplex lake创建而创建的Dataproc Metastore</figcaption></figure><p id="a0f1" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">在创建lake时，还要选择在前面的步骤中创建的Dataproc metastore服务。</p><p id="3042" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">这个湖将在几分钟内形成。创建完成后，点击“营销1”查看详细信息。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lr"><img src="../Images/f337ddd38c28971991c8d333c338be26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XfbJr3AG2dOIQmeTSKU6iQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">Dataplex湖详细信息</figcaption></figure><p id="020f" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">虽然有多个选项卡提供单独的功能，但让我们将重点放在“区域”上。在湖中，区域托管资产。资产在逻辑上等同于BigQuery表或文件夹中的Google云存储文件集。区域可以是“原始区域”或“管理区域”。这些标签定义了数据集中存在的丰富/监管级别。而原始文件，如CSV、JSON等..将存储在一个原始区，策划和有效压缩的文件格式，如拼花，ORC，AVRO等将是策划区的一部分。Dataplex不允许用户在“管理区域”中创建CSV文件。</p><p id="480c" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">因为我们的数据集只包含两个CSV文件，所以让我们单击“Add Zone”并创建一个区域“marketing1raw”。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ls"><img src="../Images/ba794e152305179447dbf1955a778167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C1XZz2CNen06ID2cPxUSDg.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">创建一个Dataplex区域</figcaption></figure><p id="1ce5" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">此外，通过选择“启用元数据发现”和“启用csv解析选项”来启用发现设置。因为我们的数据集有一个标题，让我们在“标题行”文本框中插入“1”。将其余字段保留默认值。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lt"><img src="../Images/0a85723d89454a2d3f631dcc1dbc65e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J9VaZfGoQ9x1qAa9Sjp3sw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">Dataplex区域发现设置</figcaption></figure><p id="8226" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">创建区域后，单击创建的区域，然后单击添加资产。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lu"><img src="../Images/b262cd49d83a690c5de4a620a4e02b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sCimyXhJtZbVwpxFspeaEA.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">添加Dataplex资产</figcaption></figure><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lv"><img src="../Images/b3439a5d4059c839786208258fde97a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qX7tGmvxDqJ8LF_Sl9sOEw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">添加Dataplex资产(续)..</figcaption></figure><p id="bd76" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">一个资产用Dataplex映射存储在BigQuery或Google云存储中的物理数据。在本例中，我们创建了两个资产，一个用于“rawoltpsales”，另一个用于“rawoltpcustomers”。</p><p id="048f" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">选择类型作为存储桶，并选择之前创建的“rawoltpsales”桶，然后单击“完成”。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lw"><img src="../Images/5deeaaa8f321835716c065dd01d2f275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r-DfB1T5DztlEP7gHB8N7g.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">为Dataplex资产选择存储桶/文件夹</figcaption></figure><p id="1479" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">单击继续并为发现设置选择继承，然后单击继续并提交。</p><p id="764d" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">类似地，按照完全相同的步骤，单击“Add Assets”并创建另一个资产“rawoltpcustomer”。创建此资产时，选择“ravoltpcustomers”GCS存储桶。</p><p id="cced" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">等待两项资产的发现状态从“进行中”变为“已计划”。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lx"><img src="../Images/69d56bd93185c3dd0de4c05b1536fb57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MryFh0n6SHS1ZyYGVerDlA.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">Dataplex发现作业已调度</figcaption></figure><p id="6015" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">一旦Datapelx发现任务被调度并完成，让我们检查左侧菜单上的“发现”链接。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ly"><img src="../Images/28e1d4fa2ca9b45d23b0f81ac8e072fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GjTbeI5GvfFerld2sMx1VQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">代表GCS存储桶资产的数据复合表实体</figcaption></figure><p id="7009" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我们可以看到“marketing1”湖有一个“marketing1raw”区域，其中发现了两个表——customers和sales。</p><p id="b957" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">为了获得更准确的搜索结果，请使用Dataplex特定的过滤器，例如湖和数据区名称。每个方面的前50个项目显示在过滤器列表中。您可以使用搜索框查找任何其他项目。</p><p id="7c61" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">每个条目都包含详细的技术和操作元数据。</p><p id="611a" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">单击sales表描述了配置，请注意还提到了source bucket。Dataplex已经从前缀“GS//ravoltpsales/sales”中读取了销售表，并为前缀创建了一个表。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lz"><img src="../Images/03fb514b65a09144d2b0357501cb3c37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N_hKxPYuOicREiiV7EK7PQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">Dataplex表详细信息</figcaption></figure><p id="9c84" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">点击“在BigQuery中打开”链接，您将能够查询该表。这是可能的，因为每个Dataplex数据区都映射到BigQuery中的一个数据集或Dataproc Metastore中的一个数据库，其中的元数据信息是自动可用的。</p><p id="3955" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">请注意“marketing1raw”如何在bigquery中显示为数据集</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div class="er es ma"><img src="../Images/395312a468c0223b0ddddcbd82c94836.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*1RkHAWCXGMWdqvhnWVO0MQ.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx translated">Datapelx表作为BigQuery数据集自动可用</figcaption></figure><p id="3b1c" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">事实上，Dataplex已经推断出了可能的模式类型</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es mb"><img src="../Images/0898f471cc83d8c6db741ee9fafb102a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bii3flV-jCtBtxwOVtq1VA.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">Dataplex模式推理</figcaption></figure><p id="8c23" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">您可以运行下面的简单查询来从表中获取结果。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es mc"><img src="../Images/70f9c343e9aa32e1cd61d26aea2b219b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z_Scpu0lYmwxIvR89Jk5mw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">使用BigQuery查询作为Dataplex表发现的资产</figcaption></figure><p id="15a3" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">有了Dataplex，您不再需要为BigQuery创建外部表。此外，您还可以使用Jupyter笔记本中的Spark SQL查询这些表(将在后面的文章中用例子解释)，因为Dataplex提供了一个统一的元数据层。</p><p id="0e8f" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">现在，如果您返回到Dataplex区域“marketing1raw ”,您会看到数据项发现仪表板提到检测到两个表。</p><figure class="ki kj kk kl fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es md"><img src="../Images/bac1b5b939e03f2355b071d057939620.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*njMzLuEKCkP8m3Ac1wgogg.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">Dataplex区域仪表板</figcaption></figure><p id="f806" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">在下一篇文章中，我将解释security和IAM如何与Dataplex实体一起工作，并在后续文章中解释使用定制spark作业、数据探索(目前在预览中)和数据质量检查的数据监管。</p><p id="a021" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">查看以下文档，了解更多关于Dataplex的信息:</p><p id="bca3" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">发现数据:<a class="ae kh" href="https://cloud.google.com/dataplex/docs/discover-data" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/dataplex/docs/discover-data</a></p><p id="e033" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">最佳实践:【https://cloud.google.com/dataplex/docs/best-practices T2】</p></div></div>    
</body>
</html>