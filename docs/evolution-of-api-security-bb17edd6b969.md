# API 安全性的发展

> 原文：<https://medium.com/google-cloud/evolution-of-api-security-bb17edd6b969?source=collection_archive---------2----------------------->

![](img/2610d9fc61ee329285354da52a741c10.png)

应用程序编程接口或 API 在几十年前就出现了。这一切都始于两个不同软件系统之间的交互需求。当 web 应用程序变得流行时，API 开始受到关注。如今，越来越多的组织业务模式和渠道都基于功能的安全访问和数据交换。将一个组织或企业转变成一个平台的实现今天被称为 API 经济。像谷歌、微软、脸书、推特等等。构建了一个互联的世界，创造了数据爆炸。在这个互联网时代，数据就是一切。谁拥有这些数据，谁就能从中赚取数百万美元。怎么会？通过 API 向消费者公开这些数据并收取使用费。因此，有必要保护 API 免受未经授权和未经请求的访问。

API 的安全性对于保护向消费者公开的组织数据非常重要。随着 API 的发展，它的安全性也在发展。本文通过涵盖 API 安全的历史、API 安全的当前状态、现代 API 安全威胁以及使用机器学习技术来阐述 API 安全的演变。

# API 安全性的历史

从 20 世纪 60 年代的 RPC、CORBA、Java RMI 到最近的 API，我们看到对 API 的需求是突出的。很快，SOAP Web 服务取得了控制权，XML 成为 2000-2010 年面向服务时代的明显选择。随着罗伊·菲尔丁的论文，现代 API(又名 REST APIs)应运而生，并在 2010 年代成为万维网的主干，被广泛称为 web APIs。2020 年，又出现了另一种 API 风格，称为 GraphQL，这是一个开源 API 标准项目。它在 Web 应用开发者中变得非常流行，因为它给了他们控制权。

随着这些 API 风格的改变，API 安全性也发生了重大变化。在 SOAP Web 服务中，安全性是在消息中实施的，保持传输层完全解耦。为了安全起见，SOAP 消息包括数字签名和加密数据。它很快就失宠了，因为它仍然和遗留系统在一起，没有进化。

随着 REST 的出现，访问控制规则开始管理 API 安全性。在 REST 中，资源访问由 URI 和 HTTP 动词(GET/POST/PUT/DELETE)控制，中间件软件可以编写访问控制规则。在 GraphQL 出现之前，它一直工作得很好。在 GraphQL 中，有一个固定的 URI (/resource)，Web App Developer 编写查询来获取数据。因此，典型的访问控制规则在 GraphQL API 端点中不再相关。

然而，REST 和 GraphQL 将会共存，因为这是一个越来越明显的选择。

# API 安全性的当前状态

API 经济在过去几年里有了巨大的增长。增长的催化剂之一是移动应用程序开发，简称为 apps。移动应用的增长始于 B2C，现在我们也看到了 B2B 领域的巨大增长。随着这种增长，需要为 API 提供全面的安全性。由于 API 的多样化组合，安全实践也需要发展并考虑跨移动、语音和其他新兴应用程序的 API 使用的独特需求。API 管理在将这些多样化的 API 整合到一个平台上的过程中扮演着至关重要的角色。

API 的传统安全措施集中于通过授权、认证、速率限制和网络安全来访问 API。很快，它们都成为了 API 管理平台的核心安全特性。API 管理平台开始与身份联合工具集成，默认使用 TLS/SSL 证书验证，具有适当的传输层安全性。今天，API 管理平台支持高级安全措施，如 JWT/JWE 验证、Oauthv2.0 和一些以前的措施，包括 Oauthv1.0、基本身份验证和 IP 白名单。API 管理工具还通过启用 API 产品带来了 API 安全标准化方面的内容。您可以将 API 捆绑到一个 API 产品中，并在该 API 产品上应用安全策略。

业界已经看到了另一种方法，它包括位于 API 网关之前的 WAFs (Web 应用防火墙)。WAFs 可以根据配置的特定规则(包括 IP 智能、OWASP top 10、恶意 bot 检测)在 API 流量到达 API 网关之前对其进行过滤。

目前，在 Blue Altair，我们与谷歌(Apigee)建立了 6 年多的牢固合作伙伴关系，我们正在使用 Apigee 的强大安全策略，我们已经根据需求构建了多个可重用和可扩展的加速器。对于我们的银行客户，我们有一个预建的加密和解密算法逻辑，可以很容易地集成到 API 流中。同时，使用 Apigee 的共享流特性创建了一系列其他安全框架。

# API 面临的现代威胁

传统的安全机制包括授权、认证、速率限制和网络安全，这些都是强大的工具，但不是解决特定于 API 的拒绝服务(DoS)以及应用程序、数据和登录攻击的全面解决方案。如今，API 面临着无数的威胁。API 驱动的数字转换对黑帽黑客来说是一个很有吸引力的提议，可以让他们访问公司数据、敏感信息和业务应用程序。

**破解认证**是一种攻击类型，黑客探查环境，然后执行攻击以绕过认证或击败登录系统。API 通常使用现成的代理软件创建，并按原样发布在 GitHub 上进行处理。这是黑客的起点，因为他们可以预测不同的 API 端点并探索环境。黑客甚至可以利用中间人攻击窃取令牌和凭证。

**API DDoS** 攻击不同于基于卷的 DDoS 攻击。它们通常由多个客户端执行，发送流量以使 API 服务过载。由于每个客户端发送正常的流量，如果不分析每个独特 API 服务的总流量，这些攻击很难被检测到。老练的黑客甚至可以知道允许的速率，并将流量保持在限制范围内。DDoS 攻击的主要目的通常是使应用程序不可用或产生高计算成本，尤其是在服务器位于基于消费模式的云中时。

**应用和数据攻击**包括安全性受损。如今，借助开放 API 和数字化转型计划，这通常包括让合作伙伴使用自己的公司凭证通过 API 访问应用和数据。当员工离开这些合作伙伴组织之一时，很少或没有即时信息会对数据和应用程序造成巨大威胁。由于具有受损凭证的攻击者看起来像是有效的客户端，API 管理工具没有办法过滤来自流氓的合法请求。

# 机器学习和 API 安全

如前所述，要应对这些智能网络攻击，必须有一个全面的安全解决方案，不仅需要安全能力，还需要异常检测能力。人工智能和机器学习是开发这种综合智能能力的优秀工具，可用于管理具有挑战性和新出现的安全威胁。借助 AI 和 ML 的自我学习认知能力，可以开发安全模型来识别和标记异常行为和恶意数据趋势。它将导致在各种环境和情况下阻止 API 攻击和异常行为模式。因此，它为 API 增加了持续学习能力，并且在事先不了解攻击和书面策略的情况下标记异常行为。

有了 API 管理工具，API 消费者的行为和资源利用数据就很容易获得。组织必须从平台日志记录等现有信息中了解实时消费者行为。机器学习的能力可以帮助我们区分积极和消极的模式。推荐了各种机器学习模型，如朴素贝叶斯、决策树、随机森林和支持向量机、深度学习和神经网络，并正在 API 安全中使用。我们必须有适当的工具和服务来拥有这些机器学习模型。这些模型需要在不同服务提供商的多个 API 上进行训练。

Cloud Armor 是 Google 作为服务提供的一个解决方案，它与 Apigee 无缝协作，使用基于 ML 的机制来保护 API 免受这些现代威胁。

# 摘要

借助所有这些工具和技术，企业正在利用智能学习和认知能力来转变其业务模式。除了保护 API 的传统方式，API 行为安全是当今快速变化的技术世界的需要。我们可以很方便地得出结论，API 安全性是当今最重要的需求，ML/AI 正被用作在各个层实现 API 安全性的有效和智能的工具。然而，需要更多的研究和开发工作来解决一些合规性和标准化问题

在下一篇文章中，我将带你了解 Apigee 的安全策略的实现，并用 GCP 基于 ML 的服务 Cloud Armor 对其进行补充。

参考

> **如何自动化 API 安全？Datatheorem 于 2019 年 9 月 13 日发布的白皮书。检索自** [**链接**](https://www.bitpipe.com/detail/RES/1568215800_961.html)
> 
> **不断发展的 API 安全格局。平安身份公司 2019 年 10 月 03 日发布的白皮书。金莱恩是作者。从** [**链接**](https://www.bitpipe.com/detail/RES/1569962542_679.html) 中检索
> 
> **企业中的 API 安全 42crunch 与 APIdays 和 Platformable 于 2017 年 9 月共同发布的白皮书。从** [**链接**](https://42crunch.com/whitepaper/) 中检索
> 
> **罗伊·菲尔丁博士论文 2000 年软件体系结构的设计** [**链接**](https://www.ics.uci.edu/~fielding/pubs/dissertation/top.html)