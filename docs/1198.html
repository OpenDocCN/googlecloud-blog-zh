<html>
<head>
<title>Deploying Containers to Cloud Run in &lt;5mins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在&lt;5mins</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/deploying-containers-to-cloud-run-in-5mins-b03f1d8d4a64?source=collection_archive---------0-----------------------#2019-11-10">https://medium.com/google-cloud/deploying-containers-to-cloud-run-in-5mins-b03f1d8d4a64?source=collection_archive---------0-----------------------#2019-11-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if"><p id="92af" class="ig ih hi bd ii ij ik il im in io ip dx translated">Update: 11/15/2019<br/>将容器部署到云运行云运行现已普遍可用<br/> <a class="ae iq" href="https://cloud.google.com/blog/products/serverless/knative-based-cloud-run-services-are-ga" rel="noopener ugc nofollow" target="_blank">点击此处了解更多信息</a></p></blockquote><figure class="is it iu iv iw ix er es paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="er es ir"><img src="../Images/c7d2b0126edc67c74eb2d2ba82ad472b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ONfWO59UfHQfN_7e3rS-Sw.jpeg"/></div></div></figure><figure class="jf jg jh ji fd ix er es paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="er es je"><img src="../Images/559595a6d229cb4cc80fbb442087854b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hdY9vD_acPkIWsMFzirsiw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">云运行</figcaption></figure><p id="dea5" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">今天的软件开发人员可以专注于更快地构建应用程序，而不必担心他们的代码如何在其他环境中运行，这是因为容器化可以将应用程序及其配置和依赖性捆绑到一种跨不同环境运行的有效方式中。</p><figure class="jf jg jh ji fd ix er es paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="er es kk"><img src="../Images/cbc4d8bb3fdf6d9ffc5476d45e9297e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/0*U3mH_6Kro_dEvh-v"/></div></div></figure><p id="ba65" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">部署容器(Docker或Kubernetes)也可能是一件令人头痛的事情，当你还必须负责提供底层基础设施时，然而，Google Cloud为你提供了一种以无服务器方式将容器化的应用程序部署到云中的方法，称为<a class="ae iq" href="https://cloud.google.com/run/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hj"> Cloud Run </strong> </a>，它抽象出底层基础设施，自动运行和自动扩展你的无状态应用程序。</p><figure class="jf jg jh ji fd ix"><div class="bz dy l di"><div class="kl km l"/></div></figure><p id="a252" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">在本文中，我们将简要地构建和部署一个容器化的应用程序，并部署到Cloud Run。</p><p id="586b" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">在您开始之前:<br/> -设置一个<a class="ae iq" href="https://cloud.google.com/gcp/getting-started/" rel="noopener ugc nofollow" target="_blank"> Google Cloud帐户&amp;项目</a> <br/> -设置<a class="ae iq" href="https://cloud.google.com/shell/" rel="noopener ugc nofollow" target="_blank"> Google Cloud Shell </a>或<a class="ae iq" href="https://cloud.google.com/sdk/" rel="noopener ugc nofollow" target="_blank">下载其SDK </a> <br/> -克隆您的容器化应用程序或<a class="ae iq" href="https://gist.github.com/Timtech4u/6639a92b4197ea831ba9b975c9b34a76" rel="noopener ugc nofollow" target="_blank">复制我的示例</a></p><figure class="jf jg jh ji fd ix"><div class="bz dy l di"><div class="kn km l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">我的代码片段</figcaption></figure><h1 id="79c6" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">构建和发布容器图像</h1><p id="55db" class="pw-post-body-paragraph jn jo hi jp b jq lm js jt ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj ip hb bi translated"><a class="ae iq" href="https://cloud.google.com/cloud-build/" rel="noopener ugc nofollow" target="_blank">云构建</a>允许我们在云上构建Docker映像，我们所需要的只是我们的项目文件(其中包括一个Docker文件)。</p><p id="98fa" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">下面的命令在云Shell上运行，以<strong class="jp hj">构建</strong>我们的Docker映像，并<strong class="jp hj">将</strong>映像推送到<a class="ae iq" href="https://cloud.google.com/container-registry/" rel="noopener ugc nofollow" target="_blank">容器注册表</a>。</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="be97" class="lw kp hi ls b fi lx ly l lz ma">gcloud builds submit --tag gcr.io/&lt;PROJECT_ID&gt;/demo-image .</span></pre><p id="4e2e" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">用您的实际项目ID值替换<code class="du mb mc md ls b">&lt;PROJECT_ID&gt; </code>。</p><p id="7565" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated"><em class="me">注意，如果您正在构建更大的图像，您可以传递一个超时参数，例如:</em> <code class="du mb mc md ls b"><em class="me">--timeout=600s</em></code></p><h1 id="f893" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">部署到云运行</h1><p id="5ffd" class="pw-post-body-paragraph jn jo hi jp b jq lm js jt ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj ip hb bi translated">我们将使用以下命令从云Shell部署我们的映像:</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="9e28" class="lw kp hi ls b fi lx ly l lz ma">gcloud beta run deploy demo-app --image gcr.io/&lt;PROJECT_ID&gt;/demo-image --<!-- -->region us-central1 --platform managed --allow-unauthenticated --quiet</span></pre><p id="15b3" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">嘣！应用程序容器已部署到云运行。😀</p></div><div class="ab cl mf mg gp mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="hb hc hd he hf"><p id="3f18" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">云运行值得团队研究，它通过允许部署到Kubernetes集群(<a class="ae iq" href="https://cloud.google.com/run/docs/quickstarts/prebuilt-deploy-gke" rel="noopener ugc nofollow" target="_blank"> Cloud Run for Anthos </a>)等提供了可负担性、安全性、隔离性和灵活性。</p><p id="4f3a" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">这里有一个简短的演示，展示了使用Cloud Run部署和访问容器有多快。</p><figure class="jf jg jh ji fd ix"><div class="bz dy l di"><div class="mm km l"/></div></figure><p id="f2f5" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">另一个直接部署到云的简短演示使用<a class="ae iq" href="https://www.youtube.com/watch?v=14B2zdoBnIY&amp;list=PL1Szsm9yZH_fGfktEvfqOq4uj3sPabEJe&amp;index=2" rel="noopener ugc nofollow" target="_blank"> Cloud Run按钮从您的Git存储库运行。</a></p><figure class="jf jg jh ji fd ix"><div class="bz dy l di"><div class="mm km l"/></div></figure><p id="b1be" class="pw-post-body-paragraph jn jo hi jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj ip hb bi translated">查看更多关于云运行的资源:<br/>📚<a class="ae iq" href="https://cloud.google.com/run/" rel="noopener ugc nofollow" target="_blank">云润产品概述</a> <br/>💻<a class="ae iq" href="https://github.com/steren/awesome-cloudrun" rel="noopener ugc nofollow" target="_blank">牛逼云跑</a> <br/>🙋<a class="ae iq" href="https://github.com/ahmetb/cloud-run-faq" rel="noopener ugc nofollow" target="_blank">云运行常见问题解答</a></p><blockquote class="if"><p id="6af0" class="ig ih hi bd ii ij mn mo mp mq mr ip dx translated">感谢您通读！如果我错过了任何步骤，如果有些事情不太适合你，或者如果这个指南有帮助，请告诉我。</p></blockquote><p id="3f77" class="pw-post-body-paragraph jn jo hi jp b jq ms js jt ju mt jw jx jy mu ka kb kc mv ke kf kg mw ki kj ip hb bi translated"><a class="ae iq" href="https://blog.mercurie.ng/deploying-containers-to-cloud-run-in-5mins/" rel="noopener ugc nofollow" target="_blank">最初发布于Mercurie博客</a></p></div></div>    
</body>
</html>