<html>
<head>
<title>A Developer’s Guide to Building Serverless Applications on the Cloud — Part 1 (Deployment)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在云上构建无服务器应用程序的开发人员指南——第1部分(部署)</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/a-developers-guide-to-building-serverless-applications-on-the-cloud-part-1-deployment-b1f5d824facd?source=collection_archive---------4-----------------------#2020-01-23">https://medium.com/google-cloud/a-developers-guide-to-building-serverless-applications-on-the-cloud-part-1-deployment-b1f5d824facd?source=collection_archive---------4-----------------------#2020-01-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/bbeb4693f4fb65a6615e08440cb8f894.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0DU1H5qYPL6nj_X4lYLhqw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">基于谷歌云的无服务器计算</figcaption></figure><p id="2e8e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这个系列中，我将讨论一些对使用Google Cloud构建无服务器应用程序至关重要的主题，它们将跨越部署、CI/CD、工具、后端即服务等等。</p><blockquote class="js"><p id="ef65" class="jt ju hi bd jv jw jx jy jz ka kb jr dx translated">在这篇文章中，我将讨论DevShopZ 的开发人员如何轻松地从本地开发转移到云计算。这涵盖了简单的功能、基于web的应用程序和包含代码示例的容器化应用程序。</p></blockquote><p id="3a63" class="pw-post-body-paragraph iu iv hi iw b ix kd iz ja jb ke jd je jf kf jh ji jj kg jl jm jn kh jp jq jr hb bi translated">如果你是无服务器新手，看看<a class="ae ki" href="https://fullstackgcp.com/journey-to-serverless-on-google-cloud-platform-ck101zpb2005ek7s1rcsgqnug" rel="noopener ugc nofollow" target="_blank">这篇文章</a></p><p id="ef0a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">DevShopZ最近为一个客户启动了一个新项目，她的工程师在构建项目方面取得了很大的进展，但是，项目经理希望对项目进行部署，这样客户就可以知道他得到了什么，并向团队提供反馈。</p><p id="edc2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">DevShopZ的开发人员通过构建简单的API端点来启动该项目，然后继续集成前端和Docker等其他工具。我们将看到在项目的每个阶段部署是如何进行的。</p><h1 id="2ce6" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">开始之前:</h1><ul class=""><li id="c2e8" class="lh li hi iw b ix lj jb lk jf ll jj lm jn ln jr lo lp lq lr bi translated">开发者免费使用谷歌云账户，详情<a class="ae ki" href="https://fullstackgcp.com/cloud.google.com/free" rel="noopener ugc nofollow" target="_blank">见</a></li><li id="ceda" class="lh li hi iw b ix ls jb lt jf lu jj lv jn lw jr lo lp lq lr bi translated">他们创建了一个新的GCP项目，你也可以在这里做同样的<a class="ae ki" href="https://console.cloud.google.com/project" rel="noopener ugc nofollow" target="_blank"/></li><li id="96c2" class="lh li hi iw b ix ls jb lt jf lu jj lv jn lw jr lo lp lq lr bi translated">开发人员使用<a class="ae ki" href="https://cloud.google.com/shell/" rel="noopener ugc nofollow" target="_blank"> Google Cloud Shell终端</a>来执行部署命令。</li></ul><h1 id="6d2d" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">部署功能</h1><p id="bf09" class="pw-post-body-paragraph iu iv hi iw b ix lj iz ja jb lk jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">工程师们构建了第一个简单的端点，这是一个返回JSON消息的Python函数。<em class="ma">提示:你可以选择任何一种语言</em></p><figure class="mb mc md me fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">功能代码</figcaption></figure><p id="b31d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="ma">端点功能部署到云功能</em></p><blockquote class="mh mi mj"><p id="28cf" class="iu iv ma iw b ix iy iz ja jb jc jd je mk jg jh ji ml jk jl jm mm jo jp jq jr hb bi translated"><a class="ae ki" href="https://cloud.google.com/functions/" rel="noopener ugc nofollow" target="_blank"><em class="hi">Google Cloud Functions</em></a><em class="hi">是一个轻量级计算解决方案，开发人员可以创建单一用途的独立功能来响应云事件，而无需管理服务器或运行时环境。</em></p></blockquote><pre class="mb mc md me fd mn mo mp mq aw mr bi"><span id="7945" class="ms kk hi mo b fi mt mu l mv mw">gcloud functions deploy hello_world --runtime python37 --trigger-http</span></pre><p id="a08d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">从<a class="ae ki" href="https://gist.github.com/Timtech4u/c6b701830cc4ab2bef09d8f0f4d52766" rel="noopener ugc nofollow" target="_blank"> Gist </a>中克隆示例代码或设置自己的代码后，在Cloud Shell上执行上面的命令。</p><figure class="mb mc md me fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mx"><img src="../Images/1b5b2acb11cb354fd43530e1f984d28e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/0*lZHHQokTN0RO57w0.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><em class="kc">部署功能</em></figcaption></figure><h1 id="d86d" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">部署Web应用程序(没有容器)</h1><p id="500e" class="pw-post-body-paragraph iu iv hi iw b ix lj iz ja jb lk jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">该项目已经发展成为一个使用Flask Web框架构建的完整的Web应用程序，现在包括静态文件。<br/> <em class="ma">提示:你可以选择使用任何框架</em></p><figure class="mb mc md me fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">Web应用程序代码</figcaption></figure><p id="ad34" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="ma">Web应用被部署到应用引擎</em></p><blockquote class="mh mi mj"><p id="9f78" class="iu iv ma iw b ix iy iz ja jb jc jd je mk jg jh ji ml jk jl jm mm jo jp jq jr hb bi translated"><a class="ae ki" href="https://cloud.google.com/appengine/" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> App Engine </em> </a> <em class="hi">是一个完全托管的无服务器平台，用于大规模开发和托管web应用。您可以从几种流行的语言、库和框架中进行选择来开发您的应用程序，然后让App Engine负责根据需求配置服务器和扩展您的应用程序实例。</em></p></blockquote><pre class="mb mc md me fd mn mo mp mq aw mr bi"><span id="7605" class="ms kk hi mo b fi mt mu l mv mw">gcloud app deploy</span></pre><p id="e9d2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在克隆了来自<a class="ae ki" href="https://gist.github.com/Timtech4u/7b420b74d83cf9e42ab0d7bfce60c8b6" rel="noopener ugc nofollow" target="_blank"> Gist </a>的示例代码或者设置了您自己的代码之后，在Cloud Shell上执行上面的命令</p><figure class="mb mc md me fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es my"><img src="../Images/6a18059009005b38365565eaa7ce0b55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9cS2-Yu3gTSM1jxL.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><em class="kc">已部署的Web应用程序</em></figcaption></figure><h1 id="0251" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">部署容器</h1><p id="c423" class="pw-post-body-paragraph iu iv hi iw b ix lj iz ja jb lk jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">该团队决定通过对现有的Web应用程序进行Dockerizing来采用容器化技术。更新了源代码，以包含用于构建容器映像的<em class="ma"> Dockerfile </em>。</p><figure class="mb mc md me fd ij"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">Web应用程序容器代码</figcaption></figure><p id="f9d0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="ma">在Google Cloud上部署容器映像有多种选择，</em> <a class="ae ki" href="https://www.youtube.com/watch?v=jh0fPT-AWwM" rel="noopener ugc nofollow" target="_blank"> <em class="ma">看这个短视频</em> </a></p><blockquote class="mh mi mj"><p id="4651" class="iu iv ma iw b ix iy iz ja jb jc jd je mk jg jh ji ml jk jl jm mm jo jp jq jr hb bi translated"><a class="ae ki" href="https://cloud.google.com/run/" rel="noopener ugc nofollow" target="_blank"> <em class="hi">云运行</em> </a> <em class="hi">是一个托管计算平台，可以自动部署和扩展您的无状态容器。云运行是无服务器的；它将所有基础架构管理抽象化，因此您可以专注于最重要的事情—构建优秀的应用程序。</em></p></blockquote><pre class="mb mc md me fd mn mo mp mq aw mr bi"><span id="945d" class="ms kk hi mo b fi mt mu l mv mw">gcloud builds submit --config cloudbuild.yaml</span></pre><p id="3f1e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> cloudbuild.yaml </strong>文件是<a class="ae ki" href="https://cloud.google.com/cloud-build/" rel="noopener ugc nofollow" target="_blank"> Google Cloud Build </a>的配置文件，包含两个步骤:<br/>一是构建容器镜像&amp;上传到<a class="ae ki" href="https://cloud.google.com/container-registry" rel="noopener ugc nofollow" target="_blank"> Google容器注册表</a>；第二步是将映像部署到云上运行。</p><p id="31ec" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">从<a class="ae ki" href="https://gist.github.com/Timtech4u/fda016845505878fe412e8c1881f804b" rel="noopener ugc nofollow" target="_blank"> Gist </a>中克隆示例代码或设置自己的代码后，在Cloud Shell上执行上面的命令</p><figure class="mb mc md me fd ij er es paragraph-image"><div class="er es mz"><img src="../Images/993b5ca2bdeb28f0589f6277de686db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/0*rw3SMPGtn-d8CHVm.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><em class="kc">已部署的容器化Web应用</em></figcaption></figure><h1 id="6af7" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">有用的链接</h1><ul class=""><li id="d546" class="lh li hi iw b ix lj jb lk jf ll jj lm jn ln jr lo lp lq lr bi translated"><a class="ae ki" href="https://cloud.google.com/serverless-options/" rel="noopener ugc nofollow" target="_blank">谷歌云——选择无服务器选项</a></li><li id="9691" class="lh li hi iw b ix ls jb lt jf lu jj lv jn lw jr lo lp lq lr bi translated"><a class="ae ki" href="https://cloud.google.com/functions/docs/functions-framework" rel="noopener ugc nofollow" target="_blank">云功能—功能框架</a></li><li id="9846" class="lh li hi iw b ix ls jb lt jf lu jj lv jn lw jr lo lp lq lr bi translated"><a class="ae ki" href="https://cloud.google.com/appengine/docs/the-appengine-environments" rel="noopener ugc nofollow" target="_blank">应用引擎—选择应用引擎环境</a></li><li id="bc79" class="lh li hi iw b ix ls jb lt jf lu jj lv jn lw jr lo lp lq lr bi translated"><a class="ae ki" href="https://github.com/ahmetb/cloud-run-faq" rel="noopener ugc nofollow" target="_blank"> Ahmetb —云运行常见问题解答</a></li><li id="fd77" class="lh li hi iw b ix ls jb lt jf lu jj lv jn lw jr lo lp lq lr bi translated"><a class="ae ki" href="https://github.com/Timtech4u/gcp_compute_options_guide" rel="noopener ugc nofollow" target="_blank">非官方——谷歌云计算选项指南</a></li></ul><blockquote class="js"><p id="73d0" class="jt ju hi bd jv jw na nb nc nd ne jr dx translated">请继续关注下一篇文章，在那里我将讨论一个更令人兴奋的无服务器主题。</p></blockquote></div></div>    
</body>
</html>