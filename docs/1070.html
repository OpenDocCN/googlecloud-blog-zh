<html>
<head>
<title>Building a Slack Reminder App 🤖 with Google Cloud Functions ⚡ and Google Cloud Scheduler ⏰</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建时差提醒应用程序🤖与谷歌云功能⚡和谷歌云调度⏰</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/building-a-slack-reminder-app-with-google-cloud-functions-and-google-cloud-scheduler-4046f4c9c19?source=collection_archive---------0-----------------------#2019-07-11">https://medium.com/google-cloud/building-a-slack-reminder-app-with-google-cloud-functions-and-google-cloud-scheduler-4046f4c9c19?source=collection_archive---------0-----------------------#2019-07-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a1b4bcd01caee358329d5a4ced4be506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jse96-Tp3113JUzNzah-YA.png"/></div></div></figure><p id="ac32" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谷歌云平台提供了非常棒的工具来帮助工程师轻松实现自动化。</p><blockquote class="jo"><p id="ff00" class="jp jq hi bd jr js jt ju jv jw jx jn dx translated">在本文中，我们将构建和部署一个无服务器的应用程序，通过利用Google Cloud功能向Slack发送消息。我们还将使用Google Cloud Scheduler以3小时为间隔定期运行我们的应用程序。</p></blockquote><figure class="jz ka kb kc kd ij er es paragraph-image"><div class="er es jy"><img src="../Images/b1834b5b0df283fca00397640df8496e.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/0*LTuAhL9UfyYlo2Bs.png"/></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">我们的最终结果。</figcaption></figure><h1 id="7916" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">谷歌云功能</h1><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="fef7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Google Cloud Functions是一个轻量级计算解决方案，开发人员可以创建单一用途的独立功能来响应云事件，而无需管理服务器或运行时环境。</p><p id="4a57" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Google Cloud函数可以用Node.js、Python、Go编写，在特定语言的运行时执行。</p><p id="7a3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">云函数可以与特定的触发器相关联。触发器类型决定了函数执行的方式和时间。云函数支持以下本机触发机制:</p><ul class=""><li id="cd7c" class="ln lo hi is b it iu ix iy jb lp jf lq jj lr jn ls lt lu lv bi translated">HTTP触发器</li><li id="30a7" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">云发布/订阅触发器</li><li id="fb26" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">云存储触发器</li><li id="b31d" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">直接触发器</li><li id="c812" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">云Firestore</li><li id="8ff4" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">Firebase分析</li><li id="f70c" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">Firebase实时数据库</li><li id="9ba5" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">Firebase认证</li></ul><p id="3824" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Google Stackdriver提供了一套监控工具，帮助您了解您的云功能中发生了什么。云函数的日志可以在Stackdriver日志记录UI中查看。</p><p id="1932" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">云功能可用于多种情况，如无服务器应用后端、实时数据处理系统或人工智能应用。</p><h1 id="15d8" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">云调度程序</h1><p id="a739" class="pw-post-body-paragraph iq ir hi is b it mb iv iw ix mc iz ja jb md jd je jf me jh ji jj mf jl jm jn hb bi translated">Google Cloud Scheduler是一个完全受管的、可扩展的、容错的cron作业调度程序，它允许工程师在一个地方自动执行他们所有的计划任务。</p><p id="f153" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Google Cloud Scheduler允许你设置<em class="mg">完全管理的</em>预定工作单元，在规定的时间或固定的时间间隔执行，支持Unix cron格式<em class="mg">。</em></p><p id="a852" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">云调度程序可以与以下任一目标相关联:</p><ul class=""><li id="3e60" class="ln lo hi is b it iu ix iy jb lp jf lq jj lr jn ls lt lu lv bi translated">HTTP/S端点</li><li id="55db" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">云发布/订阅主题</li><li id="2535" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">App Engine应用程序</li></ul><p id="c4c4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，Stackdriver与云调度程序集成，提供了<em class="mg">强大的日志记录</em>，以提高作业执行和性能的透明度。</p><p id="f5e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">云调度器可以用于多种情况，例如每天发送一封报告电子邮件，每10分钟更新一些缓存数据，或者向一个端点发出请求。</p><h1 id="fca8" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">设置松弛时间</h1><p id="aad7" class="pw-post-body-paragraph iq ir hi is b it mb iv iw ix mc iz ja jb md jd je jf me jh ji jj mf jl jm jn hb bi translated">登录到您的Slack工作区，然后<a class="ae mh" href="https://api.slack.com/apps?new_app=1" rel="noopener ugc nofollow" target="_blank">创建一个新的Slack应用程序</a>，如下所示:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/157670edd2db5094e90bc98afe808a5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/0*xC1eYgkx4oug2bH4.png"/></div></figure><ul class=""><li id="766c" class="ln lo hi is b it iu ix iy jb lp jf lq jj lr jn ls lt lu lv bi translated">选择应用的名称和你的Slack团队。单击创建。</li><li id="e02c" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">单击传入网页挂钩。</li><li id="b015" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">启用传入webhooks。</li></ul><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/c2c08a939a9b0adb076c086eb4c7e371.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jGt_1k1LKoSxuqss.png"/></div></div></figure><ul class=""><li id="33b4" class="ln lo hi is b it iu ix iy jb lp jf lq jj lr jn ls lt lu lv bi translated">点击添加新的网页挂钩到团队。将打开一个授权页面。</li><li id="c837" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">从下拉菜单中，选择您希望向其发送通知的渠道。我们将使用#随机频道</li><li id="b4a6" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">单击授权。</li></ul><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mk"><img src="../Images/f1fbbe2fc6dbf2f6c237885b54f7ff76.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/0*2H1Fj02s-fRIKprt.png"/></div></figure><ul class=""><li id="e07c" class="ln lo hi is b it iu ix iy jb lp jf lq jj lr jn ls lt lu lv bi translated">已经为您的Slack应用程序创建了webhook。复制webhook并保存以备后用。</li></ul><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/51f72ff1a953ad0f2031b050e9e9a5b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/0*d5_hSNZKuGV8JW8u.png"/></div></figure><h1 id="4d71" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">设置云功能</h1><p id="5621" class="pw-post-body-paragraph iq ir hi is b it mb iv iw ix mc iz ja jb md jd je jf me jh ji jj mf jl jm jn hb bi translated">访问<a class="ae mh" href="https://console.cloud.google.com/functions/" rel="noopener ugc nofollow" target="_blank">云功能</a>和<em class="mg">创建功能</em></p><ul class=""><li id="1484" class="ln lo hi is b it iu ix iy jb lp jf lq jj lr jn ls lt lu lv bi translated">输入您的函数名</li><li id="5e9b" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">设置<em class="mg">分配的内存</em> : 256MB</li><li id="8a67" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">设置<em class="mg">触发器</em> : HTTP</li><li id="1ca0" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated"><em class="mg">认证</em>:检查—允许未经认证的调用</li><li id="8d7a" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated"><em class="mg">源代码</em> : Select —行内编辑器</li><li id="65df" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated"><em class="mg">运行时</em> : Node.js 8(以后可以随意修改以适应您的选择)</li><li id="4b5e" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated"><em class="mg">执行</em>的功能:sendToSlack</li></ul><p id="d3b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将下面的代码片段粘贴到内联编辑器中，并从Slack中将<strong class="is hj"> url </strong>的值替换到您的Webhook中，然后部署您的函数。</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="mm lm l"/></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">代码片段</figcaption></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mn"><img src="../Images/ff02f79d4fab914198d7f7adef0bd44f.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/0*HsBo7tvAziog3hrH.png"/></div></figure><p id="5bfc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，您可以访问您的云功能页面上的URL进行测试。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mo"><img src="../Images/0711a34fb924b283f7c0e7b7909dccac.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/0*qvOmHvcupOOQN1C-.png"/></div></figure><h1 id="6bf1" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">设置云调度程序</h1><p id="ce6f" class="pw-post-body-paragraph iq ir hi is b it mb iv iw ix mc iz ja jb md jd je jf me jh ji jj mf jl jm jn hb bi translated">访问(云调度程序)[<a class="ae mh" href="https://hashnode.com/util/redirect?url=https://console.cloud.google.com/cloudscheduler]" rel="noopener ugc nofollow" target="_blank">console.cloud.google.com/cloudscheduler]</a>和<em class="mg">创建作业</em></p><ul class=""><li id="8944" class="ln lo hi is b it iu ix iy jb lp jf lq jj lr jn ls lt lu lv bi translated">输入作业名称</li><li id="a870" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">设置<em class="mg">频率</em>:每3小时一次</li><li id="0cf4" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated"><em class="mg">目标</em>:选择HTTP</li><li id="df94" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated">设置<em class="mg"> URL </em>:(使用您部署的云功能URL)</li><li id="5fdc" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated"><em class="mg"> HTTP方法</em>:选择GET</li></ul><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mp"><img src="../Images/8b489a61a5a9e28d43813f6f8bdf1b58.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/0*g2dwLB6n9r_dn8iW.png"/></div></figure><p id="5d13" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">太好了！你应该每3个小时从你的Slack频道上的RestReminder Bot得到以下消息。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es jy"><img src="../Images/08f2307f15c163ee4d459de5436be619.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/0*cebKeyXrtVC4i2fR.png"/></div></figure><h2 id="b651" class="mq kk hi bd kl mr ms mt kp mu mv mw kt jb mx my kx jf mz na lb jj nb nc lf nd bi translated">额外资源</h2><ul class=""><li id="cfc5" class="ln lo hi is b it mb ix mc jb ne jf nf jj ng jn ls lt lu lv bi translated"><a class="ae mh" href="https://cloud.google.com/functions" rel="noopener ugc nofollow" target="_blank">谷歌云功能</a></li><li id="f9a9" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated"><a class="ae mh" href="https://cloud.google.com/scheduler" rel="noopener ugc nofollow" target="_blank">谷歌云调度器</a></li><li id="6741" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated"><a class="ae mh" href="https://firebase.google.com/docs/functions" rel="noopener ugc nofollow" target="_blank">fire base的云函数</a></li><li id="9d46" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated"><a class="ae mh" href="https://firebase.google.com/docs/functions/schedule-functions" rel="noopener ugc nofollow" target="_blank">fire base的预定云功能</a></li><li id="96e8" class="ln lo hi is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv bi translated"><a class="ae mh" href="https://github.com/GoogleCloudPlatform/awesome-google-cloud" rel="noopener ugc nofollow" target="_blank">谷歌云平台牛逼榜单</a></li></ul><p id="d1b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mg">感谢通读！如果我错过了任何步骤，如果有些事情不太适合你，或者如果这个指南有帮助，请告诉我。</em></p></div></div>    
</body>
</html>