<html>
<head>
<title>Deploy a coloring page generator in minutes with Cloud Run</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用云运行在几分钟内部署一个彩色页面生成器</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/deploy-a-coloring-page-generator-in-minutes-with-cloud-run-bff59e59d890?source=collection_archive---------0-----------------------#2022-04-07">https://medium.com/google-cloud/deploy-a-coloring-page-generator-in-minutes-with-cloud-run-bff59e59d890?source=collection_archive---------0-----------------------#2022-04-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1c60e588ee48d62c26f5add75344fe1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*A0eoGye0p45FcR8oimVR3g.gif"/></div></div></figure><h1 id="d649" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">👋你好</h1><p id="099f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">你写过剧本改造过形象吗？你是和别人分享了这个脚本还是在多台电脑上运行了它？您需要更新脚本或安装说明多少次？最后是把它做成一个服务还是一个在线应用？如果你的脚本是有用的，你可能想让其他人也能使用它。部署处理服务是一种经常性的需求——这种需求伴随着一系列挑战。无服务器技术让您轻松高效地应对这些挑战。</p><p id="7a41" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在这篇文章中，你将看到如何…</p><ul class=""><li id="b3c4" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">创建一个生成彩色页面的图像处理服务</li><li id="b498" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">使用最少的资源使其在线可用</li></ul><p id="b346" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">…并且用不到200行Python和JavaScript就完成了这一切！</p></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="7817" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">🛠️工具</h1><p id="0adb" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">要构建和部署着色页面生成器，您需要一些工具:</p><ul class=""><li id="cf53" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">处理图像的库</li><li id="97c5" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">web应用程序框架</li><li id="059a" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">网络服务器</li><li id="a49b" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">使演示全天候可用的无服务器解决方案</li></ul></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="2182" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">🧱建筑</h1><p id="7a88" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">以下是使用云运行的着色页面生成器的一种可能架构:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/2820178121af70dc6e6bb9b4126beda2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SecpJoaRTIPrlSsGv_dXKg.png"/></div></div></figure><p id="598d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这是工作流程:</p><ul class=""><li id="cddf" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">1.用户打开web应用程序:浏览器请求主页面。</li><li id="be42" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">2.云跑服务app HTML代码。</li><li id="9a13" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">3.浏览器请求额外的所需资源。</li><li id="6ae3" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">4.云运行服务于CSS、JavaScript和其他资源。</li><li id="980e" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">A.用户选择一幅图像，前端将图像发送到<code class="du lw lx ly lz b">/api/coloring-page</code>端点。</li><li id="d536" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">B.后端处理输入图像并返回输出图像，用户可以通过浏览器查看、下载或打印输出图像。</li></ul></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="dcde" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">🐍软件栈</h1><p id="d369" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">当然，有许多不同的软件栈可以用来实现这样的架构。</p><p id="1001" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">下面是一个基于Python的好例子:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/0389607eeb5059ee086acdb70854f083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kbwf9VRqKl_9pRO9x9xG-w.png"/></div></div></figure><p id="3645" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">它包括:</p><ul class=""><li id="b087" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><a class="ae mb" href="https://pypi.org/project/gunicorn" rel="noopener ugc nofollow" target="_blank"> Gunicorn </a>:生产级的WSGI HTTP服务器</li><li id="810b" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">烧瓶:一个流行的web应用框架</li><li id="5b06" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">scikit-image :一个广泛的图像处理库</li></ul><p id="e488" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在名为<code class="du lw lx ly lz b">requirements.txt</code>的文件中定义这些应用依赖关系:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/ae5e42d47597386b97784175230ec341.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*p2_rOHvlbr3kOBJhviONYA.png"/></div></figure></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="4d69" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">🎨图像处理</h1><p id="f9eb" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">如何去除图像中的颜色？一种方法是通过检测对象边缘，并在结果图像中移除除边缘之外的所有内容。这可以通过<a class="ae mb" href="https://wikipedia.org/wiki/Sobel_operator" rel="noopener ugc nofollow" target="_blank"> Sobel </a>滤波器来完成，这是一种卷积滤波器，可以检测图像强度变化最大的区域。</p><p id="1cd5" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">创建一个名为<code class="du lw lx ly lz b">main.py</code>的Python文件，定义一个图像处理函数，并在其中使用来自scikit-image的Sobel滤波器和其他函数:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/ce88ac4ae8c2e5f0d45650b18c3152e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*sC8g_4Sbe4JvkE3-IuoI2w.png"/></div></div></figure><blockquote class="md me mf"><p id="cb71" class="jo jp mg jq b jr km jt ju jv kn jx jy mh ko kb kc mi kp kf kg mj kq kj kk kl hb bi translated"><em class="hi">注意:NumPy和Pillow库作为scikit-image的依赖项自动安装。</em></p></blockquote><p id="64bf" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">例如，下面是如何在每个步骤中处理“云跑”徽标:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/61bfd7f89360f01e7f694ed1e781c7de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*je2Em2eSHrVwCKcWqq3T3w.png"/></div></div></figure></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="b5f4" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">✨网络应用</h1><h2 id="68f0" class="ml ir hi bd is mm mn mo iw mp mq mr ja jz ms mt je kd mu mv ji kh mw mx jm my bi translated">后端</h2><p id="8d27" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">为了暴露两个端点(<code class="du lw lx ly lz b">GET /</code>和<code class="du lw lx ly lz b">POST /api/coloring-page</code>)，在<code class="du lw lx ly lz b">main.py</code>中添加烧瓶路线:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/5bb83df917c7840b921d817ab70aa398.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*HCEIvUafupEEKeg4tXtCdA.png"/></div></figure><h2 id="1ce4" class="ml ir hi bd is mm mn mo iw mp mq mr ja jz ms mt je kd mu mv ji kh mw mx jm my bi translated">前端</h2><p id="82ea" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在浏览器端，编写一个JavaScript函数，调用<code class="du lw lx ly lz b">/api/coloring-page</code>端点并接收处理后的图像:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/fbc2290cac2152f36ccc9d91f39586cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*fp8qLIYKqTl1ANE3n-6ueQ.png"/></div></figure><p id="4ca1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">你的应用程序的基础就在那里。现在你只需要添加HTML + CSS + JS的混合来完成想要的用户体验。</p><h2 id="7298" class="ml ir hi bd is mm mn mo iw mp mq mr ja jz ms mt je kd mu mv ji kh mw mx jm my bi translated">地方发展</h2><p id="419b" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">要在您的计算机上开发和测试应用程序，一旦您的环境设置完毕，请确保您拥有所需的依赖项:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/83c89927bb7e00a5acde21c1c3ad2056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*gW5jSS_m_DdrJ8vrAbYDug.png"/></div></figure><p id="c076" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">将以下区块添加到<code class="du lw lx ly lz b">main.py</code>。仅当您手动运行应用程序时，它才会执行:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/f19e28fe88f9a63b75652da081b132b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*KOVCp7A63RQja-oz2TNkyQ.png"/></div></figure><p id="9caf" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">运行您的应用程序:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/28e64ff5b33e9eaf86625246bfaedddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*ab-plcqk4A_u4LzN_CS7Qg.png"/></div></figure><p id="e71e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">Flask启动本地web服务器:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/36d8ba318e3e87feefdb293b665ec409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*E04hdGqMC3AO-66BzG5fyQ.png"/></div></figure><blockquote class="md me mf"><p id="b8af" class="jo jp mg jq b jr km jt ju jv kn jx jy mh ko kb kc mi kp kf kg mj kq kj kk kl hb bi translated"><em class="hi">注意:在这种模式下，您使用的是开发web服务器(不适合生产)。接下来，您将使用Gunicorn(一种生产级服务器)来设置部署以服务于您的应用程序。</em></p></blockquote><p id="b207" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">你都准备好了。在你的浏览器中打开<code class="du lw lx ly lz b">localhost:8080</code>，测试，提炼，迭代。</p></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="c5a2" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">🚀部署</h1><p id="d318" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">一旦您的应用程序准备就绪，您可以在一个名为<code class="du lw lx ly lz b">Procfile</code>的文件中用这一行代码定义它的服务方式:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/dcaf9b2dbb32f5ea54f1e573ca33d30f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*b-UqCiIfH1xb4O5ycx7M-Q.png"/></div></figure><p id="d082" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在此阶段，以下是典型项目中的文件:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/7a9f2f050a28dc509bad1d6cc4aec866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*7S3XGplsZn7aCAaHu-Jdqg.png"/></div></figure><p id="3eb2" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">就这样，您现在可以从源文件夹部署您的应用程序了:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/0f382c72e954ca3211c51edd8f09c61b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*-rElij1wP6lT0PtoNj928g.png"/></div></figure></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="5f94" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">引擎盖下的⚙️</h1><p id="360f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">命令行输出详细描述了所有不同的步骤:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/d728fe8674271fd8ae5f21da2d620417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*YzsvbclKXnk2KFzwC7wNBg.png"/></div></figure><p id="f393" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">间接调用Cloud Build来容器化你的app。它的核心组件之一是Google Cloud <a class="ae mb" href="https://github.com/GoogleCloudPlatform/buildpacks" rel="noopener ugc nofollow" target="_blank"> Buildpacks </a>，它可以从您的源代码自动构建一个生产就绪的容器映像。以下是主要步骤:</p><ul class=""><li id="56ad" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">云构建获取源代码。</li><li id="0365" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">Buildpacks自动检测应用程序语言(这里是Python ),并使用相应的安全基础映像。</li><li id="246b" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">Buildpacks安装应用依赖项(在Python的<code class="du lw lx ly lz b">requirements.txt</code>中定义)。</li><li id="c9b0" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">Buildpacks配置服务入口点(在Python的<code class="du lw lx ly lz b">Procfile</code>中定义)。</li><li id="1be4" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">云构建将容器映像推送到<a class="ae mb" href="https://cloud.google.com/artifact-registry" rel="noopener ugc nofollow" target="_blank">工件注册表</a>。</li><li id="947e" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">Cloud Run基于这个容器映像创建服务的新版本。</li><li id="2e2d" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">云运行将生产流量路由到it部门。</li></ul><blockquote class="md me mf"><p id="7177" class="jo jp mg jq b jr km jt ju jv kn jx jy mh ko kb kc mi kp kf kg mj kq kj kk kl hb bi translated">注意:<br/> - Buildpacks目前支持以下运行时:Go，Java，。NET、Node.js和Python。<br/> -基本映像由谷歌积极维护，扫描安全漏洞，并修补已知问题。这意味着，当您部署更新时，您的服务基于尽可能安全的映像。<br/> -如果您需要构建自己的容器映像，例如使用自定义运行时，您可以添加自己的<code class="du lw lx ly lz b">Dockerfile</code>，Buildpacks将使用它。</p></blockquote></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="2841" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">💫更新</h1><p id="989c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">来自真实用户的更多测试显示了一些问题。</p><p id="bddf" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">首先，该应用程序不处理用数码相机在非原生方向拍摄的照片。您可以使用EXIF方向数据来解决这个问题:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/880f60f0d95158160db2c62956b24a94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*uynIAotvDG0qoOeBOTl_QA.png"/></div></figure><p id="0bd2" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">此外，该应用程序对输入图像中的细节过于敏感。绘画中的纹理或图片中的噪声会在处理后的图像中产生许多边缘。您可以通过预先添加去噪步骤来改进处理算法:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/59999d8ee76d66a339cf300325b0fe80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*cH68EUUcrEwgqbbrxC6gIg.png"/></div></figure><p id="d622" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这个额外的步骤使彩色页面更干净，并减少了打印时使用的墨水量:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/128948efc015cbf3fd9e0885765fd96a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sUrm87Gbc6JXq-ESvdjvXw.png"/></div></div></figure><p id="b062" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">重新部署，应用程序会自动更新:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/ba77b56f7e5cf6a71702ff8287166785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*nZubLUqea4Tr6R9DAbwm5w.png"/></div></figure></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="5be1" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">🎉它是活的</h1><p id="eb54" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">该应用在Cloud Run中显示为一项服务:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/11d0567daaae802cbcec587163d76ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SDcZzkB1a5ZJFeGQT-H__w.png"/></div></div></figure><p id="dec2" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">服务控制面板为您提供了应用使用的概览:</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/49a13af549906c75fc763afd94c8c3e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7kwCH5smK9AjLN9MmnNK7w.png"/></div></div></figure><p id="2d5f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">就是这样；您的图像处理应用已投入生产！</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/505cd1653deb7120af833fbdb119f9c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*FR6K-3gmfmoPH-JlrhD7vA.gif"/></div></div></figure></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="bc98" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">🤯它是无服务器的</h1><p id="41c3" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在这种架构中使用云运行有很多好处:</p><ul class=""><li id="9874" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">您的应用程序全天候可用。</li><li id="8349" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">环境是完全可管理的:您可以专注于您的代码，而不用担心基础设施。</li><li id="7a7a" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">您的应用程序可通过HTTPS自动使用。</li><li id="b5dc" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">您可以将您的应用程序映射到自定义域。</li><li id="dfba" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">云运行会自动扩展实例的数量，并且计费只包括代码运行时使用的资源。</li><li id="d4b7" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">如果您的应用程序未被使用，云运行将缩减至零。</li><li id="ced6" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">如果你的应用程序获得了更多的流量(想象一下它成为了新闻)，那么Cloud Run可以根据需要的实例数量进行扩展。</li><li id="b0d5" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">您可以通过微调许多设置来控制性能和成本:CPU、内存、并发、最小实例、最大实例等等。</li><li id="b7ef" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">每个月，<a class="ae mb" href="https://cloud.google.com/run/pricing" rel="noopener ugc nofollow" target="_blank">免费层</a>免费提供前50个vCPU小时、100个GiB小时和200万个请求。</li></ul></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="381f" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">💾源代码</h1><p id="2353" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">该项目仅包含7个文件和不到200行Python + JavaScript代码。</p><p id="a035" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">您可以重复使用此演示作为基础来构建您自己的图像处理应用程序:</p><ul class=""><li id="cd84" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">在GitHub 上查看源代码。</li><li id="a8c8" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">有关在几分钟内自行部署应用程序的分步说明，请参见<a class="ae mb" href="https://github.com/PicardParis/cherry-on-py/blob/main/cr_image_processing/DEPLOY.md" rel="noopener ugc nofollow" target="_blank">“从头部署”</a>。</li></ul></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="8f9d" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">🖖·莫尔</h1><ul class=""><li id="1698" class="kr ks hi jq b jr js jv jw jz nc kd nd kh ne kl kw kx ky kz bi translated">尝试演示并生成自己的彩色页面。</li><li id="8ad3" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><a class="ae mb" href="https://cloud.google.com/run/docs" rel="noopener ugc nofollow" target="_blank">了解更多关于云跑的</a>。</li><li id="d5f6" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">如需更多云内容，请在Twitter ( <a class="ae mb" href="https://twitter.com/PicardParis" rel="noopener ugc nofollow" target="_blank"> @PicardParis </a>)或LinkedIn ( <a class="ae mb" href="https://linkedin.com/in/PicardParis" rel="noopener ugc nofollow" target="_blank"> in/PicardParis </a>)上关注我，并随时联系任何反馈或问题。</li></ul></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><h1 id="2dc1" class="iq ir hi bd is it lm iv iw ix ln iz ja jb lo jd je jf lp jh ji jj lq jl jm jn bi translated">📜同样在这个系列中</h1><ol class=""><li id="f8b3" class="kr ks hi jq b jr js jv jw jz nc kd nd kh ne kl nf kx ky kz bi translated"><a class="ae mb" rel="noopener" href="/google-cloud/️-auto-generate-video-summaries-with-a-machine-learning-model-and-a-serverless-pipeline-c2f261c8035c?source=friends_link&amp;sk=f94ff51885c51dd52539848ce04654ab">总结视频</a></li><li id="56d2" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl nf kx ky kz bi translated"><a class="ae mb" rel="noopener" href="/google-cloud/video-object-tracking-as-a-service-18eb4227df34?source=friends_link&amp;sk=c9602c33c77aa950a59282b6de5c0c57">跟踪视频对象</a></li><li id="d026" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl nf kx ky kz bi translated"><a class="ae mb" rel="noopener" href="/google-cloud/face-detection-and-processing-in-300-lines-of-code-38dc51a115d4?source=friends_link&amp;sk=cc252ab86eab9ed2e8583963d0598661">人脸检测和处理</a></li><li id="0501" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl nf kx ky kz bi translated">处理图像</li></ol></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><p id="157a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="mg">原载于2022年4月5日</em> <a class="ae mb" href="https://cloud.google.com/blog/topics/developers-practitioners/deploy-coloring-page-generator-minutes-cloud-run" rel="noopener ugc nofollow" target="_blank"> <em class="mg">谷歌云博客</em> </a> <em class="mg">。</em></p></div></div>    
</body>
</html>