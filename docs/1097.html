<html>
<head>
<title>Understanding Firebase Cloud Functions and Triggers ğŸ”¥â˜ï¸ âš¡</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">äº†è§£Firebaseäº‘åŠŸèƒ½å’Œè§¦å‘å™¨ğŸ”¥â˜ï¸ âš¡</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/google-cloud/understanding-firebase-cloud-functions-and-triggers-%EF%B8%8F-85a8fe89be3c?source=collection_archive---------2-----------------------#2019-07-29">https://medium.com/google-cloud/understanding-firebase-cloud-functions-and-triggers-%EF%B8%8F-85a8fe89be3c?source=collection_archive---------2-----------------------#2019-07-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/532a8094c7a0d239ba7e1011ab9137d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0a8UZxHW5C7FVx7aQRFOlg.jpeg"/></div></div></figure><p id="4177" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å¯¹äºFirebaseå¼€å‘äººå‘˜æ¥è¯´ï¼ŒFirebaseçš„äº‘åŠŸèƒ½æä¾›äº†ä¸€ç§æ–¹å¼æ¥æ‰©å±•Firebaseçš„è¡Œä¸ºï¼Œå¹¶é€šè¿‡æ·»åŠ æœåŠ¡å™¨ç«¯ä»£ç æ¥é›†æˆFirebaseçš„åŠŸèƒ½ã€‚è¿™ä¹Ÿå¯ä»¥ç§°ä¸º<a class="ae jo" href="https://en.wikipedia.org/wiki/Mobile_backend_as_a_service" rel="noopener ugc nofollow" target="_blank">åç«¯å³æœåŠ¡</a></p><p id="61a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™æ‰©å±•äº†Firebaseçš„ç”¨é€”ï¼Œä½¿å…¶ä¸ä»…ä»…æ˜¯ä½œä¸ºåº”ç”¨ç¨‹åºçš„æ•°æ®å­˜å‚¨ï¼Œè€Œæ˜¯èƒ½å¤Ÿæ‰§è¡Œéœ€è¦æœåŠ¡å™¨ç«¯ç¯å¢ƒçš„é€»è¾‘ã€‚æœ¬æ–‡æä¾›äº†ä¸€äº›ä»£ç ç‰‡æ®µï¼Œå¯ç”¨äºåœ¨äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡ŒåŠŸèƒ½ã€‚</p><p id="95b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">æ­¤å¤–ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸€ä¸ªæœ€è¿‘å¼•å…¥çš„ç‰¹æ€§ï¼Œ<a class="ae jo" href="https://firebase.googleblog.com/2019/04/schedule-cloud-functions-firebase-cron.html" rel="noopener ugc nofollow" target="_blank">ä¸ºFirebase (cron) </a>è°ƒåº¦äº‘åŠŸèƒ½ã€‚è¿™å…è®¸å¼€å‘äººå‘˜å®‰æ’ä¸€ä¸ªå‡½æ•°å®šæœŸæ‰§è¡Œï¼Œç±»ä¼¼äºcronä½œä¸šã€‚</p><h1 id="8e7f" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Firebaseäº‘å‡½æ•°</h1><figure class="kn ko kp kq fd ij"><div class="bz dy l di"><div class="kr ks l"/></div></figure><p id="dcd2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Firebaseçš„Firebaseäº‘åŠŸèƒ½å…è®¸æ‚¨è‡ªåŠ¨è¿è¡Œåç«¯ä»£ç ï¼Œä»¥å“åº”ç”±Firebaseç‰¹æ€§å’ŒHTTPSè¯·æ±‚è§¦å‘çš„äº‹ä»¶ã€‚ä½ çš„ä»£ç å­˜å‚¨åœ¨è°·æ­Œçš„äº‘ä¸­ï¼Œåœ¨ä¸€ä¸ªæ‰˜ç®¡çš„ç¯å¢ƒä¸­è¿è¡Œã€‚ä¸éœ€è¦ç®¡ç†å’Œæ‰©å±•æ‚¨è‡ªå·±çš„æœåŠ¡å™¨ã€‚</p><p id="dc4c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è°·æ­Œäº‘åŠŸèƒ½æ˜¯è°·æ­Œçš„æ— æœåŠ¡å™¨è®¡ç®—è§£å†³æ–¹æ¡ˆï¼Œç”¨äºåˆ›å»ºäº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºã€‚å®ƒæ˜¯Googleäº‘å¹³å°å›¢é˜Ÿå’ŒFirebaseå›¢é˜Ÿçš„è”åˆäº§å“ã€‚</p><p id="46a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å¦‚æœä½ æ˜¯ä¸€ä¸ªå¼€å‘ç§»åŠ¨åº”ç”¨æˆ–ç§»åŠ¨ç½‘ç»œåº”ç”¨çš„å¼€å‘è€…ï¼Œä½ åº”è¯¥ä¸ºFirebaseä½¿ç”¨äº‘åŠŸèƒ½ã€‚Firebaseä¸ºç§»åŠ¨å¼€å‘è€…æä¾›äº†ä¸€æ•´å¥—å…¨é¢ç®¡ç†çš„ä»¥ç§»åŠ¨ä¸ºä¸­å¿ƒçš„æœåŠ¡ï¼ŒåŒ…æ‹¬åˆ†æã€è®¤è¯å’Œå®æ—¶æ•°æ®åº“ã€‚äº‘åŠŸèƒ½é€šè¿‡æ·»åŠ æœåŠ¡å™¨ç«¯ä»£ç ï¼Œæä¾›äº†ä¸€ç§æ‰©å±•å’Œè¿æ¥Firebaseç‰¹æ€§è¡Œä¸ºçš„æ–¹å¼ï¼Œä»è€Œå®Œå–„äº†äº§å“ã€‚å¯¹äºéœ€è¦æ›´å…¨åŠŸèƒ½åç«¯çš„å¼€å‘è€…æ¥è¯´ï¼ŒCloud Functionsæä¾›äº†ä¸€ä¸ªé€šå¾€Googleäº‘å¹³å°å¼ºå¤§åŠŸèƒ½çš„å…¥å£ã€‚</p><p id="2429" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">å‡½æ•°å¯ä»¥ç”¨JavaScriptæˆ–TypeScriptç¼–å†™ã€‚</strong></p><h1 id="cd48" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Firebaseäº‘å‡½æ•°è§¦å‘å™¨å’Œä»£ç ç‰‡æ®µ</h1><p id="45e4" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">è¦å¼€å§‹ä½¿ç”¨Firebaseä¸Šçš„äº‘åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§è¿™é‡Œçš„è¯´æ˜<a class="ae jo" href="https://firebase.google.com/docs/functions/get-started" rel="noopener ugc nofollow" target="_blank">è¿›è¡Œè®¾ç½®ã€‚å¦‚æœä½ ä¹Ÿæƒ³åœ¨æœ¬åœ°æµ‹è¯•äº‘å‡½æ•°ï¼Œä½¿ç”¨è¿™é‡Œçš„æŒ‡å—</a><a class="ae jo" href="https://firebase.google.com/docs/functions/local-emulator" rel="noopener ugc nofollow" target="_blank">å®‰è£…æ¨¡æ‹Ÿå™¨</a></p><h1 id="0803" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">äº‘Firestoreè§¦å‘å™¨</h1><p id="bb3d" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">Firebase SDKçš„äº‘å‡½æ•°å¯¼å‡ºä¸€ä¸ª<em class="ky"> functions.firestore </em>å¯¹è±¡ï¼Œå…è®¸æ‚¨åˆ›å»ºä¸ç‰¹å®šäº‘firestoreäº‹ä»¶ç›¸å…³çš„å¤„ç†ç¨‹åºï¼Œä¾‹å¦‚:</p><ul class=""><li id="4c4d" class="kz la hi is b it iu ix iy jb lb jf lc jj ld jn le lf lg lh bi translated"><strong class="is hj"> onCreate </strong>:ç¬¬ä¸€æ¬¡å†™å…¥æ–‡æ¡£æ—¶è§¦å‘ã€‚</li><li id="aa3f" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><strong class="is hj"> onUpdate </strong>:å½“ä¸€å¼ å•æ®å·²ç»å­˜åœ¨ï¼Œå¹¶ä¸”æœ‰å€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ã€‚</li><li id="753e" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><strong class="is hj"> onDelete </strong>:åˆ é™¤æœ‰æ•°æ®çš„å•æ®æ—¶è§¦å‘ã€‚</li><li id="463d" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><strong class="is hj"> onWrite </strong>:è§¦å‘onCreateã€onUpdateæˆ–onDeleteæ—¶è§¦å‘ã€‚</li></ul><pre class="kn ko kp kq fd ln lo lp lq aw lr bi"><span id="0ba6" class="ls jq hi lo b fi lt lu l lv lw">// Listens for any document created in the users collection<br/>exports.createUser = functions.firestore<br/>    .document('users/{userId}')<br/>    .onCreate((snap, context) =&gt; {<br/>      // Get an object representing the document<br/>      const newValue = snap.data();<br/>      const name = newValue.name;<br/>      // perform desired operations ...<br/>    });</span></pre><p id="bc83" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç‚¹å‡»æŸ¥çœ‹æ›´å¤šä»£ç ç‰‡æ®µ<a class="ae jo" href="https://firebase.google.com/docs/functions/firestore-events" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="8b74" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">å®æ—¶æ•°æ®åº“è§¦å‘å™¨</h1><p id="391f" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">å‡½æ•°å…è®¸æ‚¨åœ¨ä¸¤ä¸ªç‰¹å®šçº§åˆ«ä¸Šå¤„ç†æ•°æ®åº“äº‹ä»¶ï¼›æ‚¨å¯ä»¥ä¸“é—¨ç›‘å¬åˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤äº‹ä»¶ï¼Œä¹Ÿå¯ä»¥ç›‘å¬å¯¹è·¯å¾„çš„ä»»ä½•ç±»å‹çš„æ›´æ”¹ã€‚äº‘å‡½æ•°æ”¯æŒå®æ—¶æ•°æ®åº“çš„è¿™äº›äº‹ä»¶å¤„ç†ç¨‹åº:</p><ul class=""><li id="6fa1" class="kz la hi is b it iu ix iy jb lb jf lc jj ld jn le lf lg lh bi translated"><strong class="is hj"> onWrite() </strong>:åœ¨å®æ—¶æ•°æ®åº“ä¸­åˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤æ•°æ®æ—¶è§¦å‘ã€‚</li><li id="d757" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><strong class="is hj"> onCreate() </strong>:åœ¨å®æ—¶æ•°æ®åº“ä¸­åˆ›å»ºæ–°æ•°æ®æ—¶è§¦å‘ã€‚</li><li id="2e82" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><strong class="is hj"> onUpdate() </strong>:å®æ—¶æ•°æ®åº“æ•°æ®æ›´æ–°æ—¶è§¦å‘ã€‚</li><li id="541a" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><strong class="is hj"> onDelete() </strong>:ä»å®æ—¶æ•°æ®åº“ä¸­åˆ é™¤æ•°æ®æ—¶è§¦å‘ã€‚</li></ul><pre class="kn ko kp kq fd ln lo lp lq aw lr bi"><span id="14f5" class="ls jq hi lo b fi lt lu l lv lw">// Listens for new messages added to /messages/:pushId/original and creates an<br/>// uppercase version of the message to /messages/:pushId/uppercase<br/>exports.makeUppercase = functions.database.ref('/messages/{pushId}/original')<br/>    .onCreate((snapshot, context) =&gt; {<br/>      // Grab the current value of what was written to the Realtime Database.<br/>      const original = snapshot.val();<br/>      console.log('Uppercasing', context.params.pushId, original);<br/>      const uppercase = original.toUpperCase();<br/>      // You must return a Promise when performing asynchronous tasks inside a Functions such as<br/>      // writing to the Firebase Realtime Database.<br/>      // Setting an "uppercase" sibling in the Realtime Database returns a Promise.<br/>      return snapshot.ref.parent.child('uppercase').set(uppercase);<br/>    });</span></pre><p id="4866" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç‚¹å‡»æŸ¥çœ‹æ›´å¤šä»£ç ç‰‡æ®µ<a class="ae jo" href="https://firebase.google.com/docs/functions/database-events" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="2ea1" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Firebaseèº«ä»½éªŒè¯è§¦å‘å™¨</h1><p id="4d20" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">æ‚¨å¯ä»¥è§¦å‘äº‘åŠŸèƒ½æ¥å“åº”Firebaseç”¨æˆ·å¸æˆ·çš„åˆ›å»ºå’Œåˆ é™¤ã€‚</p><pre class="kn ko kp kq fd ln lo lp lq aw lr bi"><span id="4954" class="ls jq hi lo b fi lt lu l lv lw">// Trigger a function on user creation<br/>exports.sendWelcomeEmail = functions.auth.user().onCreate((user) =&gt; {<br/>  // Send the email...<br/>});</span></pre><p id="2849" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç‚¹å‡»æŸ¥çœ‹æ›´å¤šä»£ç ç‰‡æ®µ</p><h1 id="5772" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">ç«åŸºè§¦å‘å™¨çš„è°·æ­Œåˆ†æ</h1><p id="f69f" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">Google Analytics for Firebaseæä¾›äº‹ä»¶æŠ¥å‘Šï¼Œå¸®åŠ©æ‚¨äº†è§£ç”¨æˆ·å¦‚ä½•ä¸æ‚¨çš„åº”ç”¨ç¨‹åºäº¤äº’ã€‚ä½¿ç”¨äº‘å‡½æ•°ï¼Œæ‚¨å¯ä»¥è®¿é—®æ‚¨è®°å½•çš„è½¬æ¢äº‹ä»¶ï¼Œå¹¶åŸºäºè¿™äº›äº‹ä»¶è§¦å‘å‡½æ•°ã€‚</p><pre class="kn ko kp kq fd ln lo lp lq aw lr bi"><span id="f2fe" class="ls jq hi lo b fi lt lu l lv lw">// triggered whenever user activity generates a conversion event.<br/>exports.sendCouponOnPurchase = functions.analytics.event('in_app_purchase').onLog((event) =&gt; {<br/>  // ...<br/>});</span></pre><p id="0bdd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç‚¹å‡»æŸ¥çœ‹æ›´å¤šä»£ç ç‰‡æ®µ<a class="ae jo" href="https://firebase.google.com/docs/functions/analytics-events" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="9167" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Firebase Crashlyticsè§¦å‘å™¨</h1><p id="4f89" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">æ‚¨å¯ä»¥è§¦å‘ä¸€ä¸ªå‡½æ•°æ¥å“åº”Crashlyticsé—®é¢˜äº‹ä»¶ï¼ŒåŒ…æ‹¬æ–°é—®é¢˜ã€å›å½’é—®é¢˜å’Œé€Ÿåº¦è­¦æŠ¥ã€‚</p><p id="3c3a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Crashlyticsè§¦å‘å™¨å¤„ç†å¦‚ä¸‹äº‹ä»¶:</p><ul class=""><li id="da59" class="kz la hi is b it iu ix iy jb lb jf lc jj ld jn le lf lg lh bi translated"><strong class="is hj"> onNew </strong>:å½“ä½ çš„appç¬¬ä¸€æ¬¡é‡åˆ°é—®é¢˜ã€‚</li><li id="8c35" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><strong class="is hj"> onRegressed() </strong>:å½“é—®é¢˜åœ¨Crashlyticsä¸­å…³é—­åå†æ¬¡å‡ºç°æ—¶</li><li id="d358" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><strong class="is hj"> onVelocityAlert() </strong>:å½“ç»™å®šæ„å»ºä¸­æœ‰å¤§é‡ä¼šè¯å´©æºƒæ—¶</li></ul><pre class="kn ko kp kq fd ln lo lp lq aw lr bi"><span id="3d22" class="ls jq hi lo b fi lt lu l lv lw">exports.sendOnNewIssue = functions.crashlytics.issue().onNew(async (issue) =&gt; {<br/>  // do something...<br/>});</span></pre><p id="9c44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç‚¹å‡»æŸ¥çœ‹æ›´å¤šä»£ç ç‰‡æ®µ<a class="ae jo" href="https://firebase.google.com/docs/functions/crashlytics-events" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="08ee" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">äº‘å­˜å‚¨è§¦å‘å™¨</h1><p id="0191" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">æ‚¨å¯ä»¥è§¦å‘ä¸€ä¸ªåŠŸèƒ½æ¥å“åº”äº‘å­˜å‚¨ä¸­æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„ä¸Šä¼ ã€æ›´æ–°æˆ–åˆ é™¤ã€‚</p><ul class=""><li id="a7e6" class="kz la hi is b it iu ix iy jb lb jf lc jj ld jn le lf lg lh bi translated"><strong class="is hj">functions . storage . object()</strong>:ç›‘å¬é»˜è®¤å­˜å‚¨æ¡¶ä¸Šçš„å¯¹è±¡å˜åŒ–ã€‚</li><li id="a638" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><strong class="is hj">functions . storage . bucket(' bucket name ')ã€‚object() </strong>:ç›‘å¬ç‰¹å®šå­˜å‚¨æ¡¶ä¸Šçš„å¯¹è±¡å˜åŒ–ã€‚</li></ul><pre class="kn ko kp kq fd ln lo lp lq aw lr bi"><span id="b221" class="ls jq hi lo b fi lt lu l lv lw">exports.generateThumbnail = functions.storage.object().onFinalize(async (object) =&gt; {<br/>  // generateThumbnail code...<br/>});</span></pre><p id="8f99" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç‚¹å‡»æŸ¥çœ‹æ›´å¤šä»£ç ç‰‡æ®µ<a class="ae jo" href="https://firebase.google.com/docs/functions/gcp-storage-events" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="0376" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">è¿œç¨‹é…ç½®è§¦å‘å™¨</h1><p id="9b6e" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">æ‚¨å¯ä»¥è§¦å‘ä¸€ä¸ªå‡½æ•°æ¥å“åº”Firebaseè¿œç¨‹é…ç½®äº‹ä»¶ï¼ŒåŒ…æ‹¬å‘å¸ƒæ–°çš„é…ç½®ç‰ˆæœ¬æˆ–å›æ»šåˆ°æ—§ç‰ˆæœ¬ã€‚</p><p id="8abf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç‚¹å‡»æŸ¥çœ‹æ›´å¤šä»£ç ç‰‡æ®µ<a class="ae jo" href="https://firebase.google.com/docs/functions/rc-events" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="d9cd" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">äº‘å‘å¸ƒ/è®¢é˜…è§¦å‘å™¨</h1><p id="cb28" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated"><a class="ae jo" href="https://cloud.google.com/pubsub/docs/" rel="noopener ugc nofollow" target="_blank"> Google Cloud Pub/Sub </a>æ˜¯ä¸€ä¸ªå…¨çƒåˆ†å¸ƒå¼æ¶ˆæ¯æ€»çº¿ï¼Œå¯ä»¥æ ¹æ®æ‚¨çš„éœ€è¦è‡ªåŠ¨æ‰©å±•ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<strong class="is hj"> functions.pubsub </strong>åˆ›å»ºä¸€ä¸ªå¤„ç†Google Cloudå‘å¸ƒ/è®¢é˜…äº‹ä»¶çš„å‡½æ•°ã€‚</p><pre class="kn ko kp kq fd ln lo lp lq aw lr bi"><span id="8276" class="ls jq hi lo b fi lt lu l lv lw">// trigger a pub/sub function<br/>exports.helloPubSub = functions.pubsub.topic('topic-name').onPublish((message) =&gt; {<br/>  // ...<br/>});</span></pre><p id="cda8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç‚¹å‡»æŸ¥çœ‹æ›´å¤šä»£ç ç‰‡æ®µ<a class="ae jo" href="https://firebase.google.com/docs/functions/pubsub-events" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="557f" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">è°ƒåº¦Firebaseäº‘åŠŸèƒ½</h1><p id="d212" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">Firebaseè¿˜æ”¯æŒä¸€ç§æ–°çš„Pub/Subå‡½æ•°ï¼Œå®ƒæ„å»ºåœ¨Cloud Schedulerä¹‹ä¸Šï¼Œå¯ä»¥è‡ªåŠ¨é…ç½®Cloud Schedulerï¼Œä»¥åŠä¸€ä¸ªPub/Subä¸»é¢˜ï¼Œå¯ä»¥è°ƒç”¨æ‚¨ä½¿ç”¨Firebase SDKçš„äº‘å‡½æ•°å®šä¹‰çš„å‡½æ•°ã€‚</p><pre class="kn ko kp kq fd ln lo lp lq aw lr bi"><span id="6cc1" class="ls jq hi lo b fi lt lu l lv lw">export scheduledFunctionCrontab =<br/>functions.pubsub.schedule('every 3 hours').onRun((context) =&gt; {<br/>    console.log('This will be run every 3 hours daily')<br/>})</span></pre><p id="e0a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">é™¤äº†äº‘åŠŸèƒ½çš„æ­£å¸¸æˆæœ¬ï¼Œè¯¥åŠŸèƒ½çš„æˆæœ¬ä¸æ‚¨æ‰‹åŠ¨è®¾ç½®åº•å±‚åŸºç¡€æ¶æ„çš„æˆæœ¬ç›¸åŒâ€”â€”æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<a class="ae jo" href="https://cloud.google.com/scheduler/pricing" rel="noopener ugc nofollow" target="_blank">äº‘è°ƒåº¦å™¨</a>å’Œ<a class="ae jo" href="https://cloud.google.com/pubsub/pricing" rel="noopener ugc nofollow" target="_blank">äº‘å‘å¸ƒè®¢é˜…</a>çš„å®Œæ•´å®šä»·ä¿¡æ¯ã€‚</p><h1 id="a3ba" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">äº‘åŠŸèƒ½æˆæœ¬</h1><p id="6616" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">äº‘å‡½æ•°çš„å®šä»·å–å†³äºä½ çš„å‡½æ•°è¿è¡Œå¤šé•¿æ—¶é—´ã€è¢«è°ƒç”¨å¤šå°‘æ¬¡ä»¥åŠä½ ä¸ºè¯¥å‡½æ•°æä¾›äº†å¤šå°‘èµ„æºã€‚å¦‚æœæ‚¨çš„å‡½æ•°å‘å‡ºå‡ºç«™ç½‘ç»œè¯·æ±‚ï¼Œè¿˜ä¼šäº§ç”Ÿé¢å¤–çš„æ•°æ®ä¼ è¾“è´¹ç”¨ã€‚</p><p id="5aa7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Cloud FunctionsåŒ…å«ä¸€ä¸ªæ°¸ä¹…å…è´¹å±‚ï¼Œå…è®¸æ‚¨å…è´¹è¯•ç”¨è¯¥å¹³å°ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿æ˜¯å…è´¹ä½¿ç”¨ï¼Œè°·æ­Œäº‘ä¹Ÿéœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„ä»˜è´¹è´¦æˆ·ã€‚æ‚¨å¯ä»¥åœ¨æ­¤é˜…è¯»æ›´å¤šå…³äºå®šä»·çš„ä¿¡æ¯<a class="ae jo" href="https://cloud.google.com/functions/pricing-summary/" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="7bce" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">é™„åŠ èµ„æº</h1><ul class=""><li id="6f0e" class="kz la hi is b it kt ix ku jb lx jf ly jj lz jn le lf lg lh bi translated"><a class="ae jo" href="https://firebase.google.com/docs/functions" rel="noopener ugc nofollow" target="_blank">ç«æƒ…äº‘å‡½æ•°</a></li><li id="112f" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><a class="ae jo" href="https://cloud.google.com/functions" rel="noopener ugc nofollow" target="_blank">è°·æ­Œäº‘åŠŸèƒ½</a></li><li id="e28e" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><a class="ae jo" href="https://cloud.google.com/scheduler" rel="noopener ugc nofollow" target="_blank">è°·æ­Œäº‘è°ƒåº¦å™¨</a></li><li id="b876" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><a class="ae jo" href="https://firebase.google.com/docs/functions/schedule-functions" rel="noopener ugc nofollow" target="_blank">é¢„å®šç«æƒ…äº‘åŠŸèƒ½</a></li><li id="7529" class="kz la hi is b it li ix lj jb lk jf ll jj lm jn le lf lg lh bi translated"><a class="ae jo" href="https://github.com/firebase/functions-samples" rel="noopener ugc nofollow" target="_blank">ç¤ºä¾‹åº”ç”¨çš„é›†åˆï¼Œå±•ç¤ºäº†ä½¿ç”¨Firebaseäº‘åŠŸèƒ½çš„æµè¡Œç”¨ä¾‹</a></li></ul><blockquote class="ma mb mc"><p id="ed3c" class="iq ir ky is b it iu iv iw ix iy iz ja md jc jd je me jg jh ji mf jk jl jm jn hb bi translated"><em class="hi">æ„Ÿè°¢é€šè¯»ï¼å¦‚æœæˆ‘é”™è¿‡äº†ä»»ä½•æ­¥éª¤ï¼Œå¦‚æœæœ‰äº›äº‹æƒ…ä¸å¤ªé€‚åˆä½ ï¼Œæˆ–è€…å¦‚æœè¿™ä¸ªæŒ‡å—æœ‰å¸®åŠ©ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚</em></p></blockquote><p id="31e3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æˆ‘å¦‚ä½•ä½¿ç”¨è°·æ­Œäº‘åŠŸèƒ½å’Œäº‘è°ƒåº¦ç¨‹åºæ¥æ„å»ºä¸€ä¸ªæ¾å¼›æé†’åº”ç”¨ç¨‹åº<a class="ae jo" href="https://fullstackgcp.com/building-a-slack-reminder-app-with-google-cloud-functions-high-voltage-and-google-cloud-scheduler-alarm-clock-cjxycufnb001g93s1q6izcvna" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>