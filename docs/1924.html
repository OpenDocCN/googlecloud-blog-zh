<html>
<head>
<title>Deployment-manager: Production Ready Web Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">部署管理器:生产就绪的Web应用程序</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/deployment-manager-production-ready-web-application-c5ec68b070a6?source=collection_archive---------0-----------------------#2021-07-25">https://medium.com/google-cloud/deployment-manager-production-ready-web-application-c5ec68b070a6?source=collection_archive---------0-----------------------#2021-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d8e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用<strong class="ih hj">谷歌云部署管理器</strong>创建一组谷歌云资源、<strong class="ih hj">谷歌云存储</strong>以及<strong class="ih hj"> HTTPS负载平衡</strong>，并将它们作为一个单元进行管理，以提供来自定制域的静态内容。</p><p id="03b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/luillyfe/website-IoC" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">停止这种疯狂，立刻给我看全部代码</strong> </a></p><p id="a5e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目标将类似于这里的<a class="ae jd" href="https://cloud.google.com/storage/docs/hosting-static-website" rel="noopener ugc nofollow" target="_blank"/>，因为我们将做几乎相同的事情，但是这次使用<strong class="ih hj">部署管理器</strong>工具并设置<strong class="ih hj"> https负载平衡器</strong>。</p><h2 id="93e9" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">先决条件</h2><p id="2cea" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">启用google部署管理器API和Google计算API，并设置您的Google帐户和项目。</p><figure class="kf kg kh ki fd kj er es paragraph-image"><div class="er es ke"><img src="../Images/0bac661c93c67f9bc5363bfa907513d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*0yplBrU3iJrvtpzhRH8WLg.png"/></div></figure><figure class="kf kg kh ki fd kj er es paragraph-image"><div class="er es km"><img src="../Images/3930476c8386cd3e0ea477e0f332835f.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*1ImuJdXtXh-EFRLlJVcWYw.png"/></div></figure><h2 id="ff7d" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">为什么？</h2><blockquote class="kn ko kp"><p id="fabb" class="if ig kq ih b ii ij ik il im in io ip kr ir is it ks iv iw ix kt iz ja jb jc hb bi translated">我们希望以声明式/结构化的方式定义资源，将它们作为一个单元进行分组，并创建一个任何人都可以轻松复制并获得一致结果的环境。</p></blockquote><figure class="kf kg kh ki fd kj er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es ku"><img src="../Images/83edf42ef9750a469bfa997f51546fdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Upy9-VpzqTPWFeo3"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><a class="ae jd" href="https://unsplash.com/@sincerelymedia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">真诚媒体</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="a27e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请记住，每个资源都有:</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">资源定义. yaml </strong></figcaption></figure><h2 id="be96" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">逐步地</h2><ul class=""><li id="acee" class="lf lg hi ih b ii jz im ka iq lh iu li iy lj jc lk ll lm ln bi translated">创建一个<strong class="ih hj">桶</strong></li><li id="06ec" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">将您的生产申请提交到您的<strong class="ih hj">桶</strong></li><li id="8216" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">设置一个<strong class="ih hj">负载平衡器</strong>和<strong class="ih hj"> SSL证书</strong>(由google管理)</li><li id="b62b" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">将你的<strong class="ih hj">负载平衡器</strong>连接到你的<strong class="ih hj">铲斗</strong></li><li id="cd65" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">使用A记录将您的域指向您的<strong class="ih hj">负载平衡器</strong></li></ul><blockquote class="lt"><p id="da57" class="lu lv hi bd lw lx ly lz ma mb mc jc dx translated">我不知道你是否意识到，但是写作很难。因此，我将采取不同的方法。我将把模板文件分解成可读的代码片段，而不是用文字来解释，这样你就可以对它们在做什么有一定的了解。</p></blockquote><h1 id="2b57" class="md jf hi bd jg me mf mg jk mh mi mj jo mk ml mm jr mn mo mp ju mq mr ms jx mt bi translated">创建存储桶</h1><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak"> Google存储桶托管我们的静态web应用</strong></figcaption></figure><h2 id="90cb" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">将您的生产应用程序同步到桶</h2><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak"> gcloud命令将您的构建文件同步到bucket </strong></figcaption></figure><h2 id="f22d" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">向互联网公开您的应用程序</h2><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">公开我们的桶的内容</strong></figcaption></figure><h2 id="0a3c" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">分配专业页面</h2><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">页面后缀index.html</strong></figcaption></figure><h1 id="33d0" class="md jf hi bd jg me mf mg jk mh mi mj jo mk mu mm jr mn mv mp ju mq mw ms jx mt bi translated">设置负载平衡器和SSL证书</h1><blockquote class="kn ko kp"><p id="1fa4" class="if ig kq ih b ii ij ik il im in io ip kr ir is it ks iv iw ix kt iz ja jb jc hb bi translated">“Google Cloud可能需要60-90分钟来提供证书，并通过负载平衡器使站点可用。”</p></blockquote><h2 id="5d6b" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">配置后端服务</h2><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">后端桶</strong></figcaption></figure><h2 id="3a91" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">配置主机规则和路径匹配器(URL映射)</h2><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">网址地图</strong></figcaption></figure><h2 id="8848" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">配置前端服务</h2><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">全局转发规则</strong></figcaption></figure><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">全球地址</strong></figcaption></figure><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak"> SSL证书</strong></figcaption></figure><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">目标HTTPS代理</strong></figcaption></figure><h2 id="c4cf" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">部署资源</h2><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">预览您的部署</strong></figcaption></figure><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">提交您的部署</strong></figcaption></figure><h2 id="1a26" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">将您的域连接到负载平衡器</h2><p id="3479" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">我们必须在我们的域名和负载平衡器ip地址之间建立一种关系，希望对我们来说这就是A记录(IPv4)的用途。</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated"><strong class="ak">一条记录</strong></figcaption></figure><p id="1fe0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图向我们展示了亚马逊53号公路上<strong class="ih hj"> A记录</strong>的样子:</p><figure class="kf kg kh ki fd kj er es paragraph-image"><div class="er es mx"><img src="../Images/089c14909cbcb84edb751962a19174f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*GSETkCrfxOKpPKYuXkGrqw.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx translated">亚马逊路线53的记录</figcaption></figure><p id="7b3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">检查我们的SSL证书状态怎么样？</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div></figure><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="ld le l"/></div></figure><h2 id="e1c8" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">有用的链接</h2><div class="my mz ez fb na nb"><a href="https://cloud.google.com/storage/docs/hosting-static-website" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab dw"><div class="nd ab ne cl cj nf"><h2 class="bd hj fi z dy ng ea eb nh ed ef hh bi translated">托管静态网站|云存储|谷歌云</h2><div class="ni l"><h3 class="bd b fi z dy ng ea eb nh ed ef dx translated">编辑描述</h3></div><div class="nj l"><p class="bd b fp z dy ng ea eb nh ed ef dx translated">cloud.google.com</p></div></div><div class="nk l"><div class="nl l nm nn no nk np kk nb"/></div></div></a></div><div class="my mz ez fb na nb"><a href="https://cloud.google.com/storage/docs/static-website" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab dw"><div class="nd ab ne cl cj nf"><h2 class="bd hj fi z dy ng ea eb nh ed ef hh bi translated">静态网站示例和提示|云存储|谷歌云</h2><div class="ni l"><h3 class="bd b fi z dy ng ea eb nh ed ef dx translated">本页展示了使用桶来托管静态网站的例子和提示。索引页面(也称为网络服务器…</h3></div><div class="nj l"><p class="bd b fp z dy ng ea eb nh ed ef dx translated">cloud.google.com</p></div></div><div class="nk l"><div class="nq l nm nn no nk np kk nb"/></div></div></a></div></div></div>    
</body>
</html>