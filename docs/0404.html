<html>
<head>
<title>Twitter Analytics (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Twitter分析(第二部分)</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/twitter-analytics-part-2-f282c49c6de7?source=collection_archive---------0-----------------------#2017-10-14">https://medium.com/google-cloud/twitter-analytics-part-2-f282c49c6de7?source=collection_archive---------0-----------------------#2017-10-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f12c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Twitter是一个了解真实世界的好工具。这就是为什么我选择在阿根廷国家队的最后两场足球比赛期间，使用Python和谷歌云基础设施对用户的精神状态进行实时分析。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/0d2edd0fa4dfb7a65e8809c28a90b812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*avIckFyLgT-9s7IkuCt72g.png"/></div></figure></div><div class="ab cl jm jn gp jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="hb hc hd he hf"><p id="e93b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">这是文章的第二部分(要了解这个故事如何开始，请访问:</em><a class="ae jt" rel="noopener" href="/google-cloud/twitter-analytics-part-1-801c9d494487"><em class="jd">【https://medium . com/Google-cloud/Twitter-analytics-part-1-801 c9d 494487</em></a><em class="jd">)</em></p><h1 id="db5c" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">第二步:分析数据</h1><h2 id="edad" class="ks jv hi bd jw kt ku kv ka kw kx ky ke iq kz la ki iu lb lc km iy ld le kq lf bi translated">1)谷歌数据实验室</h2><p id="b7ad" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">Google Datalab提供了轻松访问BQ中的数据并在Jupiter笔记本中进行分析的可能性。我们还可以使用大量现有的包进行统计、机器学习和数据处理。在谷歌云平台内部署也很容易:<a class="ae jt" href="https://cloud.google.com/datalab/docs/quickstarts" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/datalab/docs/quickstarts</a></p><p id="203e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先要做的是确保你的项目中安装了所有的包，我的意思是Pandas，Seaborn，Numpy，Matplotlib和Scikit-learn(如果你想做一些ML项目就需要)。如果没有，您可以随时安装或更新软件包，打开笔记本并键入:</p><blockquote class="ll lm ln"><p id="8a55" class="if ig jd ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated"><em class="hi">！pip安装库名称</em></p></blockquote><p id="2bd5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二，你必须让数据可以进入笔记本。我们可以这样做:</p><blockquote class="ll lm ln"><p id="4411" class="if ig jd ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated"><em class="hi"> %%sql —模块数据名称-d标准<br/> #SQL查询<br/>SELECT<br/>created _ normalize，<br/> text <br/> FROM <br/>【表名】</em></p></blockquote><p id="7929" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后通过用python编码来获取数据</p><blockquote class="ll lm ln"><p id="70d8" class="if ig jd ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated"><em class="hi">导入datalab.bigquery为bq <br/> my_data_frame = bq。查询(数据名称)。to_dataframe() </em></p></blockquote><p id="55e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您在该表中看到的，我有一个名为“created_normalize”的字段，这是因为我首先在python中处理数据以规范化日期。</p><p id="769e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，现在我有了一个包含查询结果的数据框，接下来呢？我开始将日期更改为时间线，以分钟为单位，比赛开始时间为0。</p><blockquote class="ll lm ln"><p id="ecda" class="if ig jd ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated">min _ datetime = my _ data _ frame[' created _ normalize ']。min()<br/>difference = 20<br/>my _ data _ frame[' time _ line ']=[int(((x—min _ datetime)。total _ seconds())/60)-my _ data _ frame中x的差异['created_normalize']]</p></blockquote><p id="8dc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意我用了20分钟的间隙，那是因为我在比赛开始前20分钟就开始录音了。</p><p id="2641" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这为数据集“time_line”增加了一个新列，让我们可以轻松地绘制几分钟内的推文数量。</p><blockquote class="ll lm ln"><p id="dfed" class="if ig jd ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated"><em class="hi">my _ data _ frame[' tweets ']= my _ data _ frame[' time _ line ']<br/>ax = SNS . kdeplot(my _ data _ frame[' tweets ']，shade = True)<br/>ax . set(xlabel = ' minutes '，ylabel='density '，title = ' Tweet ' s distribution ')<br/>PLT . axv line(x = 0，color='g ')<br/>PLT . axv line(x = 47，color = ' g</em></p></blockquote><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lr"><img src="../Images/5f84d8dc15338176cc3321404742a6c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*hmkw2J172OaJIqiSJ8wa8Q.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">阿根廷-委内瑞拉(2017年9月5日)</figcaption></figure><p id="1604" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">绿线代表每半场的开始/结束，红线代表委内瑞拉的一个进球，蓝线代表阿根廷的一个进球。</p><p id="b4b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者我们可以查找每个阿根廷球员的名字。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lw"><img src="../Images/d35d1a1917ac8a9d6a07ce25a65804fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*u5mTndoS8mD9lNdwPX_AcA.png"/></div></figure><p id="8998" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以利用这些数据做更多的事情，剩下的就交给你了…</p><p id="f5f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想要这两场比赛的数据，我会向所有人公开。</p></div></div>    
</body>
</html>