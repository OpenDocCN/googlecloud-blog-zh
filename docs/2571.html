<html>
<head>
<title>Basic Implementation Of AlloyDB Instance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AlloyDB实例的基本实现</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/basic-implementation-of-alloydb-instance-eab8ea06bac6?source=collection_archive---------1-----------------------#2022-11-30">https://medium.com/google-cloud/basic-implementation-of-alloydb-instance-eab8ea06bac6?source=collection_archive---------1-----------------------#2022-11-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="eb82" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">概述:</h1><p id="6cf0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这篇技术博客的目的是了解什么是AlloyDB，它在内部是如何工作的，以及如何创建和使用一个基本的AlloyDB集群。这是一个相当新的服务，今天是在预览。</p><h1 id="d432" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">目标:</h1><p id="3795" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">本博客将通过以下步骤来阐述AlloyDB服务:</p><ul class=""><li id="77d4" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">用读池实例创建AlloyDB集群和实例</li><li id="c936" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">在实例中创建表</li><li id="aa85" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">将数据加载到表中</li><li id="67c0" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">创建按需备份</li><li id="54b0" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">删除为AlloyDB创建的资源</li></ul><h1 id="69ae" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">技术堆栈:</h1><ul class=""><li id="d53a" class="kb kc hi jf b jg jh jk jl jo kr js ks jw kt ka ki kj kk kl bi translated"><a class="ae ku" href="https://cloud.google.com/alloydb" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj"> AlloyDB </strong> </a> <strong class="jf hj"> : </strong>一个完全托管的兼容PostgreSQL的数据库服务</li><li id="c136" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated"><a class="ae ku" href="https://cloud.google.com/compute" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">计算引擎</strong> </a> <strong class="jf hj"> : </strong>安全且可定制的计算服务，可让您在谷歌的基础设施上创建和运行虚拟机</li></ul><h1 id="ec3d" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">AlloyDB简介:</h1><p id="5e72" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">如今，客户在谷歌云上已经有了很多选择。也就是说，仍然有支持客户迁移到云的空间，特别是对于来自遗留的专有数据库的客户。这些客户越来越标准化开源，特别是一个开源数据库，<a class="ae ku" href="https://www.postgresql.org/" rel="noopener ugc nofollow" target="_blank"> Postgres </a>。从传统的专有数据库迁移的企业客户希望在管理和扩展其应用程序方面获得额外的支持。AlloyDB结合了Google的优势和Postgres的完全兼容性，以行业领先的性能和可用性应对Postgres带来的挑战。它可以处理任何工作负载，同时最大限度地减少管理开销。全面的Postgres兼容性意味着重新获得在客户希望的时间和地点运行您的应用程序的自由，并从整个Postgres生态系统中受益。</p><h1 id="affb" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">AlloyDB是什么？：</h1><p id="a41e" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">AlloyDB 是一种新的数据库服务，可用于顶层关系数据库工作负载。对于事务性工作负载，它比标准Postgres快四倍。对于事务性工作负载，它也比亚马逊的同类Postgres兼容服务快两倍以上。最棒的是，查询性能随着计算资源的增加而线性扩展。AlloyDB提供比标准Postgres快100倍的分析查询。这是零模式变化，也不需要移动数据。无需担心复杂的数据库管理任务，如内存管理、数据清空和数据分层。它会自动为您解决这些问题。AlloyDB的一个关键概念是计算和存储的“分解”。大多数客户在不是专门为PostgreSQL设计的通用存储上运行数据库。随着您的事务量和存储需求的增加，扩展和性能也随之提高。您不需要分配存储。您只需为您使用的存储空间付费。您不需要执行复杂的存储调整或分区来获得性能。此外，它还与谷歌独特的人工智能和人工智能服务组合无缝集成。例如，<a class="ae ku" href="https://cloud.google.com/vertex-ai" rel="noopener ugc nofollow" target="_blank"> Vertex AI </a>将在发布时推出，便于与AlloyDB数据库进行推理，即AlloyDB将与谷歌云的人工智能平台Vertex AI预集成。</p><h1 id="e4a8" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">合金的加工b:</h1><p id="c90f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">AlloyDB完全兼容PostgreSQL 14。如果您的应用程序运行在PostgreSQL上，那么它运行在AlloyDB上。第三方工具如pgAdmin、HammerDB和许多其他工具无需修改就可以在AlloyDB上运行。没有必要重写或修改您现有的代码。您插入它，它就工作了:您现有的PostgreSQL应用程序变得更快、更可靠、更易于维护。</p><p id="007d" class="pw-post-body-paragraph jd je hi jf b jg kd ji jj jk ke jm jn jo kv jq jr js kw ju jv jw kx jy jz ka hb bi translated">AlloyDB的核心是完全分解计算和存储的方法。对于AlloyDB，有一个新的智能数据库优化存储层，它可以独立于数据库实例进行扩展，并从主数据库卸载工作。它通过消除I/O瓶颈和卸载主数据库实例的工作来提供快速、可预测的性能。默认情况下，它是区域性的，支持快速、有限的恢复时间和低延迟的读取副本。AlloyDB具有DRAM、超高速缓存和持久存储之间的自动数据分层功能。这意味着获得我们横向扩展存储服务的可用性和规模优势，以及分层缓存的性价比优势。它还智能地组织这些缓存之间的数据。在DRAM中，基于行和列的格式都用于最大化查询性能。当一个查询到来时，查询规划器将在基于行、列和混合执行之间做出明智的选择，以优化每个查询的性能。在列存储中，AlloyDB建立在现代处理器的“单指令、多数据”SIMD能力上，以加快查询执行。缓存未命中在命中持久存储之前会进入第二个超快速层缓存，以最大限度地提高性价比。这种<a class="ae ku" href="https://cloud.google.com/blog/products/databases/alloydb-for-postgresql-intelligent-scalable-storage" rel="noopener ugc nofollow" target="_blank">架构</a>能够为事务性和分析性工作负载提供最佳性能。矢量化列执行引擎加快了分析查询的速度。智能存储服务使延迟非常低的读取副本能够始终查询数据的最新版本。<a class="ae ku" href="https://cloud.google.com/alloydb/docs/instance-read-pool-create" rel="noopener ugc nofollow" target="_blank">读取池</a>允许您通过添加更多节点来水平扩展读取连接。</p><h1 id="8a76" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">6.IAM先决条件:</h1><p id="6ef0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在构建管道之前，必须检查用户是否具有以下角色，以避免身份验证问题:</p><ul class=""><li id="40a0" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated"><strong class="jf hj">服务使用消费者</strong>:能够检查服务状态和操作，并为消费者项目消费配额和计费。</li><li id="a5e7" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated"><strong class="jf hj"> Cloud AlloyDB Admin </strong>:对所有AlloyDB资源的完全控制。</li><li id="4ba6" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">联网许可将根据具体情况而定。</li></ul><h1 id="30dd" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">AlloyDB的基本实现步骤:</h1><p id="bd0e" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们将为AlloyDB的基本实现执行下面提到的步骤。这些都可以通过控制台和CLI来完成。</p><h1 id="e4bb" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">使用读取池实例创建AlloyDB集群和实例:</h1><ul class=""><li id="72d0" class="kb kc hi jf b jg jh jk jl jo kr js ks jw kt ka ki kj kk kl bi translated">转到AlloyDB页面，创建一个集群，同时选择创建读池。这种配置<strong class="jf hj">不是</strong>永久的。我们也可以在以后的阶段改变它。</li></ul><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/cfb08a391d3b7337c296e2e49a8e7ba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wh9nQn3P6KRsDo0v"/></div></div></figure><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/5d1fee363c0908f5281c328cc3052696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hhUJ30K7Q8M5zZUe"/></div></div></figure><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/6b004506661e5489046f773d7008c3ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DlbjiYg-RmGnD-xa"/></div></div></figure><ul class=""><li id="8c7d" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">给出集群id、区域名称和网络名称。</li></ul><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/88d9117c810c8e7a09f70e83b3bab83d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rISYK9LnsyUVXS_Q"/></div></div></figure><ul class=""><li id="c6af" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">选择主实例的配置。对于我们的用例，我们选择了可用的最低机器配置。如果在实现中需要，可以选择为Postgres设置<a class="ae ku" href="https://cloud.google.com/alloydb/docs/reference/database-flags" rel="noopener ugc nofollow" target="_blank">标志</a>。</li></ul><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/f516aa99c79210d94b192cace7c8612f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ONJwl8LFVUbSvsxW"/></div></div></figure><ul class=""><li id="3fcb" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">根据需要选择读取池的数量、所需的节点及其配置。</li></ul><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/77ddbc3936b0b1c9375f5bf587656c1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A6lFmRWcTm6lZlq4"/></div></div></figure><ul class=""><li id="81ab" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">创建集群和底层实例需要一些时间。您创建的集群和实例将如下所示:</li></ul><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/2bde476427afb3d6892c4427bafb07fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_qGtHCIZqyc9LGj9"/></div></div></figure><ul class=""><li id="3f61" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">等效的CLI命令如下所示:</li><li id="2b08" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">要创建主实例，请执行以下操作:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="2f9c" class="lq ig hi lm b be lr ls l lt lu">gcloud beta alloydb clusters create &lt;YOUR_CLUSTER_ID&gt; \<br/> - password=&lt;YOUR_PWD&gt; \<br/> - network=&lt;YOUR_NETWORK&gt; \<br/> - region=GCP_REGION_VALUE \<br/> - project=&lt;YOUR_PROJECT_ID&gt;</span></pre><ul class=""><li id="cbab" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">要在创建的集群中添加主实例，请执行以下操作:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="b755" class="lq ig hi lm b be lr ls l lt lu">gcloud beta alloydb instances create &lt;YOUR_PRIMARY_INSTANCE_ID&gt; \<br/> - instance-type=PRIMARY \<br/> - cpu-count=2 \<br/> - region=GCP_REGION_VALUE \<br/> - cluster=&lt;YOUR_CLUSTER_ID&gt; \<br/> - project=&lt;YOUR_PROJECT_ID&gt;</span></pre><ul class=""><li id="bab5" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">要在创建的群集中添加读取池实例，请执行以下操作:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="5e31" class="lq ig hi lm b be lr ls l lt lu">gcloud beta alloydb instances create &lt;YOUR_READ_POOL_INSTANCE_ID&gt; \<br/> - instance-type=READ_POOL \<br/> - cpu-count=2 \<br/> - read-pool-node-count=2 \<br/> - region=GCP_REGION_VALUE \<br/> - cluster=&lt;YOUR_CLUSTER_ID&gt; \<br/> - project=&lt;YOUR_PROJECT_ID&gt;</span></pre><h1 id="914d" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">在实例中创建表:</h1><ul class=""><li id="62ed" class="kb kc hi jf b jg jh jk jl jo kr js ks jw kt ka ki kj kk kl bi translated">首先，我们需要创建一个VM实例，它将连接到上一步中创建的AlloyDB实例，我们将SSH到该实例中。</li></ul><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/101479139b5b3d22fdfa9d855d8953f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5Mcy5d_dqjPSUV8u"/></div></div></figure><ul class=""><li id="b5e5" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">复制我们的主实例的主IP，并在环境变量' ALLOYDB '中设置它。</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="3142" class="lq ig hi lm b be lr ls l lt lu">export ALLOYDB = &lt;YOUR_ALLOYDB_PRIMARY_INSTANCE_IP&gt;</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/cdb79ef183eb7e1231cdd10627f5a42c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Qvxkt4Ytmd5N8RUy"/></div></div></figure><ul class=""><li id="329d" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">通过将环境变量“ALLOYDB”保存在一个文本文件中并检查文件的内容，检查该变量是否设置了正确的IP。</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="0949" class="lq ig hi lm b be lr ls l lt lu">echo $ALLOYDB &gt; alloydbip.txt</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/791c377f3bae9a0a8ded1481fd6175fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EbIml2tntCmQatD0"/></div></div></figure><ul class=""><li id="311d" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">我们将使用以下命令安装PostgresQL依赖项:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="dff3" class="lq ig hi lm b be lr ls l lt lu">sudo apt-get install Postgresql-client-common<br/>sudo apt-get install Postgresql-client-12</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/46878771890ef498eb5873e1ab1a5fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NEnw8z_8JmPZVR6l"/></div></div></figure><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/7aa00f52034a19f1e1b65cba5fe8bdcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zFaz3dySSgMhShnT"/></div></div></figure><ul class=""><li id="3b69" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">我们将使用下面的命令连接到AlloyDB实例，并通过设置AlloyDB实例时使用的密码进行连接:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="38d7" class="lq ig hi lm b be lr ls l lt lu">psql -h $ALLOYDB -U Postgres</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/2e89b074a26f28544e5e4a1d97f8d6cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SRpbFKP6L-9IFYBW"/></div></div></figure><ul class=""><li id="c0c5" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">我们可以编写DDL语句来创建所需的表。</li><li id="437d" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">在本例中，我们创建了一个雇员表，如下所示:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="a224" class="lq ig hi lm b be lr ls l lt lu">CREATE TABLE employee (<br/>employee_id int NOT NULL,<br/>employee_name varchar(25),<br/>department_id int,<br/>department_name varchar(25)<br/>);</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/342557e2f6de08ea68cdf7093ac86869.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AowKgx7z1scK6tXX"/></div></div></figure><ul class=""><li id="d7e4" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">我们将employee_id作为主键。</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="fb37" class="lq ig hi lm b be lr ls l lt lu">ALTER TABLE employee ADD PRIMARY KEY (employee_id);</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/dcbb21c35f308e3d329f513454f49ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5pqywQF2N89lrWOy"/></div></div></figure><h1 id="5997" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">将数据加载到表中:</h1><ul class=""><li id="d984" class="kb kc hi jf b jg jh jk jl jo kr js ks jw kt ka ki kj kk kl bi translated">我们可以编写DML语句将数据加载到创建的表中。</li><li id="6567" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">在本例中，我们插入了所需的行，如下所示:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="5014" class="lq ig hi lm b be lr ls l lt lu">INSERT INTO employee<br/>VALUES<br/>(1, 'Manish Joshi', 100, 'ProServ Delivery'),<br/>(2, 'Suraj Nair', 101, 'ProServ Delivery'),<br/>(3, 'Shubham Shingade', 102, 'ProServ Delivery'),<br/>(4, 'Saurabh Kumar', 104, 'ProServ Delivery'),<br/>(5, 'Garima Garg', 105, 'ProServ Delivery'),<br/>(6, 'Utkarsh Jain', 106, 'ProServ Delivery'),<br/>(7, 'Pradeep Gurbani', 107, 'ProServ Delivery'),<br/>(8, 'Avenash R', 108, 'ProServ Delivery'),<br/>(9, 'Subham Chaudhary', 109, 'TAM'),<br/>(10, 'Amritha Parameshwaran', 110, 'ProServ Delivery'),<br/>(11, 'Shambhavi Upadhyay', 111, 'Business Operations');</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/f29169fbb229163e5327d6b0e124321a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d8zhOj7o28dFEni0"/></div></div></figure><ul class=""><li id="70a1" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">检查数据加载是否正确:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="6af5" class="lq ig hi lm b be lr ls l lt lu">SELECT * FROM employee;</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/31b781004f726e62b89e41864e436937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S4HWR2kT0HnZ28rE"/></div></div></figure><h1 id="49e9" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">创建按需备份:</h1><ul class=""><li id="f0f1" class="kb kc hi jf b jg jh jk jl jo kr js ks jw kt ka ki kj kk kl bi translated">当我们创建AlloyDB实例时，会自动创建一个<a class="ae ku" href="https://cloud.google.com/alloydb/docs/backup/overview" rel="noopener ugc nofollow" target="_blank">备份</a>。</li><li id="22be" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">除此之外，我们还可以创建自己的按需备份。以下是相同的步骤:</li><li id="ca60" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">点击“创建备份”。</li></ul><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lv"><img src="../Images/b965b3fe9cbd262c22ae3f8afcd79489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LN9MqY56Ypbptl-v"/></div></div></figure><ul class=""><li id="c1c3" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">给出源群集和备份id。</li></ul><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lw"><img src="../Images/4a3fcc491c5c57dc92d1b7f293dfab70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mWyhwjl_xva7pukX"/></div></div></figure><ul class=""><li id="6ba8" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">将使用给定的详细信息创建您的备份。</li></ul><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/d3019f85a06a43bac7cd62000a38be98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*04pIy2se_Yf0g0Vg"/></div></div></figure><ul class=""><li id="c3aa" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">等效的CLI如下所示:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="6c71" class="lq ig hi lm b be lr ls l lt lu">gcloud beta alloydb backups create &lt;YOUR_BACKUP_ID&gt; \<br/> - cluster=&lt;YOUR_CLUSTER_ID&gt; \<br/> - region=GCP_REGION_VALUE \<br/> - project=&lt;YOUR_PROJECT_ID&gt;</span></pre><h1 id="a89c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">删除创建的资源:</h1><ul class=""><li id="1a86" class="kb kc hi jf b jg jh jk jl jo kr js ks jw kt ka ki kj kk kl bi translated">使用后，我们可以从GUI以及通过CLI轻松删除创建的备份、读取池实例、主实例、AlloyDB集群和计算引擎实例。</li><li id="53f9" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">以下是AlloyDB的CLI命令:</li><li id="cbd3" class="kb kc hi jf b jg km jk kn jo ko js kp jw kq ka ki kj kk kl bi translated">删除创建的按需备份实例:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="af80" class="lq ig hi lm b be lr ls l lt lu">gcloud beta alloydb backups delete &lt;YOUR_BACKUP_ID&gt; \<br/> - region=GCP_REGION_VALUE</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lx"><img src="../Images/e28b96c43205a5d0f23a9c7713fe5dc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EFpR81TQKUyHFJ50"/></div></div></figure><ul class=""><li id="6fda" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">删除读取池实例和主实例:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="ace5" class="lq ig hi lm b be lr ls l lt lu">gcloud beta alloydb instances delete &lt;YOUR_READ_POOL_INSTANCE_ID&gt;<br/> - cluster=&lt;YOUR_CLUSTER_ID&gt; \<br/> - region=GCP_REGION_VALUE</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/41d508d85a1027ecd017f50a01deed9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HGJxnpHydQPgvQDp"/></div></div></figure><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="5afe" class="lq ig hi lm b be lr ls l lt lu">gcloud beta alloydb instances delete &lt;YOUR_PRIMARY_INSTANCE_ID&gt;<br/> - cluster=&lt;YOUR_CLUSTER_ID&gt; \<br/> - region=GCP_REGION_VALUE</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/d97f23e272d9d457bbba0edce892486a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kXCMnmYVb_DOyTTX"/></div></div></figure><ul class=""><li id="5d29" class="kb kc hi jf b jg kd jk ke jo kf js kg jw kh ka ki kj kk kl bi translated">删除群集:</li></ul><pre class="kz la lb lc fd ll lm ln bn lo lp bi"><span id="b193" class="lq ig hi lm b be lr ls l lt lu">gcloud beta alloydb clusters delete &lt;YOUR_CLUSTER_ID&gt; \<br/> - region=GCP_REGION_VALUE</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/948d68d6ee34dc66aad3a977fde6df7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3hmPPF6Pm0BOJ9Do"/></div></div></figure></div></div>    
</body>
</html>