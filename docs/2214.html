<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://medium.com/google-cloud/tutorial-2-setup-web-application-security-protection-and-detection-lab-in-google-cloud-2292c14276d0?source=collection_archive---------2-----------------------#2022-06-06">https://medium.com/google-cloud/tutorial-2-setup-web-application-security-protection-and-detection-lab-in-google-cloud-2292c14276d0?source=collection_archive---------2-----------------------#2022-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="151a" class="hg hh hi bd hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie bi translated">教程2:在Google Cloud-respective Playbook中设置Web应用程序安全保护和检测实验室</h2><p id="788d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip hs iq ir is hw it iu iv ia iw ix iy iz hb bi translated">这个实验总共涵盖了4个博客，以下是参考链接</p><p id="a3dd" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated"><strong class="ih jf"> Part-1 </strong> : <a class="ae jg" rel="noopener" href="/@neelampawar/tutorial-1-setup-web-application-security-protection-and-detection-lab-in-google-cloud-waf-53ae96052301">晶圆调整</a></p><p id="8364" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated"><strong class="ih jf">下篇</strong>:侦察剧本(本博客)</p><p id="2517" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated"><strong class="ih jf"> Part-3 </strong> : <a class="ae jg" rel="noopener" href="/@neelampawar/tutorial-3-setup-web-application-security-protection-and-detection-lab-in-google-cloud-8d40962dd756">漏洞利用</a></p><p id="1949" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated"><strong class="ih jf"> Part-4 </strong> : <a class="ae jg" rel="noopener" href="/@neelampawar/tutorial-4-setup-web-application-security-protection-and-detection-lab-in-google-cloud-data-ecfb6b1f5053">数据泄露和泄密</a></p><p id="1d33" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated">Google cloud WAF保护和检测实验室系列的第二个教程是侦察行动手册。谷歌云安全防护实验室的目的是展示<strong class="ih jf">Cloud Armor</strong><strong class="ih jf">WAF</strong>在识别和防范针对您的web应用的可疑活动和潜在攻击方面的能力。这本剧本解释了如何测试谷歌云装甲WAF对侦察攻击的保护。</p><p id="295e" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated">在本教程中，您将:</p><ol class=""><li id="2620" class="jh ji hi ih b ii ja im jb hs jj hw jk ia jl iz jm jn jo jp bi translated">直接对目标<strong class="ih jf"> OWASP Juice Shop </strong> web应用程序运行web应用程序漏洞扫描，然后扫描受Cloud armor保护的web应用程序的相同实例</li><li id="3f0d" class="jh ji hi ih b ii jq im jr hs js hw jt ia ju iz jm jn jo jp bi translated">查看两次web应用程序漏洞扫描结果的差异</li><li id="9595" class="jh ji hi ih b ii jq im jr hs js hw jt ia ju iz jm jn jo jp bi translated">查看云防护和负载平衡器日志记录的摘要日志</li></ol><h1 id="8c96" class="jv hh hi bd hj jw jx jy hn jz ka kb hr kc kd ke hv kf kg kh hz ki kj kk id kl bi translated">侦察攻击</h1><p id="eef5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip hs iq ir is hw it iu iv ia iw ix iy iz hb bi translated">在攻击者利用漏洞之前，他们通常会花时间研究他们的目标web应用程序，包括收集应用程序特定的数据并分析其潜在的漏洞。收集敏感安全数据以识别web应用中潜在漏洞的方法之一是利用<strong class="ih jf"> web应用安全漏洞扫描器</strong>。这些扫描器可以分析应用程序的响应标头，以识别潜在的漏洞。使用web应用程序漏洞扫描器收集的数据可以揭示潜在的漏洞，然后攻击者可以测试、开发和利用这些漏洞进行攻击或渗透。这种侦察活动还允许攻击者获得对您的应用程序的彻底理解和完整映射，以供以后使用。</p><h1 id="2539" class="jv hh hi bd hj jw jx jy hn jz ka kb hr kc kd ke hv kf kg kh hz ki kj kk id kl bi translated">使用Web应用程序漏洞扫描程序执行侦察</h1><p id="441b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip hs iq ir is hw it iu iv ia iw ix iy iz hb bi translated">攻击者首先要做的事情之一是试图获得对目标web应用程序中的应用程序组件、框架和潜在漏洞的广泛理解。最快、最常见的方法是使用商业或开源web应用程序漏洞扫描器(也称为安全扫描器)对目标运行未经验证/未经授权的扫描。在本教程中，您将对目标web应用程序运行两次web应用程序漏洞扫描</p><ol class=""><li id="3ba6" class="jh ji hi ih b ii ja im jb hs jj hw jk ia jl iz jm jn jo jp bi translated"><strong class="ih jf">第一次扫描</strong>将直接指向目标web应用</li></ol><ul class=""><li id="acc7" class="jh ji hi ih b ii ja im jb hs jj hw jk ia jl iz km jn jo jp bi translated">网址:<a class="ae jg" href="http://34.124.169.182:3000" rel="noopener ugc nofollow" target="_blank"> http:// &lt; &lt; App引擎公共IP &gt; &gt; :3000 </a></li></ul><p id="9b1f" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated"><strong class="ih jf"> 2。第二次扫描</strong>将指向由http负载平衡器上的Cloud armor保护的同一个目标web应用程序</p><ul class=""><li id="4d44" class="jh ji hi ih b ii ja im jb hs jj hw jk ia jl iz km jn jo jp bi translated">URL: <a class="ae jg" href="https://34.117.133.61.nip.io" rel="noopener ugc nofollow" target="_blank"> https:// &lt; &lt;全局负载平衡器的公共IP&gt;&gt;. nip . io</a></li></ul><h1 id="bdba" class="jv hh hi bd hj jw jx jy hn jz ka kb hr kc kd ke hv kf kg kh hz ki kj kk id kl bi translated">对目标应用程序运行Web应用程序漏洞扫描</h1><p id="9347" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip hs iq ir is hw it iu iv ia iw ix iy iz hb bi translated">为了运行web应用程序漏洞扫描，我们将连接到Kali虚拟机。一旦连接上，我们将使用<a class="ae jg" href="https://cirt.net/Nikto2" rel="noopener ugc nofollow" target="_blank"> <strong class="ih jf"> Nikto </strong> </a>，这是一个多功能的命令行开源web应用程序漏洞扫描工具，捆绑在Kali Linux发行版中。当指向目标web应用程序时，Nikto将扫描应用程序的常见漏洞，并在终端窗口中显示扫描输出，以便快速查看。</p><ol class=""><li id="3d0c" class="jh ji hi ih b ii ja im jb hs jj hw jk ia jl iz jm jn jo jp bi translated">使用您的凭证登录Kali Linux虚拟机</li><li id="fe9d" class="jh ji hi ih b ii jq im jr hs js hw jt ia ju iz jm jn jo jp bi translated">启动网络浏览器，确保您可以通过URL http:// &lt;<app engine="" public="" ip=""> &gt;:3000直接访问OWASP果汁店网站，也可以通过WAF访问URL https:// &lt;<public ip="" of="" global="" loadbalancer=""> &gt;.nip.io</public></app></li><li id="ea1c" class="jh ji hi ih b ii jq im jr hs js hw jt ia ju iz jm jn jo jp bi translated">启动两个<strong class="ih jf"> Nikto </strong> Web漏洞扫描器实例。点击左上角的<strong class="ih jf">应用</strong>，然后点击<strong class="ih jf"> Web应用分析→ Web漏洞扫描器→ Nikto </strong></li></ol><figure class="ko kp kq kr fd ks er es paragraph-image"><div class="er es kn"><img src="../Images/d3baf18a0f5827a808dac4a471eb5483.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/0*X1AAm2B0tZ0oMn7M"/></div></figure><p id="5bd2" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated">4 .要启动扫描，请使用以下命令。每个打开的Nikto窗口都有一个</p><ol class=""><li id="9994" class="jh ji hi ih b ii ja im jb hs jj hw jk ia jl iz jm jn jo jp bi translated"><strong class="ih jf">nikto-h</strong>http://&lt;&lt;App引擎公共IP &gt; &gt; :3000</li><li id="433b" class="jh ji hi ih b ii jq im jr hs js hw jt ia ju iz jm jn jo jp bi translated"><strong class="ih jf">nikto-h</strong>https://&lt;&lt;全局负载平衡器的公共IP&gt;&gt;. nip . io</li></ol><h1 id="a0e5" class="jv hh hi bd hj jw jx jy hn jz ka kb hr kc kd ke hv kf kg kh hz ki kj kk id kl bi translated">查看Web应用程序漏洞扫描结果</h1><p id="860d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip hs iq ir is hw it iu iv ia iw ix iy iz hb bi translated">扫描完成后，我们可以通过查看下图中突出显示的行来快速查看结果。</p><ol class=""><li id="12ce" class="jh ji hi ih b ii ja im jb hs jj hw jk ia jl iz jm jn jo jp bi translated">当直接访问果汁店网站时，我们看到扫描程序向web服务器发送了<strong class="ih jf"> 7k+ </strong> <strong class="ih jf">请求1 </strong>，结果发现了<strong class="ih jf"> 2个错误</strong>和<strong class="ih jf"> 150多个项目/问题</strong>，这些项目/问题可用于开发进一步的攻击和利用场景</li></ol><p id="10af" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated"><strong class="ih jf">图1(扫描开始)</strong></p><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es kv"><img src="../Images/9a7d6659b445b1f888ce1fa67c541b0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xAfgu7W6w5h0zqoh"/></div></div></figure><p id="8f19" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated"><strong class="ih jf">图2(扫描结束)</strong></p><figure class="ko kp kq kr fd ks er es paragraph-image"><div class="er es la"><img src="../Images/3111093dd671c83015cd30ac33fe00d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/0*fhofuT_R56prC4T-"/></div></figure><ol class=""><li id="e8b3" class="jh ji hi ih b ii ja im jb hs jj hw jk ia jl iz jm jn jo jp bi translated">在扫描受云甲保护的果汁店网站时，我们看到，与在步骤1中直接扫描网站相比，扫描仪发出的<strong class="ih jf"> &gt;请求数是</strong> <strong class="ih jf">的3倍1 </strong>，但<strong class="ih jf">仍未发现任何错误</strong>要报告。同样，与直接扫描网站相比，此扫描只能报告项目/问题数量的1%<strong class="ih jf">,以便进一步调查</strong></li></ol><p id="e7f5" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated"><strong class="ih jf"> 1 </strong>从扫描基线获取的全局负载平衡器&gt; &gt; .nip.io的https:// &lt; &lt;公共IP的请求计数进行比较</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es lb"><img src="../Images/5747a5af0439cfd87f4bfabe053ec24b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*960FG3c8W9OsrTOV"/></div></div></figure><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es lc"><img src="../Images/7b884a218223d9032f3ea062eb3dd4ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s25HtjVQPeuP9DAU"/></div></div></figure><h1 id="db0f" class="jv hh hi bd hj jw jx jy hn jz ka kb hr kc kd ke hv kf kg kh hz ki kj kk id kl bi translated">了解发生了什么</h1><p id="e402" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip hs iq ir is hw it iu iv ia iw ix iy iz hb bi translated">在查看Nikto扫描输出时，我们看到了下表所示的模式。这清楚地表明，当通过云装甲时，扫描器在评估web应用程序和识别方面不那么有效</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es ld"><img src="../Images/050c6edd24ff2f31768692d1bb98fb3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gk8buVYXAD5qRiosslFgHA.png"/></div></div></figure><h1 id="2e3c" class="jv hh hi bd hj jw jx jy hn jz ka kb hr kc kd ke hv kf kg kh hz ki kj kk id kl bi translated">查看WAF日志</h1><ol class=""><li id="6277" class="jh ji hi ih b ii ij im in hs le hw lf ia lg iz jm jn jo jp bi translated">转到云装甲安全策略并选择日志记录。它将引导您进入写有查询的日志资源管理器，运行查询。您可以根据需要更改时间窗口。默认情况下，会保留6周的日志记录数据。</li></ol><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es lc"><img src="../Images/cf357224592371436ba619aeac062109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GlmnE8aQ67BazZJT"/></div></div></figure><h1 id="39a8" class="jv hh hi bd hj jw jx jy hn jz ka kb hr kc kd ke hv kf kg kh hz ki kj kk id kl bi translated">云安全策略的衡量标准</h1><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es lh"><img src="../Images/903ab688fdaf6e93e6192e9bf37a654c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M0govwUdGfboCUnW"/></div></div></figure><h1 id="3e01" class="jv hh hi bd hj jw jx jy hn jz ka kb hr kc kd ke hv kf kg kh hz ki kj kk id kl bi translated">关键外卖</h1><p id="c0b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip hs iq ir is hw it iu iv ia iw ix iy iz hb bi translated">使用安全扫描器来执行web应用程序漏洞评估扫描以暴露目标web应用程序中的漏洞是攻击者常用的技术。当外部对手可以对您的web应用程序执行这些扫描时，他们能够了解您的应用程序设计及其漏洞，这可能会导致利用。</p><p id="86fe" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated"><strong class="ih jf">对于使用它保护的web应用程序，Cloud armor可以通过其开箱即用的规则集，在网络边缘检测和防范安全扫描器执行的侦察攻击。</strong></p><h1 id="1ed6" class="jv hh hi bd hj jw jx jy hn jz ka kb hr kc kd ke hv kf kg kh hz ki kj kk id kl bi translated">下一步</h1><p id="a36e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip hs iq ir is hw it iu iv ia iw ix iy iz hb bi translated">测试SQL注入和跨站点脚本的云防护能力。</p><p id="7c48" class="pw-post-body-paragraph if ig hi ih b ii ja ik il im jb io ip hs jc ir is hw jd iu iv ia je ix iy iz hb bi translated"><strong class="ih jf"> Part-3 </strong> : <a class="ae jg" rel="noopener" href="/@neelampawar/tutorial-3-setup-web-application-security-protection-and-detection-lab-in-google-cloud-8d40962dd756">漏洞利用</a></p></div></div>    
</body>
</html>