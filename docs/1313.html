<html>
<head>
<title>Data Engineering on GCP: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GCP的数据工程:第二部分</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/data-engineering-on-gcp-part-2-50917b436ecc?source=collection_archive---------0-----------------------#2020-03-05">https://medium.com/google-cloud/data-engineering-on-gcp-part-2-50917b436ecc?source=collection_archive---------0-----------------------#2020-03-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e787" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<a class="ae jd" rel="noopener" href="/google-cloud/data-engineering-on-gcp-part-1-c2ada6817541">之前的文章</a>中，我们讨论了数据项目的基础，并涵盖了一些基本定义。这一次我们将探索如何处理数据问题的推理，直到我们得到一个解决方案设计。</p><h2 id="2799" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">商业案例</h2><p id="7497" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">SpoiledTomatoes是一家专门播放糟糕短片的媒体公司。他们的网站是开放的，可以有匿名用户和登录用户。他们的服务是免费的，主要收入来源是广告销售。上个月，他们记录了大约5000万独立用户，每个用户平均观看视频1.3次，每次会话2.5分钟。</p><p id="c2f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你受雇的主要目的是增加公司收入。你会怎么做？</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><h2 id="2314" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">框定问题</h2><p id="025c" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">这是一个关于数据工程和云计算的系列，所以你可能会认为上面问题的“正确答案”是与之相关的，对吗？简答:没有！</p><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es kl"><img src="../Images/78469d4d19cee5c07511a8f266a73ad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QqG88ixwpNdOvloy.jpg"/></div></div></figure><p id="8e50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请记住上一篇文章中的图表:我们需要从业务需求转移到技术，而不是相反。因此，虽然我们最终可能会用技术解决问题，但在深入挖掘问题之前，我们不应该一开始就做任何假设。</p><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es kx"><img src="../Images/5afb49965488ebec3079de8dac4c9361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*66tSced-Cty5MDh8.png"/></div></div></figure><h2 id="9c2d" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">业务需求</h2><p id="dc4a" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">业务需求(有意地)被含糊地表述为增加收入。但是如何增加呢？这个问题有无限的答案，在现实世界中，你会想在开始过滤解决方案空间之前，头脑风暴一些想法。其中一个过程是来自<a class="ae jd" rel="noopener" href="/@i.shubhangich/design-thinking-divergence-and-convergence-cycles-3ce7a6f27815">设计思维</a>的发散和收敛技术。</p><p id="94c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不会对此做更深入的探讨，但我只想强调，每当你在头脑风暴阶段面临模棱两可的问题时，将问题放在企业的使命陈述、愿景和价值观的背景下是很有用的。</p><p id="f3b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设Webflops的使命是提供最好的(最坏的？)的内容，让世界上所有的人都可以访问。</p><p id="dfde" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这意味着，如果你提出“关闭平台并向用户收费”的解决方案，它将被过滤掉，因为这将是核心业务的变化，与使命声明相矛盾。</p><h2 id="3d7e" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">阐明一个假设</h2><p id="148f" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">下一个分析点是领域知识告诉我们什么。它是一个网络平台，也是一个媒体分发系统。我们还需要考虑收入流是如何运作的。</p><p id="e828" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从广告的角度来看，我们可以得出的一个假设是“通过增加用户参与度，我们可以增加广告收入”。</p><p id="033c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了增加用户参与度，我们希望向用户展示与他们的口味更相关的内容，这样他们就会更多地使用网站，看到更多的广告。</p><p id="7e0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个适合<a class="ae jd" href="https://en.wikipedia.org/wiki/Information_retrieval" rel="noopener ugc nofollow" target="_blank">信息检索</a>领域的问题。</p><p id="010e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在开始实际的解决方案之前，我想在处理任何类型的数据问题之前问一些问题:</p><ol class=""><li id="ab2a" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">有什么样的数据？</li><li id="47b3" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">我们如何收集，多久收集一次？</li><li id="aea8" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">体积是多少？</li><li id="9c89" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">我们如何储存它？</li><li id="e91f" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">变化有多快？</li><li id="3901" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">响应时间重要吗？</li></ol><p id="ee24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(这个列表决不是限制性的。)</p><p id="6094" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们1)知道用户已经观看了哪些视频(视频观看量)，2)用户一点击视频，我们就知道事实，3)我们预计会有大量数据，因为我们可以让5000万用户同时观看视频(用户数量是无限的)，4)我们可以自由地以我们想要的任何方式存储它，因为我们拥有技术堆栈，5)数据实时变化，6)是的，我们希望尽可能快地提供内容，因为网站上每分钟都会出现新的视频。</p><h2 id="47ea" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">拟议解决方案</h2><p id="20e4" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">这种向用户展示相关内容的信息检索问题的典型解决方案是一种<a class="ae jd" href="https://en.wikipedia.org/wiki/Recommender_system" rel="noopener ugc nofollow" target="_blank"> <em class="lm">推荐系统</em> </a>(也称为推荐系统)。</p><p id="5f8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">推荐系统的主要目的是预测用户的偏好，并尝试向他们展示与他们相关的内容，但他们通常不会意识到它的存在。</p><p id="8679" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它们在分发长尾内容方面特别有效，被零售和媒体行业广泛使用。</p><p id="52a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lm">*注意:这可能会根据业务需求进行调整。</em></p><h2 id="b339" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">推荐系统架构</h2><p id="80e1" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">推荐系统的顶层架构如下所示:</p><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es ln"><img src="../Images/5f80119920cec225550f78cca92d6d05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3rTvxNGUfAzocqaedk7qMg.png"/></div></div></figure><p id="91e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们有一个内容服务器，它提供我们想要在页面上呈现的项目。你可以认为这是你传统的后台服务。</p><p id="e1c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后沿着向上的箭头，我们有一个消息队列。该队列的目的是捕获视频观看事件。接下来，消费者进程获取这些视频视图，并将它们整合到会话数据中。请注意，前三个块是一个数据管道，就像我们在上一篇文章中描述的那样。</p><p id="8c97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一个管道是读取会话数据，用推荐算法对其进行处理，并将其写回推荐数据库。由于推荐算法的性质，我们可能需要一个调度程序来不时地运行它。(我们将在后面看到更多细节)</p><p id="700b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们有一个推荐服务，它提供写入推荐数据库的推荐。内容服务器将有逻辑来呈现这些内容供客户端查看。</p><p id="d268" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了简单起见，我们省略了现实世界架构中需要的一些组件，如负载平衡器、缓存层和AB测试服务。我们还将使用单一的推荐算法，而不是它们的集合。</p><h2 id="99ed" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">摘要</h2><p id="c05b" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">到目前为止，我们已经解决了如何解决数据问题的过程，同时避免了选择技术优先方法的陷阱。你可能会注意到，这是第二篇文章的结尾，我们仍然没有拿起技术栈。</p><p id="bc3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，我们正在取得进展。我们知道我们想要解决的问题，我们有一个假设和一个建议的解决方案来检验这个假设。在下一篇文章中，我们将更深入地探讨推荐系统是如何工作的，并开始讨论这种架构的组件。敬请期待！</p></div></div>    
</body>
</html>