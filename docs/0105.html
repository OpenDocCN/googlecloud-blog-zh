<html>
<head>
<title>A to Z of Google Cloud Platform a personal selection — W — Wrappers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云平台a到Z个人精选— W — Wrappers</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-w-wrappers-f5618cbce672?source=collection_archive---------1-----------------------#2016-05-22">https://medium.com/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-w-wrappers-f5618cbce672?source=collection_archive---------1-----------------------#2016-05-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6792" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个奇怪的，但拜托，是“w”。我为我得到“u”的想法的同一个地方摘下这个！</p><p id="7178" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好吧，我一直听说锁定，很多时候这通常不是一个理性的讨论，因为在这个过程中，他们已经在使用一些“锁定”他们的东西，他们只是下意识地不承认这个事实。选择一个特定的数据库系统？你有，不是吗？利用了那个漂亮的存储过程，哦，想使用另一个数据存储吗？锁在里面是怎么回事？…你明白我的意思了吧！</p><p id="38c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你绝对不应该害怕使用最好的工具来工作，是的，如果你能得到一个托管服务，拥抱它，因为当你的提供商在照顾螺母和螺栓，你专注于这个可怕的应用程序，你想进入市场！</p><p id="ef66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">保持最小公分母真的是一个糟糕的选择。</p><p id="4532" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">即使我没有说服你“锁定”是你已经在做的事情，它不是一件真正的事情，但你仍然绝对相信“锁定”是你真正需要担心的事情。</p><p id="a6d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你仍然可以利用更高级别的托管服务，使用像GCP这样的云提供商，让你更快地进入市场，同时仍然给你一个退出条款。</p><p id="f4fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们首先讨论数据和以数据为中心的产品。不要再担心没有使用您的提供商提供的最佳产品。在GCP，这可能是一个大问题，因为它的优势超过了你在其他地方能做的任何事情。我不打算在BigQuery上花费更多的时间，因为有很多关于它有多棒的独立评估，我不需要再重复这些陈词滥调了(不用说我是一个超级粉丝)。</p><p id="d371" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不管怎样，GCP是非常开放的，例如，如果你使用Bigtable，你可以使用我在本系列的<a class="ae jd" rel="noopener" href="/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-b-is-for-bigtable-87fbe9630f0d#.l5fvoqw1e"> b </a>中提到的Bigtable hbase api。谷歌开源了<a class="ae jd" href="http://beam.incubator.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache beam </a>即<a class="ae jd" href="https://cloud.google.com/dataflow/" rel="noopener ugc nofollow" target="_blank">数据流的GCP托管服务。</a>所以继续使用数据流吧，它也很棒，如果你真的需要在其他地方运行相同的数据处理管道，你可以选择使用Apache beam。</p><p id="dd17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于数据的事情是你如何移动它，以及你可以把它存储在哪里。解决这种锁定的简单方法是定期将数据导出为高度可移植的平面格式，如CSV、XML或JSON，并将其存储在云存储中。这种方法将提供最大的灵活性，允许您将数据导入到您选择使用的任何数据库系统中。</p><p id="8ae4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你甚至不需要导出，因为有很多工具可以在你需要的时候帮助你将数据从一种数据格式转换成另一种格式。</p><p id="ed3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我要说的是，无论何种格式的数据存储和处理都不是您应该警惕的锁定因素(假设您仍然担心这种情况)。</p><p id="2c60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我有时听到一些关于如何与提供者API接口的问题，比如说，不使用Pub/Sub(如果你读了<a class="ae jd" rel="noopener" href="/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-p-pub-sub-130538dab6e5#.zwh4pt6w0"> p </a>你就会知道我也喜欢这个服务)回避策略意味着他们仍然在GCE上做繁重的管理队列/消息服务的工作，而不是使用托管服务。数据只是通过一个排队/消息传递系统传递，所以花费所有精力来管理自己的服务真的值得吗？如果你仍然想抽象，那么在调用周围放一个<a class="ae jd" href="https://en.wikipedia.org/wiki/Wrapper_function" rel="noopener ugc nofollow" target="_blank">包装器</a>(我打赌你想知道我什么时候会用到包装器:-)。</p><p id="1ab3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用的另一项技术是特性标志，这样您就可以对api进行本机调用。功能标志通常用于以下情况:</p><ul class=""><li id="055e" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">允许你编写一个新的特性，但是在你准备好之前，不要让它真正投入使用。</li><li id="32b4" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">敏捷无阻塞开发时间:-)</li><li id="ba97" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">为您的用户群样本启用一个功能</li><li id="c804" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">滚动更新</li></ul><p id="c10f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您还可以轻松地使用特性标志将本机调用指向提供商的特定API，比如说您有一个多云策略或正在进行迁移，这是指向正确环境的一种简洁方式。</p><p id="1e4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">特性标志基本上只是布尔值，可以像switch语句一样简单，也可以在配置文件或像redis这样的键值存储中保存实际值。</p><p id="a0d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有适用于各种语言的框架</p><p id="b837" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">比如togglz java，rollout ruby，</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/64ee2aa5b202ed1af14dc10665c71fc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*peVTEpf11k5foh-q."/></div></div></figure><p id="8208" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以及一个简单的switch语句示例:</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es ke"><img src="../Images/900ce788efb8a228471722d9ce4eb213.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/0*e4PuXN61bKYJX50A."/></div></figure><p id="fe9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">开源是谷歌的基因，我已经提到了一些GCP已经开源的服务:Apache Beam/ Dataflow和带有Hbase客户端的Bigtable，如果我不提及其他几个已经开源的服务，即Kubernetes/GKE和<a class="ae jd" href="https://www.tensorflow.org/" rel="noopener ugc nofollow" target="_blank">tensor flow</a>/<a class="ae jd" href="https://cloud.google.com/ml/" rel="noopener ugc nofollow" target="_blank">Cloud ML</a>(目前在alpha中)，那将是我的失职</p><p id="9032" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以总结一下:</p><ul class=""><li id="e49a" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">回避具体特征——不好</li><li id="d9c8" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">使用功能标志</li><li id="05e7" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">用包装纸包起来</li><li id="1303" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">开源——在谷歌的DNA中</li></ul></div></div>    
</body>
</html>