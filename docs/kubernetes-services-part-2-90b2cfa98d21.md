# kubernetes æœåŠ¡å…¬å¸:ç¬¬äºŒéƒ¨åˆ†

> åŸæ–‡ï¼š<https://medium.com/google-cloud/kubernetes-services-part-2-90b2cfa98d21?source=collection_archive---------0----------------------->

## Kubernetes æœ‰å“ªäº›æœåŠ¡ï¼Ÿ

## ä»‹ç»ğŸš©ğŸš©

å„ä½è¯»è€…å¥½ğŸ‘‹æ­£å¦‚æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­å‘Šè¯‰å¤§å®¶çš„ï¼Œâ€œKubernetes æœåŠ¡â€æ˜¯ä¸€ä¸ªå¾ˆå¤§å¾ˆé•¿çš„ä¸»é¢˜ã€‚æ‰€ä»¥æˆ‘å†³å®šä¸ºå®ƒå†™ä¸¤éƒ¨åˆ†ã€‚è¿™ä¸ä»…æœ‰åŠ©äºæˆ‘ä½¿æ–‡ç« ç®€æ´æ˜äº†ï¼Œä¹Ÿæœ‰åŠ©äºä½ ä»¬æ›´å¥½ã€æ›´æ·±å…¥åœ°ç†è§£è¿™ä¸ªæ¦‚å¿µã€‚

***è¿™å°†æ˜¯è¿™ä¸ªç³»åˆ—çš„ç¬¬äºŒéƒ¨ï¼Œä¹Ÿæ˜¯æœ€åä¸€éƒ¨ã€‚åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†è¯•ç€å»ç†è§£ä¸‹é¢çš„äº‹æƒ…*** :

*   ä»€ä¹ˆæ˜¯ ClusterIP æœåŠ¡ï¼Ÿ
*   ClusterIP æœåŠ¡å¦‚ä½•å·¥ä½œï¼Ÿ
*   å¦‚ä½•ä½¿ç”¨ yaml æ–‡ä»¶åˆ›å»º ClusterIP æœåŠ¡ï¼Ÿ
*   ä»€ä¹ˆæ˜¯è´Ÿè½½å¹³è¡¡å™¨æœåŠ¡ï¼Ÿ
*   å¦‚ä½•ä½¿ç”¨ yaml æ–‡ä»¶åˆ›å»ºè´Ÿè½½å¹³è¡¡å™¨æœåŠ¡ï¼Ÿ

## æ¦‚è¿°ğŸ”¦ğŸ”¦

![](img/6e743e78b31cd25de06a33ebe4a56336.png)

Kubernetes æœåŠ¡

è®©æˆ‘ä»¬å¿«é€Ÿå›å¿†ä¸€ä¸‹æˆ‘ä»¬åœ¨æœ¬ç³»åˆ—çš„å‰ä¸€éƒ¨åˆ†å·²ç»è®¨è®ºè¿‡çš„æ‰€æœ‰å†…å®¹ã€‚

Kubernetes ä¸­çš„ ***æœåŠ¡æ˜¯ä¸€ç§æŠ½è±¡çš„æ–¹å¼ï¼Œå°†è¿è¡Œåœ¨ä¸€ç»„ Pods ä¸Šçš„åº”ç”¨ç¨‹åºå…¬å¼€ä¸ºç½‘ç»œæœåŠ¡ã€‚***

Kubernetes ä¸­æœ‰ ***å››ç§ç±»å‹çš„æœåŠ¡*** :

*   èŠ‚ç‚¹ç«¯å£
*   ClusterIP
*   è´Ÿè½½å¹³è¡¡å™¨
*   å¤–éƒ¨åç§°

***ä¸‹é¢çš„äº‹æƒ…æˆ‘åœ¨ä¹‹å‰çš„å¸–å­é‡Œå·²ç»å…¨éƒ¨è®¨è®ºè¿‡äº†ã€‚***

*   ä»€ä¹ˆæ˜¯ Kubernetes æœåŠ¡ï¼Ÿ
*   Kubernetes çš„æœåŠ¡ç±»å‹ã€‚
*   èŠ‚ç‚¹ç«¯å£æœåŠ¡æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ
*   å¦‚ä½•ä½¿ç”¨ yaml åˆ›å»ºèŠ‚ç‚¹ç«¯å£æœåŠ¡ï¼Ÿ

ä½ ä»¬éƒ½å¯ä»¥åœ¨è¿™é‡ŒæŸ¥é˜…

[](/google-cloud/kubernetes-services-ï¸ï¸-part-1-42244ada9990) [## kubernetes æœåŠ¡å…¬å¸ç¬¬ä¸€éƒ¨åˆ†

### Kubernetes æœ‰å“ªäº›æœåŠ¡ï¼Ÿ

medium.com](/google-cloud/kubernetes-services-ï¸ï¸-part-1-42244ada9990) 

> *è°ˆå¤Ÿäº†ã€‚
> æ‰€ä»¥æ²¡æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„æ‹–å»¶ï¼Œè®©æˆ‘ä»¬å¼€å§‹æˆ‘ä»¬çš„æ–‡ç« :)*

## ä»€ä¹ˆæ˜¯ ClusterIP æœåŠ¡ï¼Ÿï¼ŸğŸ¤”ğŸ¤”

![](img/7f2d26439309dc92f63610e78e16b0cb.png)

Kubernetes é›†ç¾¤ä¸­å­˜åœ¨ä¸‰ç»„è±†èš

***è®©æˆ‘ä»¬è¯•ç€ç†è§£ä¸Šå›¾*** ä¸­ ***æ‰€ç¤ºçš„åœºæ™¯ã€‚
åœ¨ Kubernetes é›†ç¾¤ä¸­ï¼Œå­˜åœ¨å¦‚ä¸‹ä¸‰ç»„è±†èš:***

*   ***å‰ç«¯ pod***ã€è¿è¡Œ web åº”ç”¨ç¨‹åºå‰ç«¯éƒ¨åˆ†çš„ podã€‘
*   ***åç«¯ pod***ã€åœ¨å…¶ä¸Šè¿è¡Œ web åº”ç”¨ç¨‹åºåç«¯éƒ¨åˆ†çš„ podã€‘
*   ***æ•°æ®åº“çª—æ ¼*** ã€åœ¨å…¶ä¸Šè¿è¡Œæ•°æ®åº“åº”ç”¨ç¨‹åºå®ä¾‹çš„çª—æ ¼ã€‘

ä»¥ä¸Šæ‰€æœ‰çš„ pod éƒ½è¿è¡Œæ­£å¸¸ï¼Œå¹¶ä¸”åœ¨å…¶ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºä¹Ÿå¤„äºè‰¯å¥½çš„çŠ¶æ€ã€‚ä½†æ˜¯å¯¹äºæœ€ç»ˆç”¨æˆ·åº”ç”¨ç¨‹åºçš„æ­£å¸¸å·¥ä½œæ¥è¯´ï¼Œé‡è¦çš„æ˜¯æ‰€æœ‰çš„å•å…ƒåº”è¯¥ä¸€èµ·æ­£å¸¸å·¥ä½œï¼Œè€Œä¸æ˜¯ç‹¬ç«‹å·¥ä½œã€‚

> **ç°åœ¨é—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬å¦‚ä½•å°†å‰ç«¯å•å…ƒè¿æ¥åˆ°åç«¯å•å…ƒï¼Œå°†åç«¯å•å…ƒè¿æ¥åˆ°æ•°æ®åº“å•å…ƒ**ï¼Ÿï¼ŸğŸ¤”ğŸ¤”

ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ IP åœ°å€æ‰‹åŠ¨é…ç½® pod çš„å±æ€§ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥ç›¸äº’é€šä¿¡ã€‚

ä½†æ˜¯ä¸Šè¿°åšæ³•ä¼šç»™ç®¡ç†å‘˜ ***ä¸å¯æƒ³è±¡çš„å™©æ¢¦*** ğŸ‘»ã€‚
æƒ³è±¡ä¸€ä¸‹é…ç½® 1000 ä¸ª podï¼Œå…¶ä¸­ä¸€äº›ä¼šåœæ­¢è¿è¡Œï¼Œç„¶åæ¢å¤è¿è¡Œã€‚éƒ½æœ‰ä¸åŒçš„å’Œæ–°çš„ IPã€‚ ***æœ«æ—¥è½®å›çœ‹æ¥æ˜¯*** ğŸ˜°

> ä¸‹é¢æ˜¯ç±»å‹ä¸º **ClusterIP** çš„æœåŠ¡ã€‚ä»–ä»¬è®©æ‰€æœ‰è¿™äº›å·¥ä½œå˜å¾—ç®€å•å¯è¡Œã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ğŸµ

## ClusterIP æœåŠ¡å¦‚ä½•å·¥ä½œï¼Ÿï¼ŸğŸ¤”ğŸ¤”

![](img/ff02fcc075064e5686a8a92259c33519.png)

é›†ç¾¤ IP æœåŠ¡

***è®©æˆ‘ä»¬è¯•ç€ç†è§£ä¸Šå›¾ä¸­*** ***æ‰€ç¤ºçš„åœºæ™¯:***

*   æœ‰ä¸‰ç»„ PODs å‰ç«¯ã€åç«¯å’Œæ•°æ®åº“]
*   æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ª ClusterIP æœåŠ¡(åç«¯å’Œ redis)æ¥ç®€åŒ– pod é—´çš„é€šä¿¡è¿‡ç¨‹ã€‚

***è®©æˆ‘ä»¬æ¥æ¢ç©¶ä¸€ä¸‹ ClusterIP æœåŠ¡åœ¨å¹•åæ˜¯å¦‚ä½•å·¥ä½œçš„:***

1.  å‡è®¾ä¸€ä¸ªå‰ç«¯ POD éœ€è¦è·å–ä¸€äº›åç«¯æœåŠ¡ã€‚
2.  å‰ç«¯ POD å°†è”ç³»æˆ‘ä»¬åˆ›å»ºçš„åç«¯æœåŠ¡ã€‚
3.  åç«¯æœåŠ¡å°†æŠŠ POD é€šä¿¡è¯·æ±‚æ˜ å°„åˆ°åˆé€‚çš„åç«¯ POD ä¸Šã€‚
4.  åç«¯ POD å°†è¿”å›æ‰€éœ€çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®å°†é€šè¿‡æœåŠ¡æä¾›ç»™å‰ç«¯ PODã€‚

æ‰€æœ‰çš„äº‹æƒ…ï¼Œæ¯”å¦‚è¯·æ±‚åº”è¯¥ä¼ é€’ç»™å“ªä¸ª PODï¼Œæˆ–è€…æ•°æ®åº”è¯¥å¦‚ä½•è¿”å›ç»™è¯·æ±‚è€… PODï¼Œéƒ½å°†ç”±æœåŠ¡æœ¬èº«å¤„ç†ï¼Œè€Œä¸éœ€è¦ç®¡ç†å‘˜çš„å¹²é¢„ã€‚

å³ä½¿åœ¨æ­¤ä¹‹ä¸Šï¼ŒPOD å±‚ä¹Ÿå¯ä»¥æ ¹æ®é›†ç¾¤ä¸Šçš„è´Ÿè½½éšæ—¶æ‰©å¤§æˆ–ç¼©å°ï¼Œå¹¶ä¸”ä¸ä¼šä¸­æ–­è¿™äº›æœåŠ¡æ­£åœ¨è®¾è®¡çš„é€šä¿¡ç³»ç»Ÿã€‚
å› ä¸ºå³ä½¿æœ‰ 1000 ä¸ªèŠ‚ç‚¹ï¼ŒæœåŠ¡ä¹Ÿå¯ä»¥æ¯«æ— å›°éš¾åœ°æ²¿ç€é›†ç¾¤æ‰©å±•ã€‚

> ä»¥è¿™ç§ç®€å•çš„æ–¹å¼ï¼Œé€šè¿‡ä½¿ç”¨**é›†ç¾¤ IP æœåŠ¡**ã€‚pod èƒ½å¤Ÿè½»æ¾åœ°ä¸é›†ç¾¤ä¸­çš„å…¶ä»– pod è¿›è¡Œé€šä¿¡:))

## æˆ‘ä»¬å¦‚ä½•åˆ›å»º ClusterIP æœåŠ¡ï¼Ÿï¼ŸğŸ¤¯ğŸ¤¯

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ YAML æ–‡ä»¶åˆ›å»º ClusterIP æœåŠ¡ã€‚è¦ä½¿ç”¨ YAML åˆ›å»º Kubernetes ClusterIP æœåŠ¡ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œä¸ºå®ƒåˆ†é…å¿…è¦çš„è®¿é—®æƒé™ï¼Œç„¶åå®šä¹‰å¿…è¦çš„é”®-å€¼å¯¹ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªé›†ç¾¤ IP æœåŠ¡å®šä¹‰æ–‡ä»¶*(****cluster _ IP . YAML****)*çš„ä¾‹å­

```
**apiVersion**: v1
**kind**: Service
**metadata**:
  **name**: back-end
**spec**:
  **type**: ClusterIP
  **selector:** 
      **name**: myapp
      **type**: back-end  
  **ports**:
    - **targetPort**: 80
      **port**: 80
```

è¿™ä¸ªæ–‡ä»¶ä¸­æœ‰å¾ˆå¤šæ–¹é¢å’Œç»„ä»¶ã€‚è®©æˆ‘ä»¬é€ä¸€åˆ†æğŸ˜€

*   è®©æˆ‘ä»¬ä»`apiVersion`(é”®å€¼å¯¹)å¼€å§‹ã€‚è¿™ç”¨äºè¯´æ˜åœ¨åˆ›å»º ClusterIP æœåŠ¡æ—¶ï¼Œæ‚¨å°†åœ¨åå°è¿è¡Œä»€ä¹ˆ API æœåŠ¡å™¨å’Œç‰ˆæœ¬ã€‚
*   æ¥ä¸‹æ¥æ˜¯`kind`,è¡¨ç¤ºè¿™æ˜¯ä¸€ç§å®šä¹‰æ–‡ä»¶ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæ˜¯ä¸€ç§â€œæœåŠ¡â€ã€‚
*   æ¥ä¸‹æ¥æ˜¯`metadata`ï¼Œæ˜¯åŒ…å«ç‰©å“åç§°çš„å­—å…¸ã€‚å…ƒæ•°æ®å­˜å‚¨åˆ†é…ç»™æ­£åœ¨åˆ›å»ºçš„ ClusterIP æœåŠ¡çš„å€¼ã€‚
*   æœ€åæ˜¯`spec`ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„/åˆ—è¡¨ã€‚ä»¥ä¸‹æ˜¯å…¶ä¸­å­˜åœ¨çš„å€¼åŠå…¶å«ä¹‰ã€‚
    `type`:è¿™ä¸ªé”®çš„å€¼ï¼Œå®šä¹‰äº†æ­£åœ¨åˆ›å»ºçš„æœåŠ¡çš„ç±»å‹ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ªâ€œé›†ç¾¤ IPâ€ã€‚
    `selector`:å®ƒåŸºæœ¬ä¸Šæœ‰ pod çš„æ ‡ç­¾ï¼Œä»è€Œå¸®åŠ©æœåŠ¡è¯†åˆ«å®ƒå¿…é¡»ä½¿ç”¨çš„ podã€‚
    `ports`:è¿™ä¸ªéƒ¨åˆ†åŒ…å«æœåŠ¡å¿…é¡»ä½¿ç”¨çš„ç«¯å£ã€‚
    `port`å…·æœ‰æœåŠ¡å¯¹è±¡ä¸Šçš„ç«¯å£å€¼ï¼Œè°ƒç”¨è¯·æ±‚å°†æ˜ å°„åˆ°è¯¥ç«¯å£ã€‚

æˆ‘ä»¬å·²ç»å®Œæˆäº† ClusterIP æœåŠ¡å®šä¹‰æ–‡ä»¶ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ä¿å­˜å¹¶é€€å‡ºæ–‡ä»¶ã€‚

ä½¿ç”¨æ­¤å‘½ä»¤åŸºäºä¸Šè¿° YAML æ–‡ä»¶åˆ›å»º ClusterIP æœåŠ¡:

```
kubectl create -f cluster_ip.yaml
```

ä½¿ç”¨æ­¤å‘½ä»¤æŸ¥çœ‹ç¾¤é›†ä¸Šè¿è¡Œçš„æ‰€æœ‰æœåŠ¡:

```
kubectl get services
```

## ä»€ä¹ˆæ˜¯è´Ÿè½½å¹³è¡¡å™¨æœåŠ¡ï¼Ÿï¼ŸğŸ¤”ğŸ¤”

![](img/e92902cada2ed40ab963b00e60e2bbe3.png)

ç”± Pavel Neznanov åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

**æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼Œå…¶ä¸­å·²ç»æ‰§è¡Œäº†ä»¥ä¸‹æ“ä½œ**:

1.  æ‚¨å·²ç»ä½¿ç”¨ NodePort æœåŠ¡å°†è¿è¡Œåœ¨ POD ä¸Šçš„åº”ç”¨ç¨‹åºæš´éœ²ç»™å·¥ä½œèŠ‚ç‚¹çš„ç«¯å£ã€‚
2.  ç°åœ¨è®©æˆ‘ä»¬å‡è®¾æœ‰ 100 ä¸ª pod è·¨ä¸åŒçš„å·¥ä½œèŠ‚ç‚¹è¿è¡Œç›¸åŒçš„åº”ç”¨ç¨‹åºã€‚
3.  æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹æœ‰ä¸åŒçš„ ip åœ°å€ã€‚å› æ­¤ï¼Œå³ä½¿ç«¯å£ç›¸åŒï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šè¦è®¿é—®çš„ URL ä¹Ÿä¼šä¸åŒã€‚

é‚£ä¹ˆåœ¨ç»™ç”¨æˆ·ç«¯ç‚¹çš„æ—¶å€™ï¼Œä½ ä¼šç»™å“ªä¸ªèŠ‚ç‚¹çš„ URLï¼Œç»™å¤šå°‘ä¸ª URLğŸ˜“ã€‚æœ€ç»ˆè¿™å°†å¯¼è‡´ä¸€ç‰‡æ··ä¹±ã€‚

***ç°åœ¨ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè´Ÿè½½å¹³è¡¡å™¨æœåŠ¡ã€‚*** ç®€å•æ¥è¯´ï¼Œé€šè¿‡ç»™ç”¨æˆ·ä¸€ä¸ª URL æ¥å±•ç¤ºæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚æ­¤å¤–ï¼Œå®ƒä½¿ç”¨ä¸€äº›äº‘æä¾›å•†(gcpã€azureã€aws ç­‰)çš„è´Ÿè½½å¹³è¡¡å™¨æ¥å¹³è¡¡ç”¨æˆ·å¯¹è¿è¡Œè¿™äº›æœåŠ¡çš„ pod çš„è¯·æ±‚ã€‚

> ä»¥è¿™ç§ç®€å•çš„æ–¹å¼ï¼Œé€šè¿‡ä½¿ç”¨**è´Ÿè½½å¹³è¡¡å™¨** **æœåŠ¡**ã€‚ç”¨æˆ·è¯·æ±‚å¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°è´Ÿè½½å¹³è¡¡ï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ä¸€ä¸ª URL å‘æœ€ç»ˆç”¨æˆ·å…¬å¼€:))

## æˆ‘ä»¬å¦‚ä½•åˆ›å»ºä¸€ä¸ªè´Ÿè½½å¹³è¡¡å™¨æœåŠ¡ï¼Ÿï¼ŸğŸ¤¯ğŸ¤¯

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ YAML æ–‡ä»¶åˆ›å»ºä¸€ä¸ªè´Ÿè½½å¹³è¡¡å™¨æœåŠ¡ã€‚è¦ä½¿ç”¨ YAML åˆ›å»º Kubernetes LoadBalancer æœåŠ¡ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œä¸ºå®ƒåˆ†é…å¿…è¦çš„è®¿é—®æƒé™ï¼Œç„¶åå®šä¹‰å¿…è¦çš„é”®-å€¼å¯¹ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªè´Ÿè½½å¹³è¡¡å™¨æœåŠ¡å®šä¹‰æ–‡ä»¶*(****load _ balancer . YAML****)*çš„ä¾‹å­

```
**apiVersion**: v1
**kind**: Service
**metadata**:
  **name**: myapp-service
**spec**:
  **type**: LoadBalancer
  **selector**:
    **app**: front-end
  **ports**:
    - **port**: 80
      **targetPort**: 80
      **nodePort:** 30008
```

è¿™ä¸ªæ–‡ä»¶ä¸­æœ‰å¾ˆå¤šæ–¹é¢å’Œç»„ä»¶ã€‚è®©æˆ‘ä»¬é€ä¸€åˆ†æğŸ˜€

*   è®©æˆ‘ä»¬ä»`apiVersion`(é”®å€¼å¯¹)å¼€å§‹ã€‚è¿™ç”¨äºè¯´æ˜åœ¨åˆ›å»º LoadBalancer æœåŠ¡æ—¶ï¼Œæ‚¨å°†åœ¨åå°è¿è¡Œä»€ä¹ˆ API æœåŠ¡å™¨å’Œç‰ˆæœ¬ã€‚
*   æ¥ä¸‹æ¥æ˜¯`kind`,è¡¨ç¤ºè¿™æ˜¯ä¸€ç§å®šä¹‰æ–‡ä»¶ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæ˜¯ä¸€ç§â€œæœåŠ¡â€ã€‚
*   æ¥ä¸‹æ¥æ˜¯`metadata`ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ…æ‹¬é¡¹ç›®åç§°çš„å­—å…¸ã€‚å…ƒæ•°æ®å­˜å‚¨åˆ†é…ç»™æ­£åœ¨åˆ›å»ºçš„è´Ÿè½½å¹³è¡¡å™¨æœåŠ¡çš„å€¼ã€‚
*   æœ€åæ˜¯`spec`ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„/åˆ—è¡¨ã€‚ä»¥ä¸‹æ˜¯å…¶ä¸­å­˜åœ¨çš„å€¼åŠå…¶å«ä¹‰ã€‚
    `type`:è¿™ä¸ªé”®çš„å€¼ï¼Œå®šä¹‰äº†æ­£åœ¨åˆ›å»ºçš„æœåŠ¡çš„ç±»å‹ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ªâ€œè´Ÿè½½å¹³è¡¡å™¨â€ã€‚
    `selector`:å®ƒåŸºæœ¬ä¸Šæœ‰ pod çš„æ ‡ç­¾ï¼Œä»è€Œå¸®åŠ©æœåŠ¡è¯†åˆ«å®ƒå¿…é¡»ä½¿ç”¨çš„ podã€‚
    `ports`:åŒ…å«æœåŠ¡å¿…é¡»ä½¿ç”¨çš„ç«¯å£çš„éƒ¨åˆ†ã€‚
    `nodePort`æ‹¥æœ‰ç”¨æˆ·è¯·æ±‚å°†è¦åˆ°è¾¾çš„èŠ‚ç‚¹ä¸Šçš„ç«¯å£å€¼ã€‚
    `port`å…·æœ‰æœåŠ¡å¯¹è±¡ä¸Šçš„ç«¯å£å€¼ï¼Œç”¨æˆ·è¯·æ±‚å°†æ˜ å°„åˆ°è¯¥ç«¯å£ã€‚

æˆ‘ä»¬å·²ç»å®Œæˆäº†è´Ÿè½½å¹³è¡¡å™¨æœåŠ¡å®šä¹‰æ–‡ä»¶ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ä¿å­˜å¹¶é€€å‡ºæ–‡ä»¶ã€‚

ä½¿ç”¨æ­¤å‘½ä»¤åŸºäºä¸Šè¿° YAML æ–‡ä»¶åˆ›å»ºè´Ÿè½½å¹³è¡¡å™¨æœåŠ¡:

```
kubectl create -f load_balancer***.***yaml
```

ä½¿ç”¨æ­¤å‘½ä»¤æŸ¥çœ‹ç¾¤é›†ä¸Šè¿è¡Œçš„æ‰€æœ‰æœåŠ¡:

```
kubectl get services
```

## æ¥ä¸‹æ¥å‘¢ï¼ŸğŸ‘€ ğŸ‘€

![](img/196fcf0c880648e86aa6d3f53b37687b.png)

> éå¸¸æ„Ÿè°¢ä½ æ¥åˆ°è¿™é‡Œï¼æ˜¯æœ¬æ–‡çš„ç»“å°¾ã€‚
> ä½†æˆ‘ä»¬åªæ˜¯è§¦åŠäº† K8s ç”Ÿæ€ç³»ç»Ÿçš„è¡¨é¢:)ã€‘
> è¿˜æœ‰å¾ˆå¤šï¼Œè¿™å°†æ˜¯ä¸€æ¬¡æœ‰è¶£çš„æ—…ç¨‹ï¼Œæˆ‘ä»¬å°†ä¸€èµ·å­¦ä¹ è®¸å¤šå¾ˆé…·çš„ä¸œè¥¿ã€‚
> 
> é¼“æŒï¼Œè·Ÿæˆ‘æ¥ğŸ™ˆå¦‚æœä½ å–œæ¬¢æˆ‘çš„ä½œå“ï¼Œå¹¶å¸Œæœ›åœ¨æœªæ¥æ›´å¤šåœ°é˜…è¯»æˆ‘çš„ä½œå“:)

å¦‚æœä½ å¯¹è¿™ç¯‡æ–‡ç« æœ‰ä»»ä½•ç–‘é—®ï¼Œæˆ–è€…æƒ³èŠèŠå¤©ï¼Œè¯·éšæ—¶è”ç³»æˆ‘çš„ç¤¾äº¤åª’ä½“è´¦å·

*æ¨ç‰¹â€”*[https://twitter.com/ChindaVibhor](https://twitter.com/ChindaVibhor)

*é¢†è‹±â€”*[*https://www.linkedin.com/in/vibhor-chinda-465927169/*](https://www.linkedin.com/in/vibhor-chinda-465927169/)

## æˆ‘ä»¥å‰å†™çš„æ–‡ç« :

[](/google-cloud/kubernetes-services-ï¸ï¸-part-1-42244ada9990) [## kubernetes æœåŠ¡å…¬å¸ç¬¬ä¸€éƒ¨åˆ†

### Kubernetes æœ‰å“ªäº›æœåŠ¡ï¼Ÿ

medium.com](/google-cloud/kubernetes-services-ï¸ï¸-part-1-42244ada9990) [](/google-cloud/what-are-namespaces-in-kubernetes-d03c76a83d04) [## Kubernetes ä¸­çš„åç§°ç©ºé—´æ˜¯ä»€ä¹ˆï¼Ÿï¼Ÿ

### åç§°ç©ºé—´æ˜¯ Kubernetes å¯¹è±¡ï¼Œå®ƒå°†ä¸€ä¸ª Kubernetes é›†ç¾¤åˆ’åˆ†æˆå¤šä¸ªè™šæ‹Ÿé›†ç¾¤ã€‚åœ¨â€¦

medium.com](/google-cloud/what-are-namespaces-in-kubernetes-d03c76a83d04) [](https://faun.pub/kubernetes-object-deployments-1e09cd904963) [## Kubernetes å¯¹è±¡:â˜¸â˜¸éƒ¨ç½²

### Kubernetes ä¸­æœ‰å“ªäº›éƒ¨ç½²ï¼Ÿ

faun.pub](https://faun.pub/kubernetes-object-deployments-1e09cd904963) 

## å‚è€ƒèµ„æ–™:

[](https://kubernetes.io/docs/concepts/services-networking/service/) [## æœåŠ¡

### å°†è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„åº”ç”¨ç¨‹åºæš´éœ²åœ¨å•ä¸ªå¤–å‘ç«¯ç‚¹ä¹‹åï¼Œå³ä½¿å·¥ä½œè´Ÿè½½è¢«æ‹†åˆ†â€¦

kubernetes.io](https://kubernetes.io/docs/concepts/services-networking/service/) 

æˆ‘ä»ç„¶ä¼šç»§ç»­å‘è¡¨æ–°çš„æ–‡ç« ï¼Œæ¶µç›–æˆ‘æ­£åœ¨æ¢ç´¢çš„ä¸€ç³»åˆ—ä¸»é¢˜ã€‚

é‚£éƒ½æ˜¯ä¹¡äº²ä»¬ï¼ï¼æ¶‚é¸¦:))