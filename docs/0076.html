<html>
<head>
<title>A to Z of Google Cloud Platform a personal selection — M for monitoring</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云平台的a到Z个人精选— M用于监控</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-m-for-monitoring-385497b56e26?source=collection_archive---------5-----------------------#2016-03-13">https://medium.com/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-m-for-monitoring-385497b56e26?source=collection_archive---------5-----------------------#2016-03-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c78e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本系列的上一篇文章中讨论了<a class="ae jd" rel="noopener" href="/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-l-is-for-logging-230d459976f4#.u0ghfzshr">日志</a>之后，监控似乎是M的自然选择，所以在这里你可以为你的快乐做一点监控。</p><p id="4d87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">典型的监控解决方案包括收集指标的方法、查看系统和应用程序状态的仪表板以及发送警报的方法。</p><p id="d3de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们简要地看一下自我管理的监控系统通常是什么样子的(我在这里保持它的高水平，因为这不是一个深入探讨自我管理的监控系统的帖子)。</p><p id="49f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">度量收集/监控框架</strong>:类似于<a class="ae jd" href="https://www.nagios.org/" rel="noopener ugc nofollow" target="_blank"> Nagios </a>、<a class="ae jd" href="https://github.com/sensu/sensu" rel="noopener ugc nofollow" target="_blank"> sensu </a>、<a class="ae jd" href="https://www.elastic.co/guide/en/logstash/current/introduction.html" rel="noopener ugc nofollow" target="_blank"> logstash </a>或<a class="ae jd" href="http://www.zabbix.com/" rel="noopener ugc nofollow" target="_blank"> zabbix </a>的东西，用于实际整理所有事件(通常作为日志数据)。有成吨的选择，这些只是我写这篇文章时想到的第一个。</p><p id="67b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常，您会在目标系统上安装一个代理或插件，允许来自应用程序和操作系统的事件被推/拉至中央服务器。</p><p id="049d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">警报:</strong>因此，当您收到这些事件时，您需要对它们做些什么，以允许您对检测到的问题做出反应，甚至调用额外的资源等。关键是您将事件传递给收集器/框架，以便根据收到的数据采取行动。您需要有一种方法，让您的系统对超出您定义的容忍水平的事件做出反应，比如我需要更多资源或哦，糟糕，这是坏消息，请寻求帮助。寻求帮助你需要某种通知系统才能联系到真正的人。电子邮件、<a class="ae jd" href="https://www.pagerduty.com/" rel="noopener ugc nofollow" target="_blank">page duty</a>、<a class="ae jd" href="https://www.hipchat.com/" rel="noopener ugc nofollow" target="_blank"> hipchat </a>、<a class="ae jd" href="https://slack.com/" rel="noopener ugc nofollow" target="_blank"> slack </a>或者你知道的老式IRC都是向你的员工传达有问题的信息的例子，请他们看看。</p><p id="16aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">图表，图表许多图表可以直观地看到事情是如何进行的，通常通过</p><p id="b596" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">仪表板:</strong>这需要与监控框架集成，例如像<a class="ae jd" href="https://github.com/elastic/kibana" rel="noopener ugc nofollow" target="_blank"> kibana </a>这样的解决方案，它通过elasticsearch与Logstash(麋鹿栈)集成。Zabbix有它的<a class="ae jd" href="http://www.zabbix.com/global_dashboard.php" rel="noopener ugc nofollow" target="_blank">全球仪表盘</a>，sensu有它的<a class="ae jd" href="https://sensuapp.org/docs/latest/enterprise-dashboard-overview" rel="noopener ugc nofollow" target="_blank">企业仪表盘</a>。与监控框架一样，有各种各样的仪表板解决方案可以放在上面。</p><p id="692a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是许多活动部件，您必须将它们编织在一起，保持可用并进行管理。如果有操作人员来管理，这可能不是问题。</p><h2 id="6c49" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">堆栈驱动程序监控</h2><p id="4c76" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">GCP在<a class="ae jd" href="https://cloud.google.com/monitoring/docs" rel="noopener ugc nofollow" target="_blank"> Stackdriver </a>中提供了全面管理的监控解决方案，可提供指标、仪表盘和警报。使用与GCP完全集成的&amp;非常容易。</p><p id="b80e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">指标收集/监控框架:</strong>它支持许多GCP资源，包括:GAE、GCE、GKE、发布/订阅和云SQL。此外，您可以查看您的安全规则和GCS资源。我特别喜欢这样一个事实，GCS视图提供了一个关于桶的数量、每个桶中对象的数量以及桶中对象的总大小的单一视图(非常好)。</p><p id="99d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，您从支持的服务中获取核心指标。</p><p id="c543" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，如果您安装了可选插件，那么您可以从GCE获得额外的指标，并且您还可以从流行应用程序列表中收集指标，查看<a class="ae jd" href="https://cloud.google.com/monitoring/agent/" rel="noopener ugc nofollow" target="_blank">文档</a>以获得支持的应用程序列表。仅举几个支持cassandra、kafka的应用程序，当然还有曾经流行的Mongodb。此处列出了可用指标的列表<a class="ae jd" href="https://cloud.google.com/monitoring/support/available-metrics" rel="noopener ugc nofollow" target="_blank">。但是，如果您的特定包不受支持，或者您想从您的应用程序中监控细节，那么您可以创建</a><a class="ae jd" href="https://cloud.google.com/monitoring/custom-metrics/" rel="noopener ugc nofollow" target="_blank">自定义指标</a>，您需要使用一个<a class="ae jd" href="https://cloud.google.com/monitoring/api/" rel="noopener ugc nofollow" target="_blank"> API </a>。这是一个全面的全托管解决方案。</p><p id="cb98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在堆栈驱动程序监控堆栈的这一部分，我注意到了其他一些东西:</p><ul class=""><li id="e124" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><a class="ae jd" href="https://cloud.google.com/monitoring/get-started#create_an_uptime_check" rel="noopener ugc nofollow" target="_blank">正常运行时间检查</a>允许您通过从世界各地向您的应用程序、服务或URL发送请求来检查您的互联网访问系统的健康状况。(与<a class="ae jd" href="https://www.youtube.com/watch?v=KGlP6m0JbYw&amp;feature=youtu.be" rel="noopener ugc nofollow" target="_blank">警报策略</a>结合使用)</li><li id="9bb8" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">轻松集成您的应用程序日志，根据基于<a class="ae jd" href="https://cloud.google.com/logging/docs/view/logs_based_metrics" rel="noopener ugc nofollow" target="_blank">日志的指标</a>创建警报。</li><li id="ee26" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">如果您使用代理，则以1分钟为间隔监视代理度量</li><li id="615c" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">如果您在AWS上有资产，那么您也可以使用堆栈驱动程序<a class="ae jd" href="https://cloud.google.com/monitoring/get-started#monitor_an_aws_account" rel="noopener ugc nofollow" target="_blank">来监控您的AWS资产</a>。这是一个跨越两种云的单一窗口，或者您可以使用StackDriver来监控AWS资产(我非常喜欢GCP采用的开放式方法)</li></ul><p id="2c57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">警报:</strong>您可以创建一组规则来确定您的资源或组是否正常运行。这些是<a class="ae jd" href="https://cloud.google.com/monitoring/get-started#gs-alerting" rel="noopener ugc nofollow" target="_blank">警报策略</a>。规则是涉及度量阈值和正常运行时间检查的逻辑条件。如果满足警报策略条件，则会触发警报。这将导致事件出现在Stackdriver monitoring控制面板的incidents部分。</p><p id="ee8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与自我管理解决方案一样，您可以轻松地将Stackdriver监控与一系列<a class="ae jd" href="https://cloud.google.com/monitoring/support/notification-options" rel="noopener ugc nofollow" target="_blank">通知解决方案</a>集成，如slack、hipchat、pagerduty等。我喜欢您可以配置它，直接向云监控移动应用程序发送警报，这样您就可以直接从应用程序查看事件，如果需要，您还可以直接从那里进行ssh。</p><p id="8587" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">仪表板:</strong>您可以创建显示不同类型图表的仪表板。例如，您可以创建一个图表来显示一个或多个指标的时间序列数据，或者您可以聚合几个指标。除了图表之外，您还可以查看事件日志和事件列表</p><p id="6375" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">文档中的这张图片让您了解了典型仪表板的样子:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ks"><img src="../Images/fe03e7fbf5e921ab3b49a1dc2ce07cf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLBC0plOYEvuTds-KqC7CQ.png"/></div></div></figure><p id="f0db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望Stackdriver的短暂游览以及我在本系列的上一篇文章中讨论的关于<a class="ae jd" rel="noopener" href="/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-l-is-for-logging-230d459976f4#.u0ghfzshr">日志记录</a>功能的讨论能够让您对GCP可用的功能有所了解，这意味着您不必安装和维护自己的日志记录&amp;监控系统。</p></div></div>    
</body>
</html>