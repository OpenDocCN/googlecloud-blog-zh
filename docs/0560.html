<html>
<head>
<title>Oracle data (ETL) to Google BigQuery using Google Cloud Dataflow and Dataprep</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Google Cloud数据流和Dataprep将Oracle数据(ETL)转换为Google BigQuery</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/oracle-data-to-google-bigquery-using-google-cloud-dataflow-and-dataprep-20884571a9e5?source=collection_archive---------0-----------------------#2018-04-05">https://medium.com/google-cloud/oracle-data-to-google-bigquery-using-google-cloud-dataflow-and-dataprep-20884571a9e5?source=collection_archive---------0-----------------------#2018-04-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="fa2a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">ETL变得简单</h1><p id="aa4c" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">尽管事实上ETL任务在加载大数据时非常具有挑战性，但仍然存在这样一种场景，即您可以相对容易且非常有效地从Oracle向BigQuery ( <a class="ae kb" href="https://cloud.google.com/bigquery/" rel="noopener ugc nofollow" target="_blank"> Analytics数据仓库Google Cloud </a>)加载千兆字节或兆兆兆字节的数据。</p><blockquote class="kc kd ke"><p id="7eb4" class="jd je kf jf b jg kg ji jj jk kh jm jn ki kj jq jr kk kl ju jv km kn jy jz ka hb bi translated">数据准备和转换过程消耗了数据科学家近80%的时间。</p></blockquote><p id="6c20" class="pw-post-body-paragraph jd je hi jf b jg kg ji jj jk kh jm jn jo kj jq jr js kl ju jv jw kn jy jz ka hb bi translated">在我的例子中，下图是基于云架构，我们已经为我们的客户使用机器学习库创建了云架构，如pandas、numpy和其他数据科学库。我们客户的数据库表被导入BigQuery，以便使用Google Cloud Dataprep进行进一步的数据准备和转换。</p><ul class=""><li id="9b11" class="ko kp hi jf b jg kg jk kh jo kq js kr jw ks ka kt ku kv kw bi translated">我想提一下<a class="ae kb" href="https://www.trifacta.com/" rel="noopener ugc nofollow" target="_blank"> TRIFACTA </a>的出色工作，这是一家与谷歌共同开发Dataprep的公司。</li></ul><p id="2852" class="pw-post-body-paragraph jd je hi jf b jg kg ji jj jk kh jm jn jo kj jq jr js kl ju jv jw kn jy jz ka hb bi translated">这个工具真的很有用，很省时，可以说它让我们的数据科学家笑了。</p><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es kx"><img src="../Images/f0f48657d490fd6a53957a9bc2bac55b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_2Mzi2gEcAlTGKB3cFLd2g.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx translated">数据管道</figcaption></figure><h1 id="8e5d" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">步骤:</h1><h2 id="2cf3" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">1.将Oracle数据库表导出到CSV。</h2><p id="c563" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">您也可以使用第三方ETL工具将您的数据库直接连接到BigQuery，如这个<a class="ae kb" href="https://cloud.google.com/bigquery/partners/" rel="noopener ugc nofollow" target="_blank">链接</a>中所述，省去了下面描述的一些步骤。</p></div><div class="ab cl mb mc gp md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hb hc hd he hf"><h2 id="d103" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">2.将文件上传到云存储桶。</h2><figure class="ky kz la lb fd lc er es paragraph-image"><div class="er es mi"><img src="../Images/4f045dccf567c2b6202067da8207e934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*I8bswNCLGHp5DzefNTxClw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx translated">GCP数据存储桶</figcaption></figure><h2 id="e17a" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">3.创建数据集并将csv数据导入Google Cloud Dataprep</h2><figure class="ky kz la lb fd lc er es paragraph-image"><div class="er es mj"><img src="../Images/93b8218e6f8f73b916bd1bc87a30d08c.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/format:webp/1*uHkMl-r5j8rf_94JnFyrSg.png"/></div></figure><p id="ef5b" class="pw-post-body-paragraph jd je hi jf b jg kg ji jj jk kh jm jn jo kj jq jr js kl ju jv jw kn jy jz ka hb bi translated">选择数据集并从云存储中导入数据:</p><figure class="ky kz la lb fd lc er es paragraph-image"><div class="er es mk"><img src="../Images/0fb4be2ef0c4184b34224d29a47bedbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*db19FBTJn_1DWsTUFaNDaQ.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx translated">Dataprep —选择csv并创建数据集</figcaption></figure><p id="ef89" class="pw-post-body-paragraph jd je hi jf b jg kg ji jj jk kh jm jn jo kj jq jr js kl ju jv jw kn jy jz ka hb bi translated">选择云存储桶并选择要导入的文件:</p><figure class="ky kz la lb fd lc er es paragraph-image"><div class="er es ml"><img src="../Images/69de61ddb1e771971d659d568b6f3bb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*6uNPXrBgC0534Ujwm-y57g.png"/></div></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div class="er es mm"><img src="../Images/9f93fbfa514660fa6f998458916fb794.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*mZdUYQvN9KmjBz5SZWhX-Q.png"/></div></figure><h2 id="ece0" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">4.将数据集添加到流中，以在Google Cloud数据流上运行作业</h2><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mn"><img src="../Images/fa0282cb316c096e10840bd8d97b4997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bn_biPNTJMCHEXzj1hAC0w.png"/></div></div></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mo"><img src="../Images/cab0c0b1d08527b0681a8890788da321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*D1ziCWBOlWbqYzbLQnMtag.png"/></div></div></figure><p id="623f" class="pw-post-body-paragraph jd je hi jf b jg kg ji jj jk kh jm jn jo kj jq jr js kl ju jv jw kn jy jz ka hb bi translated">添加新配方</p><figure class="ky kz la lb fd lc er es paragraph-image"><div class="er es mp"><img src="../Images/1e94934b7a5a0f5d505d2a052601d1bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*yslwAoFj7cYweGC6xCf-hQ.png"/></div></figure><p id="55c9" class="pw-post-body-paragraph jd je hi jf b jg kg ji jj jk kh jm jn jo kj jq jr js kl ju jv jw kn jy jz ka hb bi translated">编辑配方</p><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mq"><img src="../Images/8f77e6486073f7af41a69e9455ac51d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RBS2tQGqUJFuTK9okBj6tA.png"/></div></div></figure><h2 id="393c" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated"><strong class="ak"> 5。清除数据并将作业设置为运行</strong></h2><p id="cd7f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我真的很喜欢它可以轻松地与谷歌云平台上的所有其他工具集成。您可以在数据清理上节省大量时间，数据科学家可以专注于业务价值。</p><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mr"><img src="../Images/70e5415b4eb47fb881dd74453702021f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bp1FOSW2-Z_LlPgyDSlmWQ.png"/></div></div></figure><p id="2c9e" class="pw-post-body-paragraph jd je hi jf b jg kg ji jj jk kh jm jn jo kj jq jr js kl ju jv jw kn jy jz ka hb bi translated">我不会详细介绍Dataprep，因为还有其他很棒的帖子可以用作参考<a class="ae kb" rel="noopener" href="/mark-rittman/google-cloud-dataprep-spreadsheet-style-data-wrangling-powered-by-google-cloud-dataflow-a48c405d81c"/>。；)</p><h2 id="6ade" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">6.编辑作业</h2><p id="0504" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">您也可以安排作业定期运行。Dataprep提供了这个选项。</p><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es ms"><img src="../Images/85843508b4aeec419aaa5edf1809c249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VnTj8gckmC2qyjBqa7v2Ng.png"/></div></div></figure><h2 id="2e9d" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated"><strong class="ak"> 7。在BigQuery上创建一个新表</strong></h2><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mt"><img src="../Images/7109b037468bc6b25e40a664ab19e2f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7AUon1HZrCC9rcY8L1dj5w.png"/></div></div></figure><h2 id="034f" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">8.保存设置并运行作业</h2><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mu"><img src="../Images/68315eea274a9f4e2f7a69bd0b53b502.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BSd14Z7loo-RB1UbO4T-Zw.png"/></div></div></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mv"><img src="../Images/a04c21fcda75fb86e01b363cc4aaa950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ed6mmvrsC8ant7ckqMdedA.png"/></div></div></figure><h2 id="5265" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">9.查看数据流上运行的作业</h2><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mw"><img src="../Images/66050b448e8c45cd3d59ef526b09b9d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jYwBhfX1XEohhwdOGeBPDQ.png"/></div></div></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mx"><img src="../Images/e575868feb2be3e9e72a945e74b319b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XWtd7cZsBKBk8ekcQ48tXg.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx translated">谷歌云数据流工作详细信息</figcaption></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es my"><img src="../Images/ab5c3a2887565382f09faa041639855e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xRoFZiSKFbI9kXvlapZ-Dw.png"/></div></div></figure><h2 id="688a" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">10.检查结果</h2><p id="8474" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Dataprep对于数据分析的重要性不亚于飞行前清单对于数据科学飞行员的重要性。</p><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mz"><img src="../Images/b0adc5d56dea158b1923bce3f48b8f9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IJanNzEC7mCO7di1DT80pw.png"/></div></div></figure><h2 id="f602" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">11视图Bigquery表</h2><p id="4f6a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">选择搜索字符串的示例(38.5米的行)。</p><ul class=""><li id="7ecf" class="ko kp hi jf b jg kg jk kh jo kq js kr jw ks ka kt ku kv kw bi translated">查询完成(耗时16.0秒，处理4.78 GB)</li></ul><pre class="ky kz la lb fd na nb nc nd aw ne bi"><span id="7d41" class="ln ig hi nb b fi nf ng l nh ni">#standardSQL<br/>SELECT * FROM<br/> `<!-- -->project<!-- -->.BCM.AI` t<br/>WHERE<br/> REGEXP_CONTAINS(LOWER(TO_JSON_STRING(t)), r’caixa marcha’)</span></pre><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es nj"><img src="../Images/8bb6e2b5ac433aba2363c40f0c5317f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p3w2Usve0JYAhMCjNGyPcA.png"/></div></div></figure><h1 id="5325" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">后续步骤:</h1><ul class=""><li id="7a62" class="ko kp hi jf b jg jh jk jl jo nk js nl jw nm ka kt ku kv kw bi translated">利用GCP数据实验室(数据科学笔记本)探索大查询。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es nn"><img src="../Images/478b64a7d31d17672b163c67ae128ca3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QPCqZh2VNOC1GLVH5xucIg.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx translated">数据实验室</figcaption></figure><ul class=""><li id="9690" class="ko kp hi jf b jg kg jk kh jo kq js kr jw ks ka kt ku kv kw bi translated">与<a class="ae kb" href="https://cloud.google.com/data-studio/" rel="noopener ugc nofollow" target="_blank"> GCP数据工作室</a>一起探索大数据可视化</li></ul><h1 id="8707" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">参考资料:</h1><div class="no np ez fb nq nr"><a href="https://codelabs.developers.google.com/codelabs/mlimmersion-dataprep/index.html?index=..%2F..%2Fcloud#4" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab dw"><div class="nt ab nu cl cj nv"><h2 class="bd hj fi z dy nw ea eb nx ed ef hh bi translated">在云数据准备中计算时间窗特征</h2><div class="ny l"><h3 class="bd b fi z dy nw ea eb nx ed ef dx translated">在本实验中，您将使用Google Cloud Dataprep获取、转换和分析出租车数据集。我们将计算…</h3></div><div class="nz l"><p class="bd b fp z dy nw ea eb nx ed ef dx translated">codelabs.developers.google.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of lh nr"/></div></div></a></div><div class="no np ez fb nq nr"><a href="https://cloud.google.com/blog/big-data/2017/05/designing-etl-architecture-for-a-cloud-native-data-warehouse-on-google-cloud-platform" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab dw"><div class="nt ab nu cl cj nv"><h2 class="bd hj fi z dy nw ea eb nx ed ef hh bi translated">为谷歌云平台上的云原生数据仓库设计ETL架构</h2><div class="ny l"><h3 class="bd b fi z dy nw ea eb nx ed ef dx translated">了解如何使用谷歌云数据流、谷歌云发布/订阅和谷歌应用程序为谷歌大查询构建ETL解决方案…</h3></div><div class="nz l"><p class="bd b fp z dy nw ea eb nx ed ef dx translated">cloud.google.com</p></div></div></div></a></div><div class="no np ez fb nq nr"><a href="https://cloud.google.com/dataprep/" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab dw"><div class="nt ab nu cl cj nv"><h2 class="bd hj fi z dy nw ea eb nx ed ef hh bi translated">云数据准备-数据准备和数据清理|谷歌云</h2><div class="ny l"><h3 class="bd b fi z dy nw ea eb nx ed ef dx translated">Google Cloud Dataprep是一个智能数据准备和清理服务，用于可视化探索、清理和…</h3></div><div class="nz l"><p class="bd b fp z dy nw ea eb nx ed ef dx translated">cloud.google.com</p></div></div><div class="oa l"><div class="og l oc od oe oa of lh nr"/></div></div></a></div><div class="no np ez fb nq nr"><a href="https://cloud.google.com/data-studio/" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab dw"><div class="nt ab nu cl cj nv"><h2 class="bd hj fi z dy nw ea eb nx ed ef hh bi translated">数据工作室-漂亮的数据可视化|谷歌云</h2><div class="ny l"><h3 class="bd b fi z dy nw ea eb nx ed ef dx translated">Google Data Studio将您的数据转化为信息丰富的仪表板和报告，易于阅读、共享和定制…</h3></div><div class="nz l"><p class="bd b fp z dy nw ea eb nx ed ef dx translated">cloud.google.co</p></div></div><div class="oa l"><div class="oh l oc od oe oa of lh nr"/></div></div></a></div></div></div>    
</body>
</html>