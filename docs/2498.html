<html>
<head>
<title>Resource Requirements in Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes的资源需求</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/resource-requirements-in-kubernetes-86290cb43c48?source=collection_archive---------0-----------------------#2022-11-12">https://medium.com/google-cloud/resource-requirements-in-kubernetes-86290cb43c48?source=collection_archive---------0-----------------------#2022-11-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0391" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如何指定Pods在Kubernetes中运行所需的资源？？</p><h2 id="86d6" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">介绍🚩🚩</h2><p id="36f0" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">各位读者好👋我已经写了一段时间关于Kubernetes及其对象的基础知识。我觉得基础知识已经讲得很好了，现在是时候转向更高级的Kubernetes主题了。<br/>其中一个话题是关于<strong class="ih hj"> <em class="kd">在Kubernetes的资源需求和限制。</em> </strong></p><p id="cc1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kd">所以在本文中，我们将试着了解一下</em> </strong>:</p><ul class=""><li id="e1e6" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated">Kubernetes中的资源请求和限制是什么？？</li><li id="d486" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">我们如何在Kubernetes中设置Pod的资源请求和限制？？</li><li id="4efb" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">当pod试图超出其指定限制的资源时会发生什么？？</li></ul><blockquote class="ks kt ku"><p id="917f" class="if ig kd ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated"><strong class="ih hj">这将是一篇非常短小精悍的文章。<br/>所以不要再拖延了，让我们开始吧:)</strong></p></blockquote></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h2 id="1f93" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">Kubernetes中的资源请求和限制是什么？？🤔🤔</h2><figure class="lg lh li lj fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lf"><img src="../Images/79ec835dbd551b94c21dab1daa140a39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u1j0mv4OzrBcez4Dqcf_Tg.png"/></div></div></figure><p id="6492" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你经常阅读我的文章，你一定会注意到我在上一篇文章中谈到了Kubernetes  中的<strong class="ih hj"> <em class="kd">调度。</em></strong></p><div class="lr ls ez fb lt lu"><a rel="noopener follow" target="_blank" href="/google-cloud/scheduling-in-kubernetes-9bc96c9008d8"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">kubernetes的日程安排</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">Kubernetes中的调度流程是如何工作的？？</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">medium.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi lp lu"/></div></div></a></div><p id="a6a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在那篇文章中，我谈到了在K8s集群中的一个节点上调度一个Pod的所有方法。</p><p id="6803" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是我们没有谈的是“<strong class="ih hj"> <em class="kd">一个Pod </em> </strong>的资源需求&amp;限制”。比如，这些是如何指定的，因为它在将Pod调度到特定节点的过程中起着重要作用。<br/>当且仅当一个Pod的资源需求被一个节点满足时，那么只有该节点可以在其上调度该Pod。否则没机会:((</p><p id="f446" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们试着从以下几点来理解整个概念</p><ul class=""><li id="5039" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated">假设有一个两个节点的Kubernetes集群。</li><li id="2ecd" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">每个节点都分配有一些资源(CPU、内存)。</li><li id="fd2e" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">现在，当我们创建Pod时，每个Pod都需要在其中运行容器化的应用程序。</li><li id="5855" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">这些容器化的应用程序需要一些资源(CPU、内存)才能正常运行。</li><li id="a79e" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">现在Kubernetes调度程序的任务是找到一个能够满足Pod资源需求的节点。</li><li id="d031" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">满足这些要求的节点将获得为它们安排的Pod。</li></ul><blockquote class="ks kt ku"><p id="83e2" class="if ig kd ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated">因此，简单来说，“资源需求”只不过是一个Pod向节点请求的计算资源，以运行其内部的应用程序。<br/>另一方面，“T29】资源限制只不过是一个节点可以给予特定Pod的最大计算资源。</p></blockquote></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h2 id="1b3f" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">我们如何在Kubernetes中设置Pod的资源请求和限制？？🤓🤓</h2><figure class="lg lh li lj fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mj"><img src="../Images/a2cb70874446e79a45ef3e3b3cadf58b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hqS8oXGWAZwobz35"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx">Photo by <a class="ae mo" href="https://unsplash.com/@cdd20?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">愚木混株 cdd20</a> on <a class="ae mo" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="ks kt ku"><p id="4d80" class="if ig kd ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated"><strong class="ih hj">* *注意:</strong>默认情况下，Kubernetes假设pod或pod中的容器需要<code class="du mp mq mr ms b">0.5</code> CPU和<code class="du mp mq mr ms b">256Mi</code>内存。</p></blockquote><p id="032d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果pod中的应用程序需要的资源多于默认资源，您需要以下面的方式在pod定义文件中设置它们。<br/>参见下面yaml文件中<code class="du mp mq mr ms b"><em class="kd">spec</em></code>部分下的<code class="du mp mq mr ms b"><em class="kd">resources</em></code>部分。</p><pre class="lg lh li lj fd mt ms mu bn mv mw bi"><span id="be17" class="mx je hi ms b be my mz l na nb">apiVersion: v1<br/>kind: Pod<br/>metadata:<br/>  name: simple-app<br/>  labels:<br/>    name: simple-app<br/>spec:<br/> containers:<br/> - name: simple-app<br/>   image: simple-app<br/>   ports:<br/>    - containerPort:  8080<br/>   resources:<br/>     requests:<br/>      memory: "1Gi"<br/>      cpu: "1"</span></pre><blockquote class="ks kt ku"><p id="0936" class="if ig kd ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated"><strong class="ih hj">* *注意:</strong>默认情况下，Kubernetes将资源限制设置为1个CPU和512Mi内存</p></blockquote><p id="c73e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您需要更改pod中应用程序的资源限制。然后，您需要按照以下方式在pod定义文件中设置它们。<br/>参见下面yaml文件中<code class="du mp mq mr ms b"><em class="kd">spec</em></code>部分下的<code class="du mp mq mr ms b"><em class="kd">resources</em></code>部分。</p><pre class="lg lh li lj fd mt ms mu bn mv mw bi"><span id="33a8" class="mx je hi ms b be my mz l na nb">apiVersion: v1<br/>kind: Pod<br/>metadata:<br/>  name: simple-app<br/>  labels:<br/>    name: simple-app<br/>spec:<br/> containers:<br/> - name: simple-app<br/>   image: simple-app<br/>   ports:<br/>    - containerPort:  8080<br/>   resources:<br/>     requests:<br/>      memory: "1Gi"<br/>      cpu: "1"<br/>     limits:<br/>       memory: "2Gi"<br/>       cpu: "2"</span></pre><blockquote class="ks kt ku"><p id="84a6" class="if ig kd ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated">万岁！！<strong class="ih hj"> 🥳🎉🎊</strong>我想现在应该很清楚了，在Kubernetes中为一个Pod设置资源请求和限制是多么容易。</p></blockquote></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h2 id="3d9c" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">当pod试图超出其指定限制的资源时会发生什么？？🤯 🤯</h2><figure class="lg lh li lj fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es nc"><img src="../Images/853d4e7c1376451b41d1df0dbb2b4bfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2VAFJv5N4aYjIgyf"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx translated">照片由<a class="ae mo" href="https://unsplash.com/es/@ric3b0wl?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Sam Xu </a>在<a class="ae mo" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><ol class=""><li id="de96" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc nd kk kl km bi translated">如果Pod试图超过为它定义的<strong class="ih hj"> <em class="kd"> CPU限制</em> </strong>，Kubernetes集群不允许它这样做。因此，当在一个节点上执行时，一个Pod超过它为自己定义的CPU限制是不可能的。</li><li id="f9ad" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc nd kk kl km bi translated">如果Pod试图超过为它定义的<strong class="ih hj"> <em class="kd">内存限制</em> </strong>，Kubernetes集群允许它这样做。因此，当在一个节点上执行时，一个Pod可能会超过它为自己定义的内存限制。<strong class="ih hj"> <em class="kd">但是集群不会让这种情况持续很长一段时间。当它检测到它已经超过它的存储器限制一段较长的时间</em> </strong>时，它将  <strong class="ih hj"> <em class="kd">终止Pod👀</em></strong></li></ol></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><h2 id="f029" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">接下来呢？👀 👀</h2><figure class="lg lh li lj fd lk er es paragraph-image"><div class="er es ne"><img src="../Images/ad0b9e78c9a733d30c9ec3a0317ff410.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nAFVG4hYWd8vNbt5"/></div></figure><blockquote class="ks kt ku"><p id="9ff4" class="if ig kd ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated">非常感谢你来到这里！这是本文的结尾。<br/>但我们只是触及了K8s生态系统的表面:)<br/>还有很多，这将是一次有趣的旅程，我们将一起学习许多很酷的东西。</p><p id="2794" class="if ig kd ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated">鼓掌，跟我来🙈如果你喜欢我的作品，并希望在未来更多地阅读我的作品:)</p></blockquote><p id="c4a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你对这篇文章有任何疑问，或者想聊聊天，请随时联系我的社交媒体账号</p><p id="af1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kd">推特—</em><a class="ae mo" href="https://twitter.com/ChindaVibhor" rel="noopener ugc nofollow" target="_blank">T3】https://twitter.com/ChindaVibhorT5】</a></p><p id="1465" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kd">领英—</em><a class="ae mo" href="https://www.linkedin.com/in/vibhor-chinda-465927169/" rel="noopener ugc nofollow" target="_blank"><em class="kd">https://www.linkedin.com/in/vibhor-chinda-465927169/</em></a></p><h2 id="b668" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">相关文章</h2><div class="lr ls ez fb lt lu"><a rel="noopener follow" target="_blank" href="/google-cloud/daemon-sets-static-pods-bf43b10efe97"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">守护进程集和静态豆荚☸☸</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">Kubernetes中关于守护进程集和静态Pods的一切</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">medium.com</p></div></div><div class="md l"><div class="nf l mf mg mh md mi lp lu"/></div></div></a></div><div class="lr ls ez fb lt lu"><a rel="noopener follow" target="_blank" href="/google-cloud/deploying-a-local-kubernetes-cluster-using-minikube-abe94a2c7583"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">使用Minikube部署本地Kubernetes集群🚢 🚢</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">如何使用Minikube设置本地Kubernetes集群？？</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">medium.com</p></div></div><div class="md l"><div class="ng l mf mg mh md mi lp lu"/></div></div></a></div><p id="53b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我仍然会继续发表新的文章，涵盖我正在探索的一系列主题。</p><p id="f0b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那都是乡亲们！！涂鸦:))</p></div></div>    
</body>
</html>