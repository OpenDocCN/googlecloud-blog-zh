<html>
<head>
<title>Cloud IoT step-by-step: Functions, words, words, words</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云物联网循序渐进:功能、词、词、词</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/cloud-iot-step-by-step-functions-words-words-words-30e62edbe73c?source=collection_archive---------0-----------------------#2019-05-17">https://medium.com/google-cloud/cloud-iot-step-by-step-functions-words-words-words-30e62edbe73c?source=collection_archive---------0-----------------------#2019-05-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8fbedacc1a746339660b4f8adf6a799b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_whKRvZljExOvj1XQQ5Yiw.png"/></div></div></figure><p id="ad20" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗨，朋友们！</p><p id="2010" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，云函数。它们非常棒，我在<a class="ae jo" rel="noopener" href="/@GabeWeiss/cloud-iot-step-by-step-cloud-to-device-communication-655a92d548ca">这篇</a>文章中已经介绍了如何用它们和你的树莓Pi对话。虽然Node.js是一种很棒的语言，但在物联网世界中，它不是首选语言。根据<a class="ae jo" href="https://ianskerrett.wordpress.com/2016/04/14/profile-of-an-iot-developer-results-of-the-iot-developer-survey/" rel="noopener ugc nofollow" target="_blank">Eclipse基金会在2016年进行的这个</a>调查(我意识到它已经过时了，事情正在发生变化，但它至少是一个基线)Node.js在C/C++、Python和Java之后排名第四，因为Eclipse有点偏向Java。</p><p id="4e97" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Node.js首先发布了云函数，所以我首先介绍了它，但为了确保我介绍了我们的基础，我已经为我们之前在Node.js中运行的相同云函数编写了代码，但现在是在<a class="ae jo" href="https://github.com/GabeWeiss/IoT_Core_Quick_Starts/tree/master/03_basics_gcf/python" rel="noopener ugc nofollow" target="_blank"> Python </a>和<a class="ae jo" href="https://github.com/GabeWeiss/IoT_Core_Quick_Starts/tree/master/03_basics_gcf/go" rel="noopener ugc nofollow" target="_blank"> Go </a>中。</p><p id="a4aa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">整个过程与之前相同，但是在创建您的云函数时，将<code class="du jp jq jr js b">Runtime</code>下拉列表更改为适当的语言。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/aefcd86b26710e174526cfcf013fe3ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*xMMrNY6sI7M9BNNWCTg-CA.png"/></div></figure><p id="8e7e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一切都是一样的。使用前一篇文章中的脚本启动您的Raspberry Pi，然后点击云函数细节的<code class="du jp jq jr js b">Trigger</code>选项卡中的端点。对于这个函数，如果你只是去触发器中的URL，它会发送一个<code class="du jp jq jr js b">clear</code>的<code class="du jp jq jr js b">config</code>类型的消息。就像在之前的教程中一样，在打开的页面上，你可以添加，例如:<code class="du jp jq jr js b">?which=command&amp;message=red</code>，这将向设备发送一条命令消息，该设备应该(假设从上一个<a class="ae jo" rel="noopener" href="/@GabeWeiss/cloud-iot-step-by-step-connecting-raspberry-pi-python-2f27a2893ab5"/><a class="ae jo" rel="noopener" href="/@GabeWeiss/cloud-iot-step-by-step-cloud-to-device-communication-655a92d548ca">教程</a>中已经设置好了一切)将sense HAT上的所有led都变成红色。</p><p id="a7ad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我说过一切都是一样的，但是我对代码逻辑做了一个重大的改动，这个改动<em class="jy">可能</em>已经导致我们的函数不再工作了！我在新函数中依赖的东西叫做<code class="du jp jq jr js b">default credentials</code>。当您创建云函数时，有一个字段用于指定服务帐户。默认情况下，如果你不像我们在使用云功能的第一个版本中那样指定任何服务帐户，那么它将使用该服务帐户来尝试验证该功能正在做的任何事情。因此，根据您使用用户的默认服务帐户对GCP项目的访问级别，您可能无法访问物联网核心管理API。如果您拥有项目的所有者或编辑权限，这可能会神奇地工作，因为您的默认帐户拥有运行该API的权限。</p><p id="e7c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，和以前一样，您可能会注意到，第一次调用部署的云函数时，运行时间比您想象的要长。那是因为还有冷启动成本。第一次运行任何云功能时，当它启动后端来运行它时，会有一个明显的延迟。可能从一秒到几秒不等。对该函数的后续调用在一段时间内会很快，但超时后，冷启动又会回来。我本来打算写一篇关于优化冷启动的方法以及避免冷启动的策略的博客，但是你瞧！我的同事柯尔特·麦克安利斯去年已经写了一篇《T4 》!那里的技术仍然适用。看看这个。</p><p id="3e64" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个帖子到此为止！我的下一篇文章将会是关于为Google创建一个展示我们的ML/AI能力的演示，以及Firestore和Android。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="0e85" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我已经<a class="ae jo" href="https://github.com/GabeWeiss/google-sorting-demo" rel="noopener ugc nofollow" target="_blank">为此开源了</a>代码，我将在接下来的文章中详细介绍！</p></div></div>    
</body>
</html>