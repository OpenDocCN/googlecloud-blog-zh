<html>
<head>
<title>Google BigQuery public datasets now include Stack Overflow Q&amp;A</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google BigQuery公共数据集现在包括堆栈溢出问答</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/google-bigquery-public-datasets-now-include-stack-overflow-q-a-5a8a7e371b52?source=collection_archive---------4-----------------------#2017-02-10">https://medium.com/google-cloud/google-bigquery-public-datasets-now-include-stack-overflow-q-a-5a8a7e371b52?source=collection_archive---------4-----------------------#2017-02-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e832" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2016年12月15日星期四</p><p id="2cbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">最初发表于</em><a class="ae je" href="https://cloud.google.com/blog/big-data/2016/12/google-bigquery-public-datasets-now-include-stack-overflow-q-a" rel="noopener ugc nofollow" target="_blank"><em class="jd">【cloud.google.com】</em></a><em class="jd">。</em></p><p id="c1c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">探索堆栈溢出数据中隐藏的趋势和关系是使用BigQuery进行SQL分析的一个很好的教训。</strong></p><p id="208f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好消息:我们刚刚将Stack Overflow的问答历史添加到BigQuery的公共数据集集合中。这意味着任何拥有谷歌云平台账户的人都可以使用SQL查询(或者其他一些<a class="ae je" href="https://cloud.google.com/bigquery/partners/" rel="noopener ugc nofollow" target="_blank">喜欢的工具</a>)来挖掘这个数据宝库。</p><p id="a692" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在<a class="ae je" href="https://cloud.google.com/bigquery/public-data/stackoverflow" rel="noopener ugc nofollow" target="_blank">堆栈溢出数据文档页面</a>上找到一些示例查询，例如:</p><ul class=""><li id="f980" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jk jl jm jn bi translated">"这些年来有百分之多少的问题得到了回答？"</li><li id="2259" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated">"栈溢出时不同任期的用户的声誉和徽章数是多少？"</li><li id="565a" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated">" 10个‘最容易’获得的金牌是什么？"</li><li id="d8d3" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated">"一周中的哪一天一小时内回答的问题最多？"</li></ul><p id="1867" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以这些问题为起点，然后通过<a class="ae je" href="http://reddit.com/r/bigquery" rel="noopener ugc nofollow" target="_blank">reddit.com/r/bigquery</a>与我们分享您的结果和疑问。如果您有任何问题，<a class="ae je" href="http://stackoverflow.com/questions/tagged/google-bigquery" rel="noopener ugc nofollow" target="_blank">请咨询堆栈溢出社区</a>。</p><h1 id="574f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">钻研数据</h1><p id="a992" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">您可能想知道:用BigQuery查询堆栈溢出有什么特别之处？毕竟，Stack Overflow已经向用户推荐了<a class="ae je" href="https://data.stackexchange.com/stackoverflow/queries" rel="noopener ugc nofollow" target="_blank">Stack Exchange Data Explorer</a>(SEDE)，这是一个以数据为中心的网站，用户可以在这里分享和优先处理数千个问题——而且效果非常好。因此，让我们回顾一下在BigQuery中使用堆栈溢出数据的一些优点:</p><ul class=""><li id="9cb0" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jk jl jm jn bi translated">超过50，000行的限制。<a class="ae je" href="http://varianceexplained.org/r/stack-lite/" rel="noopener ugc nofollow" target="_blank"> SEDE最多只能输出5万行</a>。这对于BigQuery来说不是问题。</li><li id="37a0" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated">欢迎机器人。SEDE保护自己免受滥用验证码，没有API。使用BigQuery登录时不需要验证码，它的REST API允许各种工具利用它的强大功能。请随意将Tableau、re:dash、Looker、R、pandas和您最喜欢的工具连接到它。</li><li id="9144" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated">加入一切。BigQuery 上有大量其他数据集共享，没有什么可以阻止你加载更多，无论是私人的还是公共的。想象一下你可以通过查询来回答这些问题？</li></ul><p id="d5b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们来看一个加入的例子。我们在BigQuery上分享了<a class="ae je" rel="noopener" href="/google-cloud/github-on-bigquery-analyze-all-the-code-b3576fd2b150#.jxn1zdfow">万亿字节的GitHub开源代码</a>。让我们来看看GitHub代码中哪些是最常被引用的堆栈溢出问题——特别是Javascript。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="b1c9" class="lf ju hi lb b fi lg lh l li lj">#standardSQL <br/>SELECT a.id, title, c files, answer_count answers, favorite_count favs, view_count views, score FROM `bigquery-public-data.stackoverflow.posts_questions` a JOIN ( SELECT CAST(REGEXP_EXTRACT(content, r'stackoverflow.com/questions/([0-9]+)/') AS INT64) id, COUNT(*) c, MIN(sample_path) sample_path FROM `fh-bigquery.github_extracts.contents_js` WHERE content LIKE '%stackoverflow.com/questions/%' GROUP BY 1 HAVING id&gt;0 ORDER BY 2 DESC LIMIT 10 ) b ON a.id=b.id ORDER BY c DESC</span></pre><p id="6937" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是GitHub上Javascript代码中最常见的堆栈溢出问题:</p><figure class="kw kx ky kz fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lk"><img src="../Images/63619afa721c5db65a3a643af10893dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cjPTo_-GwE4rQMg1.png"/></div></div></figure><p id="51c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者，我们可以看看来自GHTorrent(也在BigQuery上)的GitHub拉请求注释:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="2388" class="lf ju hi lb b fi lg lh l li lj">#standardSQL <br/>SELECT a.id, title, c files, answer_count answers, favorite_count favs, view_count views, score FROM `bigquery-public-data.stackoverflow.posts_questions` a JOIN ( SELECT CAST(REGEXP_EXTRACT(body, r'stackoverflow.com/questions/([0-9]*)/') AS INT64) id, COUNT(*) c FROM `ghtorrent-bq.ght.pull_request_comments` WHERE body LIKE '%stackoverflow.com/questions%' GROUP BY 1 ORDER BY 2 DESC LIMIT 10 ) b ON a.id=b.id ORDER BY c DESC</span></pre><p id="11b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果如下:</p><figure class="kw kx ky kz fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ls"><img src="../Images/7947e77ab353d4a4f2c149e19853a835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_5U1nWt687EHMo5_.png"/></div></div></figure><p id="4f5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者，我们来看看黑客新闻。自2014年以来，最受欢迎的问题标签是什么？</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="b29b" class="lf ju hi lb b fi lg lh l li lj">#standardSQL <br/>SELECT tag, SUM(c) c FROM ( SELECT CONCAT('stackoverflow.com/questions/', CAST(b.id AS STRING)), title, c, answer_count, favorite_count, view_count, score, SPLIT(tags, '|') tags FROM `bigquery-public-data.stackoverflow.posts_questions` a JOIN ( SELECT CAST(REGEXP_EXTRACT(text, r'stackoverflow.com/questions/([0-9]+)/') AS INT64) id, COUNT(*) c FROM `fh-bigquery.hackernews.comments` WHERE text LIKE '%stackoverflow.com/questions/%' AND EXTRACT(YEAR FROM time_ts)&gt;=2014 GROUP BY 1 ORDER BY 2 DESC ) b ON a.id=b.id), UNNEST(tags) tag GROUP BY 1 ORDER BY 2 DESC LIMIT 10</span></pre><p id="8af8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是2014年以来链接自《黑客新闻》的堆栈溢出问题上最受欢迎的标签:</p><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es lt"><img src="../Images/c918d1e1458ad089cc9dd2eb79506feb.png" data-original-src="https://miro.medium.com/v2/resize:fit:248/format:webp/0*WKFxdn4kioaSVrId.png"/></div></figure><p id="e388" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这与堆栈溢出的其余部分相比如何？</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="ceb1" class="lf ju hi lb b fi lg lh l li lj">#standardSQL <br/>SELECTtag, COUNT(*) c FROM ( SELECT SPLIT(tags, '|') tags FROM `bigquery-public-data.stackoverflow.posts_questions` a WHERE EXTRACT(YEAR FROM creation_date)&gt;=2014 ), UNNEST(tags) tag GROUP BY 1 ORDER BY 2 DESC LIMIT 10</span></pre><p id="b562" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">黑客新闻社区似乎更关心Haskell、C、C++和性能，而不是整体上的Stack Overflow，Stack Overflow在其最流行的标签中列出了php、android、jquery和css:</p><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es lu"><img src="../Images/a8bfe23c694354582f17fd81a3224008.png" data-original-src="https://miro.medium.com/v2/resize:fit:252/format:webp/0*AcWpbD1czh-T5V3T.png"/></div></figure><h1 id="a098" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">后续步骤</h1><p id="7fe3" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">如果你还没有尝试过BigQuery，请跟随这个<a class="ae je" href="https://www.reddit.com/r/bigquery/comments/3dg9le/analyzing_50_billion_wikipedia_pageviews_in_5/" rel="noopener ugc nofollow" target="_blank">初学者教程</a>，它展示了如何在5秒钟内分析500亿次页面浏览量。然后，您可以随意使用您喜欢的任何其他查询或数据集:例如，我们的官方<a class="ae je" href="https://cloud.google.com/bigquery/public-data/" rel="noopener ugc nofollow" target="_blank">公共BigQuery数据集</a>，其他用户<a class="ae je" href="https://www.reddit.com/r/bigquery/wiki/datasets" rel="noopener ugc nofollow" target="_blank">共享的数据集</a>，当然还有<a class="ae je" href="https://twitter.com/felipehoffa/status/761635507080081408" rel="noopener ugc nofollow" target="_blank">您自己的</a>。</p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><p id="cfab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">原载于</em><a class="ae je" href="https://cloud.google.com/blog/big-data/2016/12/google-bigquery-public-datasets-now-include-stack-overflow-q-a" rel="noopener ugc nofollow" target="_blank"><em class="jd">cloud.google.com</em></a><em class="jd">。</em></p></div></div>    
</body>
</html>