<html>
<head>
<title>Using Google Cloud SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用谷歌云SQL</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/using-google-cloud-sql-e3e4c123a89f?source=collection_archive---------0-----------------------#2016-01-06">https://medium.com/google-cloud/using-google-cloud-sql-e3e4c123a89f?source=collection_archive---------0-----------------------#2016-01-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/e322839d39bc43feef1ba7968d19ff50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zfuUDJ50xWrXLpyNM4j9og.jpeg"/></div></figure><p id="8e0b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Google <a class="ae jk" href="http://googlecloudplatform.blogspot.com/2015/12/the-next-generation-of-managed-MySQL-offerings-on-Cloud-SQL.html" rel="noopener ugc nofollow" target="_blank">最近宣布</a>他们基于云SQL的下一代托管MySQL产品，所以我们想尝试一下，创建一个基于云的SQL数据库，然后我们可以利用它作为移动应用程序的后端，甚至从我们的桌面进行高级数据分析。</p><p id="8358" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">根据Google的说法，第二代云SQL的两个主要目标是更好的<em class="jl">性能</em>和<em class="jl">每美元的可伸缩性</em>。似乎他们成功实现了这些目标:第二代云SQL比第一代快7倍以上。它可以扩展到每个实例10TB的数据、15，000 IOPS和104GB的RAM，远远超过第一代产品。因此，它看起来像是移动应用程序的理想的、可扩展的基于云的数据库后端。</p><p id="30e9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你按照谷歌博客文章上的说明去做，你首先要为谷歌云创建一个试用账户。然后，一旦您登录到Google Developer控制台，单击左上角的菜单按钮并选择storage部分下的SQL。这将使您能够创建新的第二代云SQL实例:</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jm"><img src="../Images/65ab58342e086ecd4d1e461c757c27f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bgm1zWA4ny-Ki027VBUr-A.png"/></div></div></figure><p id="9a6a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">强烈建议更改您的root密码，并仅允许从将托管您的开发人员计算机或您正在构建的移动应用程序的后端服务器的授权网络访问您的云实例。例如，如果在未来的博客文章中，我们将探索在这个数据库之上构建一个移动应用程序，而为我们的移动应用程序提供所有服务器功能和工作流的<a class="ae jk" href="http://www.altova.com/mobiletogether/server.html" rel="noopener ugc nofollow" target="_blank"> MobileTogether后端服务器</a>将需要能够访问这个云SQL实例。</p><p id="81cd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了从您的桌面开发人员机器上使用云SQL实例，您需要<a class="ae jk" href="http://dev.mysql.com/downloads/" rel="noopener ugc nofollow" target="_blank">为您的机器下载MySQL工具</a>，这将使您能够使用<strong class="io hj"> mysql </strong>命令行工具。此外，要从您计算机上的其他应用程序使用云SQL数据库，您需要下载相应的<a class="ae jk" href="http://dev.mysql.com/downloads/connector/" rel="noopener ugc nofollow" target="_blank"> MySQL连接器</a>。在这篇博客文章中，我们将使用<a class="ae jk" href="http://www.altova.com/databasespy.html" rel="noopener ugc nofollow" target="_blank"> Altova DatabaseSpy </a>来访问SQL实例，上传一些数据，然后执行一些分析，因此您会想要<a class="ae jk" href="http://dev.mysql.com/downloads/connector/odbc/" rel="noopener ugc nofollow" target="_blank">下载MySQL Connector/ODBC for Windows</a>。本质上，DatabaseSpy类似于Toad，但允许您同时连接到不同数据库服务器上的多个不同数据库实例。因此，您可以打开一个到云SQL的连接，一个到本地SQL服务器的连接，第三个到Oracle数据库的连接—所有这些都在一个工作区内完成。相当漂亮。</p><p id="fe90" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一个重要的注意事项:您需要确保下载了正确的连接器/ODBC驱动程序。如果您使用64位版本的DatabaseSpy，您还需要64位版本的MySQL连接器/ODBC驱动程序。或者，更好的是，您可以下载32位和64位版本的Connector/ODBC并安装它们——然后您可以在您的机器上从32位和64位软件使用云SQL。</p><p id="2c03" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了用一些有用的数据填充我们的云SQL实例以进行实验和进一步分析，我们下载了优秀的<a class="ae jk" href="http://www.seanlahman.com/baseball-archive/statistics/" rel="noopener ugc nofollow" target="_blank">拉赫曼的棒球数据库</a>，它可以方便地作为压缩的MySQL dump获得。将它下载到我们的计算机上之后，我们就有了一个完整的SQL数据库表描述和所有数据——所有这些都在一个SQL文件中，因此可以很容易地上传到我们的云SQL实例中。</p><p id="0154" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">第一步是<a class="ae jk" href="https://cloud.google.com/sql/docs/create-database" rel="noopener ugc nofollow" target="_blank">在您的云SQL </a>实例中创建一个新数据库。您可以通过命令行mysql实用程序、Google Developer Console或cURL来实现这一点——更多详细信息请参见本文开头的链接。我们将简单地称这个数据库为“拉赫曼”。</p><p id="4fc6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们可以从DatabaseSpy连接到这个数据库，方法是选择“Connect to a database”命令，并按照连接向导中的步骤进行操作。首先，我们选择MySQL作为数据库技术:</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jv"><img src="../Images/993a60bf7f96430f256dcc2bc7a3fd11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jJ0EX0Jt2B_1JfRemgJq9g.png"/></div></div></figure><p id="2681" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后，我们确认使用了之前下载的MySQL连接器/ODBC驱动程序:</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jw"><img src="../Images/37c9bf397cefd2d0b175e67b15c63e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u1h6QSv1QN3kdGMsylMDtQ.png"/></div></div></figure><p id="9209" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">最后，同样重要的是，我们指定云SQL实例的IP地址、用户名和密码，然后点击“Test”按钮来验证连接。如果可以的话，我们现在可以通过命名来创建一个数据源，并指定我们之前创建的“lahman”数据库:</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div class="er es jx"><img src="../Images/223ede62f68eb12302671f0d111c17c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*ER71GON9OaLdRD9m9bl8Iw.png"/></div></figure><p id="e863" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在我们准备将所有数据上传到新数据库的表格中。为此，我们只需打开先前下载并解压缩的Lahman Baseball数据库的SQL转储，在DatabaseSpy中如下所示:</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jy"><img src="../Images/f8471eecdab06ebfbf47617e7c80e198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DN7ly6Ia-1c-KLSbl2GerA.png"/></div></div></figure><p id="aa65" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如您所见，该数据库的SQL转储包含在新的云SQL实例上重新创建所有表所需的所有命令。所以我们现在要做的就是按下“执行”键，然后坐以待毙。根据您的互联网连接速度，这可能需要一点时间，因为您现在正在创建24个表，其中包含从1871年到2014年的非常详细的棒球统计数据，其中一些有超过160，000行。在我的情况下，大约需要8分钟才能完成。</p><p id="d7a0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，您可以在DatabaseSpy的在线数据库浏览器中点击“刷新”，然后浏览所有的表和其中包含的数据，以及Lahman数据库的<a class="ae jk" href="http://seanlahman.com/files/database/readme2014.txt" rel="noopener ugc nofollow" target="_blank">结构。而且你可以用这个数据库计算有趣的历史数据，做统计分析，应用其他常用于</a><a class="ae jk" href="https://en.wikipedia.org/wiki/Sabermetrics" rel="noopener ugc nofollow" target="_blank"> Sabermetrics </a>的工具，更好的了解玩家的素质。</p><p id="dc0e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">作为一个例子，我们将看看<a class="ae jk" href="http://www.baseball-reference.com/players/o/ortizda01.shtml" rel="noopener ugc nofollow" target="_blank">大卫·奥尔蒂斯</a>在他整个职业生涯中每一个击球手(AB)的本垒打百分比(HR)，并将它绘制成他年龄的函数。你会在“击球”表中找到一名球员的击球表现以及他的名字、出生日期等。，在“主”表中。在SQL中连接两个表并为David Ortiz选择数据很容易，然后我们可以简单地计算他的职业HR轨迹为HR/AB，并根据他在给定年份的年龄绘制该轨迹:</p><pre class="jn jo jp jq fd jz ka kb kc aw kd bi"><span id="9d56" class="ke kf hi ka b fi kg kh l ki kj">SELECT yearID-birthYear AS Age, HR/AB AS CareerHRTrajectory FROM Batting, `Master` WHERE Batting.playerID = `Master`.playerID AND nameLast='Ortiz' AND nameFirst='David' ORDER BY Age ASC</span></pre><p id="ef6d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦点击“Execute ”,该查询将被发送到云SQL实例，结果数据几乎立即以表格的形式返回。然后，您可以点击结果表视图中的“图表”按钮，以图表形式显示数据，并绘制其年龄范围内的职业HR轨迹:</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kk"><img src="../Images/91935fbb5d19a227dd970996d6b504a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tZ5EOK09XfMGcLOVvtFyOA.png"/></div></div></figure><p id="784c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">正如你所看到的，从<a class="ae jk" href="http://www.altova.com/databasespy.html" rel="noopener ugc nofollow" target="_blank"> Altova DatabaseSpy </a>或者从任何其他<a class="ae jk" href="http://www.altova.com/" rel="noopener ugc nofollow" target="_blank"> Altova </a>开发工具，包括<a class="ae jk" href="http://www.altova.com/xmlspy.html" rel="noopener ugc nofollow" target="_blank"> XMLSpy </a>、<a class="ae jk" href="http://www.altova.com/mapforce.html" rel="noopener ugc nofollow" target="_blank"> MapForce </a>、<a class="ae jk" href="http://www.altova.com/mobiletogether.html" rel="noopener ugc nofollow" target="_blank"> MobileTogether </a>、<a class="ae jk" href="http://www.altova.com/stylevision.html" rel="noopener ugc nofollow" target="_blank"> StyleVision </a>和<a class="ae jk" href="http://www.altova.com/umodel.html" rel="noopener ugc nofollow" target="_blank"> UModel </a>，连接和利用新的Google Cloud SQL实例非常容易。此外，您可以轻松利用来自<a class="ae jk" href="http://www.altova.com/mapforce/mapforce-server.html" rel="noopener ugc nofollow" target="_blank"> MapForce server </a>的云SQL实例进行数据集成和转换项目。</p><p id="afae" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在未来的博客文章中，我们将从移动应用程序连接到这个云SQL实例，并探索在Lahman baseball数据库的基础上构建一个方便的移动应用程序前端是多么容易。</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="8a7f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jl">原载于2016年1月6日</em><a class="ae jk" href="http://blog.altova.com/using-google-cloud-sql/" rel="noopener ugc nofollow" target="_blank"><em class="jl">blog.altova.com</em></a><em class="jl">。</em></p></div></div>    
</body>
</html>