<html>
<head>
<title>Migrating Sybase Tables to Google BigQuery using Cloud DataFusion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用云数据融合将Sybase表迁移到Google BigQuery</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/migrating-sybase-tables-to-google-bigquery-using-cloud-datafusion-41dae3042a35?source=collection_archive---------4-----------------------#2022-12-01">https://medium.com/google-cloud/migrating-sybase-tables-to-google-bigquery-using-cloud-datafusion-41dae3042a35?source=collection_archive---------4-----------------------#2022-12-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/c5d0cb7a9875a5fc5c4b4d83c4e02044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*fNaDs3vKeh2hxXOC-NOclw.jpeg"/></div></figure><p id="93cd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Sybase现在被称为SAP Adaptive Server Enterprise(ASE ),被认为是流行的、前瞻性的关系数据库管理系统之一。除了高可用性和数据安全性等其他特性之外，它主要得益于其事务处理速度。</p><p id="7eea" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在SAP收购Sybase之后，它的流行似乎注定要失败，因为SAP似乎给了它最喜欢的HANA数据库更多的推动力，让Sybase用户陷入困境。</p><p id="886e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从SAP发布的信息来看，Sybase似乎偏离了SAP未来产品路线图的关键组成部分。</p><p id="28cf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">通过云数据融合将Sybase表迁移到GCP BigQuery，企业可以轻松获得BigQuery带来的好处，如无服务器架构和可伸缩性。然后可以使用流行的商业智能工具，如Looker、Tableau和Data Studio，提供无缝的数据洞察。</p><p id="9e87" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">上下文:</strong></p><p id="1b2e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">今天，我们将看看如何使用Google Cloud提供的云数据融合数据集成服务将Sybase表迁移到GCP BigQuery。</p><p id="d908" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">先决条件:</strong></p><p id="2e7d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们在这里考虑，我们已经在GCP计算引擎linux实例上安装了一个Sybase数据库服务器。</p><p id="ee30" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">转到Sybase安装目录并检查服务器名称</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es jk"><img src="../Images/b5b980a3d82706eeaf9a0d6a0e2afaf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*-oZipUUet4TW32PzEHS1wQ.jpeg"/></div></figure><p id="5ad7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">通过运行以下命令设置环境:</p><p id="d1ec" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jp">。。/SYBASE.sh </em></p><p id="6428" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，切换到安装目录。在我的例子中,/opt/sap/ASE-16_0/install是运行文件路径，并在Linux中运行以下命令</p><p id="72da" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jp"> startserver -f RUN_TEST </em></p><p id="dcb8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">注意:(在这种情况下，在安装期间，我将服务器名指定为主服务器的TEST和备份服务器的TEST_BS)。</p><p id="c95f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">同样，也可以通过以下命令启动备份服务器</p><p id="4836" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jp"> startserver -f RUN_TEST_BS </em></p><p id="96ea" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">之后，运行以下两个命令来连接到Sybase服务器</p><p id="13b9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jp">未设置郎</em></p><p id="4a29" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jp"> isql64 -U sa -STEST </em></p><p id="220a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这将要求我们输入在Sybase安装过程中设置的密码。输入密码以连接到服务器。</p><p id="d533" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我有一个已经创建的员工表，我们可以查看如下</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es jq"><img src="../Images/c1e932c181f3e0ef17181a4bdb9b2b1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*lyevPWKn5haVvES_xRRlog.png"/></div><figcaption class="jr js et er es jt ju bd b be z dx translated">员工表描述</figcaption></figure><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es jv"><img src="../Images/07260289be5fdcced960277caa4b0b16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WxxN1RIF63Im01nouF2ENA.jpeg"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">雇员数据库表记录示例</figcaption></figure><p id="2bf4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">创建相应的BigQuery表模式，在BigQuery模式定义中使用适当的数据类型映射。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ka"><img src="../Images/16366a7b2feb5fbe8106a65a9a819233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i7WcoV4teFiu_OVB7kH97g.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">BigQuery表架构创建</figcaption></figure><p id="2298" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">作为创建数据融合管道的下一步，我们将为数据融合添加一个SYBASE JDBC驱动程序(假设我们已经创建了一个GCP数据融合实例)。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kb"><img src="../Images/9425faf9966524518aac2165b2a1eaeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xwkgoEeTGlMhPU2EMZBDRw.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">Sybase驱动程序上载</figcaption></figure><p id="3d75" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">数据库插件:</strong>为了建立连接，我们使用数据库作为源插件。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kc"><img src="../Images/56624ff25b156e2ec57b8d93a00dc069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MSO6XbjTP3w5gzUcg7LZRw.jpeg"/></div></div></figure><p id="785d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">数据库插件属性:</strong>我们现在需要在数据库插件中给出连接设置属性，这需要JDBC连接字符串、Sybase服务器凭证&amp;我们希望通过此管道导入的表的导入查询。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kd"><img src="../Images/f6a96c542ee00e3eed11bbae41ea597b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*82PcDdk89qtIgWe5tgCelQ.jpeg"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">Sybase数据库插件属性</figcaption></figure><p id="64ba" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> BigQuery插件:</strong>由于Sybase表迁移的目的地是BigQuery仓库，我们将从Sink菜单栏中选择BigQuery插件。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ke"><img src="../Images/5e0ffe98133548df2759ea9f2831b431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JwIq_OQKcP6VHOaElHl40Q.jpeg"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">BigQuery插件</figcaption></figure><p id="40a2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> BigQuery插件属性:</strong>在BigQuery插件属性中，我们需要指定项目ID，即我们要将表迁移到的数据集。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kf"><img src="../Images/f618e4453d0be8b30968e1ac1c1c9bbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z2o9IzFVACyuYqYlOLUmJw.jpeg"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">BigQuery插件属性</figcaption></figure><p id="5882" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从Sybase到DataFusion的最终管道如下所示</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kc"><img src="../Images/73395f03549d6a51eef346d0d55b704b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qe8SS1Z6HqeH7UHFBguwCA.jpeg"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">成功运行后的管道</figcaption></figure><p id="ba3c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在本文中，我们简要介绍了如何建立一个低代码管道来将Sybase数据库表迁移到无服务器且经济高效的GCP数据仓库BigQuery。</p></div></div>    
</body>
</html>