<html>
<head>
<title>Monitoring Kubernetes Clusters on GKE (Google Container Engine)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">监控GKE上的Kubernetes集群(谷歌容器引擎)</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/gke-monitoring-84170ea44833?source=collection_archive---------0-----------------------#2019-03-27">https://medium.com/google-cloud/gke-monitoring-84170ea44833?source=collection_archive---------0-----------------------#2019-03-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="fde3" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">Ctrl+Alt+Monitor:)</p></blockquote><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es jh"><img src="../Images/14ad54fe00971a24d733ab1b4a53376a.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*-l-0vq2eckdN3wuIDgK8WA.png"/></div></figure><h1 id="e0b1" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">关于本指南</h1><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es kn"><img src="../Images/6c2c48f24af8ebfd717798f36b34a523.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*-b3kOtx7aWDiWkNpEKkl_w.png"/></div></figure><h1 id="e905" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">1.介绍</h1><p id="2d37" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">Kubernetes生态系统包含许多日志记录和监控解决方案。这些工具解决了Kubernetes引擎堆栈中不同层的监控和日志记录问题。</p><ul class=""><li id="3784" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg lb lc ld le bi translated">GCP组件(计算)</li><li id="010c" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">Kubernetes对象(集群节点)</li><li id="7469" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">容器化应用程序(pod)</li><li id="c3d2" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">特定于应用程序的指标(在端口8081上运行Apache http服务器的pod)</li></ul><p id="0b58" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">本文档描述了其中的一些工具、它们所针对的堆栈层，以及实施的最佳实践，包括现场示例、快速入门和演示项目。</p><h1 id="6e1c" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">2.要做的任务</h1><p id="c612" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">为了在用于Kubernetes引擎的Stackdriver中实现日志记录和监控，我们建议执行以下任务:</p><h1 id="2d22" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">2.1监视器</h1><p id="5c5e" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">确定什么是重要的(指标、资源等。)并决定监视什么:</p><ul class=""><li id="2c66" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg lb lc ld le bi translated">没有被测量的，就不能被监控。收集尽可能多的合理信息(尽可能多的指标)非常重要。</li><li id="f5a2" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">确定服务水平指标和目标(SLIs和SLOs)有助于在系统可靠性的背景下构建监控讨论；系统用户关心的是什么。</li><li id="4b77" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">避免监控一切的诱惑。监控过多和监控过少一样危险。</li><li id="aced" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">监控刚刚好。不存在的信息无法做出好的决策。做出“数据驱动的决策”。</li></ul><h1 id="90fb" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">2.2日志</h1><p id="663a" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">规划一个与部署架构和组织职责相匹配的日志架构</p><ul class=""><li id="01f7" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg lb lc ld le bi translated">将所有Kubernetes引擎集群指标聚合到一个Stackdriver项目中？</li><li id="12ae" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">需要监控哪些额外的指标？主要关注点是什么？</li></ul><h1 id="7208" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">2.3审查</h1><ul class=""><li id="f49e" class="kw kx hi il b im ko iq kp kq lk ks ll ku lm jg lb lc ld le bi translated">审查GCP计划和现有的Kubernetes发动机集群；</li><li id="8efe" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">确保为每个集群启用日志记录和监控</li></ul><h1 id="dceb" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">2.4实施</h1><ul class=""><li id="5e79" class="kw kx hi il b im ko iq kp kq lk ks ll ku lm jg lb lc ld le bi translated">实施监控</li></ul><h1 id="6b84" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">3.什么？又是怎么做到的？</h1><p id="ef3e" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">要扩展应用程序并提供可靠的服务，您需要了解应用程序在部署时的行为。您可以通过检查容器、pod、服务和整个集群的特征来检查Kubernetes集群中的应用程序性能。Kubernetes提供了每个级别的应用程序资源使用的详细信息。这些信息允许您评估应用程序的性能，以及可以消除哪些瓶颈以提高整体性能。</p><h1 id="8661" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">3.1监控什么</h1><p id="5ae4" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">这可能是规划云工作负载运营中最困难的问题，更不用说Kubernetes引擎了。也就是说，确定监控什么对于Kubernetes引擎工作负载在云中的成功至关重要。下表对要监控的最少一组重要属性提出了一些建议。虽然组织的结构各不相同，但该表将问题简化为两个方面:应用程序开发人员/操作员和Kubernetes引擎集群管理员。本文的其余部分将集中在这两个方面。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es lo"><img src="../Images/63428535b512cc106702d05748303d94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*kND5mEHIhAxiH1QQqHUugA.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">前景</figcaption></figure><h1 id="3eaa" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">3.2如何监控？</h1><p id="6098" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">理想情况下，正在收集的指标和正在显示的信息是以方便和简洁的方式完成的。Stackdriver提供了Kubernetes引擎集群和工作负载的度量、日志和跟踪的单一控制台视图。</p><p id="20fa" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">下图从较高的层面说明了Kubernetes引擎和Stackdriver之间的关系。日志、指标和其他有用的信息从Kubernetes引擎集群发送到Stackdriver。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es lt"><img src="../Images/bbebf0de7cf5a775c3cdef05992f4bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*93qfuzB-lPAbdnZxSxzYnA.png"/></div></figure><h1 id="09ff" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">3.3监控工具</h1><p id="b6c9" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">本文档中讨论的工具可以在下表中找到，该表突出显示了该工具的范围。每个工具的详细描述如下。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es lu"><img src="../Images/04f72c05ba4be53c22700c46758cea79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*2p9i9Lm4RW10ZoZsUHNWrA.png"/></div></figure><h1 id="b42b" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">堆栈驱动程序</h1><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es lv"><img src="../Images/42b43928b05f4d8b46b1a4145e99c669.png" data-original-src="https://miro.medium.com/v2/resize:fit:364/0*SV-WebsKXEFRPUG2"/></div></figure><p id="b5ce" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated"><a class="ae ln" href="https://cloud.google.com/monitoring/kubernetes-engine/" rel="noopener ugc nofollow" target="_blank"> Stackdriver </a>汇总来自基础设施的指标、日志和事件，为开发人员和运营商提供一组丰富的可观察信号，以加快根本原因分析并缩短解决问题的平均时间(MTTR)。Stackdriver不需要广泛的集成或多个“窗格”，也不会将开发人员局限于使用特定的云提供商。</p><h1 id="9a55" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">普罗米修斯</h1><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es lw"><img src="../Images/5d276391c9b694fe3bf7a9527a562d39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AX6qD7dmQlcSzJ5K"/></div></div></figure><p id="34b7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated"><a class="ae ln" href="https://cloud.google.com/monitoring/kubernetes-engine/prometheus" rel="noopener ugc nofollow" target="_blank">云原生计算基金会项目Prometheus </a>，是一个系统和服务监控系统。它以给定的时间间隔从配置的目标收集度量，评估规则表达式，显示结果，并在观察到某个条件为真时触发预警。</p><h1 id="98bc" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">3 . 3 . 3 Kube-状态-度量</h1><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es mb"><img src="../Images/61a1a1951b50e9c9077249b650a80af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/0*APINl37AtyPpLKZT"/></div></figure><p id="acb5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">kube-state-metrics 是一个简单的服务，它监听Kubernetes API服务器并生成关于对象状态的度量。</p><h1 id="71c6" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">公开普查</h1><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es mc"><img src="../Images/16fe88e911109b0aafefe1e00247c6cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/0*4IkYZ_RrDzpqGh1o"/></div></figure><p id="ac22" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">OpenCensus是从应用程序服务中收集指标和分布式跟踪的单一分布库。OpenCensus通过跟踪请求在服务中的传播来提供可观察性，并捕获关键的时间序列指标。指标可以导出到许多后端，包括Stackdriver。</p><h1 id="fb54" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">3.4选择正确的工具</h1><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es md"><img src="../Images/1dafb2935ae9316cd5e38a05a4282a17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*06g1PrCujfstNaS_6cieWQ.png"/></div></figure><h1 id="c1a0" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">3.5幕后(指标和聚合组件)</h1><p id="dc85" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">Kubernetes引擎集群中的每个<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fcloud.google.com%2Fkubernetes-engine%2Fdocs%2Fconcepts%2Fcluster-architecture%23nodes" rel="noopener ugc nofollow" target="_blank">节点</a>运行一个名为<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fkubernetes.io%2Fdocs%2Freference%2Fcommand-line-tools-reference%2Fkubelet%2F" rel="noopener ugc nofollow" target="_blank"> Kubelet </a>的进程，这是该节点上容器编排的主要进程。Kubelet流程中嵌入了一个名为cAdvisor的机制。通过cAdvisor，每个Kubelet向集群中的外部消费者提供一个信息汇总。</p><p id="3317" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">主要消费者是Heapster，它自动部署在每个Kubernetes引擎集群的可用节点上的容器中。Heapster查询集群主服务器以识别集群的所有节点，然后定期轮询每个节点的Kubelet以从摘要API收集摘要信息。</p><p id="6b6c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">当prometheus安装在Kubernetes引擎群集中时，prometheus-to-sd-exporter组件会以Prometheus格式抓取任何端点的内容，并将其转发给Stackdriver。这个容器与FluentD和Event Exporter pods位于同一位置，因为正是这个组件负责将位实际移动到Stackdriver。</p><p id="ae6a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">这些资源由metrics-server组件收集。度量-服务器公开主度量API。discovery summarizer使主指标API对外部客户端可用。Heapster成为该信息的集群级存储库。集群中的其他服务可以查询Heapster，而不必单独轮询每个集群节点的Kubelet。比如说。Stackdrover向Heapster查询实时性能指标。水平窗格自动缩放器还查询Heapster以确定何时缩放窗格。</p><p id="f0fa" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">* <strong class="il hj"> <em class="ik">从Kubernetes 1.8开始，在Kubernetes中可以通过Metrics API获得资源使用度量，比如容器CPU和内存使用。</em> </strong></p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es me"><img src="../Images/d5d95465d9716445981b7456fb1f2027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2HseDYXmRUr2xFtk"/></div></div></figure><h1 id="40c3" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">4.日志记录和监控的分步指南</h1><p id="f106" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">在部署新的Kubernetes引擎集群时，默认情况下启用Stackdriver日志记录和监控。应该使用Stackdriver仪表板来可视化在一个或多个Kubernetes引擎集群中生成的指标。</p><h1 id="fc21" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">4.1先决条件</h1><p id="e56e" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">用户必须是包含Kubernetes引擎集群的项目的<strong class="il hj">所有者</strong>(出于IAM/资源管理原因)。</p><p id="f4a3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">必须启用以下API:</p><ul class=""><li id="b715" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg lb lc ld le bi translated">堆栈驱动程序日志API</li><li id="e05e" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">计算引擎API</li><li id="5be8" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">堆栈驱动程序监控API</li><li id="77b4" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">Kubernetes引擎API</li><li id="dc7c" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">堆栈驱动程序跟踪API</li><li id="dbc4" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">发布订阅API</li></ul><p id="a161" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">必须在部署主机上安装以下命令行工具(可以使用云shell和/或任何其他主机)</p><ul class=""><li id="794a" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg lb lc ld le bi translated">gcloud</li><li id="b215" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">饭桶</li><li id="2c4a" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">库贝特尔</li><li id="025f" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg lb lc ld le bi translated">地形&gt; = 0.11.7</li></ul><h1 id="2dd0" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">4.2预期结果</h1><p id="cf91" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">下表总结了执行后续部分中的步骤的结果。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es mf"><img src="../Images/5db5ff897cb3ae0cc2097f8effc79f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*EY0uXKpY6pqDzTlVqyBuag.png"/></div></figure><p id="8644" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated"><a class="ae ln" href="https://docs.google.com/document/d/1LwjNQ7EYVhryi-DcuMcpvMPvfXxW5qgARbXgOuuo1ow/edit#heading=h.uzb86fews50j" rel="noopener ugc nofollow" target="_blank"> 4.3部署集群</a> <br/> <a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1Ew_vwvo_Jc1jrWFBaRphhZ4ad4VSlXMXWaQ3O33utzg%2Fedit%23heading%3Dh.8sv5qcuv7kmg" rel="noopener ugc nofollow" target="_blank"> 4.4配置最小监控</a> <br/> <a class="ae ln" href="https://docs.google.com/document/d/1LwjNQ7EYVhryi-DcuMcpvMPvfXxW5qgARbXgOuuo1ow/edit#heading=h.vqxsh8ojhvi2" rel="noopener ugc nofollow" target="_blank"> 4.5开放普查和分布式跟踪</a></p><h1 id="0da0" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">4.3部署集群</h1><p id="a8a2" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated"><strong class="il hj">注意:</strong>强烈建议在Google Cloud控制台中执行以下操作。<br/> <strong class="il hj">注意:</strong>对于这个演示，您可以使用一个现有的Kubernetes引擎集群。然而，通过实例化一个新的Kubernetes引擎集群，根据<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fgithub.com%2FGoogleCloudPlatform%2Fgke-tracing-demo" rel="noopener ugc nofollow" target="_blank"> gke-tracing-demo </a>示例，您将能够观察到更有趣的行为。</p><ol class=""><li id="c066" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg mg lc ld le bi translated">部署Kubernetes引擎集群时，默认情况下启用日志记录和监控。但是，如果Kubernetes引擎集群没有部署日志记录和监视功能，则可以在事后使用以下命令启用这两种功能:</li></ol><blockquote class="if ig ih"><p id="0264" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$gcloud beta container clusters更新[CLUSTER _ NAME]\-监控-服务monitoring.googleapis.com \-记录-服务logging.googleapis.com</p></blockquote><p id="1bd3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">2.验证日志记录和监视是否已启用:<br/>*可以通过访问集群的集群详细信息页面来验证集群日志记录和监视，该页面应类似于以下内容:</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es mh"><img src="../Images/09dc0a915feee02b89354bc036995a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/0*x6plprPCCfOewA-3"/></div></figure><p id="dd06" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">*或者，可以使用gcloud命令来验证日志记录和监控:</p><blockquote class="if ig ih"><p id="55a0" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$ g cloud container clusters describe-ZONE[ZONE][CLUSTER]| grep " monitoring service \ | logging service "</p></blockquote><p id="db7d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">输出如下:</p><blockquote class="if ig ih"><p id="cab9" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">logging service:logging . Google APIs . commonitoringservice:monitoring.googleapis.com</p></blockquote><h1 id="c580" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">4.4配置最低监控</h1><p id="fb44" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">无论是按照第<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1Ew_vwvo_Jc1jrWFBaRphhZ4ad4VSlXMXWaQ3O33utzg%2Fedit%23heading%3Dh.uzb86fews50j" rel="noopener ugc nofollow" target="_blank"> 4.3节</a>部署新集群还是使用现有的Kubernetes引擎集群，都需要安装以下指标组件。</p><h1 id="4637" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">安装监控组件</h1><p id="ba4c" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">以下步骤将把Prometheus服务器、Prometheus Stackdriver sidecar和kube-state-metrics部署到Kubernetes引擎集群中。<br/> <strong class="il hj">注意:</strong>这个部署将只与遗留Stackdriver监控一起工作。在stack driver Kubernetes Monitoring的测试版中，它不会像预期的那样运行。<br/> <strong class="il hj">注意:</strong>这些步骤不包含在任何SLA或弃用策略中。</p><p id="92c2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">*连接到Kubernetes引擎集群。</p><p id="090c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">*确保您的用户拥有部署Prometheus的适当权限。</p><blockquote class="if ig ih"><p id="3dee" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$ ku bectl create clusterrolebinding cluster-admin-binding—cluster role = cluster-admin—user = $(g cloud info | grep Account | cut-d '['-F2 | cut-d ']'-f1)</p></blockquote><p id="d884" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">*克隆stack-driver-Prometheus-sidecar项目。</p><blockquote class="if ig ih"><p id="2c60" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$ git clone<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fgithub.com%2FStackdriver%2Fstackdriver-prometheus-sidecar.git" rel="noopener ugc nofollow" target="_blank">https://github . com/stack driver/stack driver-Prometheus-sidecar . git</a></p></blockquote><p id="be35" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">*导出以下变量。</p><blockquote class="if ig ih"><p id="f59f" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$export GCP项目=…export GCP地区=…export KUBE集群=…</p></blockquote><p id="5d55" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">*部署普罗米修斯服务器和kube-state-metrics。</p><blockquote class="if ig ih"><p id="949a" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$ bash stack driver-Prometheus-sidecar/kube/full/deploy . sh</p></blockquote><h1 id="cc7d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">4.4.2观察堆栈驱动仪表板</h1><ol class=""><li id="8361" class="kw kx hi il b im ko iq kp kq lk ks ll ku lm jg mg lc ld le bi translated">创建一个以应用为中心的控制面板，并添加第5.1节中定义的图表。</li><li id="4c75" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg mg lc ld le bi translated">创建一个以Kubernetes引擎集群为中心的仪表板，并添加第5.2节中定义的图表。</li><li id="1d84" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg mg lc ld le bi translated">如果遵循了4.3节中的步骤，那么trace-demo应用程序就已经部署好了。如果trace-demo应用程序要在现有集群上运行，可以使用以下命令:</li></ol><blockquote class="if ig ih"><p id="8a08" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$ ku bectl apply-f<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fraw.githubusercontent.com%2FGoogleCloudPlatform%2Fgke-tracing-demo%2Fmaster%2Fterraform%2Ftracing-demo-deployment.yaml" rel="noopener ugc nofollow" target="_blank">https://raw . githubusercontent . com/Google cloud platform/gke-tracing-demo/master/terraform/tracing-demo-deployment . YAML</a></p></blockquote><p id="a4be" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">4.需要注意两点:</p><ol class=""><li id="7ce1" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg mg lc ld le bi translated">只有在为容器配置了CPU资源限制的情况下，水平窗格自动缩放才会起作用。</li><li id="8d30" class="kw kx hi il b im lf iq lg kq lh ks li ku lj jg mg lc ld le bi translated">如果定义了CPU资源请求，kube-state-metrics将收集pod CPU利用率指标。</li></ol><p id="cced" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">如果未定义默认CPU资源请求和限制默认值，以下命令将为当前命名空间设置它们:</p><blockquote class="if ig ih"><p id="7798" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$ echo " API version:v1<br/>kind:limit range<br/>metadata:<br/>name:limits<br/>spec:<br/>limits:<br/>-default:<br/>CPU:100m<br/>default request:<br/>CPU:100m<br/>type:Container " | kubectl apply-f-</p></blockquote><p id="5df9" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">5.删除现有的跟踪演示窗格，以应用新的默认CPU限制。</p><blockquote class="if ig ih"><p id="4a3e" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$ ku bectl delete pods-l app = tracing-demo</p></blockquote><p id="f653" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">6.将trace-demo应用程序配置为自动缩放。</p><blockquote class="if ig ih"><p id="5ece" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$kubectl自动缩放部署跟踪-演示\ — cpu百分比=50 \ —最小值=1 \ —最大值=10</p></blockquote><p id="92b2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">7.测试负载并监控应用程序:<br/>*通过运行一个带有循环的容器来测试应用程序的负载，该循环将对webapp进行HTTP调用。</p><blockquote class="if ig ih"><p id="1287" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$ ku bectl run-I—tty load-generator—image = busybox/bin/sh—requests CPU = 50m<em class="hi">在命令提示符下按enter键</em>/# while true；do wget-q-O-<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=http%3A%2F%2Ftracing-demo.default.svc.cluster.local%3B" rel="noopener ugc nofollow" target="_blank">http://tracing-demo . default . SVC . cluster . local；</a>完成&gt;/开发/空</p></blockquote><p id="9c52" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">几分钟后，一些有趣的数据出现在下面的图表中:</p><ul class=""><li id="b6b1" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg lb lc ld le bi translated">Pod运行总数</li></ul><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mi"><img src="../Images/3dfd471473b88e659174a7d7bf61b9ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Zlh5u-ZTFy7Vk9V4"/></div></div></figure><ul class=""><li id="fce3" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg lb lc ld le bi translated">Pod的待定合计</li></ul><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mi"><img src="../Images/1b591c569e10e65faf05dfbf24d41728.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5LptEN6EKIQN0nLk"/></div></div></figure><ul class=""><li id="4b66" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg lb lc ld le bi translated">容器CPU利用率</li></ul><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mi"><img src="../Images/2a863e6f130bbd089f589b4db7a7009a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O482v_uVzR-njENf"/></div></div></figure><ul class=""><li id="b380" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg lb lc ld le bi translated">Pod自动缩放当前与所需副本</li></ul><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mi"><img src="../Images/0fa0ce837fe337a896b5044c51849b73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H_ZgFfcRa09niMUO"/></div></div></figure><p id="8ca0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated"><strong class="il hj">注:</strong>如果遵循了第4.3节中的步骤，显然存在问题。每个容器的CPU利用率徘徊在100%左右，尽管已经指定了50%的目标。autoscaler似乎正在尝试扩展，但下一个复制的pod停留在挂起状态。</p><p id="59ec" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">当仅成功部署一个副本时，Pod自动缩放当前与所需副本图表显示两个活动副本，这可能会令人困惑。此图反映了自动缩放器的当前状态，其中有一个成功的复制副本和一个挂起的复制副本。</p><p id="5170" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">8.在步骤5.2.4中创建的基于日志的指标会生成一个图表，说明由于默认命名空间中的CPU资源不足，平均有一个pod调度失败。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es mj"><img src="../Images/575ac0ddd185641fdc7af6763bd5d13b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*4shOANlw88ku0RZHff0WJQ.png"/></div></figure><p id="4e18" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">9.这是从集群的stack driver“Kubernetes Engine Cluster Operations”日志中派生出来的，应该至少有一个类似于以下内容的条目:</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es mk"><img src="../Images/bfa25fea6f5374dba530835add991286.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/0*CXgOH26KHejonJ5c"/></div></figure><p id="3d75" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">这表明挂起的pod(注意与上图相比的pod名称)由于CPU不足而停滞。原因是4.3节中的步骤部署了具有单个节点且没有节点自动伸缩的集群。</p><p id="fc3b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">10.创建一个额外的节点池，以允许trace-demo pod进行扩展并减轻负载。</p><blockquote class="if ig ih"><p id="e86c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">$ g cloud container node-pools create scaling-pool \-cluster tracing-demo-space \-scopes = default \-enable-auto scaling \-max-nodes = 6 \-min-nodes = 1 \-machine-type = n1-standard-2 \-ZONE = ZONE</p></blockquote><h1 id="b0ca" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">4.5开放式普查和分布式追踪</h1><p id="f665" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">要通过应用程序观察跟踪，必须对应用程序进行适当的检测。有许多针对主要编程语言的SDK来支持这种能力。本节重点介绍用于Python的OpenCensus SDK。gke-tracing-demo应用程序是用<a class="ae ln" href="https://census-instrumentation.github.io/opencensus-python/trace/usage.html?highlight=flask" rel="noopener ugc nofollow" target="_blank"> Flask </a>框架编写的。OpenCensus提供了与<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fcensus-instrumentation.github.io%2Fopencensus-python%2Ftrace%2Fusage.html%3Fhighlight%3Dflask" rel="noopener ugc nofollow" target="_blank"> Flask </a>的集成，提供了一种简单的方法来测量应用程序中的延迟。</p><p id="d56d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">gke-tracing-demo应用程序已经按照第4.4.2节中的步骤进行了部署。简单的HTTP GET请求是针对应用程序的端点发出的，生成一个轻CPU负载和一个响应。该应用程序有更多的功能值得探索。</p><p id="c693" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">下图说明了应用程序的体系结构。值得注意的是，除了返回HTTP响应之外，消息还被放在第三个服务(Cloud pub/sub) Google Cloud PubSub中。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es ml"><img src="../Images/f6a06f0b314373417b32dd64b3517d69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c7Ef6aLfH7sxmH2b"/></div></div></figure><p id="8cd6" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated"><strong class="il hj">注意:</strong> <a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fistio.io%2F" rel="noopener ugc nofollow" target="_blank"> Istio </a>是Kubernetes引擎的一个强大的附加组件，提供类似的跟踪分析功能，包括<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fistio.io%2F" rel="noopener ugc nofollow" target="_blank">图形</a>。Istio提供的功能超出了本文档的范围。根据所需的特性，Istio值得进一步研究。</p><h1 id="39cf" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">调查痕迹</h1><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es jh"><img src="../Images/9eb87be888da6ad2de2079d7ade5c0ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*aOMmDcbX3si2fwOE3xjg4A.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">安慰</figcaption></figure><p id="36ba" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">*在Google Cloud控制台中，导航到Stackdriver Tracing中的“跟踪列表”。</p><p id="6135" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">*调查该图，很明显该应用程序已经收到了相当大的流量(来自第<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1Ew_vwvo_Jc1jrWFBaRphhZ4ad4VSlXMXWaQ3O33utzg%2Fedit%23heading%3Dh.dzimaei9ox8d" rel="noopener ugc nofollow" target="_blank"> 5.3.2 </a>节中执行的负载测试)。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mm"><img src="../Images/09d510828e0dffbcdccebddd6f022616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g6vjwCU0aJatgP9V"/></div></div></figure><p id="3a1e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">*选择任何一个绘图点将显示详细的轨迹时间线。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es mn"><img src="../Images/41f374f098dd8c61a804c8cf5b193d6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/0*MSw6FLzjwyJAcszB"/></div></figure><p id="d28a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">顶部时间轴表示根跨度；针对Kubernetes服务的URL的HTTP GET请求。底部时间轴显示子跨度；将消息发布到发布订阅主题所花费的时间。该信息由以下代码生成:</p><blockquote class="if ig ih"><p id="b542" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">@ app . route('/')def template _ test():[…]<br/>tracer = execution _ Context . get _ open census _ tracer()<br/># Trace Pub/Sub调用使用上下文管理器<strong class="il hj">with tracer . start _ span()as Pub Sub _ span:Pub Sub _ span . name = '[{ }]{ } '。格式('发布'，'发布/订阅')</strong> […] […][…]</p></blockquote><p id="b3aa" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">除了正在定义的子跨度的名称之外，OpenCensus上下文管理器还负责测量执行时间并向Stackdriver报告。</p><h1 id="2f44" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.堆栈驱动程序监控图表</h1><p id="5402" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">*遥测数据以图形/图表等形式显示在SD仪表板的SD中..</p><h1 id="c2b6" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.1以工作负载为中心的控制面板</h1><p id="bfe9" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">鉴于可能会绘制大量数据，建议将图表设置为<a class="ae ln" href="https://www.cloudconnect.goog/external-link.jspa?url=https%3A%2F%2Fcloud.google.com%2Fmonitoring%2Fcharts%2Fchart-view-options%23using-outlier-mode" rel="noopener ugc nofollow" target="_blank">“异常值”模式</a>。</p><h1 id="0a0b" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.1.1容器的CPU利用率</h1><blockquote class="if ig ih"><p id="d1be" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes引擎容器</p><p id="4e1a" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">指标:</strong> CPU利用率</p><p id="cb0b" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">过滤:</strong>用户元数据标签(如app)</p><p id="0135" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>表示</p><p id="5ee6" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>的意思</p></blockquote><h1 id="9d13" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5 . 1 . 2 pod的内存使用情况</h1><blockquote class="if ig ih"><p id="65be" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes引擎容器</p><p id="b405" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">度量:</strong>内存使用情况</p><p id="243c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">过滤器:</strong>用户元数据标签(如app)</p><p id="433b" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>表示</p><p id="3df4" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><h1 id="7d9d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">容器重启总数</h1><blockquote class="if ig ih"><p id="a944" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes容器</p><p id="5174" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">指标:</strong>kube _ pod _ container _ status _ restarts _ total</p><p id="7e05" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">分组依据:</strong>容器</p><p id="1e1c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">过滤器:</strong>名称空间(如默认)</p><p id="97c2" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">对准器:</strong>速率</p><p id="f305" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">还原剂:</strong>总和</p></blockquote><h1 id="ffb5" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.1.4 Kubernetes pod故障</h1><blockquote class="if ig ih"><p id="e04e" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes容器</p><p id="472a" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">指标:</strong> kube_pod_status_phase</p><p id="1170" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">过滤器:阶段=失败，命名空间(例如，默认)</p><p id="4558" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>的意思是</p><p id="25a9" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><h1 id="5391" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.1.5 Kubernetes吊舱运行</h1><blockquote class="if ig ih"><p id="6158" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes容器</p><p id="c4b1" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">指标:</strong>kube _ pod _ container _ status _ running</p><p id="e09c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">过滤器:名称空间(例如，默认)</p><p id="5a7b" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>表示</p><p id="d430" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><h1 id="3ded" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.1.6 Kubernetes豆荚待定</h1><blockquote class="if ig ih"><p id="9cb1" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes容器</p><p id="d335" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">指标: kube_pod_status_phase</p><p id="e024" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">过滤器:阶段=待定，名称空间(例如，默认)</p><p id="6812" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>的意思是</p><p id="6981" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><h1 id="3937" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.1.7 Pod自动缩放电流与所需副本</h1><p id="0e96" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">指标1</p><blockquote class="if ig ih"><p id="c0c2" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes容器</p><p id="3e1f" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">指标:</strong>kube _ HPA _ status _ current _ replicas</p><p id="1d35" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">过滤器:名称空间(例如，默认)</p><p id="b558" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">分组依据:</strong> hpa</p><p id="f462" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>的意思是</p><p id="fbad" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><p id="61c4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">指标2</p><blockquote class="if ig ih"><p id="c26c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes容器</p><p id="7c24" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">指标:</strong>kube _ HPA _ status _ desired _ replicas</p><p id="1057" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">过滤器:</strong>命名空间(如默认)</p><p id="50b6" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">分组依据:</strong> hpa</p><p id="7666" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>表示</p><p id="e426" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><h1 id="da30" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.2 Kubernetes引擎集群中心仪表板</h1><p id="5851" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">仪表板提供集群中Kubernetes资源的状态信息以及可能发生的任何错误的信息。</p><h1 id="989a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.2.1按节点划分的CPU利用率</h1><blockquote class="if ig ih"><p id="9db8" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> GCE虚拟机实例</p><p id="8359" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">度量:</strong> CPU利用率</p><p id="bf11" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">分组依据:</strong>实例名称</p><p id="185e" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>表示</p><p id="8ab9" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><h1 id="282d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.2.2按节点划分的内存利用率</h1><blockquote class="if ig ih"><p id="5f4a" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes引擎容器</p><p id="0d7c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">度量:</strong>内存利用率</p><p id="ed29" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">分组依据:</strong>实例标识</p><p id="dd74" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>的意思是</p><p id="8a7d" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><h1 id="b5de" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5 . 2 . 3 Kubernetes pod运行与集群容量</h1><p id="d9da" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">指标1</p><blockquote class="if ig ih"><p id="7296" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes容器</p><p id="40ca" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">指标:</strong> kube_pod_status_phase</p><p id="65bd" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">过滤器:阶段=运行</p><p id="09d1" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">分组依据:</strong>集群名称</p><p id="8e97" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>的意思是</p><p id="f9c2" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><p id="9c79" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">指标2</p><blockquote class="if ig ih"><p id="540e" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> Kubernetes容器</p><p id="9c30" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">指标:</strong>kube _ node _ status _ capacity _ pods</p><p id="29a4" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">分组依据:</strong>聚类名称</p><p id="74af" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">校准器:</strong>表示</p><p id="389a" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><h1 id="bada" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.2.4基于日志的指标示例—失败的Pod调度</h1><h2 id="0577" class="mo jq hi bd jr mp mq mr jv ms mt mu jz kq mv mw kd ks mx my kh ku mz na kl nb bi translated"><em class="nc">创建基于日志的指标<br/> </em> Stackdriver提供了一种基于生成的日志条目数量来定义指标的机制。</h2><p id="22d9" class="pw-post-body-paragraph ii ij hi il b im ko io ip iq kp is it kq kr iw ix ks kt ja jb ku kv je jf jg hb bi translated">以下示例定义了一个指标，该指标将显示日志条目的计数，这些日志条目表明一个pod由于资源不足而无法安排。</p><ol class=""><li id="43b3" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg mg lc ld le bi translated">在Google Cloud控制台中，导航至“基于日志的指标”</li></ol><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es nd"><img src="../Images/9f679920ee35058df997b7ee08c937d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*03Nh4vFYx24h10UgGZ4bkg.png"/></div></figure><p id="b06f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">2.单击“创建指标”。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es ne"><img src="../Images/f1ce255011cc649c81161540435fc972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*RfsqqgSI3XNUvWLDBZp_pA.png"/></div></figure><p id="9aba" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">3.在“按标签或文本搜索筛选”字段的右侧，单击下拉箭头并选择“转换为高级筛选”。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es nf"><img src="../Images/5e7fa9901bd5e228877c1a8646206bfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*r5sadt56KG3Yhklb05M5aA.png"/></div></figure><p id="58bf" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">将以下标签过滤器粘贴到高级过滤器文本区域。</p><blockquote class="if ig ih"><p id="ce55" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">resource.type="gke_cluster "</p><p id="7e02" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">jsonpayload . reason = " failed scheduling "</p><p id="a478" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">jsonpayload . involvedobject . kind = " Pod "</p><p id="36e6" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">jsonPayload.message:(“不足”或“不可用”)</p></blockquote><p id="4ce2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">过滤区域应如下所示:</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es ng"><img src="../Images/405a6089f859b0dfea0d51c6f5aa2f4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*mBpw6YT7qu_242kGGfEotA.png"/></div></figure><ol class=""><li id="61d6" class="kw kx hi il b im in iq ir kq ky ks kz ku la jg mg lc ld le bi translated">在度量编辑器中，按如下方式配置度量:</li></ol><blockquote class="if ig ih"><p id="38f7" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">名称:pod _失败_计划</p></blockquote><p id="3d45" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">标签1</p><blockquote class="if ig ih"><p id="73a5" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">名称:项目标识</p><p id="1846" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">标签类型:</strong>字符串</p><p id="7571" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">字段名称:resource.labels.project_id</p></blockquote><p id="1d62" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">标签2</p><blockquote class="if ig ih"><p id="6bed" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">名称:命名空间</p><p id="91fc" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">标签类型:</strong>字符串</p><p id="2fce" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">字段名:jsonpayload . involvedobject . namespace</p></blockquote><p id="7433" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">标签3</p><blockquote class="if ig ih"><p id="6a50" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">名称:pod_name</p><p id="84f7" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">标签类型:</strong>字符串</p><p id="d49d" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">字段名:jsonpayload . involvedobject . name</p></blockquote><p id="91c2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">标签4</p><blockquote class="if ig ih"><p id="89e4" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">名称:原因</p><p id="c510" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">标签类型:</strong>字符串</p><p id="2f77" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">字段名:jsonPayload.message</p><p id="9cdd" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">提取正则表达式::\W(。*)\.</p><p id="d3a0" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><leave empty="">单位:<br/>类型:计数器</leave></p></blockquote><h2 id="25c5" class="mo jq hi bd jr mp mq mr jv ms mt mu jz kq mv mw kd ks mx my kh ku mz na kl nb bi translated"><em class="nc"> Pod调度失败(图表)<br/> </em>添加一个具有以下属性的图表:</h2><blockquote class="if ig ih"><p id="e515" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">资源类型:</strong> &lt;留空&gt;</p><p id="8a62" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">度量:</strong>日志记录/用户/pod_failed_schedule</p><p id="e197" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">分组依据</strong></p><p id="6d6a" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">命名空间</p><p id="1ca6" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">理由</p><p id="3b1c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">对准器:</strong>计数</p><p id="c332" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">减速器:</strong>总和</p></blockquote><p id="d8db" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi">—</p><p id="ded0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it kq iv iw ix ks iz ja jb ku jd je jf jg hb bi translated">作者:<a class="ae ln" href="https://www.linkedin.com/in/arielpe/" rel="noopener ugc nofollow" target="_blank">阿里尔·佩雷茨</a>，<a class="ae ln" href="https://www.linkedin.com/in/kenneth-evensen-k6n/" rel="noopener ugc nofollow" target="_blank">肯·埃文森</a></p></div></div>    
</body>
</html>