<html>
<head>
<title>R Functions Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">r功能框架</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/r-functions-framework-fba630e820c2?source=collection_archive---------1-----------------------#2020-07-27">https://medium.com/google-cloud/r-functions-framework-fba630e820c2?source=collection_archive---------1-----------------------#2020-07-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4c84105d396f28de73efd4570e44c347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uj5FJosqoFeBFdXQbMnapQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">R Logo +云跑</figcaption></figure><p id="5462" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">🅡是一种编程语言和环境，通常用于统计计算、数据分析和科学研究。</p><p id="b081" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="js"> R函数框架</em>允许你编写可移植的R函数，可以很容易地部署到Cloud Run。</p><p id="0f4b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这篇博文中，我们将介绍如何部署一个R服务到Cloud Run！</p><h2 id="2f33" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jf ke kf kg jj kh ki kj jn kk kl km kn bi translated">安装R</h2><p id="0570" class="pw-post-body-paragraph iu iv hi iw b ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn ks jp jq jr hb bi translated">在<a class="ae kt" href="https://cloud.r-project.org/" rel="noopener ugc nofollow" target="_blank">https://cloud.r-project.org/</a>为您的操作系统安装预编译的R二进制发行版。</p><p id="de70" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将安装R语言和<code class="du ku kv kw kx b">rscript</code> CLI。</p><h2 id="6656" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jf ke kf kg jj kh ki kj jn kk kl km kn bi translated">在VS代码中安装R扩展</h2><p id="1591" class="pw-post-body-paragraph iu iv hi iw b ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn ks jp jq jr hb bi translated">为了便于在我们的IDE中对R进行本地测试，请从VS Marketplace安装R扩展:</p><div class="ky kz ez fb la lb"><a href="https://marketplace.visualstudio.com/items?itemName=Ikuyadeu.r" rel="noopener  ugc nofollow" target="_blank"><div class="lc ab dw"><div class="ld ab le cl cj lf"><h2 class="bd hj fi z dy lg ea eb lh ed ef hh bi translated">R - Visual Studio市场</h2><div class="li l"><h3 class="bd b fi z dy lg ea eb lh ed ef dx translated">完整的文档在Windows的Wiki页面上，如果r.rterm.windows为空，那么到R.exe的路径将在…</h3></div><div class="lj l"><p class="bd b fp z dy lg ea eb lh ed ef dx translated">marketplace.visualstudio.com</p></div></div><div class="lk l"><div class="ll l lm ln lo lk lp io lb"/></div></div></a></div><h2 id="0319" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jf ke kf kg jj kh ki kj jn kk kl km kn bi translated">本地测试</h2><p id="d417" class="pw-post-body-paragraph iu iv hi iw b ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn ks jp jq jr hb bi translated">打开VS代码命令面板(<em class="js"> ⌘⇧P </em>)，键入:</p><p id="c06a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><code class="du ku kv kw kx b">R: Run Command in Terminal</code></p><p id="25b1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将启动一个交互式会话。</p><p id="81c5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您将看到以下提示:</p><pre class="lq lr ls lt fd lu kx lv lw aw lx bi"><span id="bd2b" class="jt ju hi kx b fi ly lz l ma mb">R version 4.0.2 (2020-06-22) -- "Taking Off Again"<br/>Copyright (C) 2020 The R Foundation for Statistical Computing<br/>Platform: x86_64-apple-darwin17.0 (64-bit)</span><span id="c576" class="jt ju hi kx b fi mc lz l ma mb">R is free software and comes with ABSOLUTELY NO WARRANTY.<br/>You are welcome to redistribute it under certain conditions.<br/>Type 'license()' or 'licence()' for distribution details.</span><span id="0664" class="jt ju hi kx b fi mc lz l ma mb">Natural language support but running in an English locale</span><span id="327e" class="jt ju hi kx b fi mc lz l ma mb">R is a collaborative project with many contributors.<br/>Type 'contributors()' for more information and<br/>'citation()' on how to cite R or R packages in publications.</span><span id="cac9" class="jt ju hi kx b fi mc lz l ma mb">Type 'demo()' for some demos, 'help()' for on-line help, or<br/>'help.start()' for an HTML browser interface to help.<br/>Type 'q()' to quit R.</span></pre><p id="215f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在该会话中，安装R <code class="du ku kv kw kx b"><a class="ae kt" href="https://www.rdocumentation.org/packages/devtools/" rel="noopener ugc nofollow" target="_blank">devtools</a></code>和R函数框架:</p><figure class="lq lr ls lt fd ij"><div class="bz dy l di"><div class="md me l"/></div></figure><p id="d99b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在创建新的终端。(➕在终端)运行服务:</p><pre class="lq lr ls lt fd lu kx lv lw aw lx bi"><span id="9685" class="jt ju hi kx b fi ly lz l ma mb">Rscript create-app.R --target=hello</span></pre><p id="8b21" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您将看到控制台输出:</p><pre class="lq lr ls lt fd lu kx lv lw aw lx bi"><span id="afcd" class="jt ju hi kx b fi ly lz l ma mb">Starting server to listen on port 8080</span></pre><p id="ef20" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">前往<code class="du ku kv kw kx b">localhost:8080</code>测试您的服务器。</p><figure class="lq lr ls lt fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/fa1738d192b2e8bd98b873599a669882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wNTQ3VweACWQ2OU4ZONyNg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">你好世界！由R函数框架提供服务。</figcaption></figure><h1 id="630c" class="mg ju hi bd jv mh mi mj jz mk ml mm kd mn mo mp kg mq mr ms kj mt mu mv km mw bi translated">部署到云运行</h1><p id="2c6d" class="pw-post-body-paragraph iu iv hi iw b ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn ks jp jq jr hb bi translated">现在让我们将我们的应用程序部署到Cloud Run。</p><h2 id="d44a" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jf ke kf kg jj kh ki kj jn kk kl km kn bi translated">1.下载函数框架二进制文件</h2><pre class="lq lr ls lt fd lu kx lv lw aw lx bi"><span id="6abb" class="jt ju hi kx b fi ly lz l ma mb">curl -O <a class="ae kt" href="https://github.com/averikitsch/functions-framework-r/blob/master/examples/functionsframework_0.0.0.9000.tgz" rel="noopener ugc nofollow" target="_blank">https://github.com/averikitsch/functions-framework-r/blob/master/examples/functionsframework_0.0.0.9000.tgz</a></span></pre><h2 id="8538" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jf ke kf kg jj kh ki kj jn kk kl km kn bi translated">2.创建Dockerfile文件:</h2><figure class="lq lr ls lt fd ij"><div class="bz dy l di"><div class="md me l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">Dockerfile文件</figcaption></figure><h2 id="7686" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jf ke kf kg jj kh ki kj jn kk kl km kn bi translated">3.构建并运行:</h2><figure class="lq lr ls lt fd ij"><div class="bz dy l di"><div class="md me l"/></div></figure><p id="9708" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="js">构建容器需要一点时间，但构建完成后，它运行良好。</em></p><h1 id="df2d" class="mg ju hi bd jv mh mi mj jz mk ml mm kd mn mo mp kg mq mr ms kj mt mu mv km mw bi translated"><strong class="ak">云运行测试</strong></h1><p id="4253" class="pw-post-body-paragraph iu iv hi iw b ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn ks jp jq jr hb bi translated">部署后，您将获得如下URL:</p><pre class="lq lr ls lt fd lu kx lv lw aw lx bi"><span id="4d79" class="jt ju hi kx b fi ly lz l ma mb"><a class="ae kt" href="https://hellor-q7vieseilq-uc.a.run.app" rel="noopener ugc nofollow" target="_blank">https://hellor-q7vieseilq-uc.a.run.app</a></span></pre><p id="5701" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在可以自由地创建一个更高级的R应用程序了！</p><h2 id="f58a" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jf ke kf kg jj kh ki kj jn kk kl km kn bi translated">了解更多信息</h2><p id="33c5" class="pw-post-body-paragraph iu iv hi iw b ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn ks jp jq jr hb bi translated">感谢阅读！</p><p id="779e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果您喜欢这篇文章，您可能会对以下资源感兴趣:</p><ul class=""><li id="3740" class="mx my hi iw b ix iy jb jc jf mz jj na jn nb jr nc nd ne nf bi translated">😺<a class="ae kt" href="https://github.com/averikitsch/functions-framework-r" rel="noopener ugc nofollow" target="_blank">R函数框架的GitHub源代码</a></li><li id="b963" class="mx my hi iw b ix ng jb nh jf ni jj nj jn nk jr nc nd ne nf bi translated">📄<a class="ae kt" href="https://github.com/GoogleCloudPlatform/functions-framework" rel="noopener ugc nofollow" target="_blank">功能框架合同</a></li></ul></div></div>    
</body>
</html>