<html>
<head>
<title>Learning from Log4j 2 Vulnerability — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Log4j 2漏洞中吸取教训—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/learning-from-log4j-2-vulnerability-f1eabd06329e?source=collection_archive---------3-----------------------#2022-02-09">https://medium.com/google-cloud/learning-from-log4j-2-vulnerability-f1eabd06329e?source=collection_archive---------3-----------------------#2022-02-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="dc23" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何使用云操作套件检测威胁并发出警报</h2></div><p id="f0a9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本博客系列的第一部分。 <a class="ae ju" rel="noopener" href="/google-cloud/learning-from-log4j-2-vulnerability-eba946d31980"> <em class="jt">见第二部分使用BigQuery </em> </a> <em class="jt">调查威胁。</em></p><p id="f93c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你以为我们已经讨论完Log4j 2漏洞了吗？</p><p id="c0da" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">到目前为止，您已经修补了所有易受攻击的应用程序，并确保正确启用和配置了云原生威胁防御工具。对吗？干得好！这是不是意味着我们结束了？</p><p id="1eed" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Log4j漏洞利用(<a class="ae ju" href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228" rel="noopener ugc nofollow" target="_blank">CVE-2021–44228</a>和<a class="ae ju" href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046" rel="noopener ugc nofollow" target="_blank">CVE-2021–45046</a>)的后果为许多组织的安全态势评估敲响了警钟:</p><ol class=""><li id="8d01" class="jv jw hi iz b ja jb jd je jg jx jk jy jo jz js ka kb kc kd bi translated">我的应用程序现在和将来都受到保护吗？</li><li id="8021" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js ka kb kc kd bi translated">我的申请被泄露了吗？</li><li id="1ba1" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js ka kb kc kd bi translated">如何提醒我未来的漏洞利用企图？</li></ol><p id="6b88" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在过去的几周里，我和你们中的几个人一起在谷歌云上工作，希望基于你们自己的GCP日志来回答这些问题以及更多的问题。我们需要对过去的Log4j漏洞利用尝试进行历史分析，并检测未来的潜在漏洞。这个博客系列旨在为更广泛的GCP社区整合这些提示和技巧。</p><p id="27b1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，让我们戴上侦探帽，做一些威胁狩猎…</p><p id="b5d6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在继续之前，请确保您已经在所有面向互联网的HTTP(S)负载平衡器上启用了具有全保真度(采样率= 1.0)的日志记录<a class="ae ju" href="https://cloud.google.com/load-balancing/docs/https/https-logging-monitoring" rel="noopener ugc nofollow" target="_blank">(如果您还没有这样做的话)。</a></p><p id="26d5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">去吧，我等着。云日志不可追溯，所以没有日志，没有答案！</p><p id="a3d8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好的，让我们继续…</p><h1 id="25e7" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">我的应用程序受到保护了吗？</h1><p id="64b4" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">值得注意的是，在Google Cloud中有两套安全控制可供您使用:预防性控制和检测性控制。我在下图中突出显示了其中的一些控制措施，预防性控制措施用黄色标记，检测性控制措施用绿色标记。在这篇博文中，我们将重点关注检测控件，特别是日志记录，以监控利用企图<strong class="iz hj">和</strong>，确保您的预防性控件配置正确。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lg"><img src="../Images/4512379ce208cf104f60d1bae3d1b30a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZGyeMcPHuQh3e2QgmvPZpg.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated"><em class="lw"> GCP针对Log4j等漏洞的深度防御:防止、保护&amp;检测</em></figcaption></figure><p id="8cb6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此图是一些云原生威胁防御工具的简要概述，我们建议您利用这些工具来构建分层的深度防御架构，以帮助缓解Log4j和其他类似的漏洞利用，特别是:</p><ul class=""><li id="729b" class="jv jw hi iz b ja jb jd je jg jx jk jy jo jz js lx kb kc kd bi translated"><strong class="iz hj">身份感知代理</strong>(或BeyondCorp)，用于基于上下文和身份(相对于基于网络)的访问控制。<a class="ae ju" href="https://cloud.google.com/iap/docs/load-balancer-howto" rel="noopener ugc nofollow" target="_blank">为您的HTTPS负载平衡器</a>启用IAP，以实现零信任。</li><li id="2c9d" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js lx kb kc kd bi translated"><strong class="iz hj">云装甲</strong>为您的应用提供DDoS和WAF保护，支持HTTPS负载平衡器。<a class="ae ju" href="https://cloud.google.com/blog/products/identity-security/cloud-armor-waf-rule-to-help-address-apache-log4j-vulnerability" rel="noopener ugc nofollow" target="_blank">使用预配置的WAF规则启用云装甲安全策略</a>，包括针对Log4j的新“cve-canary”规则。</li></ul><p id="2dca" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将此图视为帮助您回答您的应用程序是否受到保护的蓝图。正如您将在后续部分看到的，正确配置IAP和Cloud Armor后，您应该可以验证您的应用程序是否受到了保护。</p><p id="f8fd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有关Log4j漏洞风险管理的最新建议，请参见谷歌网络安全行动小组的这篇官方<a class="ae ju" href="https://cloud.google.com/blog/products/identity-security/recommendations-for-apache-log4j2-vulnerability" rel="noopener ugc nofollow" target="_blank">谷歌云文章。</a></p><h1 id="fd52" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">是否有任何Log4j漏洞利用企图？如果是，针对哪个应用程序？</h1><p id="cd04" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">让我们使用Logs Explorer对过去的Log4j 2漏洞利用尝试进行快速专门调查:</p><ol class=""><li id="8b12" class="jv jw hi iz b ja jb jd je jg jx jk jy jo jz js ka kb kc kd bi translated">导航到<a class="ae ju" href="https://console.cloud.google.com/logs/query" rel="noopener ugc nofollow" target="_blank">日志浏览器</a></li><li id="bce8" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js ka kb kc kd bi translated">选择您的云项目(通常是生成日志的地方，也是HTTPS LB资源驻留的地方)</li></ol><p id="8f38" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">注意</strong>:如果日志是从不同的项目聚合到一个集中的存储桶中(非常常见)，选择Refine Scope to Scope by storage view，以便同时搜索多个项目的LBs日志。有关存储视图的更多信息，请参考<a class="ae ju" href="https://cloud.google.com/logging/docs/logs-views" rel="noopener ugc nofollow" target="_blank">管理日志桶的日志视图</a></p><p id="f7fa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.在查询字段中输入以下内容，并点击<strong class="iz hj">运行查询</strong>:</p><figure class="lh li lj lk fd ll"><div class="bz dy l di"><div class="ly lz l"/></div></figure><p id="0a73" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">生成的日志条目都是在指定时间段内尝试利用Log4j漏洞的HTTP请求。在我的测试环境中，30天内有33次攻击尝试。</p><p id="87bf" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们按目标应用程序对这些进行细分:</p><ol class=""><li id="9b8b" class="jv jw hi iz b ja jb jd je jg jx jk jy jo jz js ka kb kc kd bi translated">从任何结果日志条目的扩展字段中单击<em class="jt">resource . labels . back end _ service _ name</em>字段值。</li><li id="c760" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js ka kb kc kd bi translated">选择<strong class="iz hj">将字段添加到日志字段窗格</strong>。</li></ol><p id="9f1b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您可以看到随着时间的推移，哪些应用程序成为了攻击目标，以及攻击次数。在我们的测试环境中，我们可以看到历史上有3项服务成为目标:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ma"><img src="../Images/659d634ccb7173d9bc869b66fb3a35fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C6SV6j9QYGX5qhMPAIgLjw.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">Log4j漏洞利用尝试按目标后端细分(日志浏览器用户界面)</figcaption></figure><h1 id="ff7d" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">我的申请被泄露了吗？</h1><p id="ca3c" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">这些尝试不一定是妥协，因为许多可能已被IAP和/或云装甲阻止，但请求仍由HTTPS LBs记录。要了解这些请求是否到达了您应用程序，让我们按HTTP请求状态详细信息进行分类:</p><ol class=""><li id="28fe" class="jv jw hi iz b ja jb jd je jg jx jk jy jo jz js ka kb kc kd bi translated">点击任意日志扩展结果中的<em class="jt">jsonpayload . status details</em>字段值。</li><li id="e71b" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js ka kb kc kd bi translated">选择<strong class="iz hj">将字段添加到日志字段窗格</strong></li></ol><p id="f5cb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您可以看到这些攻击企图是如何被处理的。在我们的测试环境中，正如预期的那样，所有请求都被身份感知代理(<code class="du mb mc md me b">statusDetails=handled_by_identity_aware_proxy</code>)或云装甲(<code class="du mb mc md me b">statusDetails=denied_by_security_policy</code>)阻止，只有两个请求到达了后端应用程序:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mf"><img src="../Images/899873e8cb4df11096af8ea29ce54964.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XNhUgJtwP2A9ghJ8qhC16A.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">按响应细分的Log4j漏洞利用尝试(日志浏览器用户界面)</figcaption></figure><p id="03c1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们通过在日志字段窗格中选择<code class="du mb mc md me b">json_payload.statusDetails</code>下的<code class="du mb mc md me b">response_sent_by_backend</code>,深入探究这些到达后端服务的尝试，得到以下查询:</p><figure class="lh li lj lk fd ll"><div class="bz dy l di"><div class="ly lz l"/></div></figure><p id="ae58" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">和过滤的日志条目:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mg"><img src="../Images/dcd6a457ff28c5e1c96f9aefbd61da9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZahYgGT-UhO9czE_V4e_0w.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">到达后端的Log4j漏洞利用尝试(日志浏览器UI)</figcaption></figure><p id="04be" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这显示了12月27日在我的测试环境中我的一个面向互联网的应用程序中的两个漏洞。这个特定的应用程序没有Log4j漏洞，并对这些请求返回404“未找到”。在我用针对我的测试环境中的Log4j漏洞的新WAF规则“cve-canary”更新了Cloud Armor安全策略之后，后续请求无法到达应用程序。我们现在已经验证了WAF规则“cve-canary”已经创建并正确应用，通过阻止Log4j漏洞来帮助保护我们的应用程序。请注意，Cloud Armor中的WAF规则并不保证能够检测到所有可能的漏洞利用企图，但会随着行业对这一漏洞和其他新漏洞的了解而自动管理和更新。</p><p id="b79d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，这是一个我们应该定期进行的分析。更好的是，如果有任何漏洞通过，我们希望得到提醒。让我们接下来做那件事。</p><h1 id="7cdf" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">如何提醒我未来的漏洞利用企图？</h1><p id="2146" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">我们已经完成了历史搜索(虽然只是在过去30天内)，但是如何设置连续的接近实时的搜索呢？为此，让我们使用:</p><ul class=""><li id="5db5" class="jv jw hi iz b ja jb jd je jg jx jk jy jo jz js lx kb kc kd bi translated">Cloud Logging设置一个基于日志的自定义指标<strong class="iz hj">来统计Log4j攻击进入我们后端应用的数量，然后，</strong></li><li id="4e04" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js lx kb kc kd bi translated">云监控设置一个<strong class="iz hj">警报策略</strong>以便在发生事故时通知我们。</li></ul><p id="41fd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了避免警报疲劳，我们不会对像Cloud Armor这样的本机工具阻止的每一次攻击尝试发出警报，而只会对实际到达我们后端应用程序的攻击发出警报，因此我们将重用最后一个查询。</p><ol class=""><li id="9994" class="jv jw hi iz b ja jb jd je jg jx jk jy jo jz js ka kb kc kd bi translated">导航到<a class="ae ju" href="https://console.cloud.google.com/logs/metrics" rel="noopener ugc nofollow" target="_blank">基于日志的指标</a></li><li id="e42b" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js ka kb kc kd bi translated">选择<strong class="iz hj">创建指标</strong></li><li id="3cc3" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js ka kb kc kd bi translated">选择<strong class="iz hj">计数器</strong>类型，填写名称、描述，复制上面的日志查询作为过滤器</li></ol><figure class="lh li lj lk fd ll er es paragraph-image"><div class="er es mh"><img src="../Images/6e9fce388dd873f94601c3ff2c85d30c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*7cJ5nUdcsZ60eKHDaJZ_Tw.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">用于计数到达后端的Log4j漏洞利用尝试的自定义指标(基于日志的指标UI)</figcaption></figure><p id="da1c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">注意</strong>:基于日志的度量数据以每分钟1个数据点的速度写入，但是只有当有匹配的日志条目时。如果没有匹配的日志条目，则不会在这些时间戳的指标时间序列中写入数据点。基于日志的指标的时间序列中的每个数据点代表自上一个数据点以来的<strong class="iz hj">增量</strong>。</p><p id="c78d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，单击新创建的基于日志的指标旁边的<strong class="iz hj">更多操作</strong>，并选择<strong class="iz hj">从指标创建警报</strong>以导航到预填充了目标或监控过滤器的云监控&gt;警报向导。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mi"><img src="../Images/aded783f1fac18cb6e00d98d4fe8e1d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BNgBPDZzXfDT682rD1B4eQ.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">检测到Log4j尝试时触发的警报策略(云监控UI)</figcaption></figure><p id="4558" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的案例中，目标指标是:</p><pre class="lh li lj lk fd mj me mk ml aw mm bi"><span id="99bc" class="mn kk hi me b fi mo mp l mq mr">metric.type="logging.googleapis.com/user/log4j_exploits"</span></pre><p id="4bb8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们希望在<em class="jt">任何</em>应用程序上发生此类攻击企图时收到警报，因此我们将设置警报策略，以汇总给定滚动时间窗口内的所有事件，并针对任何时间序列(即任何应用程序)发出警报。</p><p id="1366" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">警报条件包括:</p><ul class=""><li id="d7d8" class="jv jw hi iz b ja jb jd je jg jx jk jy jo jz js lx kb kc kd bi translated">滚动窗口:10分钟</li><li id="1b96" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js lx kb kc kd bi translated">滚动窗口功能:总和</li><li id="e583" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js lx kb kc kd bi translated">时序聚合:无</li><li id="f14b" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js lx kb kc kd bi translated">条件类型:阈值</li><li id="aae4" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js lx kb kc kd bi translated">警报触发:任何时间序列违反</li><li id="1a6a" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js lx kb kc kd bi translated">阈值位置:高于阈值</li><li id="4e01" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js lx kb kc kd bi translated">阈值:0</li></ul><p id="7d81" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您设置了包括电子邮件在内的警报策略通知渠道，则一旦警报触发，您将收到以下内容:</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ms"><img src="../Images/a59bb6c38a72db3b9fb5c7f1c928ef87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zsVH8Q4Thvq9AzBe9M_VhA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">近乎实时地发送电子邮件通知，提醒Log4j漏洞利用企图</figcaption></figure><p id="00db" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以点击直接从电子邮件中查看日志，并确认和解决事件。这些是可操作的警报，因为只有实际到达后端应用程序的尝试才会触发警报。这意味着有人禁用或错误配置了您的缓解工具，如防火墙规则或云装甲WAF，或者只是推出了不遵循公司政策的新应用程序，从而绕过了这些保护工具。修复配置后，您可以关闭事件。默认情况下，事件会在7天后自动关闭。</p><h1 id="6c9c" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">下一步是什么？</h1><p id="c132" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">因此，我们设置了我们自己的云防御，如Cloud Armor，使用Logs Explorer进行了一些特别的分析，并通过云监控实现了实时警报。为了进一步调查这些利用漏洞的企图，<a class="ae ju" rel="noopener" href="/google-cloud/learning-from-log4j-2-vulnerability-eba946d31980">请参见本系列的第2部分</a>，其中我们利用了BigQuery的高级分析功能，例如:</p><ul class=""><li id="ac5a" class="jv jw hi iz b ja jb jd je jg jx jk jy jo jz js lx kb kc kd bi translated">按违规IP分组的聚合</li><li id="89eb" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js lx kb kc kd bi translated">过滤以去除好演员，以及</li><li id="97b9" class="jv jw hi iz b ja ke jd kf jg kg jk kh jo ki js lx kb kc kd bi translated">丰富/关联这些攻击的地理位置来源。</li></ul><p id="4cb4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">狩猎愉快！！</p></div></div>    
</body>
</html>