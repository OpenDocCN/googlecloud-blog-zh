<html>
<head>
<title>VPN between two clouds</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">两个云之间的VPN</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/vpn-between-two-clouds-e2e3578be773?source=collection_archive---------2-----------------------#2017-02-10">https://medium.com/google-cloud/vpn-between-two-clouds-e2e3578be773?source=collection_archive---------2-----------------------#2017-02-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="0bf5" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">将AWS连接到谷歌的云</h2></div><p id="44ee" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与连接一个<a class="ae jt" href="https://www.websiteops.com/cloud/2015/05/13/connecting-aws-regions-with-openswan/" rel="noopener ugc nofollow" target="_blank"> AWS区域到区域</a>相比，通过VPN将AWS VPC连接到谷歌的云平台非常简单。* *披露者—要使此设置正常工作，您需要AWS和Google云平台的付费帐户。费用适用于AWS和GCP</p><p id="ad60" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，你需要注册一个谷歌账户。从那里，您可以登录到Google开发者控制台(http://Console . developers . Google . com)。</p><p id="d103" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从这里开始，你必须创建谷歌所说的项目。一个项目封装了大部分谷歌云产品。您的帐户中可以有多个项目。GCP的一个项目可以比作AWS中的一个VPC，但是没有完整的一对一的产品和功能映射。一个项目为您的GCP帐户提供一定程度的逻辑分离、认证和计费。你可以免费获得一个项目设置。在这篇文章中，我主要关注网络和VPN的设置。要使用这些功能，您必须为您的项目启用计费。谷歌以初始积分的形式提供免费试用。这将给你300美元在90天内用完【https://cloud.google.com/free-trial/. T2】</p><h1 id="0694" class="ju jv hi bd jw jx jy jz ka kb kc kd ke io kf ip kg ir kh is ki iu kj iv kk kl bi translated">快速入门—使用静态路由</h1><ul class=""><li id="b08a" class="km kn hi iz b ja ko jd kp jg kq jk kr jo ks js kt ku kv kw bi translated">从GCP开始，创建一个谷歌计算引擎VPN网关。</li><li id="c937" class="km kn hi iz b ja kx jd ky jg kz jk la jo lb js kt ku kv kw bi translated">给你的谷歌计算引擎VPN一个名字。</li></ul><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lc"><img src="../Images/25004d5c31b3a9930c79093292d1fc8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/0*sM73upHSy2PMd2bu.png"/></div></figure><ul class=""><li id="e615" class="km kn hi iz b ja jb jd je jg lk jk ll jo lm js kt ku kv kw bi translated">选择网络、区域和IP地址。如果您还没有IP地址，请选择新的静态IP地址。</li></ul><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es ln"><img src="../Images/4ddb66d1806959f84598daf10a13adf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/0*I0DN71QLQ9FOP5op.png"/></div></figure><ul class=""><li id="ca4c" class="km kn hi iz b ja jb jd je jg lk jk ll jo lm js kt ku kv kw bi translated">转到AWS VPC仪表板。</li><li id="928f" class="km kn hi iz b ja kx jd ky jg kz jk la jo lb js kt ku kv kw bi translated">使用刚刚创建的Google计算引擎静态IP地址创建一个新的客户网关。</li></ul><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lc"><img src="../Images/0a2c09459660d307de115cd216cf2aa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/0*srrUgp8ypcRpgNfA.png"/></div></div></figure><ul class=""><li id="2ee0" class="km kn hi iz b ja jb jd je jg lk jk ll jo lm js kt ku kv kw bi translated">转到AWS VPN仪表板</li><li id="4af1" class="km kn hi iz b ja kx jd ky jg kz jk la jo lb js kt ku kv kw bi translated">使用刚刚创建的AWS客户网关(CGW)创建一个新的VPN连接。为路由选项选择静态。然后输入您的Google计算机引擎网络的子网。</li><li id="4c29" class="km kn hi iz b ja kx jd ky jg kz jk la jo lb js kt ku kv kw bi translated">单击Yes Create，您的VPN将开始在AWS端构建。</li></ul><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es ls"><img src="../Images/c1949c2d121ffec84dda0c1ee22701df.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/0*s3wTCCFh_KlrD9Zb.png"/></div></figure><p id="ba8e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦构建了AWS VPN隧道，您就可以选择新构建的VPN连接并下载通用VPN配置。这应该作为一个用AWS VPN ID命名的文本文件下载。在这个配置文件中，您将需要AWS端点和PSK。回到隧道下的GCP控制台</p><ul class=""><li id="60b1" class="km kn hi iz b ja jb jd je jg lk jk ll jo lm js kt ku kv kw bi translated">远程对等IP地址将是AWS VPN配置中的虚拟专用网关。</li></ul><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lt"><img src="../Images/1f13be17d2884ef54c5efd6fe1fa9c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/0*Cc1kFGrsQru-r4x-.png"/></div></figure><ul class=""><li id="b8bf" class="km kn hi iz b ja jb jd je jg lk jk ll jo lm js kt ku kv kw bi translated">共享机密是来自AWS VPN配置的PSK</li><li id="2f0f" class="km kn hi iz b ja kx jd ky jg kz jk la jo lb js kt ku kv kw bi translated">为IKE版本选择IKEv1</li><li id="1fa5" class="km kn hi iz b ja kx jd ky jg kz jk la jo lb js kt ku kv kw bi translated">对于远程网络IP范围，请在AWS中输入VPC子网的CIDR范围</li><li id="c552" class="km kn hi iz b ja kx jd ky jg kz jk la jo lb js kt ku kv kw bi translated">对于本地子网网络，添加选择您要连接的GCP网络。</li><li id="4272" class="km kn hi iz b ja kx jd ky jg kz jk la jo lb js kt ku kv kw bi translated">单击创建</li></ul><p id="8050" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在对AWS提供AWS VPN配置的第二个隧道再次执行这些步骤。</p><p id="6bc1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦你点击创建谷歌云平台将开始建立隧道，并试图连接到AWS远程对等IP地址。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lu"><img src="../Images/5e8d7abc0e3377aef80979056165252e.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/0*MMkJvlYQmBeOG0s8.png"/></div></figure><p id="b1be" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">AWS不提供任何日志来帮助解决连接问题，幸运的是GCP提供了日志。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lv"><img src="../Images/f46d010e811c295283de44ea0fbbf71f.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/0*4L4jnkjcJbZVD3y7.png"/></div></figure><p id="0541" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要解决AWS到GCP隧道的问题，请单击GCP VPN仪表板中的日志记录。这将带您到日志仪表板，从VPN隧道实时输出日志。</p></div></div>    
</body>
</html>