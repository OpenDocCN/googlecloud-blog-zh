<html>
<head>
<title>Document AI Warehouse</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">文档AI仓库</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/document-ai-warehouse-a63d5a21bb47?source=collection_archive---------0-----------------------#2022-11-17">https://medium.com/google-cloud/document-ai-warehouse-a63d5a21bb47?source=collection_archive---------0-----------------------#2022-11-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/57fab733ed091f6d5e31ac0db1009f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lk5tdmU9VZbM9nvpB1FxQw.png"/></div></div></figure><p id="ef5e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Document AI Warehouse是一款用于摄取和管理文档的Google产品。本文将带我们了解如何建立并运行一个环境，并执行许多最重要的任务。</p><p id="5c8e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">【想了解更多关于文档AI的功能？阅读</strong> <a class="ae jo" href="http://bit.ly/3JtHZaD" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">文档AI:在</strong> <a class="ae jo" href="http://bit.ly/GoogleCloudBlogHome" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">谷歌云博客</strong> </a> <strong class="is hj">上为您的文档处理需求提供统一的AI代理</strong> </a> <strong class="is hj">。】</strong></p><h1 id="473d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">配置</h1><p id="c6d7" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">要进行设置，我们需要创建一个新项目。</p><p id="c411" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来我们转到文档AI仓库Google云控制台页面:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/ae400f2ea5d076e242c41f790150f798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_k8EfoYfpAgWtEd4"/></div></div></figure><p id="b783" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我们通过点击<code class="du kx ky kz la b">ENABLE</code>按钮来启用服务。</p><p id="5fba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们创建文档AI仓库需要的服务帐户。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/bf731d4e1897f81f86dd7ba383f76dea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D04Z8vOpJkruPj0S"/></div></div></figure><p id="50af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将是:</p><p id="0036" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kx ky kz la b">dw-ui-service-account@[PROJECT_ID].iam.gserviceaccount.com</code></p><p id="60ae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来将要求我们授予权限:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/b1d97658fe098fbdf7dd46b40b9cee44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d8wKn6g-bBIGt6id"/></div></div></figure><p id="5b9f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将调配实例:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/d30be5d0ab1d482ab0ebac1985e2f16b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_PTdSNA0OmEN3R9u"/></div></div></figure><p id="be9d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">配置步骤需要几分钟时间来运行。耐心地停留在页面上，直到完成。</p><p id="e08f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后你会得到一个总结:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/52f00f862ceeadf701e85e24b4a675db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*an8PZij3Q0PTnO3d"/></div></div></figure><p id="5a86" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这包括到文档AI仓库UI的链接。</p><p id="cc6e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们第一次访问UI时，我们看到:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/4390d9b42a6feb54f3b76031fe3eb736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i5qdi9O3V2Twxkoj"/></div></div></figure><p id="c950" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，系统会提示我们输入服务帐户和私钥。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/553ae0816a00c6797ee903045673acf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BCc4VtRKta6WweB-"/></div></div></figure><p id="a3d2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">目前，没有人有权处理任何文档。我们必须设置一些初始访问权限。启动UI，转到Admin选项卡，然后单击Access。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/7a3a4247d55470ae50d234465b617434.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vijsMju-a3XAawKc"/></div></div></figure><p id="760b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">单击“添加新项”按钮，输入您的身份信息:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/acb44c62399232ecf426092fb801a084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/0*sDq-bVybAei9_o9C"/></div></figure><p id="385a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们会发现我们的用户现在有权限处理文档:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/983b7d72ad916ba8085a5fba1bd10ae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BDoM2qvPUUkFUf_N"/></div></div></figure><h1 id="4259" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建模式</h1><p id="3088" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我们将从创建一个模式开始。模式是一类文档的模板。在我们的示例中，我们将假设我们正在接收发票文档，因此我们希望创建一个表示发票实例的模式。</p><p id="ce69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的逻辑发票将包含:</p><ul class=""><li id="d61c" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">付款人</li><li id="e9b4" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">收款人</li><li id="fc44" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">发票ID</li><li id="5ae0" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">发票日期</li><li id="d45b" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">数量</li></ul><p id="3d1c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将创建一个模式，其中包含代表这些属性的属性。当我们将发票文档接收到文档AI仓库中时，我们会将该模式与文档相关联，并提供值。</p><p id="45d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要创建一个模式，我们需要给它一个显示名称并定义它的属性。定义是通过构建描述模式的JSON，然后将其作为输入传递给创建模式定义的文档AI Warehouse API调用来执行的。执行之后，文档AI Warehouse为模式生成一个惟一的身份(名称),我们随后可以使用它来引用它。</p><p id="ed1b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将使用UI创建模式，稍后使用API再次创建它。</p><p id="0477" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">单击管理菜单项，然后单击架构:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/73eca25b912980a3cd69469193039c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jBEleIZReimrge6a"/></div></div></figure><p id="c9f7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">单击“添加新项”按钮，并提供发票的显示名称:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/4318595db4279f6c6756c8c5f6643346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GRpSSY3dZrDbvYcn"/></div></div></figure><p id="3116" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在模式定义中，我们必须提供JSON。已经提供了一个名为<code class="du kx ky kz la b">schema-create-invoice-underscore.json</code>的样本文件。我们可以将其复制并粘贴到输入字段中:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/ce4ddcfc31dcd3273c61d0cbef074382.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zFp1DHsiGdc_LyPt"/></div></div></figure><p id="43c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建之后，我们会发现我们的模式列表中有一个模式。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/0843d297bf39f5c3b22ef6e675128f39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W02e_LsNPBRA4yXK"/></div></div></figure><p id="25e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里需要注意的一个重要事项是，文档AI Warehouse已经为我们的模式生成了一个惟一的标识符。在上面的例子中是<code class="du kx ky kz la b">5ud7pggqji0ko</code>。我们将重复使用该模式的值，以确保您知道如何找到它。是<em class="ly">这个</em>身份被文档所知，而不是我们可能提供的任何形式的文本/符号名称。</p><p id="3cc9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于每个模式，我们可以深入研究:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/03e3ee561cfc2bbbef3f0c3ddbec2758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pqmmjNNkiDP0Lz_d"/></div></div></figure><p id="686e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从那里，我们可以看到它的细节，删除它，创建它的副本，并查看其结构的JSON描述。</p><h1 id="1656" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建文档</h1><p id="234f" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">有了模式的定义，我们现在可以把注意力转向文档的摄取。我们将假设我们已经收到了一个描述发票的PDF，并且想要接收它。我们一开始会“笨拙地”这样做，然后随着我们的进展，看看更好的解决方案。</p><p id="5cff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在UI中，单击“添加新项”按钮创建文档。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/0479aa219253bd4052a0b6eb393f6d4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/0*JSu80nJlo70pdxxz"/></div></figure><p id="52ae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">向导的第一页允许我们指定要上传的文件或GCS上文件的路径。我们将上传我们的一个样本pdf。</p><p id="50fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">选择<code class="du kx ky kz la b">SampleInvoice1.pdf</code>，然后我们可以进入下一页:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/f62c232cb96949366c0bb5746556478b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-mJfCV1MtrGF2UeS"/></div></div></figure><p id="74b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，系统会提示我们选择一个与文档相关联的模式。必须选择一个架构；我们不能在没有指定模式的情况下接收文档。我们将选择我们的发票模式。请注意，一旦选择了模式，我们在模式中定义的属性现在就可以为该文档实例提供值了。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/c76a339d46f1dcabcf4dad48296c711c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V1LPN125gvqGrJTN"/></div></div></figure><p id="a854" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将在这里输入值。您可能会想知道这些值是从哪里来的…我们稍后会谈到这一点。</p><p id="f7e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，这里是PDF的截图:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/e05a1a257c9fc31011072d7cf6e05d01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z4aNS_tQRgVjNwZC"/></div></div></figure><p id="effa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用此选项，我们输入属性值并单击“创建”按钮:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/23421e26a35f98b46f21179b33de0d50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SYP7ORQocQi8Foyz"/></div></div></figure><p id="568e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建完成后，我们将在文档列表中看到我们的文档。单击搜索按钮查看这些内容:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/76ba31a9f904f9a01a002bd60362d213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JC9Wndt36ZrnMbtw"/></div></div></figure><p id="47a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们可以深入文档，查看其详细信息。点击文档名称:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/a3b3623299ff674f422797e2049f5ce5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*h1ouv_JahDLIXCZ9"/></div></div></figure><p id="a423" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">切换到属性选项卡很有用:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/5ab1de235bda08429ba7032ad06eddde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aRkoEaTkcMmy_5cG"/></div></div></figure><p id="67d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以看到文档的所有属性。</p><p id="fdff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">注意</strong>:有一个bug阻止了日期值显示在UI上，但是日期是通过API存储和检索的。</p><p id="bb11" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个页面中可以看到的最重要的东西之一是文档ID。这是一个生成的唯一值，是对文档实例的引用。在本例中是<code class="du kx ky kz la b">3sa60tng1h6ro</code>。我们将广泛使用它来处理文档。</p><h1 id="f8c7" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">切换到API</h1><p id="a8d5" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">到目前为止，我们一直在专门使用UI来执行我们的任务，然而，Google提供的UI并不打算成为当前使用文档AI仓库的主要界面。而是将产品标注为“API优先”。这意味着它的预期接口是通过应用程序逻辑实现的。该产品提供了一个基于REST的API来执行我们可能需要的所有任务，谷歌将提供各种语言绑定(如Python，Java，Javascript …)，这些绑定建立在REST API的基础上，但对开发人员隐藏了底层接口。我们将在本文的剩余部分使用REST调用来演示松散耦合。</p><p id="450e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将再次启动并执行与之前手动执行的任务完全相同的任务，但这次是通过API。我们将从删除文档和模式开始，让我们回到一个空的环境。删除我们刚刚创建的文档，然后删除模式。如果不先删除使用该模式的文档，我们就不能删除它。</p><p id="d6e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们提供了一个包含Makefile的示例Git项目，该Makefile包含我们想要执行的命令。在使用它之前，编辑Makefile并更改以下内容:</p><ul class=""><li id="7a5d" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">PROJECT_ID —更改为您创建的项目的项目ID。</li><li id="2ffb" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">用户——作为电子邮件地址的Google身份</li></ul><p id="3ca3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将从创建一个模式开始。</p><p id="208f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们创建一个JSON文件，其中包含我们的模式描述。看起来像是:</p><p id="8183" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kx ky kz la b">schema-create-invoice.json</code></p><pre class="kt ku kv kw fd me la mf bn mg mh bi"><span id="9770" class="mi jq hi la b be mj mk l ml mm">{<br/>    "displayName": "Invoice",<br/>    "propertyDefinitions": [<br/>        {<br/>            "name": "payee",<br/>            "displayName": "Payee",<br/>            "isFilterable": true,<br/>            "isSearchable": true,<br/>            "isMetadata": true,<br/>            "isRequired": true,<br/>            "textTypeOptions": {}<br/>        },<br/>        {<br/>            "name": "payer",<br/>            "displayName": "Payer",<br/>            "isFilterable": true,<br/>            "isMetadata": true,<br/>            "isRequired": true,<br/>            "textTypeOptions": {}<br/>        },<br/>        {<br/>            "name": "amount",<br/>            "displayName": "Amount",<br/>            "isMetadata": true,<br/>            "isFilterable": true,<br/>            "floatTypeOptions": {}<br/>        },<br/>        {<br/>            "name": "id",<br/>            "displayName": "Invoice ID",<br/>            "isMetadata": true,<br/>            "isFilterable": true,<br/>            "textTypeOptions": {}<br/>        },<br/>        {<br/>            "name": "date",<br/>            "displayName": "Date",<br/>            "isMetadata": true,<br/>            "isFilterable": true,<br/>            "dateTimeTypeOptions": {}<br/>        }<br/>    ]<br/>}</span></pre><p id="6985" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们运行“<code class="du kx ky kz la b">make schema-create</code>”，它调用<a class="ae jo" href="https://cloud.google.com/document-warehouse/docs/reference/rest/v1/projects.locations.documentSchemas/create" rel="noopener ugc nofollow" target="_blank">这个</a> REST API。如果我们现在查看UI，我们会看到模式现在已经存在。复制模式的标识并再次编辑Makefile，这次设置以下值:</p><ul class=""><li id="d942" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">SCHEMA_ID —我们正在使用的模式标识符。</li></ul><p id="5d26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还可以通过运行“<code class="du kx ky kz la b">make schema-list</code>”来列出模式，它运行<a class="ae jo" href="https://cloud.google.com/document-warehouse/docs/reference/rest/v1/projects.locations.documentSchemas/list" rel="noopener ugc nofollow" target="_blank">这个</a> REST API。</p><p id="e5f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们可以使用API创建一个文档。我们首先为REST请求创建一个JSON有效负载。有效载荷看起来像:</p><pre class="kt ku kv kw fd me la mf bn mg mh bi"><span id="fcb4" class="mi jq hi la b be mj mk l ml mm">{<br/>  "document": {<br/>    "name": "",<br/>    "displayName": "Invoice GCS 1",<br/>    "title": "My Invoice 1",<br/>    "documentSchemaName": "projects/[PROJECT_NUMBER]/locations/us/documentSchemas/[SCHEMA_ID]",<br/>    "rawDocumentFileType": "RAW_DOCUMENT_FILE_TYPE_PDF",<br/>    "rawDocumentPath": "gs://[BUCKET_NAME/SampleInvoice1.pdf",<br/>    "properties": [<br/>      {<br/>        "name": "payee",<br/>        "textValues": {"values": ["Developer Company"]}<br/>      },<br/>      {<br/>        "name": "payer",<br/>        "textValues": {"values": ["Buyer Company"]}<br/>      },<br/>      {<br/>        "name": "amount",<br/>        "floatValues": {"values": [335]}<br/>      },<br/>      {<br/>        "name": "id",<br/>        "textValues": {"values": ["12-545678"]}<br/>      },<br/>      {<br/>        "name": "date",<br/>        "dateTimeValues": {<br/>          "values": [<br/>            {<br/>              "year": 2022,<br/>              "month": 12,<br/>              "day": 12,<br/>              "utcOffset": "0s"<br/>            }<br/>          ]<br/>        }<br/>      }<br/>    ],<br/>    "textExtractionDisabled": true<br/>  },<br/><br/>  "requestMetadata": {<br/>    "user_info": {<br/>      "id": "user:kolban@kolban.altostrat.com",<br/>      "group_ids": []<br/>    }<br/>  }<br/>}</span></pre><p id="72e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我想让你们看看这个物体的核心部分是:</p><ol class=""><li id="69ff" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mn lo lp lq bi translated"><code class="du kx ky kz la b">documentSchemaName</code> —这是我们希望与文档相关联的模式的标识。</li><li id="7fb6" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn mn lo lp lq bi translated"><code class="du kx ky kz la b">rawDocumentPath</code> —这是存储在Google云存储中的一个文件的路径，该文件包含我们将被摄取到文档仓库中的文档。除了将数据保存在GCS中，我们还有其他选择。</li><li id="5d9a" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn mn lo lp lq bi translated"><code class="du kx ky kz la b">properties</code> —我们选择提供的属性的值。</li><li id="fc8e" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn mn lo lp lq bi translated"><code class="du kx ky kz la b">requestMetadata</code> —我们提交请求以进行授权检查的人员的身份。</li></ol><p id="474f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行“<code class="du kx ky kz la b">make prep-data</code>”。这个命令的作用是构建新的JSON数据文件，其中包含各种变量的值。</p><p id="f4b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下次运行:</p><pre class="kt ku kv kw fd me la mf bn mg mh bi"><span id="0755" class="mi jq hi la b be mj mk l ml mm">make set-project<br/>make bucket<br/>make copy-data-files</span></pre><p id="182e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些命令的作用是为<code class="du kx ky kz la b">gcloud</code>和<code class="du kx ky kz la b">mb</code>命令设置项目，创建一个名为<code class="du kx ky kz la b">gs://[PROJECT_ID]-data</code>的桶，并将一些示例PDF和PNG文件复制到桶中。</p><p id="64c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以通过执行“<code class="du kx ky kz la b">make document-create</code>来运行我们的文档创建任务，它运行<a class="ae jo" href="https://cloud.google.com/document-warehouse/docs/reference/rest/v1/projects.locations.documents/create" rel="noopener ugc nofollow" target="_blank">这个</a> REST API。</p><p id="b121" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们现在访问我们的UI，我们将看到呈现给我们的文档。我们可以使用“<code class="du kx ky kz la b">make document-create-all</code>”命令加载更多的文档。</p><h1 id="6189" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">搜索</h1><p id="2164" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">在将一些文档加载到文档AI仓库后，我们可以开始运行一些搜索。</p><p id="0b9e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的文档有一个名为<code class="du kx ky kz la b">Invoice ID</code>的属性。看看能不能找到ID为<code class="du kx ky kz la b">12–345678</code>的发票。</p><p id="ccb5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在UI中，在搜索栏中输入<code class="du kx ky kz la b">12–345678</code>:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/56b95973b7c8049be3477f44c643d454.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SP_K-Ui2uPRO8f1U"/></div></div></figure><p id="3ccb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那很容易。然而，该搜索在我们的搜索数据中的任何地方寻找特定值<em class="ly">并且可能返回比我们预期的更多的值。相反，我们知道该属性是特定于“<code class="du kx ky kz la b">Invoice ID</code>”属性的，因此我们可以只过滤:</em></p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/1c4b780ee54fde179daf215095cbe78d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jgGRMbin4rNh-rIV"/></div></div></figure><p id="fd8e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我们显式地过滤结果，只包含我们的特定发票。</p><p id="c37f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用我们在模式中公开的任何属性来执行这种搜索/过滤。</p><p id="232b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们使用API重复这些测试。首先，我们将运行:</p><p id="8fbc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kx ky kz la b">make document-search-1</code></p><p id="c904" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将运行一个API搜索，该搜索将运行一个简单的“查询”，在所有文档中查找字符串“<code class="du kx ky kz la b">12–345678</code>”。它会找到我们在UI搜索中找到的那个。</p><p id="02ff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将运行:</p><p id="5d8e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kx ky kz la b">make document-search-2</code></p><p id="d281" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将运行一个API搜索，查找具有名为“<code class="du kx ky kz la b">Invoice ID</code>”且值设置为“<code class="du kx ky kz la b">12–345678</code>”的属性的特定文档。</p><p id="964b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">搜索表达式可以是复合的，比简单的等式查询更丰富。首先，我们可以使用AND和OR来组合表达式，以匹配多个或异或结果。接下来，支持的表达式包括:</p><ul class=""><li id="76b1" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">= —平等</li><li id="e1ad" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">！= —不等式</li><li id="9d50" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">&lt; — Less than</li><li id="cc3b" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">&gt; —大于</li><li id="145f" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">&lt;= — Less than or equal to</li><li id="d2fc" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">&gt; = —大于或等于</li><li id="e3ba" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">~~ — Like(仅适用于文本值)</li><li id="3f06" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">LOWER( <em class="ly"> propertyName </em> ) —将值转换为小写</li><li id="3b34" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">EMPTY( <em class="ly"> propertyName </em> ) —如果未提供属性，则为True。</li><li id="2835" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">基于创建和更新的时间过滤器。</li></ul><h1 id="6f4e" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">文件夹</h1><p id="0782" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我们现在已经看到了如何创建模式、创建文档和执行搜索。现在让我们把注意力转向如何管理我们的文件。目前，我们的文件仅仅是一个无序的集合。没有分组。文件AI仓库提供了一个文件夹的概念。可以把文件夹想象成一个可以存放文档和其他文件夹的容器。当我们创建一个新文档时，我们需要指定一个与该文档相关联的模式。文件夹也是如此。当我们创建一个文件夹时，必须有一个与之相关联的模式。</p><p id="1163" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看如何创建这样一个面向文件夹的模式。首先，我们将使用用户界面。</p><p id="c6a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们转到“管理”选项卡并选择“模式”:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/06e5f0bc5b849819e98404422a2b9fa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gSYXaQ65UDlxRs_Z"/></div></div></figure><p id="3ff7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来我们点击<code class="du kx ky kz la b">Add New</code>。</p><p id="d811" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们为我们的模式命名("<code class="du kx ky kz la b">Simple</code>")，并选择模式类型为Folder。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/6aaf6fc472083f9ea9ceeb32e5204cde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U4n6SjrdQYZ7TM3U"/></div></div></figure><p id="219f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将保持属性不变。这为我们没有特殊属性的文件夹提供了一个简单的模板。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/81fe4d8fc6028ea25230f5184a433466.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HLRLBGuLRHPqNlwN"/></div></div></figure><p id="1873" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击<code class="du kx ky kz la b">DONE</code>。</p><p id="7e01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果将是一个新的模式。请注意，文档模式的图标不同于文件夹模式的图标。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/ec86077cea84b11fb0a94d78c7eb7844.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*67T-X-KPksLl1T6k"/></div></div></figure><p id="514d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建了文件夹模式后，我们现在可以根据该模式创建文件夹的实例。</p><p id="d3f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在主搜索页面上，选择“创建新文件夹”</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/ab5c3e3d918d664fae9e27f92d7893dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/0*lt_Q8k21DIsi7MIn"/></div></figure><p id="6751" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建两个文件夹。一个叫<code class="du kx ky kz la b">Paid</code>，一个叫<code class="du kx ky kz la b">Unpaid</code>:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/69550d2f9bb0bdb53952af8998c23b6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bsBAQ35SeqhVwQuy"/></div></div></figure><p id="411d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们来谈谈文件夹的语义。你可能习惯于文件系统中的文件夹，就像Windows中的文件夹(其他操作系统中的目录)。这些文件夹包含文件，文件<em class="ly">位于文件夹</em>中。文档AI仓库文件夹不一样。将文件夹想象成包含对文档的引用，而不是文档本身的内容。这意味着如果我们有多个文件夹，每个文件夹都可以包含一个对同一个文档的引用。说文档归文件夹所有是不正确的。相反，可以将文档想象为由文件夹引用。不严格地说，我们可以说一个文档包含在一个文件夹中，但是如果我们删除了这个文件夹，这个文档仍然存在。如果我们删除该文件夹，将丢失的只是文件夹本身以及它对该文件夹所指向的文档的引用。这个概念的好处是一个单独的文档可以在多个文件夹中找到。想象一下，我们有一个用于高价值客户的文件夹和另一个用于已付发票的文件夹。如果我们现在有一个已经支付发票的高价值客户的文档，我们可以在两个文件夹下链接该文档。</p><p id="9552" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以向文件夹中添加文档。</p><p id="da94" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">选择“所有单据”标签，然后选择“发票GCS 1”。</p><p id="9d86" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">单击文件夹选项卡。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/98733e0bb8560240b0a2307d98efebef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IIOIbaILTKs_4fQy"/></div></div></figure><p id="9660" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击添加新的，并选择所有文件下的付费文件夹。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/6aaee3ded76cd32262db896b92cf1fb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9MWZGuWPQLxCAh4w"/></div></div></figure><p id="57e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对其余文档重复此操作。将奇数编号的文件添加到<code class="du kx ky kz la b">Paid</code>，将偶数编号的文件添加到<code class="du kx ky kz la b">Unpaid</code>。</p><p id="c69e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们现在选择所有单据&gt;已付文件夹，我们将看到所有已付发票:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/db73379e5c3e04902119cad94bfbdfac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*McmIz2UBVceATGqU"/></div></div></figure><p id="b163" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们将发票#2标记为已付，这将改变它的位置。转到未付文件夹并选择发票#2。</p><p id="80bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">转到“文件夹”标签，点击“删除”图标，将其从“未付”中删除。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/1892875e1afba932279c533915bb949b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6RPSZGUvrCWe1PQ4"/></div></div></figure><p id="63af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将文档添加到付费文件夹:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/841af0744dcb41a8cf41991c02dbd0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3-f8lbivFwQmx2Zf"/></div></div></figure><p id="d096" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">列出付费和未付费文件夹，并看到文档#2现在在付费文件夹中。</p><p id="7ddb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从API的角度来看，我们可以通过执行搜索来找到一个文件夹中的所有文档。其中一个搜索属性叫做<code class="du kx ky kz la b">folderNameFilter</code>。它将文件夹的标识作为参数，并返回该文件夹中包含的所有文档。下面是一个JSON搜索的例子，它返回文件夹中的文档:</p><pre class="kt ku kv kw fd me la mf bn mg mh bi"><span id="af52" class="mi jq hi la b be mj mk l ml mm">{<br/>  "documentQuery": {<br/>    "folderNameFilter": "projects/[PROJECT_NUMBER]/locations/us/documents/[DOCUMENT_ID]"<br/>  },<br/>  "requestMetadata": {<br/>    "user_info": {<br/>      "id": "user:[USER]",<br/>      "group_ids": []<br/>    }<br/>  }<br/>}</span></pre><p id="b8ae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意，就像文档一样，文件夹的标识是其完全限定的<code class="du kx ky kz la b">DOCUMENT_ID</code>标识。</p><p id="967d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">注意</strong>:不幸的是，用户界面似乎没有显示文件夹的身份。这意味着如果我们需要它的值，我们需要执行一个API查询来了解它的身份。</p><h1 id="c4de" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">安全性</h1><p id="d4c8" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">由于Document AI Warehouse充当了所有文档的容器，所以您需要确保安全性。这意味着只有经过适当授权的人员才能执行任务。</p><p id="6fae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们要做的第一件事是尝试使用API创建一个文档，提供一个不被允许的身份。我们会发现:</p><pre class="kt ku kv kw fd me la mf bn mg mh bi"><span id="c907" class="mi jq hi la b be mj mk l ml mm">{<br/>  "error": {<br/>    "code": 403,<br/>    "message": "End user user:user1@kolban.altostrat.com does not have permission contentwarehouse.documents.create.",<br/>    "status": "PERMISSION_DENIED"<br/>  }<br/>}</span></pre><p id="2741" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们提供文档AI仓库的实例时，我们可以选择如何应用安全性。核心是两种模式。第一种叫做“普遍准入”。当我们利用Universal Access时，处理文档的能力由与这些文档交互的用户所拥有的IAM权限控制。</p><p id="61cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是可用的IAM权限:</p><ul class=""><li id="fdcc" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">角色/内容仓库.文档创建者</li><li id="2116" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">角色/content warehouse . document editor</li><li id="fe27" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">roles/content warehouse . document admin</li><li id="c8ff" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">角色/content warehouse . document viewer</li><li id="99fb" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">角色/content warehouse . documentschemaviewer</li></ul><p id="c220" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用通用访问模型时，用户被授予文档AI仓库的<em class="ly">整体</em>的这些角色。这意味着我们不能限制用户查看某些文档而不查看其他文档。要么全有，要么全无。</p><p id="c98a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第二种模式称为“文档级访问”。使用这种技术，我们假设调用应用程序拥有使用文档AI Warehouse的全部特权，并且作为请求的<em class="ly">有效负载</em>的一部分，应用程序运行所代表的用户的身份被传输。例如，谷歌为文档人工智能仓库提供的用户界面<em class="ly">就是</em>一个用户与之交互的基于网络的应用程序。该应用程序以文档AI仓库特权身份运行。当实际用户与应用程序交互时，假设应用程序已经(向自己)证明了用户就是他们所声称的那个人。当应用程序向文档AI Warehouse发出创建文档或列出文档或获取文档内容的请求时，应用程序会将用户的身份作为请求的一部分发送出去。实际上，用户身份是请求的一个参数。文件AI仓库现在根据自己的决定决定是否允许这个请求。</p><p id="5179" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用这种技术，我们可以逐个文档地指定明确的权限。允许的权限包括:</p><ul class=""><li id="1c20" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">文档编辑器</li><li id="51da" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">文档管理</li><li id="37ae" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">文档查看器</li></ul><p id="b0b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以为整个文档AI仓库(项目级)的用户授予这些权限，或者逐个文档地授予这些权限。</p><p id="3238" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">还有一个额外的权限…文档创建者。这只能在项目级别设置。</p><p id="e75e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们看一个例子。考虑两个新用户(用户1和用户2)。用户1应该能够创建文档，用户2应该能够查看文档。最初，两个用户都没有任何权限。如果任一用户尝试创建文档，我们将看到:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/0f617c80c71031323e6ad7442f7cc24f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Uar1T4gcA9J9WMSm"/></div></div></figure><p id="17bb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在文档AI Warehouse admin选项卡中，我们可以切换到Access并为user1创建项目级权限。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/56046d9ec26961ee9a63cd1ee194bc09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eWWUlTk9ZNsSFxDz"/></div></div></figure><p id="85c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意:更改权限后，可能需要几分钟时间将更改传播到所有后端服务器。</p><p id="60a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当用户创建文档时，他们会立即被授予对该文档的文档管理权限:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/face82e40fcf02486591f610edcbd44c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UxSAzX73JKtYhNFQ"/></div></div></figure><p id="2ff7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这意味着一旦创建，他们就可以编辑、查看和删除它。</p><p id="294b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们现在看用户2，我们会发现他们什么也看不见。这是意料之中的，因为他们没有任何权限。我们可以明确授予他们查看文档的权限。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/16085e15185d6497f9f129fc87025e91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8d3VjK1HnntiwZUK"/></div></div></figure><p id="5c73" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">之后，他们可以查看文档:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/c4e7765f3e474e442b8effbfa8943243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MYKXOyroeagvvVt2"/></div></div></figure><p id="98cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果他们试图编辑文档的属性，他们将被拒绝，因为他们没有被授予编辑权限。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/6113a4adbe2128a76d3eac3ec976e449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oTnlcXb7LbXD7O1V"/></div></div></figure><p id="b040" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从API的角度来看，我们可以使用<a class="ae jo" href="https://cloud.google.com/document-warehouse/docs/reference/rest/v1/projects/fetchAcl" rel="noopener ugc nofollow" target="_blank">这个</a> API在项目级别或者为特定文档检索ACL。类似地，我们有<a class="ae jo" href="https://cloud.google.com/document-warehouse/docs/reference/rest/v1/projects/setAcl" rel="noopener ugc nofollow" target="_blank">另一个</a> API来设置ACL。</p><h1 id="8a11" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">与DocAI集成</h1><p id="6032" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">文档的价值在于，我们作为人，可以阅读它并从中提取信息。例如，如果我给你看这张发票:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/967158f2a4a0089abb8b3b071908da09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VU0F4HeCbPWzXqrB"/></div></div></figure><p id="b5c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你能告诉我:</p><ul class=""><li id="e0cc" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">应支付的金额？</li><li id="7ca4" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">发票是什么时候开的？</li><li id="0443" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">供应商如何识别发票？</li><li id="72b2" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">谁提供服务/产品？</li></ul><p id="82a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">答案应该是肯定的，对你个人来说很简单，但对计算机程序来说，一张发票的图像只是像素，或者充其量是一串单词和数字。如果我们回顾一下我们所知道的关于文档AI Warehouse的知识，我们会发现我们可以使用文档的属性值来搜索文档。这些属性(到目前为止)是在文档被摄取时由用户提供的。现在，我们将看到一个附加功能，它允许文档AI Warehouse自动填充属性，并解锁使用文档本身的文本作为搜索内容的功能。</p><p id="85ec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是通过将文档人工智能仓库与谷歌云中的文档人工智能功能配对来实现的。Document AI (DocAI)是一种服务，它将文档作为输入，并返回其内容的结构化表示(JSON)。DocAI使用一个<em class="ly">解析器</em>来解释文档的内容并提取找到的字段。这与简单的光学字符识别(OCR)截然不同，OCR仅仅返回找到的文本斑点。相反，结构化文档包含键/值对，其中键与文档相关，值是在文档中检测到的。例如:</p><ul class=""><li id="c9fd" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">应付金额:335.00美元</li><li id="e84c" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">发行日期:2022年12月12日</li><li id="e547" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">发票编号:12–545678</li><li id="8b86" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">提供商:开发商公司</li></ul><p id="a3e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，这些提取的实体可以用作搜索的属性。</p><p id="0ae4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">总之，一个摄取了<em class="ly">而没有</em>与文档AI配对的文档允许我们只搜索摄取文档时提供的属性值。</p><p id="fe9d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了将DocAI和Document AI Warehouse配对在一起，我们首先通过DocAI传递文档，DocAI返回文档的结构化(JSON)表示。接下来，当我们将文档接收到文档AI仓库中时，我们<em class="ly">另外</em>提供DocAI的输出。Document AI Warehouse现在将看到DocAI输出的文档、属性<em class="ly">和</em>，并允许我们进行更深入的搜索。</p><p id="046f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们结合上下文来看这个问题:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es mv"><img src="../Images/ff8a849e60d206ba0c61f72d76a28bf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/0*lIl9FO9BEa70OesX"/></div></figure><ol class=""><li id="4366" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mn lo lp lq bi translated">-应用程序读取文档并将其发送到文档AI进行处理。</li><li id="bc51" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn mn lo lp lq bi translated">- Document AI解析文档并提取结构化表示，然后返回给应用程序。</li><li id="1ee3" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn mn lo lp lq bi translated">-应用程序调用文档AI仓库来摄取文档<strong class="is hj">和</strong>，还提供从文档AI返回的结构化表示。</li></ol><p id="35f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此时，文档仓库已经有了文档<strong class="is hj">和</strong>关于文档内容的大量知识。</p><p id="7702" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们将注意力转向如何完成这些任务的实际<em class="ly">机制</em>。为了使用Document AI，我们需要提供一个知道如何解析特定类别文档的解析器。一个例子是Google提供的发票解析器。这将返回一个解析器标识符。</p><p id="76b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从那里，我们可以调用<a class="ae jo" href="https://cloud.google.com/document-ai/docs/reference/rest/v1/projects.locations.processors/process" rel="noopener ugc nofollow" target="_blank">方法:processors . process | Document AI | Google Cloud</a>。</p><p id="c8ed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将把原始文档作为输入，并返回给我们一个表示文档解析的JSON对象。接下来，我们可以将此插入到文档AI仓库中的文档创建中。文档AI仓库提供<a class="ae jo" href="https://cloud.google.com/document-warehouse/docs/reference/rest/v1/projects.locations.documents/create" rel="noopener ugc nofollow" target="_blank">方法:projects . locations . documents . create |文档AI仓库| Google Cloud </a>。如果我们仔细查看可以传递给这个API调用的参数，我们会发现一个名为<code class="du kx ky kz la b">document.cloudAiDocument</code>的参数。这个字段<em class="ly">正是</em>文档AI的输出。</p><p id="fe17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面显示了我们创建文档AI仓库的输入参数</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es mw"><img src="../Images/5ce24ed6eb16fd057d94f30a8a53b9b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*usrBIAHlBme6lEKD"/></div></figure><p id="1fdf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">蓝色区域表示文档AI仓库参数，其中包括黄色区域，但该组数据是嵌入在文档AI仓库请求中的文档AI的直接输出。</p><p id="1537" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当Doc AI解析器输出附加到摄取的文档时，我们可以启用“AI视图”滑块。这显示了Doc AI输出结果的可视化。我们看到了被发现的Doc AI实体以及它们在原始文档中的位置。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/7d46ff0fde89efae317f2b821a0e93f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*42jqL1M0rrDgWLqW"/></div></div></figure><p id="5358" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最重要的是，在文档中发现的所有文本现在都符合搜索条件。</p><p id="6a6f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们将使用UI浏览一个示例。</p><p id="572c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们必须做一点设置。在GCP控制台中，转到Doc AI页面:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/2c0db5f1b1d59a4bacba6bea155de4cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1Ds0zV-1GTyuI9Ef"/></div></div></figure><p id="350a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">单击资源管理器处理器。可能会要求您启用云文档AI API:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mx"><img src="../Images/9614ea5371ee87a31cd317d26dffcd00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fkfhRrR4kfUjMfvR"/></div></div></figure><p id="21d1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在一组可用的单据AI处理器中，找到发票处理器:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es my"><img src="../Images/fe194f616ce331f654af9c769259baa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uB-5pE4X-EWKo9oG"/></div></div></figure><p id="421c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击它并创建一个新的处理器。将其命名为“发票”:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/ab0dfc60721462f4b8d570b298f54c8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*50HcxqoyAFuVr2F_"/></div></div></figure><p id="8d94" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在结果中，我们将创建一个解析器。注意它的ID值:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/de3fb401473c29adf064d1090b202206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xvnaUvokhCUvrUzU"/></div></div></figure><p id="ac65" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上例中是<code class="du kx ky kz la b">40f6e41d583a90d1</code>。</p><p id="0e1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">回到文档人工智能仓库界面，访问管理界面，点击文档人工智能处理器。</p><p id="2fc7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加新内容时的时钟:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/331fb7a689f8a908a8e15b0a5d5eedfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7dxbKTfM1PVQo3GM"/></div></div></figure><p id="cd96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在出现的屏幕中，我们输入模式ID、处理器名称和处理器ID的值:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/803da501c3ed8a9bc775b9ab0d603c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SInVI2NtaKcUlh-R"/></div></div></figure><p id="eb99" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们现在设置好了。返回主页(搜索)并添加新的发票文档:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/f134f7422bd548d3a6770f38210ffacd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5L56NtzU6TSXeGFr"/></div></div></figure><p id="5c0c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意，我们现在可以选择一个Doc AI处理器。</p><p id="2086" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们可以查看文档并切换其“人工智能视图”滑块:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/00ffd2900943d93f236547c586b9a242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ihavzGrnXg1roLfc"/></div></div></figure><p id="120f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">…文档AI仓库和文档AI就是这样集成的。</p><p id="7e09" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们看看文档AI仓库文档上的DocAI提取实体和属性之间的关系。当我们用DocAI解析文档时，实体被从文档中提取出来并以JSON结构返回。这些实体的名称是固定的，取决于所使用的解析器的类型。例如，发票解析器知道被称为:</p><ul class=""><li id="e9fe" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">供应商名称</li><li id="3840" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">发票标识</li><li id="3d93" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">发票日期</li><li id="f60f" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">供应商_电子邮件</li><li id="d06a" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">…更多</li></ul><p id="ac25" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们定义一个文档AI仓库模式时，我们在该模式上定义了充当文档元数据的属性。文档AI仓库不使用DocAI解析输出中提供的实体。例如，如果一个DocAI解析产生了一个supplier_name实体的值(例如“Developer Company”)，那么这个值对于文档AI Warehouse来说就不是特别清楚了。我们必须做的是将DocAI实体值的值复制到一个文档AI仓库文档属性中。只有这样，它才会变得有用。当我们的应用程序接收文档时，我们可以通过从DocAI返回的JSON中提取实体值并将其复制到文档的所需属性中来手动执行这项任务。然而，还有更好的方法。当我们接收一个文档时，我们可以提供以下参数:</p><ul class=""><li id="2a1f" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">cloudaidocumentoption . enableentitiesconvertions</li><li id="5999" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">cloudaidocumentoption . customizedentitiesproperties conversions</li></ul><p id="0050" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">注</strong>:在和开发的聊天中，他们告诉我这些是要弃用的。</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="nb nc l"/></div></figure><h1 id="7808" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">参考</h1><ul class=""><li id="dad6" class="li lj hi is b it kn ix ko jb nd jf ne jj nf jn ln lo lp lq bi translated">本文的GIT项目可以在<a class="ae jo" href="https://github.com/kolban-google/doc-ai-warehouse" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</li><li id="b2a1" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated"><a class="ae jo" href="https://cloud.google.com/document-ai-warehouse" rel="noopener ugc nofollow" target="_blank">文档艾仓库首页</a></li></ul><h1 id="15ce" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">信用</h1><ul class=""><li id="23b3" class="li lj hi is b it kn ix ko jb nd jf ne jj nf jn ln lo lp lq bi translated">Blender image: <a class="ae jo" href="https://www.blendswap.com/blend/25187" rel="noopener ugc nofollow" target="_blank"> pujiyanto </a></li></ul></div></div>    
</body>
</html>