<html>
<head>
<title>Interpreting BigQuery BI Engine Metrics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解释BigQuery BI引擎指标</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/interpreting-bigquery-bi-engine-metrics-1f6b3d34560e?source=collection_archive---------1-----------------------#2022-12-10">https://medium.com/google-cloud/interpreting-bigquery-bi-engine-metrics-1f6b3d34560e?source=collection_archive---------1-----------------------#2022-12-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="3cdf" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">BI引擎是什么？</h1><p id="c9db" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">BigQuery BI Engine是一种快速的内存分析服务，通过智能缓存最常用的数据来加速BigQuery中的许多SQL查询。BI Engine可以加速来自任何来源的SQL查询，包括由数据可视化工具编写的查询，并且可以管理缓存表以进行持续优化。</p><p id="d99d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">了解更多:<a class="ae kg" href="https://cloud.google.com/bigquery/docs/bi-engine-intro" rel="noopener ugc nofollow" target="_blank">什么是BI引擎？| BigQuery |谷歌云</a></p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es kh"><img src="../Images/226ce692bd47dfbf90e351d1565bbfc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/0*e414CR-GKbj-IVDS"/></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">BigQuery BI引擎</figcaption></figure><p id="ed20" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">BI引擎提供了以下优势</p><ol class=""><li id="09b5" class="kt ku hi jf b jg kb jk kc jo kv js kw jw kx ka ky kz la lb bi translated">内存智能缓存可加速分析查询</li><li id="6ca7" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated">为优化良好的查询提供更高的吞吐量</li><li id="aa72" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated">根据使用情形的需要，轻松手动扩展容量</li></ol><h1 id="df3e" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">保留双引擎容量</h1><p id="a0c5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">只需点击一个按钮，就可以非常简单地保留或编辑BI引擎容量。</p><p id="a812" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">保留附加到创建保留时确定的项目。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lh"><img src="../Images/210d5b5e79aa07afbaf5c6d2da08f253.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/0*YhidEJVeok2QXwss"/></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">保留双引擎容量</figcaption></figure><p id="7337" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">欲了解更多信息:<a class="ae kg" href="https://cloud.google.com/bigquery/docs/bi-engine-reserve-capacity#create_a_reservation" rel="noopener ugc nofollow" target="_blank">保留BI引擎容量| BigQuery |谷歌云</a></p><p id="96ec" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">一旦我们保留了BI引擎的能力，项目中的查询就开始通过BI引擎加速。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/a7bf8b7d1d3d89859e9119948ad9e512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ih86_VqWsR7jaen3"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">通过BI引擎加速查询</figcaption></figure><p id="1b56" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">运行SQL查询后，我们发现BI引擎能够根据查询作业信息加速查询。</p><p id="471f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">但是如何才能更深层次的理解BI引擎的影响呢？</p><h1 id="e241" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">解释BI引擎利用率</h1><p id="51e1" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以使用以下方法来分析和解释BI发动机的使用和性能。</p><h2 id="24ee" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">1.监控仪表板</h2><p id="af0a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以使用监控仪表板来更好地了解BI引擎的利用率。</p><p id="ff21" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">例如:我们可以在云监控中创建一个图表，绘制:</p><pre class="ki kj kk kl fd mb mc md bn me mf bi"><span id="66bd" class="mg ig hi mc b be mh mi l mj mk">bigquerybiengine.googleapis.com/reservation/used_bytes over the <br/>bigquerybiengine.googleapis.com/reservation/total_bytes.</span></pre><p id="a1d8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">更多信息请参考- <a class="ae kg" href="https://cloud.google.com/bigquery/docs/bi-engine-monitor#acceleration_statistics" rel="noopener ugc nofollow" target="_blank">用云监控| BigQuery | Google Cloud </a>监控BI引擎</p><p id="b958" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">有关可用谷歌云指标的完整列表，请参见<a class="ae kg" href="https://cloud.google.com/monitoring/api/metrics_gcp#gcp-bigquerybiengine" rel="noopener ugc nofollow" target="_blank">谷歌云指标</a>。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/fce558446de127cf6f3407170457bcd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JzP9yeO3wvLq3Clr"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">BI引擎仪表板示例</figcaption></figure><p id="2e5f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">由此得出的见解有助于:</p><ul class=""><li id="ba8a" class="kt ku hi jf b jg kb jk kc jo kv js kw jw kx ka ml kz la lb bi translated">检查一个Google云项目中使用的BI引擎缓存总容量</li><li id="6e16" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ml kz la lb bi translated">根据利用模式分析所需的容量，并相应地进行扩展</li><li id="3e5b" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ml kz la lb bi translated">了解每个表的缓存使用情况。此指标显示每个区域报告使用情况的前N名表。更多信息详情<a class="ae kg" href="https://cloud.google.com/bigquery/docs/bi-engine-monitor#:~:text=BI%20Engine%20Top%20Tables%20Cached%20Bytes" rel="noopener ugc nofollow" target="_blank">请点击</a></li><li id="eca8" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ml kz la lb bi translated">分析在首选表中添加任何表的需求</li></ul><h2 id="0b5c" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">发信号</h2><p id="f4b0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们为从BQ和其他BI应用程序运行SQL查询的项目和位置预留了BI引擎容量。虽然BI引擎利用率预计会有波动，但我们可能希望主动监控由于以下原因在相当长的时间内观察到高利用率的峰值:</p><ul class=""><li id="9ae8" class="kt ku hi jf b jg kb jk kc jo kv js kw jw kx ka ml kz la lb bi translated">BI引擎利用率超过90%时进行监控并发出警报。</li><li id="6f4d" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ml kz la lb bi translated">特定表的预订利用率大大低于或高于预期值。</li></ul><p id="c0e0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">为了确保团队在BI引擎利用率持续超过如此高的阈值时得到通知，我们可以创建以下警报策略:</p><ol class=""><li id="ade9" class="kt ku hi jf b jg kb jk kc jo kv js kw jw kx ka ky kz la lb bi translated">我们可以针对特定项目或位置创建警报，以监控超出或低于特定值的利用率阈值。</li></ol><p id="0089" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在下面的示例中，我们为度量添加了警报:<em class="mm"> BigQuery项目—预留已用字节&gt; 90% </em></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/c2207ac3b7670950bef23be98d1fbf3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BdMUn7C-G5q0-Gey"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">如果BI引擎预留超过90%，则设置警报</figcaption></figure><p id="e354" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">2.如果我们希望监控利用率阈值高于/低于某个特定值或不在前N个值中，我们可以在特定的表上创建警报，以指示和分析利用率阈值没有按预期加速的原因。</p><p id="5e5f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在下面的示例中，我们为度量的特定表添加了预警:<em class="mm"> BigQuery项目—按表列出的预留使用字节数—度量缺失</em></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/e10ca7a5e26179b421aacf7250e7167f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tl8sWyKzWhjonNfF"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">特定表上的警报集</figcaption></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/5a44269846eb801033fc92d9b59c2d90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*o2ugiwCERbdtKR6J"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">如果表使用的预留在特定持续时间内没有数据，则在特定表上设置预警</figcaption></figure><h2 id="20bd" class="ln ig hi bd ih lo lp lq il lr ls lt ip jo lu lv it js lw lx ix jw ly lz jb ma bi translated">2.信息模式</h2><p id="b904" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们还可以从INFORMATION_SCHEMA中查看<a class="ae kg" href="https://cloud.google.com/bigquery/docs/bi-engine-monitor#acceleration_statistics" rel="noopener ugc nofollow" target="_blank">加速统计数据</a>。为了更好地理解BI引擎加速的原因，请利用INFORMATION_SCHEMA中的统计数据。</p><p id="af30" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">更多详情请参考:<a class="ae kg" href="https://cloud.google.com/bigquery/docs/bi-engine-monitor#acceleration_statistics_in_information_schema" rel="noopener ugc nofollow" target="_blank">用云监控| BigQuery | Google Cloud </a>监控BI引擎</p><p id="085a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">以下是一些原因代码的示例-</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/d08ed35b7db6be23e9a454d85abf66a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ioQq0ZBGYX0Scc0L"/></div></div></figure><h1 id="2924" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">有用的链接</h1><p id="e7c0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">以下是一些有用的资源，您可以使用这些资源了解更多有关BI Engine的信息。</p><p id="37bf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">定价:</strong> <a class="ae kg" href="https://cloud.google.com/bigquery/pricing#bi_engine_pricing" rel="noopener ugc nofollow" target="_blank">定价| BigQuery:云数据仓库</a></p><p id="941e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">谷歌公共文档:</strong></p><p id="08e4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" href="https://cloud.google.com/bigquery/docs/bi-engine-optimized-sql#unsupported-features" rel="noopener ugc nofollow" target="_blank">优化的SQL函数和运算符| BigQuery | Google Cloud </a></p><p id="b610" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" href="https://cloud.google.com/bigquery/docs/reference/reservations/rest/v1/projects.locations/updateBiReservation" rel="noopener ugc nofollow" target="_blank">方法:projects . locations . updatebireservation | big query | Google Cloud</a></p><p id="1d9a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">谷歌云博客:</strong></p><p id="ad7b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" href="https://cloud.google.com/blog/products/data-analytics/faster-queries-with-bigquery-bi-engine" rel="noopener ugc nofollow" target="_blank">使用BigQuery BI引擎加速你的外观仪表盘|谷歌云博客</a></p><p id="8361" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">媒体博客:</strong></p><p id="ab73" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" rel="noopener" href="/google-cloud/ensure-the-right-bigquery-bi-engine-capacity-with-cloud-workflows-orchestration-lowering-your-9e2634c84a82">通过BI引擎容量编排减少您的BigQuery账单|作者:莫顿·科多克| GDE |谷歌云</a></p><p id="88e4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" rel="noopener" href="/google-cloud/google-bi-engine-statistics-dashboard-d210de6c5295"> Google BI引擎统计仪表板| Philipp Heinrich | Google Cloud-Community | Medium</a></p></div></div>    
</body>
</html>