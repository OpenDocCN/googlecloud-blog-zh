<html>
<head>
<title>Enabling Teradata Connector for Hadoop (TDCH) on Google Cloud Dataproc Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Google Cloud Dataproc集群上为Hadoop (TDCH)启用Teradata Connector</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/enabling-teradata-connector-for-hadoop-tdch-on-google-cloud-dataproc-cluster-8278017237ec?source=collection_archive---------1-----------------------#2021-06-30">https://medium.com/google-cloud/enabling-teradata-connector-for-hadoop-tdch-on-google-cloud-dataproc-cluster-8278017237ec?source=collection_archive---------1-----------------------#2021-06-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4bf9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">曼西·马哈拉纳，迪内什·希利皮蒂雅格(Teradata)</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/89b4a4b085c5a3695ec44d8654a96f42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U_2KzcHZAtHTBVZK"/></div></div></figure><p id="e9c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谷歌云<a class="ae jr" href="https://cloud.google.com/dataproc" rel="noopener ugc nofollow" target="_blank"> Dataproc </a>是一个完全托管的谷歌云服务，让你利用开源工具，如Apache Hadoop、Apache Spark、Presto和许多其他工具进行批处理、查询、流和机器学习。一个常见的用例是能够将Dataproc集群连接到一个Teradata数据库，并根据用例促进少量到大量数据的移动。在<a class="ae jr" href="https://www.teradata.com/Products/Ecosystem-Management/IntelliSphere/QueryGrid" rel="noopener ugc nofollow" target="_blank"> Teradata QueryGrid </a>数据连接功能套件下，Teradata为Dataproc提供了多种连接选项，包括<a class="ae jr" href="https://downloads.teradata.com/download/connectivity/teradata-connector-for-hadoop-tdch-command-line-edition" rel="noopener ugc nofollow" target="_blank">Teradata Connector for Hadoop(TDCH)</a>，这将是本文的重点。</p><p id="568a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jr" href="https://downloads.teradata.com/download/connectivity/teradata-connector-for-hadoop-tdch-command-line-edition" rel="noopener ugc nofollow" target="_blank"> TDCH </a>是一款基于Hadoop的数据集成工具，支持Teradata vantage系统和各种Hadoop生态系统组件之间的高性能并行双向数据移动和转换。它为客户提供了一套丰富的可扩展内置处理能力，以便在数据量达到峰值时执行复杂的数据集成流程。</p><p id="d2b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇博文中，我们将学习如何在Dataproc上安装、配置和使用TDCH软件，同时强调兼容性考虑和最佳实践。</p><h2 id="f21a" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">版本</h2><p id="ce51" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">作为先决条件，了解TDCH和Dataproc的支持版本是很重要的。为了支持多种Hadoop版本，TDCH有5个活跃的分支— 1.5.x、1.6.x、1.7.x、1.8.x和1.9.x</p><p id="fd51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中只有两个分支适用于Dataproc，如下所示。</p><p id="5c2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">TDCH 1.5.12目前已经过测试和认证，可用于:</p><ul class=""><li id="8617" class="ks kt hi ih b ii ij im in iq ku iu kv iy kw jc kx ky kz la bi translated">Google Cloud data proc 1.4 . x(Debian 10，Hadoop 2.9)</li><li id="02aa" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">谷歌云Dataproc 1.4.x (Ubuntu 18.04 LTS，Hadoop 2.9)</li><li id="89c4" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">Google Cloud data proc 1.5 . x(CentOS 8，Hadoop 2.10)</li><li id="8937" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">Google Cloud data proc 1.5 . x(Debian 10，Hadoop 2.10)</li><li id="057e" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">谷歌云Dataproc 1.5.x (Ubuntu 18.04 LTS，Hadoop 2.10)</li></ul><p id="cc33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">TDCH 1.9.0目前已经过测试和认证，可用于:</p><ul class=""><li id="6ed1" class="ks kt hi ih b ii ij im in iq ku iu kv iy kw jc kx ky kz la bi translated">Google Cloud data proc 2.0 . x(CentOS 8，Hadoop 3.2.2)</li><li id="6403" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">谷歌云Dataproc 2.0.x (Debian 10，Hadoop 3.2.2)</li><li id="68c9" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">谷歌云Dataproc 2.0.x (Ubuntu 18.04 LTS，Hadoop 3.2.2)</li></ul><p id="6155" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确定兼容性的最佳方式是阅读您想要安装的版本的自述文件中的“Google Cloud Dataproc建议”部分，此处提供<a class="ae jr" href="https://downloads.teradata.com/download/connectivity/teradata-connector-for-hadoop-command-line-edition" rel="noopener ugc nofollow" target="_blank">此处提供</a>，您也可以参考SUPPORTLIST链接了解更多信息。</p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h2 id="bc18" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">安装说明</h2><p id="4a1f" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">注意:TDCH需要安装在Dataproc 1.x集群的所有节点上。这个要求只是Dataproc 1.x独有的。</p><ol class=""><li id="a778" class="ks kt hi ih b ii ij im in iq ku iu kv iy kw jc ln ky kz la bi translated">从<strong class="ih hj"> </strong> <a class="ae jr" href="https://downloads.teradata.com/download/connectivity/teradata-connector-for-hadoop-command-line-edition" rel="noopener ugc nofollow" target="_blank">这里</a>下载你要安装版本的Teradata connector rpm文件。</li></ol><p id="f82e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.对于Debian/Ubuntu来说，</p><p id="33ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">&gt;使用以下命令在Debian/Ubuntu平台上安装TDCH rpm文件:<br/>$ sudo apt-get install alien<br/>$ sudo alien teradata-connector-&lt;version&gt;…。每分钟转数</p><p id="e656" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">&gt;复制上面生成的。deb文件(TERADATA_CONNECTOR_FILE)到GCS存储桶位置(DOWNLOAD_LOCATION的值)</p><p id="db3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.对于CentOS来说，</p><p id="3892" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">&gt;将上述rpm文件(TERADATA_CONNECTOR_FILE)复制到一个GCS桶位置(DOWNLOAD_LOCATION的值)</p><p id="ccf0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.将初始化动作脚本从<a class="ae jr" href="https://github.com/mansim07/initialization-actions/blob/master/tdch/tdch.sh" rel="noopener ugc nofollow" target="_blank">复制到GCS位置。这只是一个示例，修改它以满足您的需要。</a></p><p id="4235" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.使用以下命令创建Dataproc集群:</p><p id="b808" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于Dataproc 1.x</p><pre class="jg jh ji jj fd lo lp lq lr aw ls bi"><span id="4c7e" class="js jt hi lp b fi lt lu l lv lw">REGION=&lt;region&gt;<br/>CLUSTER=&lt;cluster_name&gt;</span><span id="bbf8" class="js jt hi lp b fi lx lu l lv lw">gcloud dataproc clusters create<strong class="lp hj"> </strong>${CLUSTER}<strong class="lp hj"> \<em class="ly"><br/></em></strong><em class="ly">--</em>region=${REGION}<strong class="lp hj"><em class="ly"> </em>\<em class="ly"><br/></em></strong>--initialization-actions=gs://<strong class="lp hj"><em class="ly">&lt;bucket-name-with-path&gt;</em></strong>/tdch.sh<strong class="lp hj"><em class="ly"> </em>\<em class="ly"><br/></em></strong>--enable-component-gateway <strong class="lp hj">\</strong><br/><em class="ly">--</em>metadata=TERADATA_CONNECTOR_FILE="&lt;<strong class="lp hj"><em class="ly">name-of-deb-or-rpm-file</em></strong><em class="ly">&gt;"</em><strong class="lp hj"><em class="ly"> </em>\<br/></strong>--metadata=DOWNLOAD_LOCATION="&lt;<strong class="lp hj"><em class="ly">gcs-bucket-path-download-location&gt;" </em>\<br/></strong>--metadata=LIB_TO_BE_ADDED="file:/usr/lib/tdch/<em class="ly">&lt;</em><strong class="lp hj"><em class="ly">version</em></strong><em class="ly">&gt;</em>/lib<strong class="lp hj"><em class="ly">" </em>\<em class="ly"><br/></em></strong>--metadata=TEZ_XML_FILE="/etc/tez/conf/tez-site.xml<strong class="lp hj"><em class="ly">"</em></strong></span></pre><p id="ef93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于Dataproc 2.x和更高版本</p><pre class="jg jh ji jj fd lo lp lq lr aw ls bi"><span id="656c" class="js jt hi lp b fi lt lu l lv lw">REGION=&lt;region&gt;<br/>CLUSTER=&lt;cluster_name&gt;</span><span id="80db" class="js jt hi lp b fi lx lu l lv lw">gcloud dataproc clusters create<strong class="lp hj"> </strong>${CLUSTER}<strong class="lp hj"> \<em class="ly"><br/></em></strong><em class="ly">--</em>region=${REGION}<strong class="lp hj"><em class="ly"> </em>\<em class="ly"><br/></em></strong>--initialization-actions=gs://<strong class="lp hj"><em class="ly">&lt;bucket-name-with-path&gt;</em></strong>/tdch.sh<strong class="lp hj"><em class="ly"> </em>\<em class="ly"><br/></em></strong>--enable-component-gateway <strong class="lp hj">\</strong><br/><em class="ly">--</em>metadata=TERADATA_CONNECTOR_FILE="&lt;<strong class="lp hj"><em class="ly">name-of-deb-or-rpm-file</em></strong><em class="ly">&gt;"</em><strong class="lp hj"><em class="ly"> </em>\<br/></strong>--metadata=DOWNLOAD_LOCATION="&lt;<strong class="lp hj"><em class="ly">gcs-bucket-path-download-location&gt;"</em></strong></span></pre><p id="5ad6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要了解如何在Dataproc中使用初始化动作，请点击这里的<a class="ae jr" href="https://cloud.google.com/dataproc/docs/concepts/configuring-clusters/init-actions" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="4ded" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以上步骤主要集中在使用初始化操作创建Dataproc集群期间的TDCH安装上。创建群集后，您还可以运行步骤1、2或3(取决于操作系统版本)来手动安装TDCH。</p><p id="819c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注:</strong></p><ul class=""><li id="309e" class="ks kt hi ih b ii ij im in iq ku iu kv iy kw jc kx ky kz la bi translated">使用alien将rpm转换为deb的第2步可以在外部完成(从远程主机)。主机可以是Windows (WSL)/Mac/Linux等。</li><li id="5954" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">alien软件包可能并非在所有平台上都可用，因此在选择合适的外部主机平台时请谨慎。</li><li id="2720" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">如果希望转换更加自动化，而不是将rpm转换为deb并将deb文件上传到GCS bucket，您可以直接将rpm上传到GCS bucket，并通过修改脚本来满足您的需求，让初始化脚本负责基于OS的rpm到deb的转换。</li></ul></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h2 id="cbf3" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated"><strong class="ak">在Dataproc上执行TDCH作业</strong></h2><ol class=""><li id="2359" class="ks kt hi ih b ii kn im ko iq lz iu ma iy mb jc ln ky kz la bi translated">第一步是在作业提交者节点上设置环境变量。依赖的jar版本应该与Dataproc集群上可用的版本一致。</li></ol><blockquote class="mc md me"><p id="8d3c" class="if ig ly ih b ii ij ik il im in io ip mf ir is it mg iv iw ix mh iz ja jb jc hb bi translated">注意:<strong class="ih hj">【文件://】</strong><em class="hi">前缀仅在从远程主机提交作业时需要。</em></p></blockquote><pre class="jg jh ji jj fd lo lp lq lr aw ls bi"><span id="8f3c" class="js jt hi lp b fi lt lu l lv lw">export TDCH_JAR=/usr/lib/tdch/&lt;<strong class="lp hj"><em class="ly">version</em></strong>&gt;/lib/teradata-connector-&lt;<strong class="lp hj"><em class="ly">version</em></strong>&gt;.jar</span><span id="57cb" class="js jt hi lp b fi lx lu l lv lw">export HADOOP_HOME=<strong class="lp hj"><em class="ly">[file://]</em></strong>/usr/lib/hadoop</span><span id="9ef0" class="js jt hi lp b fi lx lu l lv lw">export HIVE_HOME=<strong class="lp hj"><em class="ly">[file://]</em></strong>/usr/lib/hive</span><span id="68c1" class="js jt hi lp b fi lx lu l lv lw">export HCAT_HOME=<strong class="lp hj"><em class="ly">[file://]</em></strong>/usr/lib/hive-hcatalog</span><span id="d4ae" class="js jt hi lp b fi lx lu l lv lw">export HADOOP_CLASSPATH=$HIVE_HOME/conf:/etc/tez/conf:$HIVE_HOME/lib/antlr-runtime-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/commons-dbcp-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/commons-pool-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/datanucleus-core-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/datanucleus-rdbms-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/hive-cli-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/hive-exec-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/hive-metastore-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/jdo-api-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/libfb303-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/libthrift-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HIVE_HOME/lib/lz4-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HCAT_HOME/share/hcatalog/hive-hcatalog-core-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:$HADOOP_HOME/lib/hadoop-lzo-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:<strong class="lp hj"><em class="ly">[file://]</em></strong>/usr/lib/tdch/&lt;<strong class="lp hj"><em class="ly">version</em></strong>&gt;/lib/tdgssconfig.jar:<strong class="lp hj"><em class="ly">[file://]</em></strong>/usr/lib/tdch/&lt;<strong class="lp hj"><em class="ly">version</em></strong>&gt;/lib/terajdbc4.jar:<strong class="lp hj"><em class="ly">[file://]</em></strong>/usr/lib/spark/jars/avro-mapred-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;-hadoop2.jar:<strong class="lp hj"><em class="ly">[file://]</em></strong>/usr/lib/spark/jars/paranamer-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar:<strong class="lp hj"><em class="ly">[file://]</em></strong>/usr/lib/tez/tez-api-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar</span><span id="6b5a" class="js jt hi lp b fi lx lu l lv lw">export LIB_JARS=$HIVE_HOME/lib/hive-cli-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar,$HIVE_HOME/lib/hive-exec-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar,$HIVE_HOME/lib/hive-metastore-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar,$HIVE_HOME/lib/libfb303-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar,$HIVE_HOME/lib/libthrift-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar,$HIVE_HOME/lib/jdo2-api-&lt;<strong class="lp hj"><em class="ly">version-on-cluster</em></strong>&gt;.jar,<strong class="lp hj"><em class="ly">[file://]</em></strong>/usr/lib/tdch/&lt;<strong class="lp hj"><em class="ly">version</em></strong>&gt;/lib/tdgssconfig.jar,<strong class="lp hj"><em class="ly">[file://]</em></strong>/usr/lib/tdch/&lt;<strong class="lp hj"><em class="ly">version</em></strong>&gt;/lib/terajdbc4.jar</span></pre><p id="705c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，根据您的需求，可能需要其他依赖库。您可以在集群上找到它们，如果它们是运行时依赖项，可以将它们添加到HADOOP_CLASSPATH或LIB_JAR中。</p><p id="2027" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.提交TDCH作业的示例命令</p><p id="9b74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Teradata Connector for Hadoop支持以下数据传输方法:</p><ul class=""><li id="ccbc" class="ks kt hi ih b ii ij im in iq ku iu kv iy kw jc kx ky kz la bi translated">连接器导入工具(Teradata到HDFS/Hive/HCat)</li><li id="af34" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">连接器导出工具(HDFS/Hive/HCat到Teradata)</li></ul><p id="db4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要在Dataproc VM中运行它，</p><pre class="jg jh ji jj fd lo lp lq lr aw ls bi"><span id="f96b" class="js jt hi lp b fi lt lu l lv lw">hadoop jar $TDCH_JAR \ com.teradata.connector.common.tool.<strong class="lp hj"><em class="ly">ConnectorImportTool</em></strong> \<br/>-classname com.teradata.jdbc.TeraDriver \<br/>-url <strong class="lp hj"><em class="ly">jdbc:teradata://sampledbserver/DATABASE=sampledb</em></strong> \<br/>-username <strong class="lp hj"><em class="ly">sampleuser</em></strong> \<br/>-password <strong class="lp hj"><em class="ly">samplepwd</em></strong> \<br/>-jobtype hive \<br/>-fileformat parquet \<br/>-sourcetable<strong class="lp hj"><em class="ly"> db.customer</em></strong> \<br/>-sourcefieldnames “<strong class="lp hj"><em class="ly">id,acctnum,…</em></strong>” \<br/>-targettable <strong class="lp hj"><em class="ly">db.cust</em></strong> \<br/>-targetfieldnames “<strong class="lp hj"><em class="ly">id,acctnum,…</em></strong>”</span></pre><p id="1bfe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要使用gcloud或其他远程节点运行它，</p><pre class="jg jh ji jj fd lo lp lq lr aw ls bi"><span id="d79a" class="js jt hi lp b fi lt lu l lv lw">gcloud dataproc jobs submit hadoop \<br/> --cluster=&lt;<strong class="lp hj"><em class="ly">cluster-name</em></strong>&gt; \<br/> --region &lt;<strong class="lp hj"><em class="ly">region</em></strong>&gt; \<br/>--class=com.teradata.connector.common.tool.<strong class="lp hj"><em class="ly">ConnectorImportTool</em></strong> \<br/>--jars=$TDCH_JAR,$HADOOP_CLASSPATH \<br/>-- -libjars $LIB_JARS \<br/>-classname com.teradata.jdbc.TeraDriver \<br/>-url<strong class="lp hj"><em class="ly"> jdbc:teradata://sampledbserver/DATABASE=sampledb</em></strong> \<br/>-username <strong class="lp hj"><em class="ly">sampleuser</em></strong> \<br/>-password <strong class="lp hj"><em class="ly">samplepwd</em></strong> \<br/>-jobtype hive \<br/>-fileformat parquet \<br/>-sourcetable <strong class="lp hj"><em class="ly">db.customer</em></strong> \<br/>-sourcefieldnames “<strong class="lp hj"><em class="ly">id,acctnum,..</em></strong>” \ <br/>-targettable <strong class="lp hj"><em class="ly">db.cust</em></strong> \<br/>-targetfieldnames “<strong class="lp hj"><em class="ly">id,acctnum,…</em></strong>”</span></pre><p id="ca62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要了解有关连接器和可用特性和功能的更多信息，请参考此<a class="ae jr" href="https://downloads.teradata.com/download/connectivity/teradata-connector-for-hadoop-command-line-edition" rel="noopener ugc nofollow" target="_blank">链接</a>上的连接器自述文件以及此<a class="ae jr" href="https://support.teradata.com/community?id=community_question&amp;sys_id=98bb47631bd7fb00682ca8233a4bcb2a" rel="noopener ugc nofollow" target="_blank">链接</a>上的TDCH教程。</p><h2 id="5dfb" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated"><strong class="ak">在谷歌云中运行TDCH的注意事项</strong></h2><p id="14bf" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">此<a class="ae jr" href="https://downloads.teradata.com/download/connectivity/teradata-connector-for-hadoop-command-line-edition" rel="noopener ugc nofollow" target="_blank">链接</a>提供的自述文件的第9部分突出显示了更全面的注意事项列表。在这里，我们将强调一些需要注意的关键事项:</p><ul class=""><li id="aee9" class="ks kt hi ih b ii ij im in iq ku iu kv iy kw jc kx ky kz la bi translated">专门针对谷歌云，</li></ul><p id="c8a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">&gt;虚拟机实例所属的防火墙规则必须为Teradata数据库的入站和出站流量开放端口1025</p><p id="c95c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">&gt;如果使用internal.fastexport和/或internal.fastload协议，它们的默认端口8678和65535需要为入口和出口开放</p><ul class=""><li id="a589" class="ks kt hi ih b ii ij im in iq ku iu kv iy kw jc kx ky kz la bi translated">TDCH需要安装在Dataproc 1.x集群的所有节点上。这一要求只有Dataproc 1.x才有。</li><li id="5198" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">对于生产用途，在创建集群之前，强烈建议您将初始化操作复制到您自己的云存储桶中，以保证在所有Dataproc集群节点上一致使用相同的初始化操作代码，并防止集群中上游的意外升级。这里的<a class="ae jr" href="https://github.com/GoogleCloudDataproc/initialization-actions" rel="noopener ugc nofollow" target="_blank">是指</a>。</li></ul><h2 id="754d" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">包裹</h2><p id="b3ad" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">虽然上面的大部分步骤可以手动执行，但是使用Dataproc初始化操作可以降低维护开销，尤其是对于短暂的Dataproc集群。</p><p id="970e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">特别感谢来自Teradata的Mohan Talla的所有帮助和支持。</p><p id="6368" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这个技术指南对你有所帮助！</p></div></div>    
</body>
</html>