<html>
<head>
<title>Alerting the API way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">警告API方式</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/alerting-the-api-way-d7541f2ed2d3?source=collection_archive---------1-----------------------#2018-03-29">https://medium.com/google-cloud/alerting-the-api-way-d7541f2ed2d3?source=collection_archive---------1-----------------------#2018-03-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c177" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在一个项目上工作了一年多之后，顺利地进行角色扮演是一件很好的经历。让您的应用程序构建在一系列稳定的托管服务之上，让您从大量的运营负担中解脱出来:让我感到惊讶的是，我只需点击几下鼠标就可以升级Google Kubernetes引擎集群，而不必担心停机。这就像你在开车的时候更换引擎一样。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/726bb07233409c9aec1635f5c777bd5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SP9cCg8kUG-ZEtEmYUpHnw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">HTTP负载平衡器延迟</figcaption></figure><p id="5b8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">尽管如此，构建云原生应用并不意味着您不必考虑监控和警报。相比之下，您应该从第一天就考虑您的日志记录、指标和监控。当我们在Google云平台上运行时，我们在我们的微服务中与Stackdriver进行了深度集成:跟踪、日志记录、错误报告和自定义指标(一切都通过跟踪id很好地关联起来)以及云端点代理。Stackdriver还自动收集所有基础设施指标(负载平衡器、Kubernetes引擎、防火墙、计算等)。</p><p id="cb21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您已经有了所有这些数据点，您希望在出现异常时得到提醒。虽然您可以通过用户界面创建和发出警报是件好事，但您很快就会发现，警报需要创建、复制、稍加更改并再次创建，一遍又一遍…只是因为它是不同资源上的相同类型的警报。我们一直在寻找一种整洁且容易出错的方式来创建警报，所以你可以想象，我真的很高兴发现现在有了一个警报API。</p><div class="jt ju ez fb jv jw"><a href="https://cloud.google.com/monitoring/api/ref_v3/rpc/google.monitoring.v3#google.monitoring.v3.AlertPolicyService" rel="noopener  ugc nofollow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">包Google . Monitoring . v3 | stack driver Monitoring | Google Cloud</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">AlertPolicyService API用于管理(列出、创建、删除、编辑)Stackdriver Monitoring中的警报策略。安…</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">cloud.google.com</p></div></div></div></a></div><p id="acea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您在UI中创建了警报原型，就可以通过API在类似的资源上获取和复制警报策略。现在，您甚至可以开始考虑在git存储库中签入您的模板化警报。</p><p id="48c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是警报API可用于以下目的的一些想法:</p><p id="bd02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">管理不同的环境/不同的客户</strong>:您有一个测试、试运行和生产环境。您可以编写一些代码来管理模板中的警报，并将其应用到不同的环境中，而不是在开发集群上开发和测试您的警报并将它们复制到生产环境中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kf"><img src="../Images/3d4e8808e72deac4f691aa3d26f76d7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wT73eNNdVYQ7pelTFJqvtg.png"/></div></div></figure><p id="ad04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">云数据流健康检查模式</strong>:作为一名长期<a class="ae kg" href="https://cloud.google.com/dataflow/" rel="noopener ugc nofollow" target="_blank">云数据流</a>用户，我们注意到两种模式，我们可以检查以查看管道是否平稳运行:日志中的异常和数据流中的系统滞后。我们甚至用发布/订阅的积压量来完成它。为了实现这一点，我们有一个脚本来发现正在运行的管道，并添加一个关于异常和警报数量的自定义日志度量。除此之外，我们还创建了一个关于系统延迟的额外警报。</p><p id="4179" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">微服务</strong>:我们可以查询kubernetes的部署，并通过标签或注释查看它使用了哪些资源，我们可以为这些资源创建警报。</p><p id="e2d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经给出了三个例子，但我可以想象你还能找到十几个。欢迎在评论中留下你的想法。如果你想更深入地了解警报世界，我建议阅读网站可靠性工程书籍中的<a class="ae kg" href="https://landing.google.com/sre/book/chapters/practical-alerting.html" rel="noopener ugc nofollow" target="_blank">警报章节</a>。当你在做的时候，只要读完整本书，它绝对值得。</p><div class="jt ju ez fb jv jw"><a href="https://landing.google.com/sre/book/chapters/practical-alerting.html" rel="noopener  ugc nofollow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">谷歌网站可靠性工程</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">愿询问源源不断，传呼机保持沉默。“传统的SRE加持监控，底层的…</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">landing.google.com</p></div></div><div class="kh l"><div class="ki l kj kk kl kh km jn jw"/></div></div></a></div><blockquote class="kn ko kp"><p id="689a" class="if ig kq ih b ii ij ik il im in io ip kr ir is it ks iv iw ix kt iz ja jb jc hb bi translated">注意:从2018年6月30日起，基本层将拥有与Stackdriver premium层完全相同的警报功能，为您提供更多通知渠道。警报API目前是软启动的，这意味着您必须查看文档才能找到它:-)</p></blockquote><p id="bab1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">祝你警戒愉快。</p></div></div>    
</body>
</html>