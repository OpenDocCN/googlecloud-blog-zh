<html>
<head>
<title>How to setup Point-To-Site VPN in Google Cloud using OpenVPN</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用OpenVPN在谷歌云中建立点对点VPN</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/how-to-setup-point-to-site-vpn-in-google-cloud-using-openvpn-66f642ba08c9?source=collection_archive---------0-----------------------#2022-12-11">https://medium.com/google-cloud/how-to-setup-point-to-site-vpn-in-google-cloud-using-openvpn-66f642ba08c9?source=collection_archive---------0-----------------------#2022-12-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7b21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您正在寻找一种在GCP的点对点VPN设置，通过安全连接从客户端设备访问GCP资源，您可以利用像OpenVPN这样的第三方网络设备。尽管可以利用云高可用性虚拟专用网服务来建立站点到站点的虚拟专用网隧道，但GCP到目前为止还没有提供托管的站点到站点虚拟专用网服务。但是什么是开放虚拟专用网？为什么？</p><h2 id="8b3b" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">什么是OpenVPN？</strong></h2><p id="693e" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">OpenVPN是一种免费的开源虚拟专用网(VPN)软件，它使用OpenSSL库来加密和保护网络连接。它是创建虚拟专用网络的流行选择，因为它可靠、安全，并且易于设置和使用。</p><p id="30ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OpenVPN允许用户通过互联网连接到远程网络，并像直接连接到网络一样访问该网络上的资源。这对于从远程位置访问专用网络上的资源或在两个网络之间创建安全连接非常有用。</p><p id="11ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OpenVPN使用OpenSSL库来加密网络流量，这使得任何人都很难拦截和读取通过VPN传输的数据。它还使用安全的身份验证方法来确保只有授权用户才能访问VPN。</p><p id="2d58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OpenVPN提供两种类型的服务，OpenVPN云，一种托管解决方案和自托管解决方案，也称为OpenVPN访问服务器。我们将在这篇博客文章中使用自托管解决方案(OpenVPN Access Server)。</p><h2 id="de37" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">先决条件</strong></h2><ol class=""><li id="8998" class="kd ke hi ih b ii jy im jz iq kf iu kg iy kh jc ki kj kk kl bi translated">工作的GCP项目</li><li id="7fda" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">具有用于OpenVPN访问服务器虚拟机的子网的VPC</li></ol><h2 id="7332" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">设置</strong></h2><p id="ba96" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">在本指南中，我们将介绍谷歌云的设置和配置。我们将使用云控制台，使用计算引擎服务来设置OpenVPN网络设备。</p><p id="91a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，登录谷歌云控制台，跳进GCP市场。搜索OpenVPN访问服务器。</p><p id="814d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从结果中选择<strong class="ih hj"> OpenVPN接入服务器</strong>，点击<strong class="ih hj">启动</strong>按钮。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es kr"><img src="../Images/87dd012aa28b1f6f628e3e58b014c684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3_42Xq2kdrxqb8OF"/></div></div></figure><p id="f179" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果尚未启用，则启用所需的API。点击<strong class="ih hj">使能</strong>按钮，从部署体验中使能。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es ld"><img src="../Images/aa1e22db8e1f2fae5de9f3fc1aa6e622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*69e1eLkb0NGC7_d6"/></div></div></figure><p id="c5b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦启用了API，部署体验将带您进入新的OpenVPN访问服务器部署页面。根据您的需要填写并更新所有要求的详细信息。</p><p id="6bcd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择要在其中部署网络设备的适当VPC。该部署还将创建OpenVPN访问服务器运行所需的防火墙规则。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div class="er es le"><img src="../Images/18415452e41155ac8120a69807209da0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/0*s3nZVjR3n-U2v5H_"/></div></figure><p id="72a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">部署完成后，您可以找到<strong class="ih hj">管理员URL </strong>、<strong class="ih hj">客户端(站点)URL </strong>和<strong class="ih hj">管理员</strong>凭据。我们将更改管理凭据，因为它们在部署管理器中可见。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lf"><img src="../Images/695b50f6e3782a393c8be9e193052a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4X-WV7rttyXnllUK"/></div></div></figure><p id="4b8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">部署之后，我们必须更新OpenVPN访问服务器配置和GCP资源配置。我们将执行以下配置更改:</p><ol class=""><li id="210d" class="kd ke hi ih b ii ij im in iq lg iu lh iy li jc ki kj kk kl bi translated">保留外部IP</li><li id="a4d1" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">更改管理员密码</li><li id="34fa" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">更新时区</li><li id="0ade" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">安装NTP客户端进行自动时间同步(可选)</li><li id="d4af" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">更新操作系统</li><li id="9d19" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">更新OpenVPN访问服务器</li><li id="525d" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">更新路线</li><li id="c720" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">用户管理</li><li id="e7ef" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">使用客户端连接到VPN</li><li id="0d58" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">添加主机名和SSL(可选)</li></ol><p id="87d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1。预留外部IP </strong></p><p id="16a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您已经使用默认配置部署了OpenVPN访问服务器，那么连接到计算引擎的外部IP可能是短暂的。在我们进行任何更改之前，首先保留连接到计算引擎的现有外部IP。您可以按照下面的步骤来完成:</p><p id="3f11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从<strong class="ih hj">云平台</strong>进入网络部分的<strong class="ih hj"> IP地址</strong>。</p><p id="b2cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj">外部IP地址</strong>选项卡中找到连接到OpenVPN访问服务器虚拟机的IP，点击<strong class="ih hj">保留</strong>将类型更改为静态分配。这将防止在OpenVPN访问服务器虚拟机重启/关闭期间发生IP更改。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lf"><img src="../Images/dd03c704147257a9de4b91c821f5ece9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ET9hdtRtHiDBcS6V"/></div></div></figure><p id="cf3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您点击<strong class="ih hj">保留</strong>，它将要求提供外部IP的名称和描述。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lj"><img src="../Images/f42b2b774d59f371679f80df8043d233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y6rlwahEwLBIDXL7"/></div></div></figure><p id="fdc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。更新管理员密码</strong></p><p id="d3fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OpenVPN访问服务器的部署已生成管理员密码，该密码在部署管理器中可见。我强烈建议改变这一点。为此，单击<strong class="ih hj"> SSH </strong>按钮通过SSH访问实例，并使用下面的cmd更新openvpn用户的密码。</p><pre class="ks kt ku kv fd lk ll lm bn ln lo bi"><span id="8d8a" class="lp je hi ll b be lq lr l ls lt">sudo passwd openvpn</span></pre><p id="a7a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3。更新默认时区</strong></p><p id="a7d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用below cmd更新时区。默认时区设置为PST。如果你住在别的地方，你需要使用下面的命令来更新时区。您需要SSH到虚拟机来运行以下命令:</p><pre class="ks kt ku kv fd lk ll lm bn ln lo bi"><span id="8973" class="lp je hi ll b be lq lr l ls lt">sudo dpkg-reconfigure tzdata</span></pre><p id="cc3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4。安装NTP客户端(可选)</strong></p><p id="565b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装NTP客户端进行自动时间同步。这是推荐的，但特别是如果你使用谷歌认证MFA。您需要SSH到虚拟机来运行以下命令:</p><pre class="ks kt ku kv fd lk ll lm bn ln lo bi"><span id="d77b" class="lp je hi ll b be lq lr l ls lt">sudo apt-get install ntp</span></pre><p id="34f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 5。更新操作系统</strong></p><p id="74f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你通过Google Cloud Marketplace部署OpenVPN Access Server，那么它使用Ubuntu作为操作系统。建议在开始使用之前更新操作系统。您需要SSH到虚拟机，并使用以下命令来更新操作系统:</p><pre class="ks kt ku kv fd lk ll lm bn ln lo bi"><span id="1caf" class="lp je hi ll b be lq lr l ls lt">sudo apt-get update<br/>sudo apt-get upgrade</span></pre><p id="8d2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6。更新OpenVPN接入服务器</p><p id="a0fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您更新操作系统时，OpenVPN访问服务器不会被更新，因为它被固定为在操作系统更新期间跳过更新，以避免任何更改。您必须使用下面的cmd显式地做到这一点。您可以使用下面的cmd检查当前版本。您需要首先通过SSH进入虚拟机来运行cmds。</p><pre class="ks kt ku kv fd lk ll lm bn ln lo bi"><span id="e94f" class="lp je hi ll b be lq lr l ls lt">cat /etc/issue</span></pre><p id="eb86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">预期输出类似于下图:</p><pre class="ks kt ku kv fd lk ll lm bn ln lo bi"><span id="ec45" class="lp je hi ll b be lq lr l ls lt">vikask@openvpn-access-server-1-vm:~$ cat /etc/issue<br/>OpenVPN Access Server Appliance 2.8.5 \n \l</span></pre><p id="ce08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在写这篇博文的时候，OpenVPN接入服务器的当前版本是2.11.1。要更新版本，请在cmd下运行:</p><pre class="ks kt ku kv fd lk ll lm bn ln lo bi"><span id="f279" class="lp je hi ll b be lq lr l ls lt">sudo apt upgrade openvpn-as</span></pre><p id="3137" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更新OpenVPN访问服务器后，建议重启服务器。</p><pre class="ks kt ku kv fd lk ll lm bn ln lo bi"><span id="abac" class="lp je hi ll b be lq lr l ls lt">sudo reboot</span></pre><p id="a68e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">重启完成后，验证OpenVPN访问服务器版本。</p><pre class="ks kt ku kv fd lk ll lm bn ln lo bi"><span id="4dc6" class="lp je hi ll b be lq lr l ls lt">vikask@openvpn-access-server-1-vm:~$ cat /etc/issue<br/>OpenVPN Access Server Appliance 2.11.1 \n \l</span></pre><p id="4bd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您也可以从OpenVPN的管理用户界面验证版本。使用管理URL登录到管理用户界面:</p><p id="6178" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae lu" href="https://[External" rel="noopener ugc nofollow" target="_blank"> https://【外部</a> IP地址/主机名】:943/Admin</p><p id="3069" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您是第一次登录，请阅读免责声明并单击同意。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lv"><img src="../Images/5a61889e9fcf4069265e94be870f6c90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bFI26TydCUEOEQqo"/></div></div></figure><p id="40f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 7。更新路线</strong></p><p id="b71d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，OpenVPN访问服务器将拥有一个路由，用于部署它的自己的子网。要访问其他子网或该子网的资源，您需要在路由中通告这些子网。</p><p id="cb86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，您需要登录OpenVPN访问服务器的管理用户界面。登录后，进入<strong class="ih hj">配置</strong>，选择<strong class="ih hj"> VPN设置</strong>选项。</p><p id="17c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您希望允许来自OpenVPN的访问，请在路由部分添加其他子网。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lf"><img src="../Images/b507ca200ecedcd66ac4983b81a9fd40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*olArfyKHkyFzkVTO"/></div></div></figure><p id="0654" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本例中，我添加了10.128.0.0/20子网，其中有需要从OpenVPN客户端访问的工作负载。</p><p id="92b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加路线，保存设置并点击更新运行服务器。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lf"><img src="../Images/08975a62f9de2f1f3bd17112723b96a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1T6BT5EOaOqwLlP4"/></div></div></figure><p id="9c72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保在GCP为附加子网添加防火墙规则，以允许来自OpenVPN访问服务器子网或OpenVPN访问服务器虚拟机的流量。默认情况下，OpenVPN访问服务器通过使用NAT方法(网络地址转换)为VPN客户端提供对您的VPC的访问。使用这种方法，来自VPN客户端的流量将看起来像是来自访问服务器的本地IP地址。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lf"><img src="../Images/64de237c0390fab0f289bd209e39892f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ndUNrEvipNajDvMA"/></div></div></figure><p id="a306" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另外，看看VPN IP网络部分。确保本节中定义的IP地址不会与您现有的CIDRs冲突。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lf"><img src="../Images/9e328fe4b34dbd2c63915b4f11a3e4e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*68VehNtiuDw9zT1c"/></div></div></figure><p id="4bb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 8。用户管理</strong></p><p id="416d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经配置了OpenVPN访问服务器，我们可以创建更多可以访问客户端的用户。默认情况下，openvpn用户已经可以访问服务器，但我建议创建没有管理员权限的其他用户。</p><p id="da14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要管理用户，请转到用户管理，选择用户权限。根据需要添加其他用户，然后单击保存设置。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lf"><img src="../Images/9af885ddb65f2389319d2683d70088ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u1pvJQQL3_tLWFCL"/></div></div></figure><p id="e99f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击更新运行服务器以更新OpenVPN访问服务器。</p><p id="3dce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 9。使用客户端</strong>连接到VPN</p><p id="bbdb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们已经创建了用户，我们可以使用客户端连接到OpenVPN。用户可以通过登录客户端URL(OpenVPN接入服务器的IP地址)来下载OpenClient。</p><p id="cd45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae lu" href="https://[External" rel="noopener ugc nofollow" target="_blank"> https://【外部</a> IP地址/主机名】</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lw"><img src="../Images/67f8ad9b4cab568fc44a1381b7870d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vinlb7HU5uoWOPeF"/></div></div></figure><p id="1188" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输入用户名和密码登录。登录后，您可以下载客户端(如果您已经有客户端)或配置文件。</p><p id="e7e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经安装了客户端，所以下载配置文件。导入配置文件后，输入用户密码，就可以开始了。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lx"><img src="../Images/ec50945b58cb5d413e71dcbbc32da328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3MIH_YmDEoO8gJhU"/></div></div></figure><p id="90b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们测试从本地计算机到计算引擎虚拟机的连接。让我们尝试使用私有IP Ping OpenVPN访问服务器。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es ly"><img src="../Images/5826627ffba83b20512b357165a345e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QroHKcB2WbThvj60"/></div></div></figure><p id="daff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您在上面的快照中所看到的，我能够使用私有IP地址Ping OpenVPN访问服务器。现在，让我们尝试ping我们在“Routes”部分添加的不同子网的虚拟机。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lz"><img src="../Images/4f685447f18029e7ea8c78cc28b1347e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VMUw5eTFhqbqF1Wi"/></div></div></figure><p id="359d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Ping也适用于另一个子网。注意—确保防火墙规则配置为允许流量流向其他子网。</p><p id="4a50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">10。添加主机名和SSL </p><p id="f5ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OpenVPN访问服务器的网络服务在默认的公共IP地址上可用，但是当你每次尝试访问它时，它都会抛出一个警告。建议将FQDN与来自CA的签名SSL一起使用，以避免这些警告。此外，FQDN很容易记住。</p><p id="4836" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按照这个<a class="ae lu" href="https://openvpn.net/vpn-server-resources/installing-a-valid-ssl-web-certificate-in-access-server/" rel="noopener ugc nofollow" target="_blank">文档</a>来设置主机名和SSL。</p><h2 id="ee3f" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">发牌</strong></h2><p id="8bb4" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">OpenVPN免费提供两个并发连接。如果您正在寻找更多的并发连接，那么您可以直接从OpenVPN购买额外的许可证。</p></div></div>    
</body>
</html>