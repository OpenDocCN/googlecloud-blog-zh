<html>
<head>
<title>Go Functions Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Go功能框架</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/go-functions-framework-120ace237fe2?source=collection_archive---------0-----------------------#2019-11-12">https://medium.com/google-cloud/go-functions-framework-120ace237fe2?source=collection_archive---------0-----------------------#2019-11-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4fd5d6458dc2d9573aba40017fdad5e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mwlCO68x8nNzSvRlR4WUAA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">谷歌云功能+ Go(上田拓也的Logo—<a class="ae iu" href="https://github.com/golang-samples/gopher-vector" rel="noopener ugc nofollow" target="_blank">src</a>)</figcaption></figure><p id="ceb1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本帖中，您将了解开源Go Functions框架，该框架使您能够在您的计算机上开发Golang Google Cloud函数，并将它们部署到云中。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="1075" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">那么，为什么Go Functions框架如此重要呢？嗯，它使…</p><ul class=""><li id="3c75" class="ka kb hi ix b iy iz jc jd jg kc jk kd jo ke js kf kg kh ki bi translated">💻<strong class="ix hj">Go中谷歌云功能的本地测试</strong></li><li id="cb50" class="ka kb hi ix b iy kj jc kk jg kl jk km jo kn js kf kg kh ki bi translated">🔢<strong class="ix hj">Google Cloud上应用代码的透明版本管理</strong></li><li id="9911" class="ka kb hi ix b iy kj jc kk jg kl jk km jo kn js kf kg kh ki bi translated">🌐<strong class="ix hj">一次编写，随处运行:</strong>云功能，云运行，其他云</li></ul><p id="3172" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就我个人而言，我非常喜欢如何轻松地使用<code class="du ko kp kq kr b">localhost</code>来测试我的功能。</p><h2 id="f5ed" class="ks kt hi bd ku kv kw kx ky kz la lb lc jg ld le lf jk lg lh li jo lj lk ll lm bi translated">设置您的环境</h2><p id="89b1" class="pw-post-body-paragraph iv iw hi ix b iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo lr jq jr js hb bi translated">在我们开始之前，让我们首先确保我们运行在相同的环境中。使用以下命令打印您的go版本:</p><pre class="ls lt lu lv fd lw kr lx ly aw lz bi"><span id="9be4" class="ks kt hi kr b fi ma mb l mc md">go version</span></pre><p id="0a0b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">输出应该是Go 1.11或者更高。如果没有，通过卸载并重新安装Go来更新Go:<a class="ae iu" href="https://golang.org/dl/" rel="noopener ugc nofollow" target="_blank">https://golang.org/dl/</a></p><p id="e677" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，让我们为名为<code class="du ko kp kq kr b">hello</code>的函数创建一个新目录:</p><pre class="ls lt lu lv fd lw kr lx ly aw lz bi"><span id="a3de" class="ks kt hi kr b fi ma mb l mc md">mkdir -p hello/cmd<br/>cd hello</span></pre><p id="cbc9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建Go模块:</p><pre class="ls lt lu lv fd lw kr lx ly aw lz bi"><span id="0b39" class="ks kt hi kr b fi ma mb l mc md">go mod init example.com/hello</span></pre><p id="26ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">用以下内容创建一个<code class="du ko kp kq kr b">function.go</code>文件(任意包名):</p><figure class="ls lt lu lv fd ij"><div class="bz dy l di"><div class="me mf l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">一个简单的“你好”包裹。</figcaption></figure><p id="0573" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为我们的<code class="du ko kp kq kr b">main</code>包创建一个包含文件<code class="du ko kp kq kr b">cmd/main.go</code>的文件夹<code class="du ko kp kq kr b">cmd</code>,内容如下:</p><figure class="ls lt lu lv fd ij"><div class="bz dy l di"><div class="me mf l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">我们的<code class="du ko kp kq kr b">main program that starts the Function Framework.</code></figcaption></figure><p id="fae9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个文件使用Go Functions框架来启动我们的函数。</p><h2 id="fa5c" class="ks kt hi bd ku kv kw kx ky kz la lb lc jg ld le lf jk lg lh li jo lj lk ll lm bi translated">测试</h2><p id="8bee" class="pw-post-body-paragraph iv iw hi ix b iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo lr jq jr js hb bi translated">使用以下命令在本地测试您的函数:</p><pre class="ls lt lu lv fd lw kr lx ly aw lz bi"><span id="e931" class="ks kt hi kr b fi ma mb l mc md">go run cmd/main.go</span></pre><p id="86ed" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您的Google Cloud功能现已在本地运行。你可以卷曲你的函数来调用你的函数:</p><pre class="ls lt lu lv fd lw kr lx ly aw lz bi"><span id="c94a" class="ks kt hi kr b fi ma mb l mc md">curl localhost:8080</span></pre><p id="3669" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您将看到输出:</p><pre class="ls lt lu lv fd lw kr lx ly aw lz bi"><span id="ccb3" class="ks kt hi kr b fi ma mb l mc md">Hello, Functions Framework!</span></pre><p id="1439" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">厉害！</p><h2 id="4294" class="ks kt hi bd ku kv kw kx ky kz la lb lc jg ld le lf jk lg lh li jo lj lk ll lm bi translated">部署到Google云功能</h2><p id="78fe" class="pw-post-body-paragraph iv iw hi ix b iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo lr jq jr js hb bi translated">要部署到Google Cloud功能，请运行以下命令:</p><pre class="ls lt lu lv fd lw kr lx ly aw lz bi"><span id="3f47" class="ks kt hi kr b fi ma mb l mc md">gcloud functions deploy HelloWorld --runtime go111 --trigger-http</span></pre><p id="8bde" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">大约2分钟后，您将看到如下所示的URL:</p><blockquote class="mg mh mi"><p id="cbbe" class="iv iw mj ix b iy iz ja jb jc jd je jf mk jh ji jj ml jl jm jn mm jp jq jr js hb bi translated">https://us-central 1-my-project . cloud functions . net/hello world</p></blockquote><p id="edae" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以通过访问您的URL来调用该函数。</p><p id="4334" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从命令行，这个脚本将获得URL和<code class="du ko kp kq kr b">curl</code>您的函数:</p><pre class="ls lt lu lv fd lw kr lx ly aw lz bi"><span id="e9e6" class="ks kt hi kr b fi ma mb l mc md">curl $(gcloud functions describe HelloWorld --format 'value(httpsTrigger.url)')</span></pre><p id="8bac" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">缺德！😄</p><p id="935c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您刚刚在计算机上测试了Go功能，然后部署到理论上可以扩展到每100秒100，000，000个请求的Google Cloud上(<a class="ae iu" href="https://cloud.google.com/functions/quotas" rel="noopener ugc nofollow" target="_blank">🔗</a>)。</p><p id="7f06" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你想跟踪更新，或者了解更多，请查看GitHub repo:<a class="ae iu" href="https://github.com/GoogleCloudPlatform/functions-framework-go" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/Google cloud platform/functions-framework-go</a></p><h2 id="ba67" class="ks kt hi bd ku kv kw kx ky kz la lb lc jg ld le lf jk lg lh li jo lj lk ll lm bi translated">感谢阅读</h2><p id="dc44" class="pw-post-body-paragraph iv iw hi ix b iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo lr jq jr js hb bi translated">你可能也会对这篇博文和视频感兴趣:</p><ul class=""><li id="e193" class="ka kb hi ix b iy iz jc jd jg kc jk kd jo ke js kf kg kh ki bi translated"><a class="ae iu" rel="noopener" href="/google-cloud/google-cloud-functions-for-go-57e4af9b10da">🖊️jbd为Go介绍谷歌云功能</a></li><li id="5e80" class="ka kb hi ix b iy kj jc kk jg kl jk km jo kn js kf kg kh ki bi translated"><a class="ae iu" href="https://www.youtube.com/watch?v=RbnyUpVRq_4" rel="noopener ugc nofollow" target="_blank">📹Eno和Angela(+可爱的地鼠)介绍Go对函数的支持</a></li></ul></div></div>    
</body>
</html>