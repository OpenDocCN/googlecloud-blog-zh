<html>
<head>
<title>Knative to Cloud Run</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云运行的技巧</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/knative-to-cloud-run-f0ed1617e256?source=collection_archive---------0-----------------------#2019-05-07">https://medium.com/google-cloud/knative-to-cloud-run-f0ed1617e256?source=collection_archive---------0-----------------------#2019-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/47b458ba7a8d95987901e1251cbf270f.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*I0iAulfQwG-rV-xrAKEtqQ.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">云运行</figcaption></figure><p id="982d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我的Knative系列(<a class="ae jo" rel="noopener" href="/google-cloud/hands-on-knative-part-1-f2d5ce89944e">第1部分</a>、<a class="ae jo" rel="noopener" href="/google-cloud/hands-on-knative-part-2-a27729f4d756">第2部分</a>、<a class="ae jo" rel="noopener" href="/google-cloud/hands-on-knative-part-3-d8731ad2f23d">第3部分</a>)中，我展示了如何使用Knative Serving、Eventing以及在任何地方构建任何Kubernetes集群。这对于可移植性来说非常好，但是伴随着可移植性而来的是创建和管理Kubernetes集群的开销。更不用说Istio的复杂性了，它是Knative的一个依赖项。</p><p id="0057" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谷歌Kubernetes引擎(GKE)有助于管理Kubernetes集群，但您仍然需要担心Kubernetes集群的所有附加功能。拥有Knative服务体验而不必担心底层基础设施不是很好吗？嗯，你可以带着<a class="ae jo" href="https://cloud.google.com/run/" rel="noopener ugc nofollow" target="_blank">云跑</a>！</p><p id="b9d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://cloud.google.com/run/" rel="noopener ugc nofollow" target="_blank"> Cloud Run </a>是Google Cloud的一个托管的无服务器平台，使你能够运行通过HTTP请求调用的无状态容器。云运行是从Knative构建的。这意味着您可以将Knative服务的容器部署到完全托管的云服务器上，或者部署到位于GKE的GKE集群中。您将获得与Knative服务相同的体验和特性，如自动缩放、版本控制等。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jp"><img src="../Images/4fbacebb084884c37d2ee00a769c5cb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I0Sc8cGtOiANOAvsA3m7Ew.png"/></div></div></figure><p id="27b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我的<a class="ae jo" href="https://github.com/meteatamel/knative-tutorial" rel="noopener ugc nofollow" target="_blank"> Knative教程</a>的<a class="ae jo" href="https://github.com/meteatamel/knative-tutorial/blob/master/docs/01-helloworldserving.md" rel="noopener ugc nofollow" target="_blank"> Hello World Serving </a>示例中，我们构建了一个简单地回复“Hello C# Sample v1”的服务。最终，这是一个非常简单的服务，但在部署服务之前，我们必须做大量的准备工作，即:</p><ol class=""><li id="51d8" class="jy jz hi is b it iu ix iy jb ka jf kb jj kc jn kd ke kf kg bi translated">创建GKE集群。</li><li id="30dd" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">在GKE集群上安装Istio。</li><li id="ba8e" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">在GKE集群上安装活动组件(服务、事件、构建)。</li><li id="982f" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">构建一个容器映像并将其推送到DockerHub</li><li id="7c02" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">为服务创建一个活动服务yaml文件。</li><li id="2329" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">为Knative服务配置域</li><li id="dfc7" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">最后，部署Knative服务</li></ol><p id="19a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个简单的服务需要很多步骤！在Cloud Run中，事情要简单得多。云运行的主要优势在于它是完全托管的，因此无需担心基础架构或Kubernetes。它还带有一个简单直观的命令行和用户界面，可以快速部署和管理您的无服务器容器。</p><p id="d507" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将我的<a class="ae jo" href="https://github.com/meteatamel/knative-tutorial" rel="noopener ugc nofollow" target="_blank">实用教程</a>的相同<a class="ae jo" href="https://github.com/meteatamel/knative-tutorial/blob/master/docs/01-helloworldserving.md" rel="noopener ugc nofollow" target="_blank"> Hello World Serving </a>示例部署到云运行需要什么？实际上是2个gcloud命令。</p><p id="6e69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，构建相同的容器映像并将其推送到Google容器注册中心(GCR):</p><pre class="jq jr js jt fd km kn ko kp aw kq bi"><span id="9508" class="kr ks hi kn b fi kt ku l kv kw">gcloud builds submit --tag gcr.io/cloudrun-atamel/helloworld-csharp:v1</span></pre><p id="6f96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">其次，部署到云运行:</p><pre class="jq jr js jt fd km kn ko kp aw kq bi"><span id="7fdd" class="kr ks hi kn b fi kt ku l kv kw">gcloud beta run deploy --image gcr.io/cloudrun-atamel/helloworld-csharp:v1</span></pre><p id="8f83" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就是这样！如果你想了解细节，你可以查看我的<a class="ae jo" href="https://github.com/meteatamel/knative-tutorial" rel="noopener ugc nofollow" target="_blank">实用教程</a>的<a class="ae jo" href="https://github.com/meteatamel/knative-tutorial/blob/master/docs/05.5-deploycloudrun.md" rel="noopener ugc nofollow" target="_blank">部署到云运行</a>部分。</p></div></div>    
</body>
</html>