<html>
<head>
<title>Day #13 with Cloud Workflows: Logging with Cloud Logging</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用云工作流的第13天:使用云日志记录进行日志记录</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/day-13-with-cloud-workflows-logging-with-cloud-logging-93c030ec2ed?source=collection_archive---------1-----------------------#2021-02-02">https://medium.com/google-cloud/day-13-with-cloud-workflows-logging-with-cloud-logging-93c030ec2ed?source=collection_archive---------1-----------------------#2021-02-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e607" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是时候回到我们的云工作流系列了。有时，出于调试或审计的目的，能够通过云日志记录一些信息是很有用的。正如我们上个月看到的，您可以从工作流中调用HTTP端点。我们实际上可以使用<a class="ae jd" href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/entries/write" rel="noopener ugc nofollow" target="_blank">云日志的REST API </a>来记录这样的消息！让我们看看实际情况。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="e8ef" class="jn jo hi jj b fi jp jq l jr js">- log:<br/>    call: http.post<br/>    args:<br/>        url: <a class="ae jd" href="https://logging.googleapis.com/v2/entries:write" rel="noopener ugc nofollow" target="_blank">https://logging.googleapis.com/v2/entries:write</a><br/>        auth:<br/>            type: OAuth2<br/>        body:<br/>            entries:<br/>                - logName: ${"projects/" + sys.get_env("GOOGLE_CLOUD_PROJECT_ID") + "/logs/workflow_logger"}<br/>                  resource:<br/>                    type: "audited_resource"<br/>                    labels: {}<br/>                  textPayload: Hello World from Cloud Workflows!</span></pre><p id="a3c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们调用https://logging.googleapis.com/v2/entries:writeAPI端点<a class="ae jd" href="https://logging.googleapis.com/v2/entries:write" rel="noopener ugc nofollow" target="_blank">来写入新的日志条目。我们通过OAuth2进行身份验证——只要用于工作流执行的服务帐户允许它使用日志API。然后，我们传递一个JSON结构作为调用体，指示要使用的记录器的名称、它适用于哪些资源，以及包含我们的文本消息的textPayload。您还可以使用${}表达式来记录更复杂的值。</a></p><p id="a7d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦完成并部署了这个工作流定义，您就可以执行它，并且您应该在日志中看到您的消息:</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es jt"><img src="../Images/0083cbb8f4675059cb2a5b52d34611de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*v3k6NdIAi1nSZg5q.png"/></div></figure><p id="e7db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧啊。可以将消息记录到云日志！</p><p id="5ce5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们回顾一下这段视频:</p><figure class="je jf jg jh fd ju"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="d529" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一集，我们将利用子工作流来创建一组可重用的步骤，通过将这个日志记录示例转换为子工作流，您可以在整个工作流定义中多次调用这些步骤，而无需重复。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="6239" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kg">原载于</em><a class="ae jd" href="http://glaforge.appspot.com/article/day-13-with-cloud-workflows-logging-with-cloud-logging" rel="noopener ugc nofollow" target="_blank"><em class="kg">http://glaforge.appspot.com</em></a><em class="kg">。</em></p></div></div>    
</body>
</html>