<html>
<head>
<title>When are the bugs coming? ML modelling in BigQuery to predict the next bug outbreak</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">虫子什么时候来？BigQuery中的ML建模预测下一次bug爆发</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/when-are-the-bugs-coming-ml-modelling-in-bigquery-to-predict-the-next-bug-outbreak-656f16a0e199?source=collection_archive---------1-----------------------#2020-01-16">https://medium.com/google-cloud/when-are-the-bugs-coming-ml-modelling-in-bigquery-to-predict-the-next-bug-outbreak-656f16a0e199?source=collection_archive---------1-----------------------#2020-01-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c7ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，新年快乐🎉随着澳大利亚夏天的到来，我们带着一点乐趣开始了2020年，试图回答每个人在澳大利亚每年这个时候都在想的问题(尤其是我的妻子和孩子！)也就是——虫子什么时候来？！那就是预测蟑螂和蚊子(又名蚊子)的爆发。</p><p id="c981" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">bug预测项目实际上早在十月份就已经开始了。在夏季到来之前，我们有足够的时间进行研究、迭代和测试——相应地，错误也进入了状态。在这篇博文中，我们将分享我们遵循的技术解决方案，以及一个高层次的解决方案会是什么样子。</p><p id="f794" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">全部使用Google Cloud BigQuery，利用BigQuery的地理、分析和ML功能。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="a68e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">简单介绍一下，给那些不认识我们的人</strong></p><p id="1b94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我是<a class="ae jk" href="https://www.linkedin.com/in/drewjarrett/" rel="noopener ugc nofollow" target="_blank">引来的</a>。我已经在谷歌工作了一段时间。我目前的角色是客户解决方案工程师，帮助我们的广告客户充分利用他们的网站、应用和数据。全都来自我在美丽的悉尼的办公桌。</p><p id="7804" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我是<a class="ae jk" href="https://www.linkedin.com/in/dennis-jordan-11995b46/" rel="noopener ugc nofollow" target="_blank">丹尼斯</a>。在过去的六年多时间里，我一直是悉尼谷歌的分析师和顾问，致力于利用数据为广告客户问题提供见解、策略和解决方案，在这个职位上，我对ML产生了真正的热情。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="07cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你说天气？</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jl"><img src="../Images/cd6a06a5a4f4ccb52fd57ddd8584bc22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*3DQTeKZ68fmEimfrhFZQeg.png"/></div></figure><p id="03f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的，天气！天气模式成为我们在这个模型中的主要特征，因为它们已经被证明对昆虫数量有影响。利用历史天气数据，我们可以寻找一段时间内的模式和病毒爆发之间的相关性。考虑到温度、降水/降雨量、湿度…(以及更多的潜在因素)。</p><p id="633a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">历史天气数据</strong></p><p id="9a56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于这是一个有趣的实验，我们将使用<a class="ae jk" href="https://cloud.google.com/blog/products/gcp/global-historical-daily-weather-data-now-available-in-bigquery" rel="noopener ugc nofollow" target="_blank">全球历史气候网络(GHCN) </a> BigQuery公共数据集。NCAR天气数据包含了10年来180个国家的80，000多个气象站的报告。它甚至已经过质量检查。在BigQuery中可用。完美。</p><p id="5002" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，由于我们只关心澳大利亚的天气趋势，我们将大量减少这一集，只列出当地的气象站(尽管有一天在全球范围内看这个会很有趣)。</p><p id="0191" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">…瞧，这是一个<em class="jt">澳大利亚历史天气</em>数据表，大小约为1.36 MB / 17，088行，随时可用。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es ju"><img src="../Images/0f67f6a71027ebf7435bfcc9dc4af4ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xkeiHre2I3F_XgzAlD--Pw.png"/></div></div></figure><p id="1b0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">澳大利亚州界</strong></p><p id="b996" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常，气象数据与气象站的纬度/经度位置相关联。NCAR的数据就是这种情况。因此，第一个真正的挑战是将这些纬度/经度位置映射和滚动到更有意义的地理位置，如城镇、城市或州。</p><p id="6b01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本帖中，我们将选择状态级别(考虑到即将讨论的趋势信息)，来进行bug爆发预测。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jz"><img src="../Images/0f6059ca72ce978cdde6de22fc2f22fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*p-3KpJiAacxPdlA7b4b6oQ.png"/></div></figure><p id="8abe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">澳大利亚统计局(abs.gov.au)网站维护“统计区”位置。使用<a class="ae jk" href="https://itt.abs.gov.au/itt/r.jsp?ABSMaps" rel="noopener ugc nofollow" target="_blank"> ABS地图</a>我们可以下载“ESRI Shapefile格式的州和地区(STE) ASGS Ed 2016数字边界”。shp文件，它详细描述了澳大利亚所有州的边界(类似于Google Maps中的州边界截图)。</p><p id="33f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该数据还包括每个州的面积(平方公里)。不错！让我们也确保保持这一点，它在以后会是一个有用的特性👍。</p><p id="6819" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下载后，我们可以转换形状文件。shp)转换成BigQuery可以使用的. csv文件。使用这种工具的一个例子是<a class="ae jk" href="https://gdal.org/programs/ogr2ogr.html" rel="noopener ugc nofollow" target="_blank"> ogr2ogr </a>，例如…</p><pre class="jm jn jo jp fd ka kb kc kd aw ke bi"><span id="f7d6" class="kf kg hi kb b fi kh ki l kj kk">ogr2ogr -f csv -dialect sqlite -sql “select AsGeoJSON(geometry) AS geom, * from SA4_2016_AUST” SA4_2016_AUST.csv SA4_2016_AUST.shp</span></pre><p id="3720" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Lak Lakshmanan撰写的关于如何将shapefiles之类的地理数据加载到BigQuery的精彩文章很好地涵盖了这一点。</p><p id="77e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦CSV可用，就可以上传到BigQuery，创建一个<em class="jt">Australia _ state _ boundaries</em>表来使用，大小为87.9 MB / 107行。</p><p id="4173" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提示:当你上传数据到CSV时，不要使用自动检测。相反，请指定一个模式，以便geometry列可以是GEOGRAPHY类型。这将避免我们在下面的查询中使用ST_GeogFromGeoJson。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es kl"><img src="../Images/9853e3ae74999b153e383b95682f627b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pc8dbxTnGWdEvg62mLDc6Q.png"/></div></div></figure><p id="7cfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">将天气数据映射到状态</strong></p><p id="a77f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了<em class="jt">Australia _ state _ boundaries</em>表，这是比较容易的部分。BigQuery的地理功能简化了事情，允许我们聚集州边界内的天气数据。</p><pre class="jm jn jo jp fd ka kb kc kd aw ke bi"><span id="312d" class="kf kg hi kb b fi kh ki l kj kk">WITH australia_state_boundaries AS (<br/>  SELECT<br/>    geom AS polygon,<br/>    STATE_NAME_2016 AS stateLocation<br/>  FROM `[project].[dataset].australia_state_boundaries`<br/>)</span><span id="2944" class="kf kg hi kb b fi km ki l kj kk">SELECT<br/>  australia_state_boundaries.stateLocation,<br/>  day,<br/>  AVG(avgTemperature) AS avgTemperature,<br/>  AVG(avgTd) AS avgTd,<br/>  MAX(maxTemperature) AS maxTemperature,<br/>  MIN(minTemperature) AS minTemperature,<br/>  AVG(precipitation) AS precipitation<br/>FROM<br/>  `[project].[dataset].australia_historical_weather`,<br/>  australia_state_boundaries<br/>WHERE<br/>  ST_WITHIN(<br/>    ST_GEOGPOINT(longitude, latitude),<br/>    australia_state_boundaries.polygon)<br/>GROUP BY sa4Location, day</span></pre><p id="380e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同时在SQL中创建最大值、最小值和平均值。让我们把这个新表叫做<em class="jt">澳大利亚_州_历史_天气</em>。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es kn"><img src="../Images/41e81338cc0744516648a2c2c6254565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*in-gkYh2O4ti44H29d3pjA.png"/></div></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="2156" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">谷歌漏洞爆发趋势</strong></p><p id="cc8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jk" href="https://trends.google.com/trends/explore?date=today%205-y&amp;geo=AU&amp;q=Cockroaches" rel="noopener ugc nofollow" target="_blank"> Google Trends </a>是一款分析谷歌搜索查询的工具。看看“蟑螂”这个词，很明显趋势数据是疾病爆发的一个有用指标，你可以看到(在这张来自谷歌趋势的截图中)随着澳大利亚接近夏天，这个主题的搜索量在增加。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es ko"><img src="../Images/015c81c9e1aa6d57482ef1d44f28b877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fi7wycCLpq9Fb_62VMPhEA.png"/></div></div></figure><p id="f968" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，这是我们将尝试预测的值，即我们的ML模型中使用的标签。趋势工具允许您按州进行过滤，并按CSV下载信息。</p><p id="0b50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再加上<em class="jt">Australia _ state _ historical _ weather</em>表，我们现在就有了一个包含最近几年天气和臭虫趋势的数据集。</p><p id="cba3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">顺便说一句。趋势工具还有一个“相关查询”部分，显示用户还搜索了什么(截图示例)…</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es jz"><img src="../Images/c435bebc9bca33d2ffaf5fb79ff9e30d.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*LL7L9ZwtoMHPJMhXPH5xmw.png"/></div></figure><p id="3f30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是无论你做什么，当你在蟑螂趋势页面上的时候，不要看这个部分…当你不看它的时候，绝对不要看蟑螂奶的相关查询！无论你做什么，不要让好奇心战胜你，去搜索发现这是一种新的健康热潮🙈！我永远不会以同样的方式看待世界<a class="ae jk" href="https://emojipedia.org/face-with-open-mouth-vomiting/" rel="noopener ugc nofollow" target="_blank">🤮</a>。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="1e42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">训练我们的“小车”ML模型</strong></p><p id="b3ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那是<a class="ae jk" href="https://www.google.com/search?tbm=isch&amp;as_q=bugs" rel="noopener ugc nofollow" target="_blank">bug</a>，不是<a class="ae jk" href="https://en.wikipedia.org/wiki/Software_bug" rel="noopener ugc nofollow" target="_blank">bug</a>，ML车型。</p><p id="693c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将把数据集分解成多个窗口要素，然后汇总一段时间内的行为模式。要理解这个概念，请查看我的<a class="ae jk" rel="noopener" href="/@drewjarrett/structuring-data-to-predict-the-future-aka-project-flux-capacitor-7133715d7e57">结构化数据预测未来</a>帖子。</p><p id="d0c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于数据相当简单，我们可以在BigQuery中完成所有工作。为此，我们将利用BigQuery的分析功能<a class="ae jk" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/analytic-function-concepts" rel="noopener ugc nofollow" target="_blank"> PARTITION BY </a>来聚合数据。</p><p id="0363" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，下面的SQL为蚊子创建了一个数据集。</p><ul class=""><li id="3488" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">它每天聚集1周的数据，创建过去模式的特征。PARTITION BY sa4 location ORDER BY day行位于EN 7之前和0之后。</li><li id="8d26" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">它还展望了4周，以创建一个标签来训练模型展望未来。在EN 29之后和29之后之间按日行的sa4位置顺序进行分区。</li></ul><pre class="jm jn jo jp fd ka kb kc kd aw ke bi"><span id="30e4" class="kf kg hi kb b fi kh ki l kj kk">SELECT<br/>  state,<br/>  EXTRACT(MONTH FROM day) AS month,<br/>  EXTRACT(DAYOFYEAR FROM day) AS dayOfYear,<br/>  EXTRACT(WEEK FROM day) AS weekOfYear,</span><span id="edf6" class="kf kg hi kb b fi km ki l kj kk">  — Label<br/>  SUM(mosquitoSearchVolume) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 29 FOLLOWING AND 29 FOLLOWING) AS mosquitoSearchVolume4WeekLabel,</span><span id="24b9" class="kf kg hi kb b fi km ki l kj kk">  — 1 Week Volume Features<br/>  mosquitoSearchVolume / AVG(mosquitoSearchVolume) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 7 PRECEDING AND 0 FOLLOWING) AS percentageChangeFromAvgMosquitoSearchVolume1Week,<br/>  SUM(mosquitoSearchVolume) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 7 PRECEDING AND 0 FOLLOWING) / areaSize AS mosquitoSearchVolumePerAreaSize1Week,</span><span id="3abe" class="kf kg hi kb b fi km ki l kj kk">  — 1 Week Weather Features<br/>  AVG(avgTemperature) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 7 PRECEDING AND 0 FOLLOWING) AS avgTemperature1Week,<br/>  AVG(avgTd) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 7 PRECEDING AND 0 FOLLOWING) AS avgTd1Week,<br/>  MAX(maxTemperature) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 7 PRECEDING AND 0 FOLLOWING) AS maxTemperature1Week,<br/>  MIN(minTemperature) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 7 PRECEDING AND 0 FOLLOWING) AS minTemperature1Week,<br/>  AVG(precipitation) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 7 PRECEDING AND 0 FOLLOWING) AS avgPrecipitation1Week,</span><span id="21e4" class="kf kg hi kb b fi km ki l kj kk">  — 1 Week Area Size Features (remember earlier we decided to keep this!)<br/>  AVG(avgTemperature) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 7 PRECEDING AND 0 FOLLOWING) / areaSize AS avgTemperaturePerAreaSize1Week,<br/>  AVG(avgTd) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 7 PRECEDING AND 0 FOLLOWING) / areaSize AS avgTdPerAreaSize1Week,<br/>  AVG(precipitation) OVER (PARTITION BY sa4Location ORDER BY day ROWS BETWEEN 7 PRECEDING AND 0 FOLLOWING) / areaSize AS avgPrecipitationPerAreaSize1Week</span><span id="bf0d" class="kf kg hi kb b fi km ki l kj kk">FROM…</span></pre><p id="5a69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一些提示…</p><ul class=""><li id="e94f" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">根据Google Trends数据的情况，去除99%的分位数可能是有用的，以避免任何会混淆ML模型的疯狂峰值(<a class="ae jk" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/approximate_aggregate_functions" rel="noopener ugc nofollow" target="_blank"> APPROX_QUANTILES </a>对此非常有用)。</li><li id="ebad" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">不要仅仅停留在一次聚合一周(根据SQL)。ML模型可以发现其他时间段(例如12周)的天气聚合模式。</li><li id="1482" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">在SQL中，您将看到有机会创建和使用新功能，例如最大和最小降水量。看看你能找到什么来提高ML模型的准确性。</li><li id="2978" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">请记住，您正在聚合过去的数据，并且需要确保所考虑的最早日期之前有要聚合的数据，例如，WHERE子句中的1周窗口确保日期&gt;(SELECT DATE_ADD(MIN(day)，INTERVAL 7 DAY)。</li></ul><p id="7e65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是ML数据集。一个新表<em class="jt">Australia _ state _ historical _ weather _ dataset</em>准备训练一个ML模型。耶。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="5b9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> BigQuery ML </strong></p><p id="17ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以对它使用BigQuery ML 来建立模型，并开始进行预测。通过几行SQL语句(从创建模型开始)，您将有一个可以使用的模型。</p><pre class="jm jn jo jp fd ka kb kc kd aw ke bi"><span id="2d82" class="kf kg hi kb b fi kh ki l kj kk">CREATE OR REPLACE MODEL `[project].when_are_the_bugs_coming`<br/>OPTIONS(model_type=’linear_reg’,<br/>        input_label_cols=[‘mosquitoSearchVolume4WeekLabel’]) AS</span><span id="13de" class="kf kg hi kb b fi km ki l kj kk">SELECT *<br/>FROM australia_state_historical_weather_dataset</span></pre><p id="cab7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是创建的模型。现在，您可以创建包含一周内新数据的<em class="jt">澳大利亚_州_历史_天气_数据集</em>的快照，并开始进行预测。</p><pre class="jm jn jo jp fd ka kb kc kd aw ke bi"><span id="f960" class="kf kg hi kb b fi kh ki l kj kk">SELECT<br/>  month,<br/>  state,<br/>  mosquitoSearchVolume4WeekLabel AS prediction<br/>FROM<br/>  ML.PREDICT(<br/>    MODEL `[project].when_are_the_bugs_coming`<br/>    (SELECT * EXCEPT mosquitoSearchVolume4WeekLabel<br/>    FROM australia_state_snapshot_weather_dataset))</span></pre><p id="b329" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们知道你进展如何。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="be89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读。</p></div></div>    
</body>
</html>