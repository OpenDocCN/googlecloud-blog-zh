<html>
<head>
<title>Introducing Cloud Functions support in Cloud Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在云代码中引入云函数支持</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/introducing-cloud-functions-support-in-cloud-code-8d14e48d18d5?source=collection_archive---------1-----------------------#2022-12-12">https://medium.com/google-cloud/introducing-cloud-functions-support-in-cloud-code-8d14e48d18d5?source=collection_archive---------1-----------------------#2022-12-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/55638eb197a58456d2bef3290e14b295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/0*5PqTvZE5b24BeWoI.png"/></div></figure><p id="7d12" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae jk" href="https://cloud.google.com/code" rel="noopener ugc nofollow" target="_blank">云代码</a>已经为Kubernetes和云运行应用的开发周期提供IDE支持有一段时间了。<strong class="io hj">很高兴</strong> <a class="ae jk" href="https://github.com/GoogleCloudPlatform/cloud-code-vscode/blob/master/CHANGELOG.md#version-1210-dec-2022" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">报告</strong> </a> <strong class="io hj">云代码2022年12月版(1.21.0)现已支持云功能！</strong></p><p id="0502" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在云功能支持的第一个版本中，您可以:</p><ul class=""><li id="46cb" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj jq jr js jt bi translated">使用云函数浏览器查看项目的云函数属性和源代码。</li><li id="1450" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">下载您的云函数以在本地编辑您的代码，然后配置您的本地工作区以直接从云代码部署这些更改。</li><li id="1f2c" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">从VS代码中调用HTTP触发的函数。</li><li id="d6e1" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">使用云代码日志查看器查看来自云功能的日志。</li></ul><p id="cd30" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们仔细看看。</p><h1 id="0777" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">装置</h1><p id="3d8e" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">如果您一直在使用云代码，那么您可能已经在VS代码中安装了它。你只需要通过在扩展下检查来确保你有2022年12月版本(1.21.0)的云代码:</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lc"><img src="../Images/dae073a82623beb00169d4b333aaf85d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jz9poBXACbVe25A2.png"/></div></div></figure><p id="f6c2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果没有，您可以遵循此处的安装说明<a class="ae jk" href="https://cloud.google.com/code/docs/vscode/install" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="bed0" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">浏览和调用部署的功能</h1><p id="a8bc" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">你会注意到左边有一个新的云功能浏览器。在这里，您可以看到已部署函数的列表以及函数的详细信息，如触发器类型(HTTP触发的、事件触发的)和运行时(Node.js、Java、。网等。)的函数。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es ll"><img src="../Images/76691d7ea1d73c6ee1fafab10cec1721.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*j-XkwTQpnxRpFSqE.png"/></div></div></figure><p id="f2fe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您可以通过右击并选择<code class="du lm ln lo lp b">Invoke function via HTTP</code>来快速测试HTTP触发的功能。这会向部署的函数发送一个带有正确身份验证头的HTTP请求。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lq"><img src="../Images/38fddb4ae68b7518b594402cbf377116.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1NJy7jNFMdC0IVhh.png"/></div></div></figure><p id="de2f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这对于快速测试HTTP触发的函数来说非常方便，但是它目前不能用于事件触发的函数，因为这些函数需要CloudEvent而不是普通的HTTP调用。它也只适用于已部署的函数，不适用于本地运行的函数。</p><h1 id="f71f" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">创建和部署新功能</h1><p id="9c50" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">您还可以通过云代码创建和部署新功能。</p><p id="92f3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要创建新功能，请执行以下操作:</p><ul class=""><li id="a37c" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj jq jr js jt bi translated">单击VS代码底部的云代码工具栏或云函数浏览器右侧的加号(+)图标。</li><li id="919e" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">选择<code class="du lm ln lo lp b">New Application</code></li><li id="4671" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">选择<code class="du lm ln lo lp b">Cloud Functions</code></li><li id="e44a" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">为支持的语言之一选择模板:Node.js、Python、Go、Java</li></ul><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lr"><img src="../Images/562f6959314f7e171672d8883702aacd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A5mLRaUThqh96KBO.gif"/></div></div></figure><p id="b99b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这将创建一个新的工作区，使用HTTP触发的Hello World Cloud函数和您选择的语言。</p><p id="dd0e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要部署该功能，请单击工作区文件夹旁边的deploy图标，并按照提示选择您的项目、区域和运行时。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lr"><img src="../Images/80834f585ab1d6c349c86f3b8ec2750b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e1c07ZKMfQzratHh.gif"/></div></div></figure><h1 id="ff65" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">编辑已部署的功能</h1><p id="e79e" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">您还可以通过将已部署的功能下载到新的工作空间来编辑它:</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es ls"><img src="../Images/e8e340a5595b13fa60afe68b79f2adf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ba2Cyyl_sWedde6M.png"/></div></div></figure><p id="a91e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这会将函数的代码下载到本地的一个新工作区。一旦进行了编辑，就可以部署它，类似于部署新功能。</p><h1 id="809f" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">查看已部署功能的日志</h1><p id="cd97" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">一旦您部署并运行了该功能，您可以通过右键单击该功能并选择<code class="du lm ln lo lp b">View logs</code>来查看日志。这将在云代码中打开日志查看器:</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lt"><img src="../Images/f69bbca63ebde688bf119bc74a513265.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*L8JYFA79hR678sxH.png"/></div></div></figure><h1 id="a9c0" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">限制</h1><p id="b55a" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">云代码中新的云函数支持使得直接从VS代码中创建和部署云函数变得更加容易，但是请记住以下限制:</p><ul class=""><li id="054a" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj jq jr js jt bi translated">模板只适用于HTTP触发的函数。事件触发函数还没有模板。</li><li id="884f" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">测试只对已部署的HTTP触发的函数有效。对事件触发函数的本地运行函数没有测试支持。</li><li id="af73" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">模板和部署只支持四种语言(Node.js、Python、Go和Java)。我特别怀念。净支持。</li></ul><p id="066d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">关于最后一点，云代码提供了一个优秀的扩展机制，您可以在其中为示例应用程序添加模板。在以后的博文中，我将向您展示如何为这些缺失的特性创建和使用自己的模板，例如。NET函数和事件触发函数。</p></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><p id="e16b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">查看<a class="ae jk" href="https://cloud.google.com/code/docs/vscode/create-deploy-function" rel="noopener ugc nofollow" target="_blank">为官方文档创建并部署一个使用云代码的功能，而不是使用</a>的代码，如果您有任何问题或反馈，请在Twitter <a class="ae jk" href="https://twitter.com/meteatamel" rel="noopener ugc nofollow" target="_blank"> @meteatamel </a>上联系我。</p></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><p id="3cc5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="mb">原发布于</em><a class="ae jk" href="https://atamel.dev/posts/2022/12-12_introduce_functions_in_cloud_code/" rel="noopener ugc nofollow" target="_blank"><em class="mb">https://atamel . dev</em></a><em class="mb">。</em></p></div></div>    
</body>
</html>