<html>
<head>
<title>Running a static website with Hugo on Google Cloud Storage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Google云存储上与Hugo一起运行一个静态网站</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/running-a-static-website-with-hugo-on-google-cloud-storage-f84320f6ab35?source=collection_archive---------0-----------------------#2016-02-12">https://medium.com/google-cloud/running-a-static-website-with-hugo-on-google-cloud-storage-f84320f6ab35?source=collection_archive---------0-----------------------#2016-02-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="98b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我和雨果打过一些交道，这是一个用格朗语编写的静态网站生成器，最近得到了很多好评。在我的同事沃伦·润克的建议下，我还尝试将Hugo生成的静态文件托管在<a class="ae jd" href="https://cloud.google.com/storage/" rel="noopener ugc nofollow" target="_blank">谷歌云存储</a> (GCS)上。这样就不需要启动任何服务于这些文件的实例。当然，您也可以通过使用AWS S3来实现这一点。<br/> <br/>你首先需要注册一个谷歌云平台(GCP)账户。您可以使用新帐户获得30天的免费试用。一旦你登录到Google Cloud <a class="ae jd" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">控制台</a>，你需要创建一个新项目。姑且称之为<strong class="ih hj"> my-gcs-hugo-project </strong>。<br/> <br/>还需要在GCS中创建一个桶。如果要从该存储桶中自动为站点提供服务，则需要为该存储桶指定与站点相同的名称。让我们假设你称水桶为hugotest.mydomain.com。你必须验证你是否拥有mydomain.com，方法是在DNS区域文件中为指向google.com的mydomain.com创建一个特殊的CNAME，或者在hugotest.mydomain.com提供的HTML文件中添加一个特殊的META标记(你可以通过临时将hugottest CNAME绑定到<a class="ae jd" href="http://www.mydomain.com" rel="noopener ugc nofollow" target="_blank">www.mydomain.com</a>并将HEAD标记添加到www的主页来实现后者)。<br/> <br/>如果需要自动部署到GCS，最好创建一个GCP <strong class="ih hj">服务帐户</strong>。单击GCP控制台左上方的“汉堡包”菜单，然后依次转至“权限”和“服务帐户”。创建一个新的服务帐户并下载JSON格式的私钥(该密钥将被称为类似于<strong class="ih hj">my-GCS-Hugo-project-a37b 5 ACD 7 BC 5 . JSON</strong>的东西。<br/> <br/>假设您的服务帐户称为<strong class="ih hj">my-GCP-service-account 1</strong>。该账户将自动分配类似于<strong class="ih hj">my-GCP-service-account 1 @ my-GCS-Hugo-project . iam . gserviceaccount . com</strong>的电子邮件地址。<br/> <br/>我希望能够使用Jenkins将Hugo生成的静态文件部署到GCS。因此，我在Jenkins服务器上作为运行Jenkins进程的用户(在我的例子中为用户Jenkins):<br/><br/>1)遵循这些步骤安装了Google Cloud SDK</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="d042" class="jn jo hi jj b fi jp jq l jr js">$ wget <a class="ae jd" href="https://dl.google.com/dl/cloudsdk/channels/rapid/google-cloud-sdk.tar.gz" rel="noopener ugc nofollow" target="_blank">https://dl.google.com/dl/cloudsdk/channels/rapid/google-cloud-sdk.tar.gz</a></span><span id="8f17" class="jn jo hi jj b fi jt jq l jr js">$ tar xvfz google-cloud-sdk.tar.gz</span><span id="1eb9" class="jn jo hi jj b fi jt jq l jr js">$ cd google-cloud-sdk/</span><span id="3af4" class="jn jo hi jj b fi jt jq l jr js">$ ./install.sh</span><span id="2c74" class="jn jo hi jj b fi jt jq l jr js">- source .bashrc</span><span id="3744" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">$ which gcloud</strong><br/> <strong class="jj hj">/var/lib/jenkins/google-cloud-sdk/bin/gcloud</strong></span></pre><p id="cf11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2)将服务帐户的私钥<strong class="ih hj">my-GCS-Hugo-project-a 37 b5 ACD 7 BC 5 . JSON</strong>复制到。jenkins用户的ssh目录。<br/> <br/> 3)使用<strong class="ih hj"> gcloud </strong>命令行实用程序激活服务帐户(仍然作为用户jenkins)</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="d174" class="jn jo hi jj b fi jp jq l jr js"><strong class="jj hj">$ gcloud auth activate-service-account — key-file .ssh/my-gcs-hugo-project-a37b5acd7bc5.json</strong></span><span id="31dc" class="jn jo hi jj b fi jt jq l jr js">Activated service account credentials for: [my-gcp-service-account1@my-gcs-hugo-project.iam.gserviceaccount.com]</span></pre><p id="a1a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4)将当前GCP项目设置为<strong class="ih hj"> my-gcs-hugo-project </strong></p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="f0f2" class="jn jo hi jj b fi jp jq l jr js"><strong class="jj hj">$ gcloud config set project my-gcs-hugo-project</strong></span><span id="ab5e" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">$ gcloud config list</strong></span><span id="4181" class="jn jo hi jj b fi jt jq l jr js">Your active configuration is: [default]</span><span id="2d0c" class="jn jo hi jj b fi jt jq l jr js">[core]</span><span id="fcd6" class="jn jo hi jj b fi jt jq l jr js">account = my-gcp-service-account1@my-gcs-hugo-project.iam.gserviceaccount.com</span><span id="9496" class="jn jo hi jj b fi jt jq l jr js">disable_usage_reporting = True</span><span id="828b" class="jn jo hi jj b fi jt jq l jr js">project = my-gcs-hugo-project</span></pre><p id="d70a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5)通过<strong class="ih hj"> gsutil </strong>命令行实用程序配置GCS(这实际上可能是多余的，因为我们已经用gcloud配置了项目，但我把它留在这里，以防您在只使用gcloud时遇到问题)</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="5de6" class="jn jo hi jj b fi jp jq l jr js"><strong class="jj hj">$ gsutil config -e</strong></span><span id="7f42" class="jn jo hi jj b fi jt jq l jr js">It looks like you are trying to run “/var/lib/jenkins/google-cloud-sdk/bin/bootstrapping/gsutil.py config”.</span><span id="321c" class="jn jo hi jj b fi jt jq l jr js">The “config” command is no longer needed with the Cloud SDK.</span><span id="0f1c" class="jn jo hi jj b fi jt jq l jr js">To authenticate, run: gcloud auth login</span><span id="f450" class="jn jo hi jj b fi jt jq l jr js">Really run this command? (y/N) y</span><span id="bef9" class="jn jo hi jj b fi jt jq l jr js">Backing up existing config file “/var/lib/jenkins/.boto” to “/var/lib/jenkins/.boto.bak”…</span><span id="32d7" class="jn jo hi jj b fi jt jq l jr js">This command will create a boto config file at /var/lib/jenkins/.boto containing your credentials, based on your responses to the following questions.</span><span id="008b" class="jn jo hi jj b fi jt jq l jr js">What is the full path to your private key file? <strong class="jj hj">/var/lib/jenkins/.ssh/my-gcs-hugo-project-a37b5acd7bc5.json</strong></span><span id="b6b3" class="jn jo hi jj b fi jt jq l jr js">Please navigate your browser to <a class="ae jd" href="https://cloud.google.com/console#/project," rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/console#/project,</a></span><span id="2b1d" class="jn jo hi jj b fi jt jq l jr js">then find the project you will use, and copy the Project ID string from the second column. Older projects do not have Project ID strings. For such projects, click the project and then copy the Project Number listed under that project.</span><span id="894e" class="jn jo hi jj b fi jt jq l jr js">What is your project-id? <strong class="jj hj">my-gcs-hugo-project</strong></span><span id="0090" class="jn jo hi jj b fi jt jq l jr js">Boto config file “/var/lib/jenkins/.boto” created. If you need to use a proxy to access the Internet please see the instructions in thatfile.</span></pre><p id="6a7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6)将上面创建的服务帐户添加为铲斗<strong class="ih hj">hugotest.mydomain.com</strong>的所有者</p><p id="bce1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7)从jenkins服务器的本地文件系统复制一个测试文件到桶<strong class="ih hj">hugotest.mydomain.com</strong>(仍然以用户Jenkins登录)，然后列出桶中的所有文件，然后移除测试文件</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="6da5" class="jn jo hi jj b fi jp jq l jr js"><strong class="jj hj">$ gsutil cp test.go gs://hugotest.mydomain.com/</strong></span><span id="c4eb" class="jn jo hi jj b fi jt jq l jr js">Copying file://test.go [Content-Type=application/octet-stream]…</span><span id="6ff8" class="jn jo hi jj b fi jt jq l jr js">Uploading gs://hugotest.mydomain.com/test.go: 951 B/951 B</span><span id="004f" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">$ gsutil ls gs://hugotest.mydomain.com/</strong></span><span id="9521" class="jn jo hi jj b fi jt jq l jr js">gs://hugotest.mydomain.com/test.go</span><span id="3893" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">$ gsutil rm gs://hugotest.mydomain.com/test.go</strong></span><span id="9241" class="jn jo hi jj b fi jt jq l jr js">Removing gs://hugotest.mydomain.com/test.go…</span></pre><p id="be73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8)创建了一个Jenkins作业，用于将给定网站的所有静态文件上传到GCS</p><p id="d986" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设所有这些静态文件都签入到GitHub中，Jenkins作业将首先签出它们，然后执行如下操作(其中TARGET是从Jenkins多项选择下拉列表中为此作业选择的值):</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="1ae2" class="jn jo hi jj b fi jp jq l jr js">BUCKETNAME=$TARGET</span><span id="a4a5" class="jn jo hi jj b fi jt jq l jr js"># upload all filee and disable caching (for testing purposes)</span><span id="4d58" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">gsutil -h “Cache-Control:private” cp -r * gs://$BUCKETNAME/</strong></span><span id="eb31" class="jn jo hi jj b fi jt jq l jr js"># set read permissions for allUsers</span><span id="9657" class="jn jo hi jj b fi jt jq l jr js">for file in `find . -type f`; do</span><span id="a1ba" class="jn jo hi jj b fi jt jq l jr js">    # remove first dot from file name</span><span id="3ad9" class="jn jo hi jj b fi jt jq l jr js">    file=${file#”.”}</span><span id="c4b9" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">    gsutil acl ch -u allUsers:R gs://${BUCKETNAME}${file}</strong></span><span id="b53d" class="jn jo hi jj b fi jt jq l jr js">done</span></pre><p id="5cf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一个gsutil命令将所有文件递归复制(cp -r *)到bucket。这将保留网站的目录结构。出于测试目的，gsutil命令还将所有文件的Cache-Control头设置为private，这告诉浏览器不要缓存文件。</p><p id="b58c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对bucket中的每个对象执行第二个gsutil命令，它在该对象上设置ACL，以便该对象对所有用户都具有Read (R)权限(默认情况下，只有所有者和其他特别指定的用户具有Read权限)。这是因为我们想为一个公共网站提供我们的GCS服务。</p><p id="0efe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此时，您应该能够在浏览器中点击hugotest.mydomain.com，看到您的静态站点的辉煌。</p><h1 id="143e" class="ju jo hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">Hugo设置说明</h1><p id="b23d" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">我只是在过去的几周里涉猎了雨果，所以这些是非常入门的笔记。</p><p id="6deb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在OSX安装Hugo并创建新的Hugo站点</strong></p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="897d" class="jn jo hi jj b fi jp jq l jr js">$ brew update &amp;&amp; brew install hugo</span><span id="8d8f" class="jn jo hi jj b fi jt jq l jr js">$ mkdir hugo-sites</span><span id="702e" class="jn jo hi jj b fi jt jq l jr js">$ cd hugo-sites</span><span id="72fa" class="jn jo hi jj b fi jt jq l jr js">$ <strong class="jj hj">hugo new site hugotest.mydomain.com</strong></span><span id="e9bc" class="jn jo hi jj b fi jt jq l jr js">$ git clone — recursive <a class="ae jd" href="https://github.com/spf13/hugoThemes" rel="noopener ugc nofollow" target="_blank">https://github.com/spf13/hugoThemes</a> themes</span><span id="fb39" class="jn jo hi jj b fi jt jq l jr js">$ cd hugotest.mydomain.com</span><span id="b9e8" class="jn jo hi jj b fi jt jq l jr js">$ ln -s ../themes .</span></pre><p id="1b66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">至此，Hugo已经在hugotest.mydomain.com目录下创建了一个框架目录结构(通过hugo new site命令):</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="349e" class="jn jo hi jj b fi jp jq l jr js">$ ls</span><span id="0f43" class="jn jo hi jj b fi jt jq l jr js">archetypes config.toml content data layouts static themes</span></pre><p id="7bcd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(注意，为了避免重复，我们将主题目录符号链接到了hugotest.mydomain.com目录中)</p><p id="0bbd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">配置您的Hugo网站并选择主题</strong></p><p id="1f74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您需要特别注意的一个文件是站点配置文件config.toml。该文件的默认内容看似简单:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="74d1" class="jn jo hi jj b fi jp jq l jr js">$ cat config.toml</span><span id="e274" class="jn jo hi jj b fi jt jq l jr js">baseurl = “http://replace-this-with-your-hugo-site.com/"</span><span id="bb90" class="jn jo hi jj b fi jt jq l jr js">languageCode = “en-us”</span><span id="7cb4" class="jn jo hi jj b fi jt jq l jr js">title = “My New Hugo Site”</span></pre><p id="4762" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在你做任何事情之前，你需要为你的网站确定一个主题。浏览<a class="ae jd" href="http://themes.gohugo.io/" rel="noopener ugc nofollow" target="_blank"> Hugo主题</a>页面，找到你喜欢的东西。让我们假设你选择了<a class="ae jd" href="http://themes.gohugo.io/casper/" rel="noopener ugc nofollow" target="_blank">卡斯珀</a>主题。您将需要熟悉主题提供的定制。下面是我在config.toml中做的一些定制，参照了Casper主题网页上的例子:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="9803" class="jn jo hi jj b fi jp jq l jr js">$ cat config.toml</span><span id="b808" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">baseurl = “http://hugotest.mydomain.com/"</strong></span><span id="2b13" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">languageCode = “en-us”</strong></span><span id="ee5d" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">title = “My Speedy Test Site”</strong></span><span id="6032" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">newContentEditor = “vim”</strong></span><span id="178e" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">theme = “casper”</strong></span><span id="8bfc" class="jn jo hi jj b fi jt jq l jr js">canonifyurls = true</span><span id="1742" class="jn jo hi jj b fi jt jq l jr js">[params]</span><span id="ea26" class="jn jo hi jj b fi jt jq l jr js">description = “Serving static sites at the speed of light”</span><span id="626c" class="jn jo hi jj b fi jt jq l jr js">cover = “images/header.jpg”</span><span id="28b1" class="jn jo hi jj b fi jt jq l jr js">logo = “images/mylogo.png”</span><span id="be77" class="jn jo hi jj b fi jt jq l jr js"># set true if you are not proud of using Hugo (true will hide the footer note “Proudly published with HUGO…..”)</span><span id="a51a" class="jn jo hi jj b fi jt jq l jr js">hideHUGOSupport = false</span><span id="649f" class="jn jo hi jj b fi jt jq l jr js"># author = “Valère JEANTET”</span><span id="c89e" class="jn jo hi jj b fi jt jq l jr js"># authorlocation = “Paris, France”</span><span id="c59f" class="jn jo hi jj b fi jt jq l jr js"># authorwebsite = “http://vjeantet.fr"</span><span id="5d71" class="jn jo hi jj b fi jt jq l jr js"># bio= “my bio”</span><span id="f847" class="jn jo hi jj b fi jt jq l jr js"># googleAnalyticsUserID = “UA-79101–12”</span><span id="0629" class="jn jo hi jj b fi jt jq l jr js"># # Optional RSS-Link, if not provided it defaults to the standard index.xml</span><span id="3a87" class="jn jo hi jj b fi jt jq l jr js"># RSSLink = “http://feeds.feedburner.com/..."</span><span id="4488" class="jn jo hi jj b fi jt jq l jr js"># githubName = “vjeantet”</span><span id="4e80" class="jn jo hi jj b fi jt jq l jr js"># twitterName = “vjeantet”</span><span id="fd82" class="jn jo hi jj b fi jt jq l jr js"># facebookName = “”</span><span id="bc02" class="jn jo hi jj b fi jt jq l jr js"># linkedinName = “”</span></pre><p id="9b89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我把大部分Casper特有的选项都注释掉了，只指定了一个封面图片、一个徽标和一个描述。</p><p id="1694" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">创建新页面</strong></p><p id="05a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您希望博客风格的帖子出现在您的主页上，请使用Hugo在一个名为post的目录下创建一个新页面(有些主题希望这个目录命名为post，有些主题希望它是posts，所以请检查主题期望的内容)。</p><p id="3ad7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们假设你想要创建一个名为hello-world.md的页面(到目前为止我还没有提到这个，但是Hugo默认处理<a class="ae jd" href="https://daringfireball.net/projects/markdown/" rel="noopener ugc nofollow" target="_blank"> Markdown </a>页面，所以你需要稍微复习一下我们的Markdown技巧)。你会跑:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="48c9" class="jn jo hi jj b fi jp jq l jr js">$ hugo new post/hello-world.md</span></pre><p id="7de3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将在content目录下创建post目录，在content/post中创建一个名为hello-world.md的文件，并在您指定为config.toml中的newContentEditor值的编辑器(在我的例子中是vim)中打开该文件进行编辑。md文件的默认内容特定于您使用的主题。对于Casper，下面是我默认得到的结果:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="e43d" class="jn jo hi jj b fi jp jq l jr js">+++</span><span id="d67e" class="jn jo hi jj b fi jt jq l jr js">author = “”</span><span id="d0d3" class="jn jo hi jj b fi jt jq l jr js">comments = true</span><span id="a480" class="jn jo hi jj b fi jt jq l jr js">date = “2016–02–12T11:54:32–08:00”</span><span id="56c7" class="jn jo hi jj b fi jt jq l jr js">draft = false</span><span id="a26f" class="jn jo hi jj b fi jt jq l jr js">image = “”</span><span id="0d3d" class="jn jo hi jj b fi jt jq l jr js">menu = “”</span><span id="4495" class="jn jo hi jj b fi jt jq l jr js">share = true</span><span id="fc88" class="jn jo hi jj b fi jt jq l jr js">slug = “post-title”</span><span id="ac58" class="jn jo hi jj b fi jt jq l jr js">tags = [“tag1”, “tag2”]</span><span id="3fda" class="jn jo hi jj b fi jt jq l jr js">title = “hello world”</span><span id="45df" class="jn jo hi jj b fi jt jq l jr js">+++</span></pre><p id="1539" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在向该文件添加一些内容并保存它。请注意，Casper主题将draft属性设置为false。其他主题设置为true，这种情况下Hugo默认不会发布。默认情况下，Casper将slug属性设置为“post-title”。我把它改成了“hello-world”。我还修改了标签列表，只包含一个我称为“博客”的标签。</p><p id="0065" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此时，您可以单独运行hugo命令，它将获取content、static及其其他子目录下找到的文件，将它们转换为html/js/css/font文件，并保存在名为public的目录中:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="3966" class="jn jo hi jj b fi jp jq l jr js"><strong class="jj hj">$ hugo</strong></span><span id="a34c" class="jn jo hi jj b fi jt jq l jr js">0 draft content</span><span id="f56b" class="jn jo hi jj b fi jt jq l jr js">0 future content</span><span id="7962" class="jn jo hi jj b fi jt jq l jr js">1 pages created</span><span id="f813" class="jn jo hi jj b fi jt jq l jr js">3 paginator pages created</span><span id="2c9e" class="jn jo hi jj b fi jt jq l jr js">1 tags created</span><span id="cce1" class="jn jo hi jj b fi jt jq l jr js">0 categories created</span><span id="36ea" class="jn jo hi jj b fi jt jq l jr js">in 55 ms</span><span id="1986" class="jn jo hi jj b fi jt jq l jr js"><strong class="jj hj">$ find public</strong></span><span id="bcca" class="jn jo hi jj b fi jt jq l jr js">public</span><span id="3f70" class="jn jo hi jj b fi jt jq l jr js">public/404.html</span><span id="d1d4" class="jn jo hi jj b fi jt jq l jr js">public/css</span><span id="28f4" class="jn jo hi jj b fi jt jq l jr js">public/css/nav.css</span><span id="6c3c" class="jn jo hi jj b fi jt jq l jr js">public/css/screen.css</span><span id="d1dd" class="jn jo hi jj b fi jt jq l jr js">public/fonts</span><span id="82ab" class="jn jo hi jj b fi jt jq l jr js">public/fonts/example.html</span><span id="e58f" class="jn jo hi jj b fi jt jq l jr js">public/fonts/genericons.css</span><span id="d6bd" class="jn jo hi jj b fi jt jq l jr js">public/fonts/Genericons.eot</span><span id="76d0" class="jn jo hi jj b fi jt jq l jr js">public/fonts/Genericons.svg</span><span id="0e93" class="jn jo hi jj b fi jt jq l jr js">public/fonts/Genericons.ttf</span><span id="0def" class="jn jo hi jj b fi jt jq l jr js">public/fonts/Genericons.woff</span><span id="f520" class="jn jo hi jj b fi jt jq l jr js">public/index.html</span><span id="0462" class="jn jo hi jj b fi jt jq l jr js">public/index.xml</span><span id="24d8" class="jn jo hi jj b fi jt jq l jr js">public/js</span><span id="a9e6" class="jn jo hi jj b fi jt jq l jr js">public/js/index.js</span><span id="256f" class="jn jo hi jj b fi jt jq l jr js">public/js/jquery.fitvids.js</span><span id="52bc" class="jn jo hi jj b fi jt jq l jr js">public/js/jquery.js</span><span id="abaf" class="jn jo hi jj b fi jt jq l jr js">public/page</span><span id="158f" class="jn jo hi jj b fi jt jq l jr js">public/page/1</span><span id="d323" class="jn jo hi jj b fi jt jq l jr js">public/page/1/index.html</span><span id="073f" class="jn jo hi jj b fi jt jq l jr js">public/post</span><span id="2424" class="jn jo hi jj b fi jt jq l jr js">public/post/hello-world</span><span id="ea1a" class="jn jo hi jj b fi jt jq l jr js">public/post/hello-world/index.html</span><span id="00a6" class="jn jo hi jj b fi jt jq l jr js">public/post/index.html</span><span id="033c" class="jn jo hi jj b fi jt jq l jr js">public/post/index.xml</span><span id="5aeb" class="jn jo hi jj b fi jt jq l jr js">public/post/page</span><span id="4ac8" class="jn jo hi jj b fi jt jq l jr js">public/post/page/1</span><span id="1490" class="jn jo hi jj b fi jt jq l jr js">public/post/page/1/index.html</span><span id="bf4b" class="jn jo hi jj b fi jt jq l jr js">public/sitemap.xml</span><span id="84d8" class="jn jo hi jj b fi jt jq l jr js">public/tags</span><span id="f724" class="jn jo hi jj b fi jt jq l jr js">public/tags/blog</span><span id="e406" class="jn jo hi jj b fi jt jq l jr js">public/tags/blog/index.html</span><span id="6045" class="jn jo hi jj b fi jt jq l jr js">public/tags/blog/index.xml</span><span id="6b8e" class="jn jo hi jj b fi jt jq l jr js">public/tags/blog/page</span><span id="bc82" class="jn jo hi jj b fi jt jq l jr js">public/tags/blog/page/1</span><span id="d2db" class="jn jo hi jj b fi jt jq l jr js">public/tags/blog/page/1/index.html</span></pre><p id="fbab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">hugo创建了相当多的文件和目录。大部分是来自主题的样板。我们的hello-world.md文件被转到public/post下的一个名为hello-world的目录中，其中放入了一个index.html文件。注意，Casper主题以hello-world.md文件中的slug属性命名hello-world目录。</p><p id="6a43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">与Hugo一起为网站提供本地服务</strong></p><p id="8778" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Hugo使得在本地检查你的网站变得非常容易。只需运行:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="4651" class="jn jo hi jj b fi jp jq l jr js"> <strong class="jj hj">$ hugo server</strong><br/> 0 draft content<br/> 0 future content<br/> 1 pages created<br/> 3 paginator pages created<br/> 1 tags created<br/> 0 categories created<br/> in 35 ms<br/> Watching for changes in /Users/grig.gheorghiu/mycode/hugo-sites/hugotest.mydomain.com/{data,content,layouts,static,themes}<br/> Serving pages from memory<br/> Web Server is available at <a class="ae jd" href="http://localhost:1313/" rel="noopener ugc nofollow" target="_blank">http://localhost:1313/</a> (bind address 127.0.0.1)<br/> Press Ctrl+C to stop<br/> <br/> </span></pre><p id="52d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果您浏览到<a class="ae jd" href="http://localhost:1313" rel="noopener ugc nofollow" target="_blank"> http://localhost:1313 </a>，您应该会看到与此类似的内容:</p><figure class="je jf jg jh fd kx er es paragraph-image"><div class="er es kw"><img src="../Images/c30ec9bbed0e1fa634e10ecfaa2a4b65.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*-kx-S6HE3TIMYnow.png"/></div></figure><p id="51eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于几分钟的工作来说还不错。<br/> <br/>对于其他类型的内容，如主页上未显示的静态页面，您可以在pages目录中创建Markdown文件:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="4bc9" class="jn jo hi jj b fi jp jq l jr js"><br/> <br/><strong class="jj hj">$ hugo new pages/static1.md</strong><br/> +++<br/> author = “”<br/> comments = true<br/> date = “2016–02–12T12:24:26–08:00”<br/> draft = false<br/> image = “”<br/> menu = “main”<br/> share = true<br/> slug = “static1”<br/> tags = [“tag1”, “tag2”]<br/> title = “static1”<br/> <br/> +++<br/> <br/> Static page 1.<br/> <br/></span></pre><p id="4856" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，在这种情况下，菜单属性值是“main”。这告诉Casper主题在主页上的主下拉菜单中创建一个到这个页面的链接。<br/> <br/>如果你再次运行hugo server，你应该会在右上角的菜单中看到一些东西，当你点击菜单时会看到一个到static1的链接:</p><figure class="je jf jg jh fd kx er es paragraph-image"><div class="er es kw"><img src="../Images/9a331cb4bce4dd7ee8e7a05b3f505c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*0U86nS0xeTbkShd2.png"/></div></figure><p id="db99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要将您的站点部署到GCS、S3或常规服务器，您需要上传public目录下的文件和目录。就这么简单。</p><p id="c1e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的雨果笔记就讲到这里。DigitalOcean有一个很棒的关于<a class="ae jd" href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-hugo-a-static-site-generator-on-ubuntu-14-04" rel="noopener ugc nofollow" target="_blank">在Ubuntu 14.04 </a>上安装运行Hugo的教程。</p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><p id="65fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lh">原载于2016年2月12日</em><a class="ae jd" href="http://agiletesting.blogspot.com/2016/02/running-static-website-with-hugo-on.html" rel="noopener ugc nofollow" target="_blank"><em class="lh">agiletesting.blogspot.com</em></a><em class="lh">。</em></p></div></div>    
</body>
</html>