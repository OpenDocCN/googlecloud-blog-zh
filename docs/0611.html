<html>
<head>
<title>Forseti 2.0 RC2 and Security Policy as Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">凡赛堤2.0 RC2和安全策略代码</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/forseti-2-0-rc2-and-security-policy-as-code-845408825851?source=collection_archive---------2-----------------------#2018-05-21">https://medium.com/google-cloud/forseti-2-0-rc2-and-security-policy-as-code-845408825851?source=collection_archive---------2-----------------------#2018-05-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/ab16805eac786f1de18dea9622b18c27.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*C72v_59jBtYkhucKRcZyJA.jpeg"/></div></figure><div class=""/><p id="474f" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">不久前，我写了一篇关于凡赛堤安全快速安装的文章。我有机会尝试2.0版本，并想在这里记下一些事情，谈谈我是如何将安全策略作为代码来尝试的。</p><p id="4993" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae jk" href="https://docs.google.com/document/d/1RDw8QLhJVd-EAwIAviaboXwLoHPehteRGLCOXzEHBoc/preview" rel="noopener ugc nofollow" target="_blank">的安装</a>是相当无缝的，我不会进入太多的细节。在幕后，安装脚本做了一堆<a class="ae jk" href="https://cloud.google.com/deployment-manager" rel="noopener ugc nofollow" target="_blank">部署管理器</a>的事情。同样，在较高层次上，它创建了一些服务帐户、Google Cloud SQL实例、Google Cloud SQL数据库、存储桶和Google Compute Engine虚拟机实例。</p><p id="3cba" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">凡赛堤2.0 RC2体系结构发生了变化，创建了一个客户端和一个服务器计算实例。这本身确实是一个安全考虑。您可能有这样一个用例，您希望允许某人访问运行凡赛堤扫描，而不允许访问服务器本身。现在，您可以在客户端做到这一点。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="3e1b" class="js jt hp bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">代码形式的安全策略(&amp;配置)</h1><p id="2550" class="pw-post-body-paragraph im in hp io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated">在目前的状态下，我只是在管理规则。我会进行配置，但我有一些秘密要处理。也就是说，配置将以几乎相同的方式完成。</p><p id="5f2e" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">设置是<strong class="io hq"> <em class="kv">简单的</em> </strong>，我有一个GitHub <a class="ae jk" href="https://travis-ci.org/lzysh/ops-forseti-security" rel="noopener ugc nofollow" target="_blank">项目</a>的配置和规则连接到<a class="ae jk" href="https://travis-ci.org" rel="noopener ugc nofollow" target="_blank">特拉维斯配置项</a>，另一个配置项将工作，但我更喜欢这种类型的工作特拉维斯配置项。您用于Travis CI的服务帐户将需要以下角色:</p><p id="0251" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">计算机管理员<em class="kv">(也许可以精简一些..)</em> <br/>服务账户用户</p><p id="6aed" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这将允许服务帐户ssh到服务器并执行:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="8120" class="lf jt hp lb b fi lg lh l li lj">/home/ubuntu/forseti-security/setup/gcp/scripts/run_forseti.sh</span></pre><p id="d2c5" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这个脚本将从bucket中复制规则，bucket是从github项目中复制的<a class="ae jk" href="https://github.com/lzysh/ops-forseti-security/blob/master/push.sh" rel="noopener ugc nofollow" target="_blank"> push.sh </a>的前一部分。服务帐户还需要适当的存储桶权限。</p><p id="fb61" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我可以看到一些排序或规则/配置验证引擎对于这种类型的方法是有价值的，例如，通过指向新配置规则的客户端运行的方法。在配置到达服务器之前对其进行测试和验证。现在我只是用yamllint来验证yaml，这样我至少可以确定我没有中断我的yaml。</p><p id="594b" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这就是我们的想法，你可以看到一个拥有广泛政策的社区是多么有价值。虽然有些策略可以满足您组织的特定需求，但其他策略可以是通用的/可重用的和共享的。抓住你需要的政策，将它们提交到你自己的回购中，推出它们，执行一次forseti运行。容易的事..</p></div></div>    
</body>
</html>