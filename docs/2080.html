<html>
<head>
<title>Easy CSV importing into Cloud Bigtable</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">轻松将CSV导入云Bigtable</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/easy-csv-importing-into-cloud-bigtable-ed3f62139b89?source=collection_archive---------1-----------------------#2022-02-01">https://medium.com/google-cloud/easy-csv-importing-into-cloud-bigtable-ed3f62139b89?source=collection_archive---------1-----------------------#2022-02-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/d79133ccbab4606aedd9e666f244d001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M5sr7-1RRmeG--DNDzc78Q.png"/></div></div></figure><div class=""/><p id="0a4a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你想学习一个新的数据库，你会想通过加载一些数据或者做一两个查询来尝试一下。Cloud Bigtable是一个强大的数据库服务，支持规模和吞吐量，由于其NoSQL特性，它在存储数据方面非常灵活。因为Bigtable是大规模工作的，所以您用来读写它的工具对于大型数据集来说是很棒的，但是对于仅仅试用半个小时来说就不是那么好了。几年前，我试图通过编写一个关于使用数据流作业导入CSV文件的<a class="ae jo" href="https://cloud.google.com/community/tutorials/cbt-import-csv" rel="noopener ugc nofollow" target="_blank">教程来解决这个问题，但这需要启动几个虚拟机，这可能需要一些时间。</a></p><p id="c280" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Bigtable团队中，我们看到CSV导入教程是一个非常受欢迎的示例，尽管需要创建虚拟机，我们也听到了人们的反馈，他们希望有一种更快的方法来深入学习。因此，现在我们很高兴在cbt CLI工具中为Bigtable推出CSV导入程序。新的导入器获取一个本地文件，然后使用Go客户端库快速导入数据，而无需启动任何虚拟机或构建任何代码。</p><h1 id="06ec" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">装置</h1><p id="bca8" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">如果你已经安装了带有cbt工具的gcloud，你只需要通过运行<code class="du ks kt ku kv b">gcloud components upgrade</code>来确保它是最新的。否则，你可以<a class="ae jo" href="https://cloud.google.com/sdk/docs/install" rel="noopener ugc nofollow" target="_blank">安装包含cbt工具的gcloud </a>。</p><p id="44ca" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你无法在你的机器上安装这些工具，你也可以通过谷歌云控制台中的云外壳来访问它们。</p><h1 id="20e8" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">导入数据</h1><p id="ddce" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我有一个csv文件，其中包含公共Bigtable存储桶中的一些时间序列数据，所以我将用它作为例子。你也可以自己下载来试用这个工具。注意，这些步骤假设您已经创建了一个Google Cloud项目和一个<a class="ae jo" href="https://cloud.google.com/bigtable/docs/creating-instance" rel="noopener ugc nofollow" target="_blank"> Cloud Bigtable实例</a>。</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="f577" class="le jq ht kv b fi lf lg l lh li">gsutil cp gs://<a class="ae jo" href="https://storage.googleapis.com/cloud-bigtable-public-datasets/csv-import-blog-data.csv" rel="noopener ugc nofollow" target="_blank">cloud-bigtable-public-datasets/csv-import-blog-data.csv</a> .</span></pre><p id="43c7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您需要为导入准备好一个表，所以使用以下命令创建一个表:</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="d868" class="le jq ht kv b fi lf lg l lh li">cbt createtable mobile-time-series families="cell_data"</span></pre><p id="4aa4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，使用新的<code class="du ks kt ku kv b">cbt import</code>命令导入数据:</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="bc40" class="le jq ht kv b fi lf lg l lh li">cbt import mobile-time-series csv-import-blog-data.csv column-family=cell_data</span></pre><p id="25ee" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将看到一些输出，表明数据正在被导入。完成后，您可以使用cbt从表中读取几行:</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="6628" class="le jq ht kv b fi lf lg l lh li">cbt read mobile-time-series</span></pre><p id="e418" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您正在跟进，请确保在完成后删除该表。</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="f7f6" class="le jq ht kv b fi lf lg l lh li">cbt deletetable mobile-time-series</span></pre><h1 id="c91a" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">逗号分隔值（csv）文件格式</h1><figure class="kw kx ky kz fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lj"><img src="../Images/770e0b3324a3a89fcf47257599a17e29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mtFDBVpCJRprV2Bh4B5U8Q.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">不带柱族的CSV文件</figcaption></figure><figure class="kw kx ky kz fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lo"><img src="../Images/7d9dc882df9822b21011720104231f61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EsA3s0lC3jxrzDUKPyzkrQ.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">带柱族的CSV文件</figcaption></figure><p id="c965" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">CSV文件使用一行指定列限定符的标题和一个空白的行键。可以为柱族添加额外的一行标题，然后从导入命令中删除柱族参数。</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><p id="4b9f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我希望这个工具能帮助您熟悉Bigtable，并能让您更容易地使用它。请继续关注使用这个新工具的更多数据集和教程！</p></div></div>    
</body>
</html>