<html>
<head>
<title>Cloud Spanner in Visual Studio Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Visual Studio代码中的云扳手</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/cloud-spanner-in-visual-studio-code-d7e7fe7cc6f6?source=collection_archive---------1-----------------------#2021-04-16">https://medium.com/google-cloud/cloud-spanner-in-visual-studio-code-d7e7fe7cc6f6?source=collection_archive---------1-----------------------#2021-04-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3f6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://cloud.google.com/spanner" rel="noopener ugc nofollow" target="_blank"> Google Cloud Spanner </a>是一个全面管理、可扩展的关系数据库服务，用于区域和全球应用数据。它是第一个可扩展的、企业级的、全球分布的、高度一致的数据库服务，专为云构建，将关系数据库结构的优势与非关系水平扩展相结合。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/5ea3e6661905a239ecd25ee94bea5a27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*iNlSTFEy1xpftvwji_PIXA.png"/></div></figure><p id="96d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用关系数据库的优势之一是有大量的标准工具可用。Cloud Spanner现在还提供了与流行的<a class="ae jd" href="https://vscode-sqltools.mteixeira.dev/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码扩展SQL工具</a>的集成。这种集成使您能够直接从Visual Studio代码中执行查询、DML语句和DDL语句。</p><h1 id="0d42" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">安装</h1><p id="ddc7" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">在安装云扳手驱动之前，你需要从Visual Studio代码中的扩展插件添加<a class="ae jd" href="https://vscode-sqltools.mteixeira.dev/" rel="noopener ugc nofollow" target="_blank"> SQL工具</a>。然后按照以下步骤操作:</p><ol class=""><li id="4e54" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">打开SQL工具并点击<strong class="ih hj">添加新连接</strong>。</li><li id="fa04" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">根据您是否已经安装了驱动程序，SQL Tools将显示带有“获取更多驱动程序”选项的当前驱动程序，或者显示带有“搜索VSCode Marketplace”选项的空屏幕以获取驱动程序。点击其中一个。</li><li id="5768" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">VS代码市场将用所有已知的SQL工具驱动程序打开。将“云扳手”添加到搜索字符串中，并选择谷歌云扳手驱动程序。然后点击安装。</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ld"><img src="../Images/62e5c916e5a1dbe0263061946140afbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jo4PkP_WYKkk42rB3zwSBg.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx translated">安装谷歌云扳手驱动程序</figcaption></figure><h1 id="b594" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">连接到云扳手</h1><p id="5ee3" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">点击<strong class="ih hj">添加新连接</strong>连接到现有的云扳手数据库。选择Google Cloud扳手驱动程序，并输入以下信息:</p><ul class=""><li id="d5d5" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc lm kv kw kx bi translated">连接名称:您要为此连接指定的任何名称。</li><li id="dd2d" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc lm kv kw kx bi translated">Google Cloud Project ID:创建Spanner实例的Google Cloud项目的ID。</li><li id="585e" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc lm kv kw kx bi translated">Spanner实例ID:数据库所在的云Spanner实例的ID。</li><li id="d7a4" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc lm kv kw kx bi translated">扳手数据库ID:云扳手数据库的名称。</li><li id="aa01" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc lm kv kw kx bi translated">凭据密钥文件:用于连接数据库的凭据文件。只有在您的环境中尚未设置任何默认Google Cloud凭据，或者您想要使用其他凭据时，才需要这样做。</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ld"><img src="../Images/29b323804ad27d2a1f4a356e351da1d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hrGRbFL3mbfpSrfr_fQOCA.png"/></div></div></figure><p id="05fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后点击<strong class="ih hj">保存连接</strong>。</p><h1 id="6cae" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">执行语句</h1><p id="f27a" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">Cloud Spanner SQL Tools驱动程序支持查询、DML和DDL语句。不支持返回超过100，000行的查询，因为SQL Tools将所有查询结果加载到内存中。向查询中添加LIMIT子句以减少总行数。</p><p id="a18d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">DML语句将返回插入/更新/删除的行数。每个DML语句都作为一个单独的事务执行。当前版本的驱动程序(0.3.0)不支持在一个事务中有多个DML语句，也不支持<a class="ae jd" href="https://cloud.google.com/spanner/docs/dml-partitioned" rel="noopener ugc nofollow" target="_blank">分区的DML </a>语句。</p><p id="54ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">DDL语句不返回任何结果，除了在DDL语句完成执行后显示一条简短的“成功”消息。请注意，Cloud Spanner上的DDL语句可能需要很长时间。这尤其适用于需要填充索引的操作。</p><h1 id="230b" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">连接到扳手模拟器</h1><p id="aa97" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">云扳手的SQL Tools驱动也支持连接到<a class="ae jd" href="https://cloud.google.com/spanner/docs/emulator" rel="noopener ugc nofollow" target="_blank">扳手模拟器</a>。按照以下步骤连接到模拟器:</p><ol class=""><li id="f4ff" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated"><a class="ae jd" href="https://cloud.google.com/spanner/docs/emulator#installing_and_running_the_emulator" rel="noopener ugc nofollow" target="_blank">启动扳手模拟器</a>。</li><li id="55c6" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">在SQL Tools中点击Add New Connection，选择Google Cloud Spanner驱动。</li><li id="a211" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">为连接命名，并在连接的项目、实例和数据库字段中输入“测试项目”、“测试实例”和“测试数据库”。也可以使用任何其他id，包括模拟器上的任何现有实例和/或数据库。如果模拟器上不存在项目、实例或数据库，驱动程序将自动创建它们。</li><li id="b36c" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">选中“连接到仿真器”复选框。</li><li id="9000" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">您<strong class="ih hj">不需要</strong>设置<strong class="ih hj"> SPANNER_EMULATOR_HOST </strong>环境变量来从Visual Studio代码连接到它。</li><li id="4584" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">您<strong class="ih hj">不需要</strong>在Visual Studio代码的连接设置中设置模拟器的主机和端口号，除非您已经在不同于默认的主机/端口上启动了模拟器。</li><li id="7fab" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">保存连接。</li></ol><p id="6baa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以连接到模拟器并创建几个测试表，测试不同的查询/插入/更新/删除等。</p><p id="c40b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请记住，您总是需要在连接到模拟器之前启动模拟器，但是您不需要在模拟器上创建实例和/或数据库。另外，当通过Visual Studio代码连接时，您<strong class="ih hj">不需要</strong>来设置<strong class="ih hj"> SPANNER_EMULATOR_HOST </strong>环境变量。</p><h1 id="6ca9" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">问题/功能请求</h1><p id="e6ed" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">请在此库中报告您对Visual Studio代码<a class="ae jd" href="https://github.com/cloudspannerecosystem/sqltools-cloud-spanner-driver/issues" rel="noopener ugc nofollow" target="_blank">中的Cloud Spanner的任何问题和/或功能请求。</a></p></div></div>    
</body>
</html>