<html>
<head>
<title>Hello to Cloud Function &amp; Cloud Run</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你好，云功能和云运行</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/hello-to-cloud-function-cloud-run-f3a09f72d3f2?source=collection_archive---------2-----------------------#2022-11-01">https://medium.com/google-cloud/hello-to-cloud-function-cloud-run-f3a09f72d3f2?source=collection_archive---------2-----------------------#2022-11-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/e81100b47ed9d47455593dfbeefd1d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*61E4bxwV-M1gmxCxNqz4eg.gif"/></div></figure><h1 id="197c" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">谷歌云功能:</h1><p id="7af2" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">想象一下，当一个事件发生时，我们想要执行一些代码，比如一个文件被上传到Google Storage，一个错误日志被写到云日志或者一条消息到达发布/订阅主题。在这种情况下，谷歌云功能应运而生。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/94f431008fc4ad9b4f97a291dd8add2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*FBmOYK2PVJljNEy2K0ZG9Q.png"/></div></figure><blockquote class="kn ko kp"><p id="616f" class="jk jl kq jm b jn kr jp jq jr ks jt ju kt ku jx jy kv kw kb kc kx ky kf kg kh hb bi translated">云功能的伟大之处在于，我们不需要担心服务器的设置、扩展和可用性。它会自己处理一切。云函数的每次调用都有时间限制。默认情况下。1分钟，最长9分钟。最新的V2版本最长为60分钟。</p></blockquote><p id="3f44" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">让我们在演示中向云功能问好:</p><p id="35c3" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">首先，在谷歌控制台中搜索云功能，如下图。如果这是你第一次参与这个项目，那么它将启用所有必要的API。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es kz"><img src="../Images/cbe62b04090223357e70b8c8c0ea2d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D1p9Ym7gD3Wpeetjn1RvmA.png"/></div></div></figure><p id="6ba6" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">创建云函数的第一个选择是使用第一代还是第二代。现在，让我们选择第一代并给函数命名。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es le"><img src="../Images/5fc319aa5caaa63d1d35c184fc8d7c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XUY46Fk6JrhEY6kJAta78g.png"/></div></div></figure><p id="9e48" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">对于触发器，我们可以使用HTTP端点。只需复制URL并取消选中HTTPS，因为我们现在不需要它。点击下一步。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lf"><img src="../Images/7ca0ea32cd9f1b619821670381d128f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kNGQLHOsDKl7Zdl4R-D9-A.png"/></div></div></figure><p id="7958" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">函数提供了许多可以使用的运行时，如Node.js、Java、Go和. Net。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lg"><img src="../Images/43442f4826a8da5ae5e62947044abe75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*prYujX44cNgyb7KUyBayVg.png"/></div></div></figure><p id="ad7d" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">部署完成后，让我们做一些测试。转到Testing选项卡并单击Test in Cloud Shell，如下所示。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lh"><img src="../Images/c9bcefb10096ee94d2e178037e2ff369.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*InTIndAun9sxtQS6iBszXA.png"/></div></div></figure><p id="0fe1" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">云壳可能需要一些时间来解压缩您的磁盘。一旦Cloud Shell启动，您将会看到一些Curl命令已经存在。只要按下回车键。授权API调用。我们的功能运行成功。</p><p id="88ed" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">在日志中，我们将看到函数执行如下:</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es li"><img src="../Images/4308bb939dda75471ad5629687cee595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kIqQmC6sBM2D4PmEI5jRVg.png"/></div></div></figure><p id="3e29" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">让我们在日志中打印一些东西。转到Source选项卡，然后单击Edit按钮。单击Next并根据您的运行时输入一个日志行，如下所示。部署好了再来测试吧！</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lj"><img src="../Images/56f3425a223d9f7b7c953a7dd51b9533.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3-vhEIhFYSFdfwc1GFVFRw.png"/></div></div></figure><p id="809d" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">现在，我们可以在日志和云壳中看到一条消息。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lk"><img src="../Images/e38be30a3362a2c29219f446d39e9262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yrv6DDM3g47FZFH7_qbCeA.png"/></div></div></figure><p id="eeb7" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">看，现在我们已经创建了一个云函数并部署了两次。云函数最重要的一点是，你只需要在调用它的时候付费。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="e9ae" class="im in hi bd io ip ls ir is it lt iv iw ix lu iz ja jb lv jd je jf lw jh ji jj bi translated">谷歌云运行:</h1><p id="850e" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">云运行是在几秒钟内将容器部署到生产环境的最简单方法。当我们使用Kubernetes时，我们需要创建一个集群，然后部署我们的微服务。但是，对于Cloud Run来说，一切都得到照顾。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lx"><img src="../Images/fa2fa1c2baeea89da5bd396b3f0e5dea.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*vplp2BZKg-iJDeTUNcPPSw.jpeg"/></div></div></figure><p id="a796" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">让我们开始创建一个服务，在Google控制台中搜索Cloud Run，然后单击Create Service。第一步，我们需要选择一个容器图像。通常，您将首先创建一个容器，并将其推送到容器存储库。在这里，我们可以通过单击select从容器注册表中选择一个Hello容器映像。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ly"><img src="../Images/ba6f346e95bbe42eff21b0de5a7a4b0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tVf5SOUHZqeiFyzg5oPY_Q.png"/></div></div></figure><blockquote class="kn ko kp"><p id="a48c" class="jk jl kq jm b jn kr jp jq jr ks jt ju kt ku jx jy kv kw kb kc kx ky kf kg kh hb bi translated">Container Registry是一个存储私有容器映像<strong class="jm hj">的服务。</strong>它提供了一个由Artifact Registry提供的功能子集，这是一个通用的存储库管理器，也是在Google Cloud中管理容器图像和其他工件的推荐服务。</p></blockquote><p id="2ee9" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">接下来的事情是给出服务名。让我们把这个名字命名为“我的首次云运行服务”。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lz"><img src="../Images/cad174dc4a260810f03228cd9601e403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rZ0tnjp5crSGF77rGboj5g.png"/></div></div></figure><p id="c113" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">对于CPU分配，我们有两个选项:</p><ol class=""><li id="e539" class="ma mb hi jm b jn kr jr ks jv mc jz md kd me kh mf mg mh mi bi translated">仅在请求处理期间分配CPU。为此，我们将按要求收费。</li><li id="54aa" class="ma mb hi jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated">为整个容器生命周期分配CPU。为此，我们将终生为此付出代价。</li></ol><p id="1da3" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">出于演示目的，让我们保留默认值并允许未经身份验证的调用，如下所示:</p><figure class="kj kk kl km fd ij er es paragraph-image"><div class="er es mo"><img src="../Images/07b14e35cf5f150aa75a6bd22c7078d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*HiBQgctzXYxCH8skBfT-ug.png"/></div></figure><p id="80da" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">给出一个实例的最大数量。我们现在设置为单击“Create”。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mp"><img src="../Images/243bf0c7c107aff77ea49df3ef942931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0DQQwAZ_2wFv0FTduuX6Kg.png"/></div></div></figure><p id="0ac8" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">耶！我们的云跑在那里！点击网址:</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mq"><img src="../Images/1ecdf4a1fc498e46c8d88794feef881b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*su9TfhulIgcsMi3HzbH97g.png"/></div></div></figure><blockquote class="kn ko kp"><p id="2434" class="jk jl kq jm b jn kr jp jq jr ks jt ju kt ku jx jy kv kw kb kc kx ky kf kg kh hb bi translated">我们已经看到，一旦有了容器，我们就能够在云运行中以最少的配置进行部署。它建立在开放标准的基础上，这是一种创新。这是一个完全托管的无服务器平台，适用于容器化的应用程序。这也是按使用付费。Cloud Run没有语言、二进制和依赖方面的限制，因为我们使用的是容器。由于基于容器的架构，它很容易移植。</p></blockquote></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mr"><img src="../Images/6f94feb9c92604805320bc8dcf26d780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SedY8q2zJJIuWR-kESCkQw.jpeg"/></div></div></figure><p id="6d9e" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated"><strong class="jm hj">结论:</strong></p><ul class=""><li id="25fa" class="ma mb hi jm b jn kr jr ks jv mc jz md kd me kh ms mg mh mi bi translated">云函数用于执行事件上的代码。云运行用于部署容器化的应用程序。</li><li id="b18e" class="ma mb hi jm b jn mj jr mk jv ml jz mm kd mn kh ms mg mh mi bi translated">两者都是完全托管的服务，我们必须付费使用。使用什么取决于我们的业务需求。</li><li id="5746" class="ma mb hi jm b jn mj jr mk jv ml jz mm kd mn kh ms mg mh mi bi translated">如果我们想要一个简单的微服务代码，那么我们可以使用云函数。如果我们想要一个可移植的基于容器的架构，我们可以使用云运行。</li></ul></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><p id="29c7" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">希望你喜欢。</p><p id="bb2d" class="pw-post-body-paragraph jk jl hi jm b jn kr jp jq jr ks jt ju jv ku jx jy jz kw kb kc kd ky kf kg kh hb bi translated">如果你有任何相关的疑问，我很乐意帮助你。保持联系:)</p><h2 id="67aa" class="mt in hi bd io mu mv mw is mx my mz iw jv na nb ja jz nc nd je kd ne nf ji ng bi translated">推特:【https://twitter.com/SakshiKhandlwlT2<br/>LinkedIn:<a class="ae nh" href="http://www.linkedin.com/in/sakshikhandelwal276" rel="noopener ugc nofollow" target="_blank">www.linkedin.com/in/sakshikhandelwal276</a></h2></div></div>    
</body>
</html>