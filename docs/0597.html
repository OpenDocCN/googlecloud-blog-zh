<html>
<head>
<title>Predicting user engagement with news on Reddit using Kaggle or Colab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Kaggle或Colab预测用户对Reddit新闻的参与度</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/predicting-user-engagement-with-news-on-reddit-using-kaggle-or-colab-d5ef0dcaff6a?source=collection_archive---------1-----------------------#2018-05-08">https://medium.com/google-cloud/predicting-user-engagement-with-news-on-reddit-using-kaggle-or-colab-d5ef0dcaff6a?source=collection_archive---------1-----------------------#2018-05-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8dc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">本故事最初发表于</em><a class="ae je" href="https://datancoff.ee/2018/05/predicting-user-engagement-with-news-on-reddit-using-kaggle-or-colab/" rel="noopener ugc nofollow" target="_blank"><em class="jd">datan coff . ee</em></a><em class="jd">。</em></p><p id="91c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大约一个月前，我写了一个由3部分组成的博客系列(第<a class="ae je" href="https://cloud.google.com/blog/big-data/2018/03/predicting-community-engagement-on-reddit-using-tensorflow-gdelt-and-cloud-dataflow-part-1" rel="noopener ugc nofollow" target="_blank"> 1 </a>、<a class="ae je" href="https://cloud.google.com/blog/big-data/2018/03/predicting-community-engagement-on-reddit-using-tensorflow-gdelt-and-cloud-dataflow-part-2" rel="noopener ugc nofollow" target="_blank"> 2 </a>和<a class="ae je" href="https://cloud.google.com/blog/big-data/2018/03/predicting-community-engagement-on-reddit-using-tensorflow-gdelt-and-cloud-dataflow-part-3" rel="noopener ugc nofollow" target="_blank"> 3 </a>)，内容是预测用户在Reddit社区(subreddits)中对新闻的参与度。作为该研究基础的Jupyter笔记本现在可以作为Kaggle <a class="ae je" href="https://www.kaggle.com/datancoffee/predicting-community-engagement-on-reddit" rel="noopener ugc nofollow" target="_blank">内核</a>以及配套的<a class="ae je" href="https://www.kaggle.com/datancoffee/predicting-reddit-community-engagement-dataset" rel="noopener ugc nofollow" target="_blank">数据集</a>获得。</p><p id="9d5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我发现，新闻文章的发布领域和文本内容可以很好地预测新闻文章的最终位置，以及分享新闻帖子的人。此外，当一起使用时，发布域、文本内容、<strong class="ih hj">和</strong>提交者产生了一个模型，该模型以92%的准确率预测了子编辑，这可以用于异常检测，例如验证子编辑的发布是否符合已经看到的行为，或者是否构成了新的趋势或潜在的机器人活动。</p><p id="81db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于用户参与度指标，如流行度得分或评论者和评论的数量，最佳预测者是将文章发布到Reddit的人(帖子提交者)，以及发布新闻的子编辑。使用文章文本内容的模型在预测参与度指标方面没有最好的准确性(尽管它们对Subreddit和Submitter有很好的预测性)，但我目前正在改进我使用的文本嵌入，并希望在不久的将来发布更多这方面的内容。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/bc7c0a0c6523aa072cb3660fed322f57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9HDKc9rRFEIWpZ975_8z6w.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">Reddit新闻用户参与度的预测指标</figcaption></figure><p id="cca6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着笔记本现在在<a class="ae je" href="https://github.com/GoogleCloudPlatform/dataflow-opinion-analysis/tree/master/models" rel="noopener ugc nofollow" target="_blank"> github </a>中登记并在<a class="ae je" href="https://www.kaggle.com/datancoffee/predicting-community-engagement-on-reddit" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>中共享，您可以比以前更容易地重现研究结果。以下是在这些环境下运行笔记本电脑的一些提示和技巧。</p><h2 id="8970" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">针对托管环境优化笔记本执行</h2><p id="29df" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">你可以在<a class="ae je" href="https://colab.research.google.com" rel="noopener ugc nofollow" target="_blank"> Colab </a>或者<a class="ae je" href="https://www.kaggle.com/datancoffee/predicting-community-engagement-on-reddit" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>中运行这个笔记本。要在Colab中运行，从<a class="ae je" href="https://github.com/GoogleCloudPlatform/dataflow-opinion-analysis/tree/master/models" rel="noopener ugc nofollow" target="_blank"> github </a>下载RedditEngagement笔记本，导入到<a class="ae je" href="https://colab.research.google.com" rel="noopener ugc nofollow" target="_blank"> Colab </a>中，在“定义常量和全局变量”代码单元格中设置<code class="du kv kw kx ky b">current_run_in_colab</code>变量为<code class="du kv kw kx ky b">True</code>，否则设置为<code class="du kv kw kx ky b">False</code>。</p><h2 id="7b3d" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">对于输入数据集，可以在BigQuery和CSV文件之间进行选择</h2><p id="025a" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">决定是从<a class="ae je" href="https://bigquery.cloud.google.com/dataset/datancoffee:discussion_opinions?pli=1" rel="noopener ugc nofollow" target="_blank"> datancoffee BigQuery数据集</a>还是从<a class="ae je" href="https://github.com/GoogleCloudPlatform/dataflow-opinion-analysis/blob/master/models/data/reddit-ds.zip" rel="noopener ugc nofollow" target="_blank">快照CSV文件</a>中获取训练数据。目前，只有Colab允许您访问datancoffee BigQuery数据集。要从BigQuery获取训练数据，请在“定义常量和全局变量”代码单元格中将<code class="du kv kw kx ky b">current_read_from_bq</code>变量设置为<code class="du kv kw kx ky b">True</code>，否则，将其设置为<code class="du kv kw kx ky b">False</code>。</p><h2 id="0abb" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">获取CSV文件</h2><p id="6fb1" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">从<a class="ae je" href="https://github.com/GoogleCloudPlatform/dataflow-opinion-analysis/" rel="noopener ugc nofollow" target="_blank">数据流观点分析github库</a>下载<a class="ae je" href="https://github.com/GoogleCloudPlatform/dataflow-opinion-analysis/blob/master/models/data/reddit-ds.zip" rel="noopener ugc nofollow" target="_blank"> reddit-ds.zip </a>快照文件存档。<a class="ae je" href="https://github.com/GoogleCloudPlatform/dataflow-opinion-analysis/blob/master/models/RedditEngagement.ipynb" rel="noopener ugc nofollow" target="_blank">设置数据集的说明</a>可在笔记本上找到。在Kaggle中，快照数据集与内核打包在一起。你不需要做任何事情就可以使用它。</p><h2 id="cd47" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">使用GPU在Kaggle中运行</h2><p id="96fc" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">使用GPU运行确实会在执行时间上产生差异。使用GPU的训练运行时间约为20秒，而使用常规CPU的训练运行时间约为400秒。</p><h2 id="a315" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">提高模型准确性</h2><p id="e688" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">完整Reddit数据集中的数据点数量很大，因此可用内存的大小很重要。<code class="du kv kw kx ky b">current_sample_frac</code>变量控制输入数据集的一部分，该部分将被采样，然后划分为训练、测试和验证子集。笔记本中的默认设置已被选择在Kaggle和Colab的公共托管版本中运行。对于子分类目标，设置为<code class="du kv kw kx ky b">current_sample_frac = 0.5</code>，对于评论分类目标，设置为<code class="du kv kw kx ky b">current_sample_frac = 0.25</code>。</p><p id="76e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，这大约是我们在3部分博客系列中使用的<strong class="ih hj">的一半，因此，在运行未修改的笔记本电脑时，您将获得的准确性数字将低于我们在博客系列中获得的数字。</strong></p><p id="91bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Kaggle用GPU运行时给出6.5GB内存。要更准确地运行模型，请在可用内存约为35–40GB的环境中自托管模型。在这种情况下，您可以为子分类设置<code class="du kv kw kx ky b">current_sample_frac = 0.99</code>，为注释分类设置<code class="du kv kw kx ky b">current_sample_frac = 0.5</code>(或更高)。</p><p id="e4e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">享受快乐的深度学习！</p></div></div>    
</body>
</html>