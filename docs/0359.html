<html>
<head>
<title>Simplifying Big Data with Google Cloud Dataproc</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Google Cloud Dataproc简化大数据</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/simplifying-big-data-with-google-cloud-dataproc-9b3bf844b48e?source=collection_archive---------0-----------------------#2017-08-20">https://medium.com/google-cloud/simplifying-big-data-with-google-cloud-dataproc-9b3bf844b48e?source=collection_archive---------0-----------------------#2017-08-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0d35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我以前的老板拉里·埃里森(甲骨文的创始人和现任首席技术官)曾经说过没有“云”，它只是一台连接到网络上的电脑。他并没有完全错，但是云计算不仅仅是这样。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/8c5f052c5610b3af9f86d943e333accb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*WgG0WB5y7vkIWb-VWT3rig.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">不是水蒸气。</figcaption></figure><blockquote class="jq jr js"><p id="5b54" class="if ig jt ih b ii ij ik il im in io ip ju ir is it jv iv iw ix jw iz ja jb jc hb bi translated">你在说什么？<strong class="ih hj">不是水蒸气</strong>。它是一台连接到网络的计算机！”—拉里·埃里森，甲骨文公司，2009年</p></blockquote><p id="41da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据美国国家标准与技术研究院(NIST)的定义，云计算由五个基本特征组成:</p><ol class=""><li id="ec93" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">按需自助服务:您应该能够在需要服务的任何时候请求服务，而无需人工干预。</li><li id="6c7b" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">广泛的网络接入:它应该随处可达</li><li id="721b" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">资源共享:你与其他人(公司)共享资源</li><li id="1d4c" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">快速弹性:你有能力快速地上下伸缩</li><li id="8bb2" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">计量服务:你的消费是经过计量的，所以你可以只为你真正使用的东西付费。</li></ol><p id="729a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，它还定义了三种服务模型:基础设施即服务(IaaS)、平台即服务(PaaS)和软件即服务(SaaS)。</p><p id="3aa9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">网上有一个有趣的类比，我喜欢用来解释这些服务模型。它被称为“比萨饼作为一种服务”。想象一下你想吃披萨……实际上你有4种不同的方式来满足你的愿望:</p><ol class=""><li id="1682" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">自己动手:假设你有烤箱，有原材料，想从头开始做。你不仅要做饭，还要担心摆桌子、放盘子和买汽水。让我们不要忘记清理！:)这相当于拥有一个内部部署的技术堆栈:硬件和软件，一切都由您的团队安装、配置和运行。</li><li id="ca86" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">带烤:和以前一样，但不是用原材料做比萨饼，而是用预先做好的比萨饼。你还是要煮它，做其他的事情。有些步骤是由您完成的…这就是基础架构即服务:他们为您提供虚拟机，但仅此而已。软件安装和使用由您负责。</li><li id="3eb0" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">送货:你做好了比萨饼并送到了你的手中，但你仍然要担心事后摆桌子和洗碗的问题。这就是平台即服务:您拥有一个完整的平台，可以是数据库、中间件层或机器学习堆栈。最终的应用取决于您，但是您已经准备好了大部分的堆栈。</li><li id="8bc0" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">外出就餐:你不想担心任何事情，你只想吃你的比萨饼！这就是软件即服务，产品随时可供您使用，例如，像Gmail、Google Documents或Hangouts。</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kl"><img src="../Images/564d09f6e4d1d5b8f99b6294244de2e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qJudVUmYpydLwMTWskh2CA.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">披萨即服务模式(作者不详)</figcaption></figure><p id="98ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用云服务的主要优势是能够使用高端环境，而不必支付全价。比如，您不需要购买所有的硬件，也不需要只为布线和支持一切而保留一名员工，而在内部部署时，即使您不全天候使用，也必须预先支付全额费用。</p><p id="4b27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，您可以根据需要灵活地扩大或缩小资源规模。对于内部设置，您可能永远不会缩减规模。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kq"><img src="../Images/a362ff2f8ec65f5fcd1a98fa09b2e153.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*x4RXj6ZEOPLOGzC0rnn5eg.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">上田拓也的《地鼠》(<a class="ae jd" href="http://twitter.com/tenntenn" rel="noopener ugc nofollow" target="_blank">坦恩</a> ) /蕾妮·弗伦奇</figcaption></figure><p id="073a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">像大多数云一样，Google Cloud提供所有的服务级别，但是在本文的其余部分，我将重点关注他们的数据处理PaaS产品:Google Dataproc。</p><p id="7305" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我选择谈论这项技术是因为没有比大数据技术堆栈更好的复杂环境的例子了。在云上运行这种类型的工作负载的好处很快就会显现出来。</p><p id="dc76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是为了理解Dataproc，首先让我们在大数据世界中深入挖掘一下。</p><p id="16c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大数据，顾名思义，就是处理海量数据。这个术语第一次出现在文献中是在1997年10月发表的一篇论文中，该论文由美国宇航局的迈克尔·考克斯和大卫·埃尔斯沃斯撰写:</p><blockquote class="jq jr js"><p id="eb94" class="if ig jt ih b ii ij ik il im in io ip ju ir is it jv iv iw ix jw iz ja jb jc hb bi translated">我们称之为<strong class="ih hj">大数据</strong>的问题。当数据集不适合主内存(在内核中)时，或者当它们甚至不适合本地磁盘时。—迈克尔·考克斯和大卫·埃尔斯沃斯，1997年</p></blockquote><p id="a1f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在2003年发表了“Google文件系统”和2004年发表了“MapReduce:大型集群上的简化数据处理”之后，这个术语开始流行起来，这两篇论文都是由Google的工程师撰写的。他们描述了谷歌如何建立一个引擎来使用由商用硬件组成的集群处理大量数据。</p><p id="eff3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些文章的答案是在2006年创建的Hadoop，这是一个开源框架，实现了像谷歌一样的分布式文件系统，称为HDFS (Hadoop分布式文件系统)，并具有运行MapReduce工作负载的能力。</p><p id="de44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了能够在集群上运行工作负载之外，MapReduce模型还有其局限性，因为它意味着复杂的工作负载需要在磁盘上暂存中间结果。</p><p id="4b8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Apache Spark作为一种新的分布式计算框架，在Hadoop上运行，旨在解除这种磁盘暂存限制。它使用弹性分布式数据集(仅存在于内存中的数据集)的概念，允许处理迭代工作负载，而不必将数据转移到磁盘。</p><p id="f806" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种架构上的改变使性能平均提升了两个数量级，很快Spark就成为了行业的新黄金标准。</p><p id="23c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，为了运行Spark工作负载，我们需要一个与此类似的设置:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kr"><img src="../Images/439ca2829495e23cd25f68ef0bd7c8da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JZ_S02j-PuXhDznaJI93-w.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">大数据技术堆栈(非详尽列表)</figcaption></figure><p id="a697" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Spark在中间，但还有许多其他大数据工具...它看起来非常像一个动物园，甚至有一个叫“动物园管理员”的工具来管理一切。</p><p id="8611" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">似乎很麻烦，对吧？确实是！但幸运的是，我们现在可以利用Dataproc来为我们做这个疯狂的设置，所以我们只需要担心吃比萨饼…我的意思是，运行我们的工作负载！:)</p><p id="1ef2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Dataproc的卖点是我们可以在不到90秒的时间内设置整个集群。如果有任何一家公司可以做出这样疯狂的声明，那就是谷歌，但我必须说，以我的个人经验来看，有时需要大约2到2分半钟才能完成。但是，嘿，看看上面所有的疯狂，它仍然令人印象深刻！</p><p id="7f4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Google Dataproc允许您从命令行(使用Google Cloud SDK的gcloud命令)或云控制台运行Spark作业。它还可以选择运行用Scala和Python (PySpark)编写的作业。</p><p id="f398" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它还可以连接到其他谷歌云平台产品，比如BigQuery。这意味着您可以运行数据处理或机器学习Spark作业，并将其输出到BigQuery进行进一步分析，或者您可以使用BigQuery数据作为工作负载的输入。</p><p id="7507" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">顺便说一下，如果您对这个场景感兴趣，您一定要查看文档:<a class="ae jd" href="https://cloud.google.com/dataproc/docs/tutorials/bigquery-connector-spark-example" rel="noopener ugc nofollow" target="_blank">使用BigQuery连接器和Spark </a>。</p><p id="1f8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总之，通过使用Google Cloud Platform，您可以简化大数据堆栈的部署，只需几次点击和几分钟时间，您就可以拥有一个集群来处理您的工作负载。此外，如果您需要扩大或缩小规模，也可以用同样的方式完成，因此您不必担心长期的规模调整或前期的基础架构费用。</p><p id="b9e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想在不支付高额入门费用的情况下体验大数据，GCP绝对是你的不二之选。它让几乎任何类型的公司都可以获得大数据的颠覆性力量。</p><p id="0d2e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jt">附:本文是我2017年8月5日在Google Launchpad Build阿雷格里港发表的关于Google云平台的演讲的修改版。</em></p></div></div>    
</body>
</html>