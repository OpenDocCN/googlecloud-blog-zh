<html>
<head>
<title>Serverless database on Cloud Run</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云上运行的无服务器数据库</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/serverless-database-on-cloud-run-1a930eb00618?source=collection_archive---------0-----------------------#2022-02-09">https://medium.com/google-cloud/serverless-database-on-cloud-run-1a930eb00618?source=collection_archive---------0-----------------------#2022-02-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/36d2f20f0ac98787510fd038ffca0247.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ih0UfFn0s8JvDXpQtjjUWg.png"/></div></div></figure><p id="291b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">托管服务是一种新模式，让<strong class="is hj">云提供商为您管理基础设施和网络</strong>。你只需要<strong class="is hj">关注商业价值</strong>来建立它，你<strong class="is hj">只支付为你管理的实例</strong>。</p><p id="f45c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在其<strong class="is hj">的完美形式中，托管服务变成了无服务器服务</strong>，一种按使用付费的解决方案。您不必担心基础设施和成本:<strong class="is hj">如果您不使用它，就不用为它付费。</strong></p><h1 id="07da" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">谷歌云提案</h1><p id="71f1" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">谷歌云提出了大量的无服务器产品，有些是独一无二的，在其他云提供商平台上没有任何对等物。</p><ul class=""><li id="d910" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated"><strong class="is hj">2008年发布的App Engine </strong>，是第一批无服务器产品之一，远早于广受欢迎的AWS Lambda。到目前为止，竞争对手还没有真正等同于App Engine(按使用付费模式)的产品</li><li id="3ad3" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">云运行</strong>，一个无服务器的容器即服务平台，也没有任何等价物(按使用付费模式)</li><li id="4dae" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">一个全球性的信息服务，你永远不用担心位置问题，它就是全球性的！</li><li id="a8f5" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj"> BigQuery </strong>，<strong class="is hj"> Firestore </strong>，<strong class="is hj">云调度器</strong>，<strong class="is hj">云工作流</strong>，<strong class="is hj">云任务</strong>，…等等</li></ul><blockquote class="lf"><p id="cd65" class="lg lh hi bd li lj lk ll lm ln lo jn dx translated">还有一个无服务器的关系数据库，类似AWS Aurora的东西？没什么！！！</p></blockquote><p id="9240" class="pw-post-body-paragraph iq ir hi is b it lp iv iw ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn hb bi translated">什么？？没有关系数据库？想要一个，就得<strong class="is hj">用云SQL，别的什么都不用</strong>。<br/>它不是按使用量付费，而是<strong class="is hj">“唯一”托管</strong>，最小实例(1vCPU，3.75Gb内存)约为<strong class="is hj"> $50每月</strong>！</p></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><p id="6bc5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mb">我</em> <strong class="is hj"> <em class="mb">在过去的几年里多次询问谷歌云</em> </strong> <em class="mb">关于一个按使用量付费的关系数据库服务，得到的答案总是</em> <strong class="is hj"> <em class="mb">没有</em> </strong> <em class="mb">，与强大且难以克服的论点相关联，但是……</em></p><h1 id="d495" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">使用案例</h1><p id="00f5" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">但是，当你有<strong class="is hj">大型开发团队</strong>，每个开发人员一个谷歌云项目<strong class="is hj">时，你真的<strong class="is hj">愿意每个开发人员</strong>每月支付50美元来测试每天/每周的一些部署吗？<br/>你真的<strong class="is hj">想让服务器继续运行</strong>，为了每天/每周的几次测试<strong class="is hj">消耗电能</strong>和<strong class="is hj">产生二氧化碳</strong>吗？</strong></p></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><p id="7f3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于大公司和开发团队来说，50美元也许不算多，但是对于一个无用的用例来说，50美元就太多了。 <br/>但是对于其他公司来说，<strong class="is hj">像协会</strong>，有很多志愿者，<strong class="is hj">预算低/没有预算，每月50美元太多了</strong>！</p><h2 id="7df3" class="mc jp hi bd jq md me mf ju mg mh mi jy jb mj mk kc jf ml mm kg jj mn mo kk mp bi translated">共同的期望</h2><p id="d004" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">那些用例导致省钱，并且<strong class="is hj">有相同的期望</strong>，或者更确切地说是“非期望”:</p><ul class=""><li id="81c2" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">服务<strong class="is hj">有时会失败</strong></li><li id="ce6d" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">服务<strong class="is hj">性能可能很低</strong>，至少在启动时是如此(当您激活实例时，即“冷启动”)</li></ul><h1 id="66b2" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">云运行解决方案</h1><p id="5b7d" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">云运行是一种灵活的服务，可以托管几乎任何东西。您部署一个容器，并按使用量付费；如果你不使用它，你什么也不用付，如果你有很多流量，它<strong class="is hj">可以扩展到数百个并行实例。</strong></p><p id="9e1b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，它伴随着那些约束条件:</p><ul class=""><li id="0b7e" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">云运行<strong class="is hj">仅服务HTTP流量</strong></li><li id="19c8" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">云润是<strong class="is hj">无国籍</strong></li></ul><blockquote class="lf"><p id="9677" class="lg lh hi bd li lj lk ll lm ln lo jn dx translated">云运行真的是解决方案吗？？</p></blockquote><p id="ab33" class="pw-post-body-paragraph iq ir hi is b it lp iv iw ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn hb bi translated">当您查看关系数据库引擎(如MySQL)时，您会有这些需求:</p><ul class=""><li id="6d08" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">对<strong class="is hj"> TCP通信</strong>的服务请求</li><li id="db01" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">你的<strong class="is hj">数据保存了</strong>。</li></ul><p id="d13b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="mb">完美的云跑对面！！</em> </strong></p><h1 id="6d7a" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">云运行丰富</h1><p id="46fc" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">云运行是基于容器的，提供了很大的灵活性。但是<strong class="is hj">真正的丰富性是它强大的功能</strong>。有了它们，你可以<strong class="is hj">超越通常的无服务器限制</strong>，释放你的想象力。</p><p id="d517" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要使用云运行，我们必须<strong class="is hj">解决两个问题</strong>:</p><ul class=""><li id="9d15" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">持久存储</li><li id="dd6b" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">TCP网络通信</li></ul><h1 id="82f8" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">云运行上的持久存储</h1><p id="5cc8" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">仍然在预览中，gen2执行运行时提供了很好的特性</p><ul class=""><li id="38fa" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">非沙盒运行时环境</li><li id="6fe9" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">挂载网络卷</strong>的容量。</li></ul><p id="b0a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个最新的特性<strong class="is hj">允许在云上运行新的用例</strong>。<em class="mb">即使它有局限性，并且不会在解决方案中真正使用，当您的用例需要它时，了解它并尝试一下也是值得的</em></p><p id="4b31" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，对于无服务器数据库，想法是<strong class="is hj">通过GCSFuse挂载点使用云存储存储</strong>，或者使用<strong class="is hj">云文件存储</strong>，这是Google Cloud上的一个托管NFS解决方案。</p><h2 id="d214" class="mc jp hi bd jq md me mf ju mg mh mi jy jb mj mk kc jf ml mm kg jj mn mo kk mp bi translated">GCSFuse限制</h2><p id="1f5e" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">云存储是blob存储，<strong class="is hj">其功能和容量不同于块存储</strong> ( <em class="mb">任何计算机中的普通磁盘</em>)。另外，云存储<strong class="is hj">只能由API </strong> (JSON或XML)访问。</p><p id="db3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，<a class="ae mq" href="https://github.com/GoogleCloudPlatform/gcsfuse" rel="noopener ugc nofollow" target="_blank"> GCSFuse </a>是<strong class="is hj">将linux系统盘访问包装成HTTP调用</strong>的工具。就像这样，可以在linux环境中安装一个bucket，并把它作为一个普通的目录使用。</p></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><p id="4589" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">包装器<strong class="is hj">将块存储访问转换成blob存储</strong>，当然，还有<strong class="is hj">限制和不支持的特性</strong>。</p><p id="88d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，<strong class="is hj">延迟低</strong>，因为GCSFuse执行HTTP API调用，而且比原生文件系统调用长很多。<br/> <em class="mb">但是非关键或测试数据库的低性能不是问题。问题在别处</em></p><p id="a4ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个问题来自于MySQL优化存储文件读写所需的一个特定特性，比如<strong class="is hj">保持文件打开并在其中进行流读/写。</strong> <br/>云存储<strong class="is hj">不可能</strong>，你<strong class="is hj">不能部分更新一个文件</strong>。GCSFuse不支持这种用法</p><p id="74da" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">MySQL日志很清楚:<code class="du mr ms mt mu b">Storage is not usable</code>。它错误地退出。<strong class="is hj"> <em class="mb">认为解决方法不对。</em>T24】</strong></p><h2 id="e5e2" class="mc jp hi bd jq md me mf ju mg mh mi jy jb mj mk kc jf ml mm kg jj mn mo kk mp bi translated">云文件存储显示停止器</h2><p id="a507" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">在第二代云上装载存储系统的另一个选项是文件存储。这是一个受管理的NFS系统，运行良好。<strong class="is hj">磁盘访问速度快</strong>并且<strong class="is hj">文件存储实例可以通过</strong> <a class="ae mq" href="https://cloud.google.com/filestore/docs/snapshots" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">快照</strong> </a> <strong class="is hj"> </strong>来备份数据。</p><p id="25ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，有<strong class="is hj"> 2个主要问题</strong>:</p><ul class=""><li id="59b1" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">首先，<strong class="is hj">云文件存储实例只能在项目VPC的私有IP </strong>上访问。所以，没问题，你可以使用一个<a class="ae mq" href="https://cloud.google.com/vpc/docs/configure-serverless-vpc-access" rel="noopener ugc nofollow" target="_blank">无服务器VPC连接器</a>来桥接云运行实例和你的项目VPC。然而，<strong class="is hj">它每月花费大约17美元，而且它不是无服务器的(永远在线)</strong></li><li id="95dd" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">其次，<strong class="is hj"> Filestore价格并不贵，每Gb 0.2美元</strong>。完全公平。问题来自于<strong class="is hj">文件存储实例的最小容量:1Tb，因此每月200美元。</strong></li></ul><p id="2552" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个伟大的解决方案<strong class="is hj">在财务上是不可持续的</strong>(每月最低217美元)，不能被选择来省钱！<br/> <em class="mb">不过，我还是发布了带那个选项的容器版本。</em></p><h2 id="5c93" class="mc jp hi bd jq md me mf ju mg mh mi jy jb mj mk kc jf ml mm kg jj mn mo kk mp bi translated">最终的选择</h2><p id="85fb" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">最后，<strong class="is hj">在云上安装文件系统并不是一个成功/可持续的解决方案</strong>。后备解决方案是<strong class="is hj">一个老派的解决方案:</strong></p><ul class=""><li id="1a99" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">启动时，<strong class="is hj">从云存储</strong>下载数据，<strong class="is hj">加载到内存</strong></li><li id="4871" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">关机时，当<a class="ae mq" href="https://cloud.google.com/blog/topics/developers-practitioners/graceful-shutdowns-cloud-run-deep-dive" rel="noopener ugc nofollow" target="_blank">云运行实例优雅地停止</a>，<strong class="is hj">将数据上传到云存储</strong>。</li></ul><p id="f4f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mb">为了提高效率，数据被压缩并存储在云存储的一个文件中</em></p><p id="e4a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该解决方案的优势在于<strong class="is hj">可以与第一代和第二代运行时环境</strong>一起工作。此外，可以激活云存储上的<a class="ae mq" href="https://cloud.google.com/storage/docs/object-versioning" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">版本控制</strong> </a> <strong class="is hj">来保持数据库</strong>的不同版本，如快照，并具有恢复它们的能力。</p><p id="e15b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，<strong class="is hj">异步数据持久性意味着边缘情况</strong>和<strong class="is hj">更高的数据丢失风险</strong></p><ul class=""><li id="4e38" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">如果<strong class="is hj">容器</strong>崩溃(例如内存不足)，数据库引擎在内存中更新的数据将会丢失。</li><li id="b4b9" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">当您<strong class="is hj">部署新版本的云运行无服务器数据库</strong>时，使用新版本创建的新实例将从云存储中下载数据，而在先前版本上更新的数据仍在云运行实例内存中，尚未上传到云存储中。</li></ul><p id="1912" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些问题在未来的版本中会有所缓解。</p><h1 id="c7b4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">云环境下的TCP通信</h1><p id="7ff4" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">另一个需要克服的障碍是通信协议。<strong class="is hj">MySQL数据库使用TCP，云运行只有HTTP。</strong></p><p id="fbb6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，云运行支持<a class="ae mq" href="https://cloud.google.com/blog/products/serverless/cloud-run-gets-websockets-http-2-and-grpc-bidirectional-streams" rel="noopener ugc nofollow" target="_blank"> HTTP/2双向流</a>。这是解决问题的关键，但需要将TCP通信包装成HTTP/2协议。</p><p id="8c3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在服务器端，MySQL实例驻留在后台的云运行服务，一个<strong class="is hj"> HTTP服务器被暴露</strong>。当一个连接进来时，它<strong class="is hj">创建一个与MySQL数据库的TCP连接，并通过HTTP/2传输通信。</strong></p><p id="9a44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在客户端，在开发者环境或其他服务上(在云运行或其他地方)，<strong class="is hj">需要一个代理将客户端的TCP通信包装成HTTP/2请求。</strong> <br/>第一个请求打开连接，然后流量被HTTP/2流式传输。这个第一个请求还可以<strong class="is hj">包括一个安全头，以到达IAM安全云运行</strong>，并因此将对数据库的访问限制为只有授权的帐户。</p><h1 id="4875" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">打包和启动</h1><p id="8f6e" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">云运行提供了配置容器运行时的灵活性。这种灵活性允许组装所有的部件，并使用脚本<strong class="is hj">控制容器启动</strong>(在GCS模式下)</p><ul class=""><li id="5af1" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated"><strong class="is hj">从云存储中下载</strong>数据</li><li id="e5d9" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><em class="mb"> ( </em> <strong class="is hj"> <em class="mb">配置SigTerm</em></strong><em class="mb">(</em><a class="ae mq" href="https://cloud.google.com/blog/topics/developers-practitioners/graceful-shutdowns-cloud-run-deep-dive" rel="noopener ugc nofollow" target="_blank"><em class="mb">云运行的优雅停止</em> </a> <em class="mb">)函数回调到</em> <strong class="is hj"> <em class="mb">压缩数据库文件</em></strong><em class="mb"/><strong class="is hj"><em class="mb">发送回云存储</em> </strong> <em class="mb"> ) </em></li><li id="b99e" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">提取数据</strong>和<strong class="is hj">并将它们</strong>加载到容器存储器中</li><li id="23a6" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">后台启动MySQL </strong></li><li id="5549" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">启动网络服务器</strong></li></ul><p id="3c40" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是解决方案的全球架构</p><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/692cecf82f27ad2ec51abb007c6e6adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EMOhipwOlz9vZsGBg2c8eQ.png"/></div></div></figure><h1 id="cccb" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">我能用它吗？</h1><p id="aa66" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">最终的解决方案是<strong class="is hj">可在开源</strong>中获得。您可以在Cloud Run上部署一个容器，进行一些配置，并尝试云存储或文件存储解决方案。</p><p id="1cd6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以看看我的GitHub库上的<a class="ae mq" href="https://github.com/guillaumeblaquiere/serverless-sql" rel="noopener ugc nofollow" target="_blank">代码，没有真正的逻辑，<strong class="is hj">主要是网络通信包装</strong>和<strong class="is hj">容器技巧</strong>用</a><a class="ae mq" href="https://github.com/Yelp/dumb-init" rel="noopener ugc nofollow" target="_blank"> dumb-init </a>来管理sigterm对云运行的优雅停止通知。</p><p id="9c08" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以使用它<strong class="is hj">,同时牢记您的数据可能存在的限制和风险</strong>。对于大多数非关键用例，不会有问题。如果您开始遇到太多问题或困难，可能是因为<strong class="is hj">是时候切换到真正的托管解决方案:云SQL </strong></p><p id="708f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">无论如何，MySQL <strong class="is hj">无服务器和持久数据库可以在Google Cloud </strong>上实现，我仍然有这个无服务器的梦想…</p><blockquote class="lf"><p id="b768" class="lg lh hi bd li lj na nb nc nd ne jn dx translated"><strong class="ak">如果我来做，Google Cloud可以做得更好！</strong></p></blockquote></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><p id="05fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我让“<a class="ae mq" href="https://easyserverless.bemyapp.com/" rel="noopener ugc nofollow" target="_blank">谷歌云”的开发变得像馅饼一样简单，绝对没有<strong class="is hj">赢得</strong>的野心，只是为了挑战。<br/>看看</a><a class="ae mq" href="https://youtu.be/_bGhrNFnbL8" rel="noopener ugc nofollow" target="_blank">我的(好玩的)投稿视频</a>！</p></div></div>    
</body>
</html>