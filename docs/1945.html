<html>
<head>
<title>Monitoring Diabetes with Google Cloud Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用谷歌云平台监测糖尿病</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/monitoring-diabetes-with-google-cloud-platform-877243ac382a?source=collection_archive---------1-----------------------#2021-08-23">https://medium.com/google-cloud/monitoring-diabetes-with-google-cloud-platform-877243ac382a?source=collection_archive---------1-----------------------#2021-08-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="708e" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用谷歌云服务监测血糖水平、生成图表和创建警报。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/0cc5dddd9bfdb8997f0bc963528209e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1GkvO4rq7ykK0O7_nZzSLA.png"/></div></div></figure><p id="d3b2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我从四岁起就是一型糖尿病患者。监控我的血糖和记录我的考试成绩对我来说一直是个问题，主要是因为我不得不在每顿饭前和一天多次这样做。今天我22岁，接受胰岛素和血糖测试一直是我日常工作的一部分。我从来没有糖尿病相关的问题，但上周我去了重症监护室，因为一例酮症酸中毒。</p><p id="ca2f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">由于这一事件以及血糖监测和普通糖尿病护理的所有手动工作，我决定建立一个监控血糖的仪表板，其中包括实时值、我的糖尿病历史、紧急情况下的Telegram和Google Assistant警报，以及我和内分泌学家的轻松监控。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kf"><img src="../Images/2c763cd6423e61f2d5038bb2b6ef7195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8c4OIoX4iIyUKFMpNQxowg.png"/></div></div></figure><p id="34d7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">对于葡萄糖测量，我使用<strong class="jl hj">自由式自由臂</strong>加上<strong class="jl hj">苗苗</strong>装置。FreeStyle Libre在我的手臂上有一个收集血糖值的探头，苗苗通过NFC从Libre中读取这些值，并通过蓝牙发送到我的手机上。在我的手机上，我有<strong class="jl hj"> Glimp </strong>应用程序(由苗苗公司推荐)，它与苗苗连接，并将所有测量值保存到<strong class="jl hj"> Dropbox </strong>。我可以在智能手表上实时查看一切，智能手表接收来自Glimp的数据。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kg"><img src="../Images/7abc510d880b6be4b3cd2f33ff8ba466.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xvmEH7iJLZnKnOUR.jpg"/></div></div></figure><p id="9e0b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因为所有值都存储在Dropbox中，所以我创建了一个系统来读取数据、处理数据、保存在时间序列数据库中，并在必要时生成警报，使数据可视化工具可以使用登录系统。</p><p id="4973" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">该系统分为四种服务，即:</p><ul class=""><li id="1e55" class="kh ki hi jl b jm jn jp jq js kj jw kk ka kl ke km kn ko kp bi translated"><strong class="jl hj">葡萄糖测量API </strong>:获取包含所有葡萄糖测量值的Dropbox文件，解析其信息，并通过API公开它们。</li><li id="6e8b" class="kh ki hi jl b jm kq jp kr js ks jw kt ka ku ke km kn ko kp bi translated"><strong class="jl hj">葡萄糖差距API </strong>:获取最后一个和倒数第二个测量值，并确定血糖水平上升或下降的速度。</li><li id="aa68" class="kh ki hi jl b jm kq jp kr js ks jw kt ka ku ke km kn ko kp bi translated"><strong class="jl hj">持续葡萄糖服务</strong>:在InfluxDB上保存最后一次测量和差距。</li><li id="3fc6" class="kh ki hi jl b jm kq jp kr js ks jw kt ka ku ke km kn ko kp bi translated"><strong class="jl hj">警报服务</strong>:通过Telegram向我房间的Google Home发送警报，然后在Redis上保存最后一个警报时间戳。</li></ul><p id="f088" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">谷歌工作流程定义了服务执行的顺序。通过使用<strong class="jl hj"> Google Cloud Scheduler </strong>的cron作业，它们每两分钟被激活一次。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kv"><img src="../Images/042cd2aaef063ea6e0f3e36740faa918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cKWqil895J3WO_yzUGc8iQ.png"/></div></div></figure><p id="447b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> Workflows </strong>从服务获取响应，并将其作为调用下一个服务的参数，并负责决定是否必须触发警报。所有的API都在<strong class="jl hj"> API网关</strong>下，它们需要一个令牌才能被访问。每个服务都运行在Docker上，托管在<strong class="jl hj"> Clod Run </strong>上。为了熟悉和易用，我选择了<strong class="jl hj"> Golang </strong>和<strong class="jl hj"> Python </strong>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kw"><img src="../Images/d014f9330eb5f8e427df5e9c90ea7b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UZPRQehb0ba5xdOAt5tTxw.png"/></div></div></figure><p id="700a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一旦我们有了最新的血糖值和差距，这些数据就会作为时间序列格式保存在<strong class="jl hj"> InfluxDB </strong>中。<strong class="jl hj"> Grafana </strong>使用InfluxDB作为数据源，并以图表格式显示实际血糖、时间戳范围、历史记录等指标。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kx"><img src="../Images/6f2b13031aa82ab736f50294b801074b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W9hYLlo2u2UOABw9ZtICqw.jpeg"/></div></div></figure><p id="51ef" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">数据存储后，<strong class="jl hj">工作流</strong>分析血糖水平是否在安全范围内，如果不在，它会通过<strong class="jl hj">电报</strong>向我和我的父母发送消息，并激活我房间里的<strong class="jl hj">谷歌巢</strong>中的语音警报(以防我正在睡觉)。我可以问我的谷歌助手:“好的谷歌，我现在的血糖是多少？”而且她会查阅葡萄糖API，给我最后的结果。</p><p id="0eab" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">所有的代码库都被单元和集成测试覆盖，在<strong class="jl hj">云构建</strong>的管道上运行。在主分支上进行合并，并且所有测试都通过之后，一个新的容器版本被推送到<strong class="jl hj">容器寄存器</strong>，更新服务的生产版本。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ky"><img src="../Images/b20727895bd26b92def7317830a40eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KMzC7m9c_QKSy_Z22ud3kg.png"/></div></div></figure><p id="d992" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">此时，我的父母、女朋友和医生可以访问Grafana仪表板。我的医生可以随时轻松地分析我的血糖历史，并更精确地调整我的胰岛素单位。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kz"><img src="../Images/79e4352d3d497dc163d44431d127056e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IhLwr24rgcOXnsgIE0h49A.png"/></div></div></figure><p id="c0e2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这就是我如何开发一个糖尿病监测系统，使用谷歌云服务来托管我的想法。我使用的一些工具是我打算用来测试、整合和学习的。</p></div></div>    
</body>
</html>