<html>
<head>
<title>Building and Deploying Containerized Application to Kubernetes using Jib and Skaffold</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Jibå’ŒSkaffoldåœ¨Kubernetesä¸Šæ„å»ºå’Œéƒ¨ç½²å®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/google-cloud/building-and-deploying-containerized-application-to-kubernetes-using-jib-and-skaffold-80305363a8fd?source=collection_archive---------0-----------------------#2022-08-18">https://medium.com/google-cloud/building-and-deploying-containerized-application-to-kubernetes-using-jib-and-skaffold-80305363a8fd?source=collection_archive---------0-----------------------#2022-08-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ea76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Jibå…è®¸Java/Kotlinå¼€å‘äººå‘˜é€šè¿‡åœ¨æ„å»ºè„šæœ¬ä¸Šæ·»åŠ æ’ä»¶ï¼Œä½¿ç”¨ä»–ä»¬é€‰æ‹©çš„å·¥å…·(å¦‚Mavenæˆ–Gradle)æ¥é›†æˆå®¹å™¨åŒ–æ­¥éª¤ã€‚JibåŸºæœ¬ä¸Šå¤„ç†å°†åº”ç”¨ç¨‹åºæ‰“åŒ…åˆ°Dockerimageä¸­çš„æ‰€æœ‰æ­¥éª¤ï¼Œè€Œä¸ä½¿ç”¨DockerfileğŸ‰ã€‚</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7e03889dd0d8e2bb8f32a22481b541a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3yBJbDkCPwzdZz-G.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/48b91809003fddca2ee8c990578765ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HSg9VmfYq1UJTDMW.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">ä¸Šå›¾:Dockerå·¥ä½œæµç¨‹ã€‚ä¸‹å›¾:Jibå·¥ä½œæµç¨‹[1]</figcaption></figure><p id="e3f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é‚£ä¹ˆJibåˆ°åº•æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ</p><p id="e8d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Jibåˆ›å»ºäº†ä¸€ç»„æ–‡ä»¶ç³»ç»Ÿå±‚ï¼Œå…¶ä¸­åŒ…å«Javaè¿è¡Œæ—¶ã€åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä»¥åŠå®¹å™¨å¼•æ“ç”¨æ¥äº†è§£å¦‚ä½•å¯åŠ¨Javaè™šæ‹Ÿæœº(JVM)çš„å…ƒæ•°æ®ã€‚å½“ä½¿ç”¨Jibæ„å»ºå®¹å™¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„å±‚:</p><ul class=""><li id="2f1a" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">æ„å»ºè„šæœ¬ä¸­å®šä¹‰çš„åº“ä¾èµ–é¡¹(mvnæˆ–gradle)ã€‚è¯¥å±‚åŒ…å«å°†æ‰€æœ‰çš„<code class="du kd ke kf kg b">.jar</code>æ–‡ä»¶æ·»åŠ åˆ°<code class="du kd ke kf kg b">/app/libs</code>æ–‡ä»¶å¤¹ã€‚</li><li id="73c7" class="ju jv hi ih b ii kh im ki iq kj iu kk iy kl jc jz ka kb kc bi translated">èµ„æºæ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ä»èµ„æºæ–‡ä»¶å¤¹ä¸­çœ‹åˆ°<code class="du kd ke kf kg b">/app/resources</code>å’Œæ‰€æœ‰ç›¸å…³çš„æ–‡ä»¶ã€‚</li><li id="bb72" class="ju jv hi ih b ii kh im ki iq kj iu kk iy kl jc jz ka kb kc bi translated">ç¼–è¯‘åçš„åº”ç”¨ç¨‹åºä»£ç ä¸­çš„ç±»æ–‡ä»¶ã€‚æ¥è‡ªç¼–è¯‘é˜¶æ®µçš„<code class="du kd ke kf kg b">.class</code>æ–‡ä»¶ä½äº<code class="du kd ke kf kg b">/app/classes</code>ä¸‹çš„è¿™ä¸€å±‚ã€‚</li><li id="b1e2" class="ju jv hi ih b ii kh im ki iq kj iu kk iy kl jc jz ka kb kc bi translated">Java JVMå‚æ•°æ–‡ä»¶ã€‚</li></ul><p id="3483" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å–å†³äºä½ å¦‚ä½•å®šåˆ¶ä½ çš„æ„å»ºæ–‡ä»¶ï¼ŒJibç”Ÿæˆçš„åº“ä¹Ÿå¯ä»¥æœ‰å…¶ä»–å±‚ï¼Œè§<a class="ae km" href="https://github.com/GoogleContainerTools/jib/blob/master/docs/faq.md#how-are-jib-applications-layered" rel="noopener ugc nofollow" target="_blank"> Jibå¸¸è§é—®é¢˜</a>ã€‚</p><p id="6e6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³åˆ†äº«æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨Dropwizardã€Gradleã€Jibå’ŒSkaffoldåˆ›å»ºJavaåº”ç”¨ç¨‹åºã€‚</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/6339fa34ecbc43b22bc5b779cbd37f75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HkgcBCxB4qv8UyA1TWEmPA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">é¡¹ç›®çš„ç›®å½•è®¾ç½®ã€‚</figcaption></figure><p id="0361" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¯¹äºè¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬å°†åœ¨å·¥ä»¶éƒ¨åˆ†å®šä¹‰æ„å»ºå›¾åƒæ‰€éœ€çš„æ‰€æœ‰é…ç½®ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œskaffoldè¿˜æ”¯æŒè®¸å¤šæ‚¨å¯ä»¥ä½¿ç”¨æ ‡è®°æœºåˆ¶ï¼Œä¾‹å¦‚æˆ‘ä»¬å°†åœ¨ç¤ºä¾‹ä¸­ä½¿ç”¨çš„INPUT_DIGESTã€‚</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/0725b092ff71ffd6ab046e59e593f09a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CqepOQRXNP_tosYmNT0lAQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">éƒ¨ç½²çš„Skaffoldé…ç½®ã€‚</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kp"><img src="../Images/e9da75c6c6b458723dd775b6f8f24b01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GMaSwZcO8kUYOxbJF5wqAA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">build.gradleè„šæœ¬çš„å†…å®¹ã€‚å½“æˆ‘ä»¬ä»”ç»†æŸ¥çœ‹å®ƒæ—¶ï¼Œæˆ‘ä»¬ä¼šæ³¨æ„åˆ°å®ƒå®é™…ä¸Šä¸dockeræ–‡ä»¶ä¸­éœ€è¦ç¼–å†™çš„æ‰€æœ‰å†…å®¹éå¸¸ç›¸ä¼¼ã€‚</figcaption></figure><p id="4b2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¯·æ³¨æ„ï¼Œä¸ºäº†èƒ½å¤Ÿå°†å›¾åƒæ¨é€åˆ°æ³¨å†Œè¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåŠ©æ‰‹æ–¹æ³•ï¼Œå¦‚<a class="ae km" href="https://github.com/GoogleContainerTools/jib/blob/master/docs/faq.md" rel="noopener ugc nofollow" target="_blank"> Jibå¸¸è§é—®é¢˜è§£ç­”ä¸­æ‰€è¿°ã€‚</a>é»˜è®¤æƒ…å†µä¸‹ï¼ŒJibä¼šæŸ¥çœ‹ä»¥ä¸‹ä½ç½®ï¼Œä»¥åœ¨å°†æ˜ åƒæ¨å…¥å®¹å™¨æ³¨å†Œè¡¨ä¹‹å‰æŸ¥çœ‹å¯ç”¨çš„å‡­æ®:</p><ul class=""><li id="2d19" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">Dockerå‡­è¯æ–‡ä»¶(ç”±dockerç™»å½•æˆ–podmanç™»å½•ç”Ÿæˆ),ä½äº:</li></ul><pre class="je jf jg jh fd kq kg kr ks aw kt bi"><span id="c935" class="ku kv hi kg b fi kw kx l ky kz">$XDG_RUNTIME_DIR/containers/auth.json, $XDG_CONFIG_HOME/containers/auth.json or $HOME/.config/containers/auth.json</span><span id="bcd1" class="ku kv hi kg b fi la kx l ky kz">$DOCKER_CONFIG/config.json</span><span id="ab56" class="ku kv hi kg b fi la kx l ky kz">$HOME/.docker/config.json.</span></pre><p id="290c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™æ˜¯dockeræˆ–podmanå‘½ä»¤è¡Œå·¥å…·çš„é…ç½®æ–‡ä»¶ä¹‹ä¸€ã€‚æœ‰å…³å¦‚ä½•é…ç½®authï¼Œè¯·å‚è§é…ç½®æ–‡ä»¶æ–‡æ¡£ã€å‡­æ®å­˜å‚¨å’Œå‡­æ®å¸®åŠ©å™¨éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥è¿›è¡Œdockerç™»å½•ä»¥åœ¨config.jsonä¸­ä¿å­˜authï¼Œä½†æ˜¯é€šå¸¸å»ºè®®é…ç½®ä¸€ä¸ªå‡­æ®å¸®åŠ©å™¨(ä¹Ÿå¯ä»¥åœ¨config.jsonä¸­é…ç½®)ã€‚</p><p id="7605" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœJibèƒ½å¤Ÿä»Dockerå‡­è¯æ–‡ä»¶ä¸­æ£€ç´¢authä¿¡æ¯ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼äºä½¿ç”¨Dockeré…ç½®ä¸­çš„å‡­è¯(/home/myuser/)çš„æ—¥å¿—æ¶ˆæ¯ã€‚docker/config.json)ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡ŒéªŒè¯Jibé€‰æ‹©äº†å“ªä¸ªå‡­è¯æ–‡ä»¶ã€‚</p><ul class=""><li id="112a" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">æ‚¬è‡‚é…ç½®</li></ul><pre class="je jf jg jh fd kq kg kr ks aw kt bi"><span id="ad42" class="ku kv hi kg b fi kw kx l ky kz">Configuring credential helpers: &lt;from/to&gt;&lt;credHelper&gt; (Maven) / from/to.credHelper (Gradle)<br/> Specific credentials (not recommend): &lt;from/to&gt;&lt;auth&gt;&lt;username&gt;/&lt;password&gt; or in settings.xml (Maven) / from/to.auth.username/password (Gradle)<br/> These parameters can also be set through properties: Maven / Gradle</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lb"><img src="../Images/d4c0d87c8e9c0215bde4fbdd9bed5d1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K2s7ZVHYnhL5KTmnSXILCg.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">åœ¨skaffold.yamlä¸Šå®šä¹‰æˆ‘ä»¬æƒ³è¦éƒ¨ç½²æ¸…å•çš„k8sä¸Šä¸‹æ–‡</figcaption></figure><p id="92a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨å¼€å‘æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æµ‹è¯•æ˜¯å¦ä½¿ç”¨Skaffoldæ­£ç¡®åœ°è¿›è¡Œäº†æ›´æ”¹</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lc"><img src="../Images/50758a00eaf02674eac52ea3bafe5877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EaAGrl9P_OzU1LyLr8jr6Q.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">ä½¿ç”¨ç«¯å£è½¬å‘è¿è¡Œæ¸…å•</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ld"><img src="../Images/50a87becb18e1025fccbd7ed8f05d4ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iTJF0p1kLkMGBCOzkuftRA.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es le"><img src="../Images/fe1a89809079dd4b3650a05697a24294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_02UwtSkOsX0v7uHJWsdiA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">æ–¯å¡ç¦å¾·å»ºç­‘</figcaption></figure><p id="b449" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½¿ç”¨skaffoldï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¸ºæˆ‘ä»¬æ‹¥æœ‰çš„æ¯ä¸ªç¯å¢ƒå®šä¹‰ä¸åŒçš„æ„å»ºæ­¥éª¤ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬æœ‰ä¸åŒçš„æ¸…å•ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶å®šä¹‰å¦‚ä¸‹:</p><pre class="je jf jg jh fd kq kg kr ks aw kt bi"><span id="21ad" class="ku kv hi kg b fi kw kx l ky kz">deploy:<br/>  kubeContext: kind-kubernetes-days-id-demo<br/>  kustomize:<br/>    paths: [ "kubernetes/dev" ]<br/>profiles:<br/>  - name: prod<br/>    deploy:<br/>      kustomize:<br/>        paths: [ "kubernetes/prod" ]<br/>    patches:<br/>      - op: replace<br/>        path: /build/tagPolicy<br/>        value:<br/>          inputDigest: { }<br/>      - op: remove<br/>        path: /build/artifacts/0/hooks</span></pre><p id="e786" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å‚è€ƒèµ„æ–™:</p><p id="5975" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[1]è°·æ­Œã€‚(æœªæ³¨æ˜)ã€‚<em class="lf">ç”¨jib | google cloud </em>æ„å»ºjavaå®¹å™¨ã€‚è°·æ­Œã€‚æ£€ç´¢äº2022å¹´8æœˆ18æ—¥ï¼Œå‘è‡ªhttps://cloud.google.com/java/getting-started/jib<a class="ae km" href="https://cloud.google.com/java/getting-started/jib" rel="noopener ugc nofollow" target="_blank"/></p><p id="fcbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[2] <em class="lf">å»ºç­‘ä¸è®¾è®¡</em>ã€‚æ–¯å¡ç¦å¾·ã€‚(æœªæ³¨æ˜)ã€‚äº2022å¹´8æœˆ18æ—¥ä»<a class="ae km" href="https://skaffold.dev/docs/design/" rel="noopener ugc nofollow" target="_blank">https://skaffold.dev/docs/design/</a>æ£€ç´¢</p><p id="93be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[3]è°·æ­Œã€‚(æœªæ³¨æ˜)ã€‚<em class="lf">ä»‹ç»jib â€”æ›´å¥½åœ°æ„å»ºJava Dockeræ˜ åƒ|è°·æ­Œäº‘åšå®¢</em>ã€‚è°·æ­Œã€‚2022å¹´8æœˆ18æ—¥æ£€ç´¢ï¼Œæ¥è‡ª<a class="ae km" href="https://cloud.google.com/blog/products/application-development/introducing-jib-build-java-docker-images-better" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/blog/products/application-development/introducing-jib-build-Java-docker-images-better</a></p></div></div>    
</body>
</html>