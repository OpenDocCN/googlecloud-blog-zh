<html>
<head>
<title>A to Z of Google Cloud Platform a personal selection — J is for Jenkins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云平台的a到Z个人精选——J代表詹金斯</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-j-is-for-jenkins-7a718d1f458?source=collection_archive---------0-----------------------#2016-02-20">https://medium.com/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-j-is-for-jenkins-7a718d1f458?source=collection_archive---------0-----------------------#2016-02-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="18d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Jenkins非常受欢迎，毫不奇怪，您可以轻松地将Jenkins(和Git)用作CI/CD管道的一部分，目标是在GCP计算服务(即计算引擎、应用引擎和容器引擎)上部署。</p><p id="5ba8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我想指出的，GCS(云存储)也是一个有效的目标，我将在这篇文章的后半部分详细介绍它！</p><p id="8ab5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有很多插件是专门针对GCP的，在这篇文章的第一部分，我所做的就是把它们和一些真正有用的插件(比如Docker的插件)聚集在一起。</p><p id="011a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要将Jenkins与您的CI/CD部署管道集成，您需要使用一系列专门针对Google云平台的插件。</p><p id="df17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你知道我遗漏了什么插件，请让我知道，这样我就可以随时更新列表。</p><p id="d938" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Google+Container+Registry+Auth+Plugin" rel="noopener ugc nofollow" target="_blank"> Google Container Registry Auth插件</a> —该插件提供凭证提供者使用Google云平台OAuth凭证(由<a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Google+OAuth+Plugin" rel="noopener ugc nofollow" target="_blank"> Google OAuth凭证插件</a>提供)从<a class="ae je" href="https://cloud.google.com/tools/container-registry/" rel="noopener ugc nofollow" target="_blank">Google Container Registry(GCR)</a>访问Docker图像</p><p id="0339" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Google+Cloud+Storage+Plugin?focusedCommentId=73532097#comment-73532097" rel="noopener ugc nofollow" target="_blank"> Google云存储插件</a> —该插件提供了“Google云存储上传程序”后构建步骤，用于将构建工件发布到Google云存储</p><p id="bb47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Google+OAuth+Plugin" rel="noopener ugc nofollow" target="_blank"> Google OAuth插件</a> —该插件实现了OAuth凭证接口，用于向Jenkins显示Google服务帐户</p><p id="6925" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Google+Source+Plugin" rel="noopener ugc nofollow" target="_blank"> Google Source插件</a> —提供凭证提供者使用Google云平台OAuth凭证(由<a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Google+OAuth+Plugin" rel="noopener ugc nofollow" target="_blank"> Google OAuth凭证插件</a>提供)从<a class="ae je" href="https://source.developer.google.com/" rel="noopener ugc nofollow" target="_blank">https://source.developer.google.com</a>以及<a class="ae je" href="https://*.googlesource.com." rel="noopener ugc nofollow" target="_blank"> https://*.googlesource.com访问源代码。</a>支持<a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Google+OAuth+Plugin" rel="noopener ugc nofollow" target="_blank"> Google OAuth凭证插件</a>提供的两种凭证</p><p id="3ea8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Google+Deployment+Manager+Plugin" rel="noopener ugc nofollow" target="_blank">谷歌部署管理器插件</a>。—提供使用<a class="ae je" href="https://cloud.google.com/deployment-manager/" rel="noopener ugc nofollow" target="_blank">Google Cloud Deployment Manager</a>在Jenkins jobs中创建和删除GCP资源的能力</p><p id="daad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Google+Metadata+Plugin" rel="noopener ugc nofollow" target="_blank"> Google元数据插件</a> —为构建生命周期中的步骤提供一个基本框架，以便将JSON可序列化的元数据附加到构建中</p><p id="e79c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">docker镜像<a class="ae je" href="https://github.com/GoogleCloudPlatform/jenkins-gcp-leader" rel="noopener ugc nofollow" target="_blank">这里的</a>可以用来创建一个jenkins docker实例，上面描述的插件会自动安装</p><p id="e2c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Jclouds插件这个插件提供了在JClouds支持的任何云提供商上启动jenkins slaves的能力。你可以用它来旋转运行在谷歌计算引擎上的詹金斯奴隶</p><p id="f55b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一系列以Docker和kubernetes为中心的插件也值得配置:</p><p id="1e52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Kubernetes+Plugin" rel="noopener ugc nofollow" target="_blank"> Kubernetes插件</a> —允许您使用由Kubernetes管理的多个docker主机来动态配置一个从机(使用Kubernetes调度机制来优化负载)，运行一个构建，然后拆除该从机。</p><p id="f6a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Docker插件:</p><p id="efeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Docker+build+step+plugin" rel="noopener ugc nofollow" target="_blank"> Docker构建步骤插件</a> —这个插件允许添加各种<a class="ae je" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>命令到你的工作中作为构建步骤</p><p id="9f3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">docker插件 —使用Docker主机动态提供一个从服务器，运行一个构建，然后拆除该从服务器。</p><p id="ff3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Docker+Custom+Build+Environment+Plugin" rel="noopener ugc nofollow" target="_blank"> CloudBees Docker定制构建环境插件</a>——让您配置您的构建在Docker容器内运行</p><p id="93af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="https://wiki.jenkins-ci.org/display/JENKINS/Workflow+Plugin" rel="noopener ugc nofollow" target="_blank"> Jenkins工作流插件</a> —一种基于Groovy的领域特定语言(DSL)，允许创建脚本化的工作流步骤</p><p id="40de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者</p><p id="efd5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae je" href="http://documentation.cloudbees.com/docs/cje-user-guide/docker-workflow.html" rel="noopener ugc nofollow" target="_blank"> CloudBees Docker工作流插件</a> —这提供了一种方便的领域特定语言(DSL ),用于从工作流脚本中执行连续部署管道中一些最常用的Docker操作。</p><p id="c38a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好的，如果你一直在关注这个系列，你会知道我说过我会在这里结束托管静态站点的话题。因此，尽管上面关于插件的部分可以作为一个独立的条目来阅读，就像本系列前面的条目一样，这篇文章的其余部分假设你已经阅读或者至少熟悉<a class="ae je" rel="noopener" href="/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-h-hosting-static-sites-1d0db2eb5d89#.jtlk8d1v8"> H </a>的条目。这是一个实际操作的演练，所以如果你真的想继续下去，你可能想等到你坐在一台机器前再阅读这篇文章的其余部分。</p><p id="8fba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">注意，从现在开始，如果你决定跟随</em>，我会做一些假设</p><ul class=""><li id="d893" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jk jl jm jn bi translated"><em class="jd">您已经拥有一个GCP帐户，并且安装了g cloud command SDK</em></li><li id="609d" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated"><em class="jd">您已经设置了一个静态站点生成器，并设置了一个网站桶(出于本演练的目的，您不需要设置DNS CNAME记录来跟踪)。</em></li><li id="630c" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated">你知道如何使用Jenkins，你不必知道，但我不会花时间谈论基础知识，而是专注于建立渠道所需的步骤。</li><li id="7eee" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated"><em class="jd">你对git </em>很熟悉</li><li id="109a" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated"><em class="jd">请注意，这将产生费用，因此如果您不打算保留配置，请关闭/删除您的项目。</em></li></ul><p id="cec5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你打算继续下去，我建议你先创建一个新项目。</p><p id="51f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过键入以下命令检查您正在使用的项目，确保您使用的是正确的项目:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="e311" class="kc kd hi jy b fi ke kf l kg kh">$ gcloud config list</span></pre><p id="d285" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果它不是正确的项目，然后键入</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="206a" class="kc kd hi jy b fi ke kf l kg kh">$ gcloud config set project your-project-id</span></pre><p id="a5bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用您的内容和云存储库配置Git</strong></p><p id="8f8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些步骤假设你正在使用Hugo，因为这就是我所使用的，但是你可以使用任何你想要的静态站点生成器。您只需要调整下面的说明，以反映您的内容的位置</p><p id="660d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您还没有建立一些网页，那么请花时间使用静态站点生成器来创建一些本地页面。在<a class="ae je" rel="noopener" href="/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-h-hosting-static-sites-1d0db2eb5d89#.jtlk8d1v8"> H </a>的条目中，我讨论了使用Hugo来完成这个任务。</p><p id="3429" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:使用hugo命令sans server将在您的工作目录中的一个公共文件夹中创建内容</p><p id="5632" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来要做的事情是配置<a class="ae je" href="http://git-scm.com/" rel="noopener ugc nofollow" target="_blank"> git </a>(详细安装git的细节已经超出了这篇破规则文章的范围，请点击相关链接)</p><p id="6110" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">切换到Hugo工作目录，通过输入以下命令初始化public文件夹中的git</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="dafa" class="kc kd hi jy b fi ke kf l kg kh">$ git init public</span></pre><p id="6fe2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="726c" class="kc kd hi jy b fi ke kf l kg kh">$ cd public</span></pre><p id="3ed2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">登录云平台开发控制台</p><p id="03a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您创建一个项目时，您会自动获得对云存储库的访问权。这个库需要初始化，所以从工具下的侧菜单选择开发，然后源代码。</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es ki"><img src="../Images/66a9a2ac3b62fd3c77ecd5bf3b9ce0a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6n-r7-DwrxXHsWXG."/></div></div></figure><p id="92e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击“开始”按钮</p><p id="2125" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择将代码从本地Git存储库推送到您的云存储库</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div class="er es kq"><img src="../Images/a9d237109422db1d6a852d22ebcecb8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*cwXPw_OanFuvZoyFaslGYg.png"/></div></figure><p id="aa50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在公共文件夹中，按照如上所示的说明进行操作。</p><p id="3c2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:这样做将重新初始化g it，这样它将与你的云仓库同步。</p><p id="0c7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对各种问题进行适当的回答</p><p id="c798" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保您为下面的两个问题选择了以下内容(这是因为我们的本地公共文件夹中已经有内容)</p><p id="ffb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择要使用的配置:</p><p id="a7ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[1]使用新设置重新初始化此配置[默认]</p><p id="1583" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[2]创建新配置</p><p id="4402" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请输入您的数字选择:1</p><p id="810c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个项目有一个或多个关联的git存储库。</p><p id="c7ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择git存储库克隆到您的本地机器:</p><p id="06d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[1][默认]</p><p id="ce23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[2]不要克隆</p><p id="ca22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请输入您的数字选择:2</p><p id="15a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后使用git添加并提交文件</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es kr"><img src="../Images/833922517e233797c53caeebaf0cb250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Gk0NqIlo8w9EorJ3."/></div></div></figure><p id="0c94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后使用下面的命令将更改推送到您的远程存储库(在本例中是使用git add命令添加的所有文件)</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="cae2" class="kc kd hi jy b fi ke kf l kg kh">$ git push --all google</span></pre><p id="5735" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果您查看存储库，您会看到您推送的文件。</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es ki"><img src="../Images/da07cba55a73291ea06837a8830ea423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hBXl3T5OlG764pvI."/></div></div></figure><p id="f14a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">创建一个用于托管静态网站的桶</strong></p><p id="c98b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个目标存储桶来托管您的静态网站。有关讨论，请参见本系列中的<a class="ae je" rel="noopener" href="/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-h-hosting-static-sites-1d0db2eb5d89#.jtlk8d1v8"> H </a>条目。</p><p id="541c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于本演练的目的，我们不需要设置CNAME，因为这是我们正在查看的管道机制。</p><p id="8043" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个桶</p><p id="a924" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个阶段让它空着</p><p id="032b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">设置Jenkins使用GCP资源</strong></p><p id="b515" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，在这个阶段，我希望你熟悉詹金斯，因为它的用户界面无处不在，找到正确的地方做事情会令人沮丧，所以在这一部分有很多截图！</p><p id="0e70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你设置你的Jenkins实例时，一个重要的警告是立即更改密码(是的，我是故意这么说的)试着不要把自己锁在外面，因为我已经有一段时间没碰过JENKINS了..随便说说:-) </p><p id="2f9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">GCP在github上发表了一篇文章，详细介绍了如何设置一个<a class="ae je" href="https://github.com/GoogleCloudPlatform/kube-jenkins-imager" rel="noopener ugc nofollow" target="_blank">高可用的Jenkins配置</a>。正如我所熟悉的，我用它启动了一个jenkins服务器。你可能会发现使用<a class="ae je" href="https://cloud.google.com/launcher/solution/bitnami-launchpad/jenkins?q=jenkins" rel="noopener ugc nofollow" target="_blank">的bitnami jenkins图像</a>更简单。</p><p id="31b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不管您决定如何部署jenkins，我下面概述的jenkins配置步骤都应该可以工作，但是我还没有测试bitnami映像，所以不要引用我的话:-)</p><p id="b840" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你让詹金斯开始</p><p id="5163" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">记下您的云存储库url，或者在控制台的存储库设置页面上打开一个选项卡</p><p id="00f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">启动詹金斯图像。</p><p id="927d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦准备好使用</p><p id="6bff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">登录</p><p id="16e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:这两种方法都已经安装了所需的插件，所以您需要做的只是配置它。</p><p id="cf73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先创建一个凭证，方法是单击左侧导航中的凭证链接，然后单击全局凭证链接，再单击“添加一些凭证如何？”环</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es ki"><img src="../Images/05cfe708fa2c2eeb8300061c04edd67f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G7QYPDWMB9E-kn8n."/></div></div></figure><p id="bf97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击确定</p><p id="06b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从元数据中选择Google服务帐户</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es ki"><img src="../Images/2a8add5cd56d27a25ca5b064a61efca3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GjfypKUMvT2fTkpw."/></div></div></figure><p id="37f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果看到，请单击“创建新作业”,或者单击左侧导航中的“新建项目”。选择自由式项目，在项目框中输入作业名称</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es ki"><img src="../Images/97d0bb90c25fb11c01058edaa8be3526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WMXPhRCngQ1VOup6."/></div></div></figure><p id="e322" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在源代码管理下，选择Git并从存储库设置页面粘贴到您的存储库URL中</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div class="er es ks"><img src="../Images/058c3a5c0a75682c07a818f60135c7df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*El05XfJCGTdwX0Sz5TJTzA.png"/></div></figure><p id="8d8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">配置构建后步骤，如下所示:</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es ki"><img src="../Images/8aa530201c94dee764c7d97545408eda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Valb6qTU2x-aBSJP."/></div></div></figure><p id="198b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在这个阶段，我们在您的存储库中有您的网页(和构建日志。对于生产环境，您会将日志推送到不同的存储桶，而您的存储桶是空的。</p><p id="4951" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，从新创建的jobs页面中选择build now。</p><p id="e71c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设您已经遵循了构建工件上面的步骤，在本例中，hugo工作文件夹的public文件夹中的文件已经被复制到您之前创建的bucket中。</p><p id="c800" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过查看Google云存储上传报告以及bucket本身，您可以看到从jenkins内部复制到bucket的内容</p><figure class="jt ju jv jw fd kj er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es kt"><img src="../Images/442da2809bebc3a56ebbb48e63ccf77e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e6VglOGPxvHYWocp."/></div></div></figure><p id="466a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您已经有了一些内容，您可以配置bucket来服务静态页面，如本系列中H的文章中所讨论的</p><p id="0225" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Jenkins可以设置为轮询任何更改，并自动将更改推送到目标桶，或者您可以调用手动构建和推送。</p><p id="ca6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能需要做一些调整，但是您应该看到在您的公共文件夹中创建额外的文件，执行git commit &amp; push，然后手动或自动触发构建，更新的文件被推送到您的目标bucket。</p><p id="9db3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将jenkins和云存储库添加到您的管道中，您可以:</p><ul class=""><li id="ed14" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jk jl jm jn bi translated">像对待提供版本控制和回滚到特定时间点的能力的代码一样对待网站内容。</li><li id="01b9" class="jf jg hi ih b ii jo im jp iq jq iu jr iy js jc jk jl jm jn bi translated">现在，您可以轻松地添加贡献者，您需要授予他们访问项目的权限，这样他们就可以使用git来保持本地副本同步，并将更改推送到存储库。</li></ul></div></div>    
</body>
</html>