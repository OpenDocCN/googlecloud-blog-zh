<html>
<head>
<title>Twitter Analytics (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Twitter分析(第一部分)</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/twitter-analytics-part-1-801c9d494487?source=collection_archive---------0-----------------------#2017-09-19">https://medium.com/google-cloud/twitter-analytics-part-1-801c9d494487?source=collection_archive---------0-----------------------#2017-09-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3018" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Twitter是一个了解外面真实世界发生了什么的好工具。这就是为什么我选择它来对阿根廷国家队最后两场足球比赛期间的用户心态进行实时分析，使用Python和Google Cloud基础设施。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/0d2edd0fa4dfb7a65e8809c28a90b812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*avIckFyLgT-9s7IkuCt72g.png"/></div></figure></div><div class="ab cl jm jn gp jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="hb hc hd he hf"><h1 id="1f41" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第一步:获取数据</h1><p id="ccde" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">首先要做的是设置环境并开始收集数据。</p><h2 id="d415" class="kw ju hi bd jv kx ky kz jz la lb lc kd iq ld le kh iu lf lg kl iy lh li kp lj bi translated">1)生成Twitter API凭证。</h2><p id="7b7f" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">前往https://apps.twitter.com/<a class="ae lk" href="https://apps.twitter.com/" rel="noopener ugc nofollow" target="_blank">创建一个新应用，然后前往“密钥和访问令牌”并点击“创建我的访问令牌”。保存“API密钥”、“API秘密”、“访问令牌”、“访问令牌秘密”。</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ll"><img src="../Images/69da965f51d75578d0dd63f2be62617b.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*j355djjpoZRmnyGZHoKojA.jpeg"/></div></figure><h2 id="9ad5" class="kw ju hi bd jv kx ky kz jz la lb lc kd iq ld le kh iu lf lg kl iy lh li kp lj bi translated">2)创建您的谷歌云帐户。</h2><p id="90ca" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">谷歌给了我们300美元来试用这个平台，这对这个项目来说绰绰有余。你必须输入你的信用卡号码来激活你的账户，但是谷歌向我们保证，在我们同意之前，他们不会向我们收费。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lm"><img src="../Images/e3c1835c17fd93f9468e5e450960815c.png" data-original-src="https://miro.medium.com/v2/resize:fit:256/format:webp/1*nI97rkr2J03a42Orubf9tw.png"/></div></figure><h2 id="8c2e" class="kw ju hi bd jv kx ky kz jz la lb lc kd iq ld le kh iu lf lg kl iy lh li kp lj bi translated">3)创建您的Python脚本</h2><p id="d567" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">首先安装python的tweepy包(【https://github.com/tweepy/tweepy】T4)来轻松连接Twitter流媒体。可以以库例为鉴:<a class="ae lk" href="https://github.com/tweepy/tweepy/blob/master/examples/streaming.py" rel="noopener ugc nofollow" target="_blank">https://github . com/tweepy/tweepy/blob/master/examples/streaming . py</a>。</p><h2 id="8b9e" class="kw ju hi bd jv kx ky kz jz la lb lc kd iq ld le kh iu lf lg kl iy lh li kp lj bi translated">4)创建一个计算引擎实例</h2><p id="853a" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">首先，Google Cloud会要求你创建一个新项目，所有的数据和实例都将存放在这个项目中。之后，创建一个你想要部署你的脚本的实例，确保你在创建它的时候给了访问所有“Google Cloud API”的权限(否则你总是可以编辑这个实例)。要考虑的事情是，最小类型的实例是免费的(谷歌保证它将继续免费)，而不会消耗你的300美元信用。另一点要考虑的是你要使用的磁盘的大小，如果你有大量的数据，也许你需要一个更大的磁盘，而不是标准的。</p><h2 id="6a9e" class="kw ju hi bd jv kx ky kz jz la lb lc kd iq ld le kh iu lf lg kl iy lh li kp lj bi translated">5)安装谷歌云SDK</h2><p id="f81d" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">按照<a class="ae lk" href="https://cloud.google.com/sdk/" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/sdk/</a>中的说明将SDK安装到您的计算机中，您将在那里管理项目。这将使您可以轻松地通过SSH连接“计算引擎”实例，将文件传输到“云存储”并连接到“BigQuery”。</p><h2 id="7256" class="kw ju hi bd jv kx ky kz jz la lb lc kd iq ld le kh iu lf lg kl iy lh li kp lj bi translated">6)运行您的脚本</h2><p id="0730" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">一旦您将全新的脚本转移到您的计算引擎实例，您现在就可以运行它并将结果存储到一个文件中，以便稍后在“BigQuery”中进行分析。如果你想在几小时/几天/几个月内收集数据，我建议你在后台运行。为此，您可以创建一个守护进程:</p><p id="a395" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae lk" href="https://gist.github.com/josephernest/77fdb0012b72ebdf4c9d19d6256a1119" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Joseph Ernest/77 fdb 0012 b 72 ebdf 4c 9d 19d 6256 a 1119</a></p><p id="7ef8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者只是使用类似于:</p><p id="9219" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ln lo lp lq b"><em class="jd">nohup python -u myscript.py &gt; ./mylog.log 2&gt;&amp;1 &amp;</em></code></p><h2 id="0894" class="kw ju hi bd jv kx ky kz jz la lb lc kd iq ld le kh iu lf lg kl iy lh li kp lj bi translated">7)将您的数据移动到BigQuery</h2><p id="fd50" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">有几种方法可以将数据发送到“BigQuery ”,你可以实时传输，批量处理，或者最简单的方法…</p><p id="18cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您收集了所有需要的数据后，停止您的脚本，并使用Google Cloud SDK将结果文件发送到“数据存储”，只需执行以下操作:</p><p id="63af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">gsutil CP results . txt GS://my-project . appspot . com/</em></p><p id="ffc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦传输完所有数据，就可以转到BigQuery并创建一个JSON(新行分隔符)文件形式的表。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="er es lr"><img src="../Images/449efda624f2211b3e2806f0a50b2968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gp2sW3yBVkyPEytW-sMAsQ.png"/></div></div></figure><p id="d8c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很快下一部分…</p></div></div>    
</body>
</html>