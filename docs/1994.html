<html>
<head>
<title>GCP Workflows visual editor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GCP工作流可视化编辑器</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/gcp-workflows-visual-editor-9876fb1c823f?source=collection_archive---------0-----------------------#2021-10-31">https://medium.com/google-cloud/gcp-workflows-visual-editor-9876fb1c823f?source=collection_archive---------0-----------------------#2021-10-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6ae3b4f79644662c0e15973e8a854f2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lk2C-c82zaLy2yGX"/></div></div></figure><p id="c59f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Google云平台<a class="ae jo" href="https://cloud.google.com/workflows" rel="noopener ugc nofollow" target="_blank"> Workflows </a>为执行基于工作流的活动提供了工作流语言和运行时环境。为了描述您的工作流程，您可以编写YAML或JSON来创建一组链接的步骤。通常，人们脑海中会有一个类似于以下的模型:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/a06c4b928ab154ee7ce5e44daa724120.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6pTqDvqDpV-v49lZ"/></div></div></figure><p id="66f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当在YAML表达时，它可能看起来像:</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="da84" class="jz ka hi jv b fi kb kc l kd ke">- Step1:<br/>    call: ''<br/>    next: Step2<br/>- Step2:<br/>    call: ''<br/>    next: Step3<br/>- Step3:<br/>    call: ''<br/>    next: end</span></pre><p id="be87" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这适用于没有分支、连接或复杂参数的最小流。比较YAML的文本，我们看到在我们的模型和实现之间有一个明显的<em class="kf">理解</em>分离。如果我们真的可以画一张图，并把它变成GCP工作流，会怎么样？</p><p id="4dc8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个早期的原型项目提供了一个基于浏览器的图表环境，使我们能够实现这一点。我们看到了一个绘图画布，我们可以在其中绘制步骤并将它们连接在一起:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d0c9fb81ede0e778d5f836dcb7c72221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*chOzX28aJS9Vcc-b"/></div></div></figure><p id="93f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">绘制该图的结果是YAML文件，否则您将不得不手工构建该文件。除了允许您绘制图表和生成YAML，该项目可以反向工作。您可以导入现有的YAML，该工具将呈现相应的图<strong class="is hj">和</strong>，允许您直观地编辑该图并重新生成新的YAML。</p><p id="d844" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">目前支持的工作流步骤类型包括:</p><ul class=""><li id="b226" class="kg kh hi is b it iu ix iy jb ki jf kj jj kk jn kl km kn ko bi translated">打电话</li><li id="4d86" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">分配</li><li id="1586" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">开关(条件)</li><li id="2a26" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">返回</li></ul><p id="c017" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用可从步骤中打开的属性对话框，可以单独修改每个步骤的属性。要打开属性，双击或右键单击以打开其上下文菜单。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ku"><img src="../Images/bb61463a02c8c6a0ab723ff15f253227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c7G_CkRMGe3LsaKD"/></div></div></figure><p id="2999" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击“建立YAML”按钮打开一个对话框，其中包含相应的YAML。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kv"><img src="../Images/1c5e48cb6ce23949e1d2d57d637f7954.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p7fE0BRdhw4FFEtc"/></div></div></figure><p id="e898" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，您可以将其复制到剪贴板，以便在工作流中使用。相反，从左上方的菜单中，您可以打开一个对话框，允许您粘贴/导入YAML，这将导致绘制等效的图，并可编辑。这给了我们双向编辑。</p><p id="ed98" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你的图表开始变得混乱，在应用菜单中有一个“布局”按钮。单击该按钮会导致图表以令人满意的形式自动布局。</p><p id="6a9b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了查看项目的运行情况，这里的<a class="ae jo" href="http://www.gcptest.cloud/workflows/" rel="noopener ugc nofollow" target="_blank">是一个示例构建。</a></p><h1 id="a730" class="kw ka hi bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">项目的位置</h1><p id="f891" class="pw-post-body-paragraph iq ir hi is b it lt iv iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn hb bi translated">该项目可以在GitHub 获得源代码。使用<a class="ae jo" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>、<a class="ae jo" href="https://www.jointjs.com/" rel="noopener ugc nofollow" target="_blank"> JointJS </a>和<a class="ae jo" href="https://mui.com/" rel="noopener ugc nofollow" target="_blank"> MUI Core </a>在JavaScript中实现。</p><p id="d446" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以通过运行以下命令从源代码构建项目:</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="0757" class="jz ka hi jv b fi kb kc l kd ke">npm install<br/>npm run build</span></pre><p id="2ec5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">输出将在<code class="du ly lz ma jv b">./build</code>目录中找到。将这些上传到网络服务器，你就完成了。</p><h1 id="f9df" class="kw ka hi bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">待完成</h1><p id="422d" class="pw-post-body-paragraph iq ir hi is b it lt iv iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn hb bi translated">这个项目远未完成。目前(2021-2010年)，这只是一个早期的概念验证，看看是否有兴趣/需求。如果是的话，项目还会继续打磨。</p><p id="85cd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尚未涉及的领域</p><ul class=""><li id="dccf" class="kg kh hi is b it iu ix iy jb ki jf kj jj kk jn kl km kn ko bi translated">子流程</li><li id="06ec" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">循环</li><li id="c8a3" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">引发错误</li><li id="3aeb" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">尝试/抓住</li><li id="d571" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">步骤分组</li><li id="1ba8" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">提供自上而下的布局</li><li id="1a84" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">支持定义明确的呼叫类型</li><li id="d866" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">变量</li><li id="e9d8" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated">错误处理</li></ul><h1 id="6615" class="kw ka hi bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">UI可能性</h1><p id="9969" class="pw-post-body-paragraph iq ir hi is b it lt iv iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn hb bi translated">目前，步骤的设置显示在上下文对话框中，该对话框出现在步骤的上下文菜单中。另一种可能的UI样式是在图画布的右侧显示一个永久可见的属性区域。然后，我们将有一个当前选择的步骤的概念和<em class="kf">的属性，这个</em>步骤将显示在属性区域，并有一个“应用”按钮可用。下面是一张来自旧Eclipse UI的图片:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/7969ea5e720dadf866aec93c211a0254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/0*ulQaUW56JYUNJ-uk"/></div></figure><p id="79a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意左上角的属性。这可能是基于对话框的设置的替代样式。</p><h1 id="f20d" class="kw ka hi bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">项目的性质</h1><p id="a997" class="pw-post-body-paragraph iq ir hi is b it lt iv iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn hb bi translated">这个项目是<em class="kf">原样</em>，不是任何形式的谷歌产品。这仅仅是一个示例，展示了将流行的开源库结合起来绘制生成YAML的图表的可能性。根本没有正式的支持，随时可能被移除或放弃(不太可能)。问题、评论和议题应通过GitHub项目的GitHub议题设施提出，并将尽最大努力解决。</p><h1 id="af92" class="kw ka hi bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">链接</h1><ul class=""><li id="22f1" class="kg kh hi is b it lt ix lu jb mc jf md jj me jn kl km kn ko bi translated"><a class="ae jo" href="https://github.com/kolban-google/workflows" rel="noopener ugc nofollow" target="_blank"> Github项目</a></li><li id="7b9b" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated"><a class="ae jo" href="http://www.gcptest.cloud/workflows/" rel="noopener ugc nofollow" target="_blank">样本部署</a></li><li id="41b1" class="kg kh hi is b it kp ix kq jb kr jf ks jj kt jn kl km kn ko bi translated"><a class="ae jo" href="https://cloud.google.com/workflows" rel="noopener ugc nofollow" target="_blank"> GCP工作流程</a></li></ul><h1 id="2b58" class="kw ka hi bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">信用</h1><ul class=""><li id="559a" class="kg kh hi is b it lt ix lu jb mc jf md jj me jn kl km kn ko bi translated">封面艺术中使用的画架的搅拌机模型是由<a class="ae jo" href="https://www.blendswap.com/blend/15453" rel="noopener ugc nofollow" target="_blank"> Grue </a>制作的。</li></ul></div></div>    
</body>
</html>