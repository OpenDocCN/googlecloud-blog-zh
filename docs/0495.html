<html>
<head>
<title>Introduction to G-Cloud command line tool</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">G-Cloud命令行工具介绍</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/introduction-to-g-cloud-command-line-tool-f10834789b73?source=collection_archive---------0-----------------------#2018-01-17">https://medium.com/google-cloud/introduction-to-g-cloud-command-line-tool-f10834789b73?source=collection_archive---------0-----------------------#2018-01-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="8d1c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">在这篇文章中，我将简单介绍一下可以用来访问谷歌云资源的“gcloud”命令行工具。</p></blockquote><p id="db98" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">如果这是你第一次听说<code class="du jk jl jm jn b">gcloud</code>，你应该看看这篇文章“<a class="ae jo" rel="noopener" href="/@hitenpannu/creating-a-virtual-machine-in-google-cloud-platform-ec2d74dbbab0">在谷歌云平台上创建简单的虚拟机</a>”，你也可能想登录你的谷歌云帐户，因为我将从基础开始，但我们将更深入地探索它，所以，如果你想实时看到所有的东西，并记住它一辈子，你应该运行我将在这里向你展示的命令。</p><p id="90fc" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">在谷歌云平台中，你可以通过三种方式访问几乎所有的服务:</p><ol class=""><li id="1278" class="jp jq hi il b im in iq ir jh jr ji js jj jt jg ju jv jw jx bi translated">谷歌云控制台(您的仪表板)</li><li id="4a8b" class="jp jq hi il b im jy iq jz jh ka ji kb jj kc jg ju jv jw jx bi translated">g cloud(Google提供的命令行工具)</li><li id="6f68" class="jp jq hi il b im jy iq jz jh ka ji kb jj kc jg ju jv jw jx bi translated">RestApi(您也可以创建应用程序来控制您的资源)</li></ol><p id="ae60" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">本文的重点是<code class="du jk jl jm jn b">gcloud</code>让我们开始吧</p><p id="8650" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated"><strong class="il hj">什么是gcloud？</strong></p><blockquote class="if ig ih"><p id="a293" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">GCloud是google提供的命令行工具，我们可以使用脚本或命令行来访问google云服务，并运行其他自动化操作。</p></blockquote><p id="3207" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">是的，您可以根据您的需求编写脚本来启动实例，您甚至可以设置触发器来运行这些脚本，但是我们将保存这些细节以备将来使用。</p><p id="d78b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated"><strong class="il hj">如何访问gcloud？</strong></p><blockquote class="if ig ih"><p id="780e" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">GCloud是Google Cloud SDK的一部分。你必须<a class="ae jo" href="https://cloud.google.com/sdk/downloads" rel="noopener ugc nofollow" target="_blank">在你的系统上下载并安装SDK </a>并<a class="ae jo" href="https://cloud.google.com/sdk/docs/initializing" rel="noopener ugc nofollow" target="_blank">初始化它</a>才能使用gcloud。</p></blockquote><p id="ccec" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">默认情况下，GCloud将为您提供对常用命令的访问。现在，你可能会想什么是普遍可用的命令。这是<code class="du jk jl jm jn b">gcloud</code>命令的发布级别，是的，不止一个级别。</p><p id="7972" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated"><strong class="il hj">g cloud命令的级别</strong></p><ol class=""><li id="f04b" class="jp jq hi il b im in iq ir jh jr ji js jj jt jg ju jv jw jx bi translated">一般利用率</li><li id="d5ba" class="jp jq hi il b im jy iq jz jh ka ji kb jj kc jg ju jv jw jx bi translated">贝塔</li><li id="b938" class="jp jq hi il b im jy iq jz jh ka ji kb jj kc jg ju jv jw jx bi translated">希腊字母的第一个字母</li><li id="8bb1" class="jp jq hi il b im jy iq jz jh ka ji kb jj kc jg ju jv jw jx bi translated">试映</li></ol><blockquote class="if ig ih"><p id="31c6" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">一般可用性级别的命令被认为是完全稳定和生产就绪的。</p><p id="7cf0" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">测试级别的命令功能齐全，但可能仍有一些问题，因此它们不包含在任何SLA(服务级别协议)中</p><p id="c698" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">Alpha级别的命令是早期版本，可能会随时更改，恕不另行通知</p><p id="b942" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">预览级别的命令可能不稳定，可能会在没有通知的情况下更改</p></blockquote><p id="d2f3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">继续讨论如何访问<code class="du jk jl jm jn b">gcloud</code>工具如果你现在不想安装SDK，你可以使用Google命令行。它为您提供了对谷歌云平台上托管的计算资源的<code class="du jk jl jm jn b">gcloud</code>命令行访问，并可通过谷歌云平台控制台获得。云壳是一个基于Debian的虚拟机，有一个持久的5GB主目录，让你轻松管理你的云平台项目和资源。有了云壳，你需要的云SDK <code class="du jk jl jm jn b">gcloud</code>和其他实用工具都是预装的，随时可以用。</p><h1 id="bb4e" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">开始探索</h1><p id="bdb1" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it jh ld iw ix ji le ja jb jj lf je jf jg hb bi translated">首先打开你的云控制台，点击工具栏右上角的图标启动谷歌命令行</p><figure class="lh li lj lk fd ll er es paragraph-image"><div class="er es lg"><img src="../Images/a58be0942adfbfea677395747c9a2639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*noi-3QBGQwhsIQtx_NAX_Q.png"/></div></figure><p id="5179" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">然后点击“启动云壳”。这将需要一些时间来调配和连接到环境。当你启动Cloud Shell时，它提供了一个运行基于Debian的Linux操作系统的<a class="ae jo" href="https://cloud.google.com/compute/docs/machine-types" rel="noopener ugc nofollow" target="_blank">G1-小型谷歌计算引擎</a>虚拟机。云外壳实例是基于每个用户、每个会话进行调配的。当您的云Shell会话处于活动状态时，该实例会持续存在，并在一小时不活动后终止。我将在未来向你展示谷歌云壳的更多特性，但现在让我们把重点放在<code class="du jk jl jm jn b">gcloud</code>上。</p><p id="2665" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">激活云外壳后，您可以使用命令行来调用云SDK <code class="du jk jl jm jn b">gcloud</code>命令或虚拟机实例上可用的其他工具。</p><h2 id="0ed4" class="lo ke hi bd kf lp lq lr kj ls lt lu kn jh lv lw kr ji lx ly kv jj lz ma kz mb bi translated">命令入门</h2><p id="479c" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it jh ld iw ix ji le ja jb jj lf je jf jg hb bi translated">先说我最喜欢的命令。</p><pre class="lh li lj lk fd mc jn md me aw mf bi"><span id="1abd" class="lo ke hi jn b fi mg mh l mi mj">gcloud -h</span></pre><p id="7379" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">其输出将是</p><pre class="lh li lj lk fd mc jn md me aw mf bi"><span id="e3b9" class="lo ke hi jn b fi mg mh l mi mj">Usage: gcloud [optional flags] &lt;group | command&gt;<br/>  group may be           alpha | app | auth | beta | components | compute |<br/>                         config | container | dataflow | dataproc | datastore |<br/>                         debug | deployment-manager | dns | domains |<br/>                         endpoints | firebase | iam | kms | logging | ml |<br/>                         ml-engine | organizations | projects | pubsub |<br/>                         service-management | services | source | spanner |<br/>                         sql | topic<br/>  command may be         docker | feedback | help | info | init | version<br/><br/>For detailed information on this command and its flags, run:<br/>  gcloud --help</span></pre><p id="07eb" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">从这里可以清楚的看到，所有的gcloud命令都是分组的。项目、计算、容器所有这些都是不同的组，每个组都包含与该组相关的命令。Alpha组用于访问alpha级命令，beta组用于访问beta级命令。</p><h2 id="6295" class="lo ke hi bd kf lp lq lr kj ls lt lu kn jh lv lw kr ji lx ly kv jj lz ma kz mb bi translated">深入挖掘</h2><p id="b326" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it jh ld iw ix ji le ja jb jj lf je jf jg hb bi translated">我们将探索计算组，因为我们已经从这篇<a class="ae jo" rel="noopener" href="/@hitenpannu/creating-a-virtual-machine-in-google-cloud-platform-ec2d74dbbab0">文章</a>中了解了实例。你会发现运行这些命令比从控制台控制要酷得多，因为这些命令非常简单，我们可以随时查看命令的帮助手册。从跑步开始</p><pre class="lh li lj lk fd mc jn md me aw mf bi"><span id="cead" class="lo ke hi jn b fi mg mh l mi mj">gcloud compute -h</span></pre><p id="d3bb" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">输出将类似于</p><pre class="lh li lj lk fd mc jn md me aw mf bi"><span id="a91d" class="lo ke hi jn b fi mg mh l mi mj">Usage: gcloud compute [optional flags] &lt;group | command&gt;<br/>  group may be           accelerator-types | addresses | backend-buckets |<br/>                         backend-services | commitments | disk-types | disks |<br/>                         firewall-rules | forwarding-rules | health-checks |<br/>                         http-health-checks | https-health-checks | images |<br/>                         instance-groups | instance-templates | instances |<br/>                         interconnects | machine-types | networks | operations |<br/>                         project-info | regions | routers | routes |<br/>                         shared-vpc | snapshots | ssl-certificates |<br/>                         target-http-proxies | target-https-proxies |<br/>                         target-instances | target-pools | target-ssl-proxies |<br/>                         target-tcp-proxies | target-vpn-gateways | url-maps |<br/>                         vpn-tunnels | xpn | zones<br/>  command may be         config-ssh | connect-to-serial-port | copy-files |<br/>                         reset-windows-password | scp | ssh</span></pre><p id="4746" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">您可以看到compute命令也被分成了更多的组。让我们从谷歌云控制台的计算部分比较这些组。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div class="er es mk"><img src="../Images/aa11d60dc298100a6a3be6f90a811396.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*4H4KUQZJTk9iUVksNqxAaQ.png"/></div></figure><p id="aa59" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">您会注意到，命令输出中的大多数可用组与控制台中的相同。</p><p id="1e2b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">我将向您展示，即使您不知道使用gcloud的任何命令，创建虚拟机也是多么容易。我将只使用help命令，并遵循该命令的帮助手册中的文档。</p><p id="d814" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">我知道实例是计算权的一部分这一基本部分。所以，我会跑</p><pre class="lh li lj lk fd mc jn md me aw mf bi"><span id="b2e2" class="lo ke hi jn b fi mg mh l mi mj">gcloud compute --help</span></pre><p id="a4a8" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">这将为我提供更多有关命令的详细信息，在这些信息中，我可以看到有一个名为instances的组，可用于读取和操作计算引擎虚拟机实例。</p><pre class="lh li lj lk fd mc jn md me aw mf bi"><span id="f0de" class="lo ke hi jn b fi mg mh l mi mj">groups:</span><span id="12b6" class="lo ke hi jn b fi ml mh l mi mj">.......<br/>instance-groups <br/>        Read and manipulate Google Compute Engine instance groups.     <br/>instance-templates<strong class="jn hj"><br/>        </strong>Read and manipulate Google Compute Engine   instances             templates.     <br/><strong class="jn hj">instances<br/>        Read and manipulate Google Compute Engine virtual machine instances.     </strong><br/>interconnects<strong class="jn hj"><br/>        </strong>Read and manipulate Google Compute Engine interconnects.</span><span id="7836" class="lo ke hi jn b fi ml mh l mi mj">........</span></pre><p id="223a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">现在，我将进入该组，再次运行help命令</p><pre class="lh li lj lk fd mc jn md me aw mf bi"><span id="6404" class="lo ke hi jn b fi mg mh l mi mj">gcloud compute instances --help</span></pre><p id="3b47" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">现在，我将看到一堆可以在该组上执行的命令，如启动、停止、连接磁盘、删除、创建等。我还可以看到每个命令的描述，以避免任何混淆。因此，我注意到有一个名为“创建”的命令</p><pre class="lh li lj lk fd mc jn md me aw mf bi"><span id="0765" class="lo ke hi jn b fi mg mh l mi mj">COMMANDS<br/>.........</span><span id="8be7" class="lo ke hi jn b fi ml mh l mi mj">attach-disk <br/>       Attach a disk to an instance. <br/><strong class="jn hj">create</strong> <br/><strong class="jn hj">       Create Google Compute Engine virtual machine instances. </strong>delete <br/>       Delete Google Compute Engine virtual machine instances. delete-access-config <br/>       Delete an access configuration from a virtual machine network interface.</span><span id="5c85" class="lo ke hi jn b fi ml mh l mi mj">..........</span></pre><p id="9d82" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">所以，我现在要跑了</p><pre class="lh li lj lk fd mc jn md me aw mf bi"><span id="4625" class="lo ke hi jn b fi mg mh l mi mj">gcloud compute instances create --help</span></pre><p id="bf83" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">上述命令的输出将类似于</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="er es mm"><img src="../Images/f16c5c64c4414133d2482cc3190a3e17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bj1kEBJQdYoeTAJ30wquEw.png"/></div></div></figure><p id="8fef" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">我可以看到gcloud对我期望的确切格式，以及我可以传递给它的所有可能的参数。我甚至可以查看下面提供的关于所有可用标志和可能值的信息的描述</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="er es mr"><img src="../Images/043d64ea1ee39655f9f09486c118206f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbQKmQsi0ogzivTs1r9xVQ.png"/></div></div></figure><p id="6a69" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">所以，我会跑</p><pre class="lh li lj lk fd mc jn md me aw mf bi"><span id="bdf2" class="lo ke hi jn b fi mg mh l mi mj">gcloud compute instances create my-instance --zone us-central1-c</span></pre><p id="ad12" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">其中my-instance是命令描述中指定的实例名称，我将看到类似这样的内容</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="er es ms"><img src="../Images/7686c9a3e99ca74d2a7c1aa2cffd760d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dI8pJiNSGBzXCL3z_JSxtg.png"/></div></div></figure><p id="f22d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">我还可以从控制台验证实例的创建。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="er es mt"><img src="../Images/4927c9e9e7b314e40a01a38fcceed757.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5AQaErG-zuohfvYGwiObGw.png"/></div></div></figure><p id="d6e4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">现在仔细看看我们使用的命令，看看我们是如何清楚地告诉google cloud我想使用其计算服务在区域us-central1-c内创建名为my-instance的实例。</p><p id="bd20" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">相信我，几乎所有的命令都是这样的，你不需要学习任何新的语言，也不需要记住任何东西，你所要做的就是运用常识，如果需要的话，寻求帮助。</p></div></div>    
</body>
</html>