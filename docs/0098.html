<html>
<head>
<title>Node.js on App Engine with Cloud SQL Proxy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有云SQL代理的应用引擎上的Node.js</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/node-js-on-app-engine-with-cloud-sql-proxy-43f56279a56b?source=collection_archive---------0-----------------------#2016-05-05">https://medium.com/google-cloud/node-js-on-app-engine-with-cloud-sql-proxy-43f56279a56b?source=collection_archive---------0-----------------------#2016-05-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="87ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">过去几周，我一直在玩谷歌云，试图建立一个节点项目。许多服务目前都处于测试阶段，需要反复试验才能理解大部分服务是如何工作的，最终会变得相当简单。</p><p id="2e7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">主要组件:</p><ul class=""><li id="67e4" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">云SQL第二代</li><li id="9b2c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">云sql代理(让我们不必打开所有IP的访问)</li><li id="f181" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">部署在应用程序引擎上的Node.js express应用程序</li><li id="de84" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">ORM的序列</li></ul><p id="7a69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大部分信息都在实际的文档中，但是这里有一些对我有用的代码。</p><p id="7826" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">用于开发:</strong></p><p id="d4c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦安装到您的机器上，运行代理进程(在OSX上)并保持运行，以便连接通过。</p><blockquote class="jr js jt"><p id="bd16" class="if ig ju ih b ii ij ik il im in io ip jv ir is it jw iv iw ix jx iz ja jb jc hb bi translated">/cloud _ SQL _ proxy-dir =/cloud SQL-instances = { project name }:{ zone }:{ instance-name } = TCP:3306</p></blockquote><p id="32b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的例子中，{ project name }:{ zone }:{ instance-name }类似于proj1:us-central1:dev-db</p><p id="14be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本地连接配置为:</p><blockquote class="jr js jt"><p id="fd2a" class="if ig ju ih b ii ij ik il im in io ip jv ir is it jw iv iw ix jx iz ja jb jc hb bi translated">“用户名”:“dev”，<br/>“密码”:“devpwd”，<br/>“数据库”:“dev-db”，<br/>“主机”:“127.0.0.1”，<br/>“方言”:“mysql”</p></blockquote><p id="0fbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">用于生产:</strong></p><p id="b3b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于生产来说稍微有点复杂，但关键是设置mysql连接以使用套接字:</p><blockquote class="jr js jt"><p id="f379" class="if ig ju ih b ii ij ik il im in io ip jv ir is it jw iv iw ix jx iz ja jb jc hb bi translated">" username": "dev "、<br/> "password": "devpwd "、<br/> "database": "dev-db "、<br/> "host": "localhost "、<br/> "dialect": "mysql "、<br/>" dialect options ":{<br/>" socket path ":"/cloud SQL/{ project name }:{ zone }:{ instance-name } "<br/>}</p></blockquote><p id="698b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后一部分在app.yaml中，用于在正在部署的实例上启用云代理:</p><blockquote class="jr js jt"><p id="4e63" class="if ig ju ih b ii ij ik il im in io ip jv ir is it jw iv iw ix jx iz ja jb jc hb bi translated">beta _ settings:<br/>cloud _ SQL _ instances:{项目名称}:{区域}:{实例名称}</p></blockquote><p id="af58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这可能是一个有益的参考！</p><p id="0cc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">乔治</p><p id="31b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参考资料:</p><div class="jy jz ez fb ka kb"><a href="https://cloud.google.com/sql/docs/sql-proxy" rel="noopener  ugc nofollow" target="_blank"><div class="kc ab dw"><div class="kd ab ke cl cj kf"><h2 class="bd hj fi z dy kg ea eb kh ed ef hh bi translated">云SQL代理配置</h2><div class="ki l"><h3 class="bd b fi z dy kg ea eb kh ed ef dx translated">这是云SQL的测试版。此功能可能会以向后不兼容的方式更改，并且不是…</h3></div><div class="kj l"><p class="bd b fp z dy kg ea eb kh ed ef dx translated">cloud.google.com</p></div></div><div class="kk l"><div class="kl l km kn ko kk kp kq kb"/></div></div></a></div></div></div>    
</body>
</html>