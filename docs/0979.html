<html>
<head>
<title>Deconstructing Chatbots: Build an Appointment Scheduler with Dialogflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解构聊天机器人:用Dialogflow构建约会日程安排程序</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/deconstructing-chatbots-build-an-appointment-scheduler-with-dialogflow-2ee08614b630?source=collection_archive---------0-----------------------#2019-04-24">https://medium.com/google-cloud/deconstructing-chatbots-build-an-appointment-scheduler-with-dialogflow-2ee08614b630?source=collection_archive---------0-----------------------#2019-04-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/78f3f99e64deaa321884e1da7197b527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ScD72WY6wOs2tpyOxK8bKw.png"/></div></div></figure><div class=""/><p id="f433" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在第一篇博客中，我们学习了什么是对话体验，为什么它们很重要，简要介绍了NLU，以及Dialogflow如何让你快速上手。在<a class="ae jo" rel="noopener" href="/google-cloud/deconstructing-chatbots-getting-started-with-dialogflow-4f91deb32135">的第二篇文章</a>中，我们描述了一个简单的高级架构来在Dialogflow中设置一个代理，并学习了高级别的意图、实体、上下文和实现。现在，我们准备开始使用Dialogflow并创建我们的第一个聊天机器人。</p><p id="7bee" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">简介</strong></p><p id="29cb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果能在医生办公室、车管所或修理店访问预约日程安排，岂不是太棒了？在本文中，您将使用Dialogflow构建一个简单的聊天机器人，并学习如何使用一键集成将其与web集成。</p><p id="d09b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些练习旨在反映云开发人员的共同体验:</p><ol class=""><li id="d458" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">创建对话流代理</li><li id="0b01" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">创建意图</li><li id="9c70" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">测试聊天机器人</li><li id="9356" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">启用web集成</li></ol><h1 id="67e9" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">你会学到什么</h1><ul class=""><li id="c354" class="jp jq ht is b it lb ix lc jb ld jf le jj lf jn lg jv jw jx bi translated">如何创建Dialogflow代理</li><li id="4d27" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">如何在代理内创建意图</li><li id="41e6" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">如何在意向中创建培训短语</li><li id="8be2" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">如何在意向中创建回应</li><li id="ec08" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">如何测试Dialogflow代理</li><li id="6f17" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">如何设置web集成</li></ul><h1 id="d382" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">先决条件</h1><p id="3a07" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">对话流的基本概念和结构。有关介绍基本对话设计的Dialogflow教程视频，请查看以下视频:</p><figure class="lk ll lm ln fd hk"><div class="bz dy l di"><div class="lo lp l"/></div></figure><figure class="lk ll lm ln fd hk"><div class="bz dy l di"><div class="lo lp l"/></div></figure><h1 id="613b" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创建对话流代理</h1><ul class=""><li id="f2ef" class="jp jq ht is b it lb ix lc jb ld jf le jj lf jn lg jv jw jx bi translated">导航到<a class="ae jo" href="https://console.dialogflow.com/api-client/" rel="noopener ugc nofollow" target="_blank">对话流控制台</a>。</li><li id="361e" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">登录，如果你是第一次使用，然后使用您的电子邮件注册</li><li id="aba8" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">接受条款和条件，您将进入控制台</li><li id="ed66" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">创建一个<strong class="is hu">代理。</strong>要创建<strong class="is hu">，</strong>单击左侧窗格中的下拉菜单，以查看“<strong class="is hu">创建新代理</strong></li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lq"><img src="../Images/7a4a9a5c23870a534d9af945b420e4f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y7Y7td3kqS-Z8UOt"/></div></div></figure><ul class=""><li id="0dc9" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn lg jv jw jx bi translated">称之为“约会日程表”</li><li id="27a0" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">Dialogflow为你创建了一个GCP项目来访问日志，云功能等。您也可以选择一个现有的项目。</li><li id="dd32" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">准备好后，点击<strong class="is hu">创建</strong>。</li><li id="1ae8" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">作为代理的一部分，Dialogflow创建了两个默认意图。</li><li id="6d9e" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">默认欢迎意图有助于问候您的用户</li><li id="0d78" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">默认的回退意图有助于捕捉机器人不理解的所有问题。</li><li id="4fe8" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">在这一点上，我们有一个向用户问候的功能性机器人。</li></ul><h1 id="293e" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">测试代理！</h1><p id="d946" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">在Dialgflow控制台的右侧，您可以看到如下所示的测试面板:</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lr"><img src="../Images/4678c53906e4d225e1d2887f891766e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qwMX3gCsAo-7jqOE"/></div></div></figure><p id="9c1e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要测试代理，请在“立即尝试”框中键入“嗨”。代理应回复“默认欢迎意图”中定义的默认问候。这可能是“问候！我该如何协助？”您也可以修改响应。</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ls"><img src="../Images/8d916df395d3bc0c15ae7ed7e9e962ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cChEpf30SxDqdBbv"/></div></div></figure><p id="03f9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，如果你尝试“设置一个约会”,它不知道该怎么做，所以它启动了回退意图。这是因为我们没有创建任何意图来捕捉该特定问题！</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div class="er es lt"><img src="../Images/61f8b91756a0468d5ccc8034fddd0009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/0*I77Xr3SYFEpcP3R2"/></div></figure><h1 id="0176" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创建意图</h1><ul class=""><li id="bf4a" class="jp jq ht is b it lb ix lc jb ld jf le jj lf jn lg jv jw jx bi translated">要创建意向，请单击“代理”中的“意向”，然后单击右侧的“创建意向”按钮。将意向命名为“计划约会”</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lu"><img src="../Images/27351d42229604b7f1e3eaf444e9f280.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oZaCjgyqLwYzd-j2"/></div></div></figure><ul class=""><li id="2993" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn lg jv jw jx bi translated">现在，跳过顶部的上下文和事件。点击“添加培训短语”。你可以用下面的短语来表达。单独试用它们。</li></ul><p id="351b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">约定在周三下午2点见面</p><p id="b30b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我需要预约明天下午4点</p><p id="228a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我想预约星期二下午3点</p><ul class=""><li id="b46d" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn lg jv jw jx bi translated">当您输入这些内容时，您会看到“日期”和“时间”被自动标识为系统实体@sys.date和@sys.time。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lv"><img src="../Images/7e4bccd2098d911a2c7658b74bed0b6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F-vnnG0JDc5Gzh9w"/></div></div></figure><ul class=""><li id="cc93" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn lg jv jw jx bi translated">为了实现这个功能，我们需要对用户做出回应。我们来补充一个回应。向下滚动到“响应”部分，并点击“添加响应”。你可以说——“你已经准备好了。到时候见！或者你可以说得更有趣些，比如“你已经准备好在$时间进行$日期的活动了。”。到时候见！“美元($)符号帮助您访问实体值。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lu"><img src="../Images/4c284bf664588088c6e846f0f74967ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FL1YLcQNctbRdN4Z"/></div></div></figure><ul class=""><li id="ee88" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn lg jv jw jx bi translated">此时，您可以单击“Save”并使用“set a appointment for 4pm on Thursday”测试代理不出所料，您会得到日期和时间正确的响应。</li></ul><h1 id="2d5b" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">槽填充</h1><p id="0a76" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">现在，尝试测试“设置约会”，因为这不是很具体，我们目前还没有处理这种情况，它应该由回退意图来处理。为了支持这一点，我们使用了一种叫做<strong class="is hu">槽填充</strong>的东西。</p><p id="ce6e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">槽填充允许您为单个意图中的参数值收集设计一个对话流。如果没有一组特定的参数值，操作就无法完成，这很有用。要了解更多关于槽填充的信息，请参考<a class="ae jo" href="https://dialogflow.com/docs/concepts/slot-filling" rel="noopener ugc nofollow" target="_blank">这份</a>文件。</p><p id="8868" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，让我们设置槽填充。</p><ul class=""><li id="2afc" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn lg jv jw jx bi translated">点击“动作和参数”。</li><li id="abd0" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">根据需要创建实体，Dialogflow将确保在回复之前询问日期和时间。</li><li id="f0e1" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">对于时间，加上“你想什么时候来”</li><li id="7caf" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">在日期中加上“什么日期”。您也可以添加其他变体。</li><li id="b9e5" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">完成后，点击<strong class="is hu">保存</strong>。</li></ul><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/38481b78c731f6d3f0011552a310d4e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ou_p-YHv5Qeqj8De"/></div></div></figure><h1 id="e812" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">测试你的聊天机器人！</h1><p id="cc56" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">此时，应该已经建立了Dialogflow。通过输入以下对话，在右侧的<strong class="is hu">立即尝试</strong>面板中进行测试:</p><ul class=""><li id="663a" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn lg jv jw jx bi translated">用户:“嗨”</li><li id="43c7" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">用户:“设置约会”</li><li id="8b6b" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">聊天机器人回应:“你想什么时候进来？”</li><li id="bbbd" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">用户:“上午10点”</li><li id="6abd" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">聊天机器人回应:“什么日期？”</li><li id="0913" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">用户:“5月23日”</li></ul><h1 id="2e42" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">启用一键式Web集成</h1><p id="b098" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">Dialogflow为您的聊天机器人提供了多种类型的集成。让我们来看看聊天机器人的示例web用户界面。</p><p id="d3d4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击对话框左侧面板中的<strong class="is hu">集成</strong>。</p><p id="483f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过扳动开关启用<strong class="is hu">网络演示</strong>集成</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lx"><img src="../Images/dd26c9cd3663f7988ae143180e8b8346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*suGUMqdRxjHI4mXe"/></div></div></figure><p id="ca4f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">单击URL链接启动Web演示</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ly"><img src="../Images/567f8c4f6e59f715cfd66f6c1f42f63f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yDITxv6ntep5A0ue"/></div></div></figure><p id="a5ce" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">开始使用聊天界面，在“提问”部分输入！如果你使用的是Chrome浏览器，点击麦克风图标，你就可以对聊天机器人说出你的问题。使用以下对话开始与聊天机器人聊天:</p><ul class=""><li id="07fb" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn lg jv jw jx bi translated">键入“Hi”并按回车键。聊天机器人应该像以前一样响应。</li><li id="0e3a" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">然后输入/说出“约定明天下午4点”。机器人应该用约会的确认来回应。</li></ul><h1 id="0c0a" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">恭喜你！</h1><p id="3dd5" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">你创建了一个聊天机器人，你现在是一个聊天机器人开发者！继续在medium或GCP youtube系列上阅读更多类似的教程。</p><h1 id="20a6" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">后续步骤</h1><ul class=""><li id="62a8" class="jp jq ht is b it lb ix lc jb ld jf le jj lf jn lg jv jw jx bi translated">点击查看Dialogflow网站<a class="ae jo" href="https://cloud.google.com/dialogflow-enterprise/" rel="noopener ugc nofollow" target="_blank">获取文档、API和更多内容。</a></li><li id="5030" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">关注<a class="ae jo" href="https://www.youtube.com/watch?v=O00K10xP5MU&amp;list=PLIivdWyY5sqK5SM34zbkitWLOV-b3V40B&amp;index=1" rel="noopener ugc nofollow" target="_blank">解构聊天机器人</a>视频系列，订阅谷歌云平台youtube频道</li><li id="ad01" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">想要更多的故事？查看我的<a class="ae jo" rel="noopener" href="/@pvergadia/">媒体</a>，<a class="ae jo" href="https://twitter.com/pvergadia" rel="noopener ugc nofollow" target="_blank">在twitter上关注我</a>。</li><li id="aea7" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn lg jv jw jx bi translated">试试<a class="ae jo" href="https://dialogflow.com/" rel="noopener ugc nofollow" target="_blank"> Dialogflow </a>，它是<strong class="is hu">免费</strong>打造的一个bot！看看这个。</li></ul></div></div>    
</body>
</html>