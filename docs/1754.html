<html>
<head>
<title>Designing a Data Lake on GCP with Data Fusion and Composer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用数据融合和Composer设计GCP数据湖</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/designing-a-data-lake-on-gcp-with-data-fusion-and-composer-e2ea0a753525?source=collection_archive---------1-----------------------#2021-01-14">https://medium.com/google-cloud/designing-a-data-lake-on-gcp-with-data-fusion-and-composer-e2ea0a753525?source=collection_archive---------1-----------------------#2021-01-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="01f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着越来越多的组织将其数据平台迁移到云，也需要云技术来利用组织中的现有技能，同时确保成功迁移。</p><p id="9d5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在许多组织中，ETL开发人员通常是数据团队的重要组成部分。这些开发人员精通基于GUI的ETL工具以及复杂SQL的使用，并且已经或正在开始开发Python等语言的编程技能。</p><p id="e537" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个由3部分组成的文章系列中，我将分享</p><ul class=""><li id="ec3b" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">一个可扩展的数据湖架构，用于在谷歌云平台(GCP)上存储和消费结构化数据，使用适合上述技能组合的数据集成和编排服务<em class="jm">【本文】</em></li><li id="4ae1" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><a class="ae js" href="https://nehajo.medium.com/building-a-data-lake-on-gcp-using-data-fusion-and-composer-49d1ba4b1d73" rel="noopener">详细的解决方案设计</a>使用数据融合和Cloud Composer轻松扩展接收</li><li id="af7f" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">通过云数据目录实现数据湖的可发现性<em class="jm">【即将推出】</em></li></ul><p id="3dff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将在不久的将来为那些可能对重用感兴趣的人发布这个解决方案的代码。请查看这篇文章的更新，其中包含代码的链接。</p><h2 id="8c21" class="jt ju hi bd jv jw jx jy jz ka kb kc kd iq ke kf kg iu kh ki kj iy kk kl km kn bi translated"><strong class="ak">谁会觉得这篇文章有用</strong></h2><p id="3285" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">本系列文章将对解决方案架构师和设计人员有所帮助，他们可以开始使用GCP，并希望在GCP建立一个数据平台/数据湖。</p><h2 id="f2d3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd iq ke kf kg iu kh ki kj iy kk kl km kn bi translated"><strong class="ak">用例的关键需求</strong></h2><p id="a53d" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在设计架构时，我考虑了一些宽泛的要求。这些细节如下:</p><ol class=""><li id="1cc6" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc kt jj jk jl bi translated">利用组织中现有的<strong class="ih hj"> ETL技能集</strong></li></ol><p id="c5a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.从<strong class="ih hj">混合源</strong>获取，如本地RDBMS(如SQL Server、Postgres)、平面文件和第三方API源。</p><p id="df77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.在作业编排中支持<strong class="ih hj">复杂的依赖关系管理</strong>，不仅针对摄取作业，还包括定制的摄取前和摄取后任务。</p><p id="b1c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.设计一个<strong class="ih hj">精益</strong>代码库和配置驱动的摄取管道</p><p id="b21d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.启用数据<strong class="ih hj">可发现性</strong>，同时仍然确保适当的访问控制</p><h1 id="10b1" class="ku ju hi bd jv kv kw kx jz ky kz la kd lb lc ld kg le lf lg kj lh li lj km lk bi translated">解决方案架构</h1><p id="ee37" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">为满足上述要求而设计的数据湖架构如下所示。该架构中涉及的关键GCP服务包括数据集成、存储、编排和数据发现服务。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es ll"><img src="../Images/2618caccde2ad0366e7d7a8f62947876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2tOIOW_Vmx4Tm55M0b3vVw.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><em class="mb">数据湖架构</em></figcaption></figure><h1 id="d7d9" class="ku ju hi bd jv kv kw kx jz ky kz la kd lb lc ld kg le lf lg kj lh li lj km lk bi translated">工具选择的注意事项</h1><p id="e304" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">GCP提供一套全面的数据和分析服务。每个功能都有多个服务选项，服务的选择需要架构师和设计人员考虑一些适用于他们独特场景的方面。</p><p id="7e9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下面的部分中，我描述了在选择数据湖体系结构中使用的不同类型的服务时要考虑的因素，以及我最终选择每种类型的服务背后的基本原理。</p><p id="df73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不同服务组合的架构设计有多种方式，这里描述的只是其中一种方式。根据您独特的需求、优先级和考虑事项，有其他方法可以在GCP上构建数据湖。T3】</p><h1 id="034c" class="ku ju hi bd jv kv kw kx jz ky kz la kd lb lc ld kg le lf lg kj lh li lj km lk bi translated">数据集成服务</h1><p id="c9e7" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">下面的决策树详细说明了在GCP上选择数据集成服务时需要考虑的因素。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mc"><img src="../Images/0d8d340f557e9f1be62be505032400e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z79dhlrm-c71vlsr"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><em class="mb">GCP数据集成服务方案及选择考虑</em></figcaption></figure><p id="74f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">选择集成服务</strong></p><p id="adbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于我的使用案例，数据必须从各种数据源获取，包括本地平面文件和RDBMS，如Oracle、SQL Server和PostgreSQL，以及第三方数据源，如SFTP服务器和API。预计未来源系统的种类将会增加。此外，这是为其设计的组织在其数据和分析团队中有很强的ETL技能。</p><p id="8ca2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">考虑到这些因素，选择<a class="ae js" href="https://cloud.google.com/data-fusion" rel="noopener ugc nofollow" target="_blank">云数据融合</a>来创建数据管道。</p><p id="3918" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么是云数据融合？</strong></p><p id="f1cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae js" href="https://cloud.google.com/data-fusion" rel="noopener ugc nofollow" target="_blank">云数据融合</a>是一种基于GUI的数据集成服务，用于构建和管理数据管道。它基于<a class="ae js" href="https://github.com/cdapio/cdap" rel="noopener ugc nofollow" target="_blank"> CDAP </a>，这是一个为内部和云资源构建数据分析应用的开源框架。它为GCP、其他公共云和内部资源提供了各种现成的连接器。</p><p id="d1b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是数据融合中一个简单管道的截图。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es md"><img src="../Images/c4194ddc7fd4851970a62618b6f07572.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_gz8YCqBg8-9gFO3lbgy1w.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><em class="mb">样本数据融合管道</em></figcaption></figure><p id="d778" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">引擎盖下是什么？</strong></p><p id="15cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在幕后，数据融合在一个<a class="ae js" href="https://cloud.google.com/dataproc" rel="noopener ugc nofollow" target="_blank"> Dataproc </a>集群上执行流水线。每当执行管道时，数据融合会自动将基于GUI的管道转换为Dataproc作业以供执行。它支持两个执行引擎选项:MapReduce和Apache Spark。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es me"><img src="../Images/cefad3e0332fdbf7a4e48aac047b176a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eIPPGaYgL797wnTczMVrtQ.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><em class="mb">数据融合:引擎盖下</em></figcaption></figure><p id="db16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">利用数据融合，您还能做些什么？</p><p id="05f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了能够创建基于无代码GUI的管道之外，数据融合还提供了可视化数据分析和准备功能、简单的编排功能以及管道的粒度沿袭。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mf"><img src="../Images/aad0d7e088bd729f0581b87ebac215f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fMkh5cGrHzdAVY87teli8Q.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><em class="mb">数据融合提供的功能</em></figcaption></figure><h1 id="2bca" class="ku ju hi bd jv kv kw kx jz ky kz la kd lb lc ld kg le lf lg kj lh li lj km lk bi translated">管弦乐编曲</h1><p id="179d" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">下面的决策树详细说明了在GCP上选择流程编排服务时需要考虑的事项。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mg"><img src="../Images/995eed5346ae56fac3108fb26bfff39b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eR51-2p88-uhalMngdg-cA.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><em class="mb">GCP上的编排选项和选择考虑事项</em></figcaption></figure><p id="5678" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的用例需要管理复杂的依赖关系，比如聚合和分散的执行控制。此外，访问历史运行和日志等操作信息的UI功能，以及从故障点重新启动工作流的功能也很重要。由于这些需求，<a class="ae js" href="https://cloud.google.com/composer" rel="noopener ugc nofollow" target="_blank">云作曲家</a>被选为编排服务。</p><p id="6ae1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么是云作曲家？</strong></p><p id="ce1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae js" href="https://cloud.google.com/composer" rel="noopener ugc nofollow" target="_blank"> Cloud Composer </a>是一款完全托管的工作流编排服务。它是开源的Apache Airflow的托管版本，并与许多其他GCP服务完全集成。</p><p id="5a51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">气流中的工作流以<a class="ae js" href="https://airflow.apache.org/docs/apache-airflow/stable/concepts.html#dags" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">有向无环图</strong> </a> <strong class="ih hj"> (DAG)的形式表示。</strong>DAG只是一组需要执行的<strong class="ih hj">任务</strong>。下面是一个简单的气流DAG的截图。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mh"><img src="../Images/01f6dd7fb94efa3b04bdcd87fcd35efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FISdaG_hn7ne-uTQ7ciTdQ.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><em class="mb">样本合成器(气流)DAG </em></figcaption></figure><p id="a938" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用Python定义气流Dag。</p><p id="4f6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae js" href="https://cloud.google.com/composer/docs/how-to/using/writing-dags" rel="noopener ugc nofollow" target="_blank"> <em class="jm">这里的</em> </a> <em class="jm">是一个关于你如何能够</em> <a class="ae js" href="https://cloud.google.com/composer/docs/how-to/using/writing-dags" rel="noopener ugc nofollow" target="_blank"> <em class="jm">写出你的第一个DAG </em> </a> <em class="jm">的教程。有关更详细的阅读，请参见Apache Airflow文档中的</em> <a class="ae js" href="https://airflow.apache.org/docs/apache-airflow/stable/tutorial.html" rel="noopener ugc nofollow" target="_blank"> <em class="jm">教程</em> </a> <em class="jm">。</em>气流<a class="ae js" href="https://airflow.apache.org/docs/apache-airflow/stable/concepts.html#operators" rel="noopener ugc nofollow" target="_blank">操作员</a>用于在DAG中执行任务。气流运营商可用于大量GCP服务以及其他公共云。不同的<a class="ae js" href="http://airflow.apache.org/docs/apache-airflow-providers-google/stable/operators/cloud/index.html" rel="noopener ugc nofollow" target="_blank"> GCP操作器</a>见<a class="ae js" href="http://airflow.apache.org/docs/apache-airflow-providers-google/stable/operators/cloud/index.html" rel="noopener ugc nofollow" target="_blank">该气流文件页</a>。</p><h1 id="ee19" class="ku ju hi bd jv kv kw kx jz ky kz la kd lb lc ld kg le lf lg kj lh li lj km lk bi translated">数据融合和Composer之间的职责分离</h1><p id="64a4" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在概述的数据湖解决方案中，<a class="ae js" href="https://cloud.google.com/data-fusion" rel="noopener ugc nofollow" target="_blank">数据融合</a>纯粹用于从源到目的地的数据移动。<a class="ae js" href="https://cloud.google.com/composer" rel="noopener ugc nofollow" target="_blank"> Cloud Composer </a>用于编排数据融合管道以及在数据融合之外执行的任何其他定制任务。可以为诸如审计日志记录、将数据字典应用于表、归档文件或自动化集成生命周期中的任何其他任务之类的任务编写定制任务。这将在本系列的下一篇文章中详细描述。</p><h1 id="7284" class="ku ju hi bd jv kv kw kx jz ky kz la kd lb lc ld kg le lf lg kj lh li lj km lk bi translated">数据湖存储</h1><p id="7d12" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">数据湖的存储层需要考虑接收的数据的性质及其用途。下图(鸣谢<a class="ae js" href="https://cloud.google.com/solutions/data-lifecycle-cloud-platform#store" rel="noopener ugc nofollow" target="_blank"> GCP网站</a>)提供了基于这些考虑因素的存储服务选择决策树。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mi"><img src="../Images/0875c5ff936b13355fc95a2d6d1e4f86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bti-sqnd6VM_CdbeIxHvmA.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><strong class="bd jv"> <em class="mb">演职员表:图片来自</em> </strong> <a class="ae js" href="https://cloud.google.com/solutions/data-lifecycle-cloud-platform#store" rel="noopener ugc nofollow" target="_blank"> <strong class="bd jv"> <em class="mb"> GCP网站</em> </strong> </a> <strong class="bd jv"> <em class="mb">。</em></strong><em class="mb">GCP上的数据库选项以及何时使用哪个服务</em></figcaption></figure><p id="db98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于本文旨在解决将用于分析用例的结构化数据的解决方案架构，因此GCP <a class="ae js" href="https://cloud.google.com/bigquery" rel="noopener ugc nofollow" target="_blank"> BigQuery </a>被选为该数据湖解决方案的存储服务/数据库。</p><h1 id="1bc8" class="ku ju hi bd jv kv kw kx jz ky kz la kd lb lc ld kg le lf lg kj lh li lj km lk bi translated">数据发现</h1><p id="d701" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated"><a class="ae js" href="https://cloud.google.com/data-catalog" rel="noopener ugc nofollow" target="_blank">云数据目录</a>是数据发现的GCP服务。这是一个完全托管和高度可扩展的数据发现和元数据管理服务，可从BigQuery、PubSub和Google云存储中自动发现技术元数据。</p><p id="5d49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使BigQuery、云存储和PubSub中的数据资产在数据目录中可用不需要额外的流程或工作流。数据目录自我发现数据资产，并使其可供用户进一步发现。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mj"><img src="../Images/9a93b6c6b49b0c8f3c6e57953c095142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I3OWMrIY0gy_hxot"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><em class="mb"> GCP数据目录</em></figcaption></figure><h1 id="481e" class="ku ju hi bd jv kv kw kx jz ky kz la kd lb lc ld kg le lf lg kj lh li lj km lk bi translated">再次一瞥建筑…</h1><p id="b7f9" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">既然我们对选择数据融合和Cloud Composer服务的原因有了更好的理解，架构的其余部分就不言自明了。</p><p id="f08a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想谈及的另外一个方面是选择GCS着陆层的原因。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es ll"><img src="../Images/2618caccde2ad0366e7d7a8f62947876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2tOIOW_Vmx4Tm55M0b3vVw.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><em class="mb">数据湖架构</em></figcaption></figure><h2 id="ea82" class="jt ju hi bd jv jw jx jy jz ka kb kc kd iq ke kf kg iu kh ki kj iy kk kl km kn bi translated">在GCS上登陆还是不登陆档案？</h2><p id="78c9" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在该解决方案中，来自本地平面文件和SFTP的数据在被吸收到湖中之前被放入<a class="ae js" href="https://cloud.google.com/storage" rel="noopener ugc nofollow" target="_blank"> Google云存储</a>中。这是为了满足只允许集成服务访问选择性文件的要求。这是为了防止任何敏感文件暴露在数据湖中。</p><p id="94f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是一个决策矩阵，其中包含了在将文件加载到BigQuery之前决定是否将文件放在GCS上时需要考虑的几点。很有可能你会看到这些因素的组合，你决定采取的方法将是对所有这些因素都适用的方法。</p><p id="69ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">源系统:内部部署和SFTP文件</strong></p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mk"><img src="../Images/90f73524a8b1243ee48566dcf81958a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-TB2Ua_IJkxvHGwr7p-4Qg.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">情景和方法</figcaption></figure><p id="81ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jm"> *使用GCP云</em> <a class="ae js" href="https://cloud.google.com/storage-transfer/docs/on-prem-overview" rel="noopener ugc nofollow" target="_blank"> <em class="jm">本地存储传输服务</em> </a> <em class="jm">，或者通过编写在本地运行的定制脚本，可以将文件从网络驱动器复制或移动到GCS。</em></p><p id="61ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jm"> **支持Samba，但不支持其他共享文件的协议/工具，如Connect:Direct、WebDav等。</em></p><p id="6434" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">源系统:第三方API</strong></p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es ml"><img src="../Images/6d4568db268d335aded8e9feb1e89a32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U5Xb31RDMwYGvijNWgctLQ.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><em class="mb">决策矩阵</em></figcaption></figure><p id="1d90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jm">* API源的数据融合现成源连接器(即HTTP源插件)支持源API的基本认证(基于id/密码)和基于OAUTH2的认证。</em></p><p id="3634" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关系数据库管理系统</p><p id="4cde" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于来自内部RDBMS系统的数据，该体系结构中没有使用着陆区。数据融合管道使用现成的JDBC连接器直接从源RDBMS读取数据。这是因为在这些源中没有敏感数据需要被限制进入数据湖。</p><h1 id="e3e4" class="ku ju hi bd jv kv kw kx jz ky kz la kd lb lc ld kg le lf lg kj lh li lj km lk bi translated">外卖食品</h1><p id="214c" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">总而言之，GCP为数据和分析提供了一套全面的服务，每项任务都有多种服务选项。在决定哪种服务选项适合您的独特情况时，您需要考虑一些会影响您所做选择的因素。</p><p id="f47a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我提供了一些您需要考虑的因素，以便根据您的需求来决定合适的GCP服务，从而设计一个数据湖。</p><p id="b41d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我还描述了数据湖的GCP体系结构，该体系结构从各种混合来源吸收数据，ETL开发人员是技能集可用性的关键角色。</p><h1 id="0999" class="ku ju hi bd jv kv kw kx jz ky kz la kd lb lc ld kg le lf lg kj lh li lj km lk bi translated">接下来呢？</h1><p id="6932" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在本系列的下一篇文章中，我已经详细描述了将结构化数据接收到基于本文详述的架构的数据湖中的解决方案设计。</p></div></div>    
</body>
</html>