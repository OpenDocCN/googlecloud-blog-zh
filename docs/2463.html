<html>
<head>
<title>BigQuery: Basics &amp; Internals: Part # 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">BigQuery:基础和内部:第1部分</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/bigquery-basics-internals-part-1-9eda52b65960?source=collection_archive---------1-----------------------#2022-10-30">https://medium.com/google-cloud/bigquery-basics-internals-part-1-9eda52b65960?source=collection_archive---------1-----------------------#2022-10-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/d67251a18631d9d98c6eb023bde33f9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*AswPGHzqgaT2qO6Hd66NGg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">谷歌大查询</figcaption></figure><h1 id="6ba2" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">动机</h1><p id="6a64" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">读者你好！</p><p id="a38d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">下面是一系列关于BigQuery(以及GCP的相关产品，包括BigLake、Omni等)的博客文章，深入介绍了它的设计、架构、工作方式和最佳实践。</p><p id="4331" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">下面是这篇博客文章的一个小索引(随着系列文章新部分的撰写，它将不断更新):</p><ul class=""><li id="66ac" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><a class="ae la" rel="noopener" href="/google-cloud/bigquery-basics-internals-part-1-9eda52b65960">第1部分—简介、BigQuery基础知识和BigQuery架构</a></li><li id="4179" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated"><a class="ae la" rel="noopener" href="/@suddhasatwa/bigquery-basics-internals-part-2-7769f59d01e4">第2部分—大查询存储，设计原则&amp;(一些)最佳实践</a></li></ul><h1 id="393a" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="da06" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="jq hj"> BigQuery </strong>是谷歌云平台(GCP)的旗舰数据仓库和数据分析产品。在其众多的使用案例和应用中，该技术背后的基本思想是为GCP客户提供一个易于使用的基于SQL的界面，从GUI(图形用户界面，又名GCP控制台)或CLI(命令行界面，或GCP SDK)执行大规模的数据仓库任务！</p><p id="d1de" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在这篇文章中，我们将重温数据仓库概念的基础知识，然后是BigQuery的基础知识和内部工作细节。在关于BigQuery的这个<em class="lg">系列博客文章</em>的后续部分中，我们将涵盖该软件的其他方面，包括BigLake、BigQuery Omni、机器学习能力等等。</p></div><div class="ab cl lh li gp lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="hb hc hd he hf"><h1 id="e951" class="iq ir hi bd is it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn bi translated">数据仓库基础</h1><p id="d821" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在详细了解BigQuery之前，我们都来修改一下常用术语是至关重要的。我们中的大多数人对此已经很熟悉了，但一次修改并没有什么错！</p><p id="63b1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在任何组织或机构中，可用的数据都可以收集起来，然后用不同的技术或不同的方法存储在不同的地方！通常，我们重用术语<strong class="jq hj">数据库</strong>来指代事务系统，我们可以在其中存储由应用程序或系统生成的数据。通过设计，它可以高效地检索和更新信息。这些数据库可以是SQL或非SQL数据库，这取决于它们的设计和规范化属性。Google云平台套件数据库的一部分，这类数据库的列表包括BigTable、Spanner、Cloud SQL等等。这些事务数据库分别以不同的方式结合了酸或碱原理。</p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es lt"><img src="../Images/b520c199bc70861011ff24a7fe2d0df1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Tl3CuCqCWc4pUSr79HNKw.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated"><a class="ae la" href="https://www.researchgate.net/figure/ACID-and-BASE-comparative-representation-Vanroose-et-Thillo-2014_tbl1_339883071" rel="noopener ugc nofollow" target="_blank">https://www . research gate . net/figure/ACID-and-BASE-comparative-representation-Vanroose-et-thi llo-2014 _ TBL 1 _ 339883071</a></figcaption></figure><p id="0db4" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">一旦我们发明了传统的数据库系统，就有了通过它们各自的应用程序来分析存储在这些系统中的大量数据集的内在需求。但是，有一个问题！</p><p id="d187" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">默认情况下，这些事务性系统没有针对执行大规模分析进行优化，因为它们在许多情况下固有地包含规范化表的概念，导致连接，从而导致大规模低效！</p><p id="460f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这将我们带到了<strong class="jq hj">数据仓库</strong>的出现，以及后者为大规模数据分析和数据科学应用提供可能性的伟大时代。</p><p id="42c8" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">简单来说:</p><blockquote class="mc md me"><p id="cd03" class="jo jp lg jq b jr km jt ju jv kn jx jy mf ko kb kc mg kp kf kg mh kq kj kk kl hb bi translated">数据仓库存储来自各种数据源的信息，用于分析目的，其固有的设计支持这样的操作，甚至是大规模的操作！</p></blockquote><p id="a33e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">直到最近几年，我们还提出了<strong class="jq hj">数据集市</strong>和<strong class="jq hj">数据湖</strong>的概念，这些概念可能对不同的人有不同的定义，这取决于相关的理解和它们解决的用例。</p><p id="403b" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">对于本文的上下文，让我们用简单的话来说:</p><ul class=""><li id="382c" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">一个<strong class="jq hj">数据湖</strong>是一个数据转储场——这是我们存储所有原始文件(通常包含非结构化数据)的地方，在经过转换和清理的数据提取被放入数据仓库之前，它充当一个暂存环境！</li><li id="bbab" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">一个<strong class="jq hj">数据集市</strong>是一个数据仓库的一部分——它是专门为某件事或某个人设计的，比如我们组织中的一个部门！</li></ul><p id="9b9c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">记住上面的修改，现在让我们深入研究BigQuery。</p></div><div class="ab cl lh li gp lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="hb hc hd he hf"><h1 id="ec5a" class="iq ir hi bd is it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn bi translated">BigQuery —查询大数据！</h1><p id="ccde" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">作为Google云平台最突出的数据分析产品，<a class="ae la" href="https://cloud.google.com/bigquery" rel="noopener ugc nofollow" target="_blank"> BigQuery </a>是一个完美的数据仓库解决方案，它还支持数据湖和数据集市的实现！通过这种方式，它带来了分析平台的所有OLAP(在线分析处理)要求的最佳性能，解除了我们在OLTP(在线事务处理)数据库系统上进行数据分析的限制。</p><p id="49ed" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">然而，对于许多人来说，BigQuery的定义可以根据我们的角色和我们对它的理解而适当地有所不同！</p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es mi"><img src="../Images/dff9ec4785b8dbf495c84e89c7cee0cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d3-7A05tiZKTGG8o4ODC6Q.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">一个企业中BigQuery的不同定义！</figcaption></figure><p id="a5ec" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">BigQuery的构思实际上是从现实中的<strong class="jq hj"> Map Reduce编程模型</strong>的基础概念开始的！要快速修订:</p><blockquote class="mc md me"><p id="ed4b" class="jo jp lg jq b jr km jt ju jv kn jx jy mf ko kb kc mg kp kf kg mh kq kj kk kl hb bi translated"><strong class="jq hj"> MapReduce </strong>是一个<a class="ae la" href="https://en.wikipedia.org/wiki/Programming_model" rel="noopener ugc nofollow" target="_blank">编程模型</a>，是在<a class="ae la" href="https://en.wikipedia.org/wiki/Cluster_(computing)" rel="noopener ugc nofollow" target="_blank">集群</a>上用<a class="ae la" href="https://en.wikipedia.org/wiki/Parallel_computing" rel="noopener ugc nofollow" target="_blank">并行</a>、<a class="ae la" href="https://en.wikipedia.org/wiki/Distributed_computing" rel="noopener ugc nofollow" target="_blank">分布式</a>算法处理和生成<a class="ae la" href="https://en.wikipedia.org/wiki/Big_data" rel="noopener ugc nofollow" target="_blank">大数据集</a>的关联实现。<a class="ae la" href="https://en.wikipedia.org/wiki/MapReduce#cite_note-1" rel="noopener ugc nofollow" target="_blank">【1】</a><a class="ae la" href="https://en.wikipedia.org/wiki/MapReduce#cite_note-2" rel="noopener ugc nofollow" target="_blank">【2】</a><a class="ae la" href="https://en.wikipedia.org/wiki/MapReduce#cite_note-3" rel="noopener ugc nofollow" target="_blank">【3】</a></p><p id="f1d2" class="jo jp lg jq b jr km jt ju jv kn jx jy mf ko kb kc mg kp kf kg mh kq kj kk kl hb bi translated">MapReduce程序由一个<a class="ae la" href="https://en.wikipedia.org/wiki/Map_(parallel_pattern)" rel="noopener ugc nofollow" target="_blank"> <em class="hi">映射</em> </a> <a class="ae la" href="https://en.wikipedia.org/wiki/Procedure_(computing)" rel="noopener ugc nofollow" target="_blank">过程</a>和一个<a class="ae la" href="https://en.wikipedia.org/wiki/Reduce_(parallel_pattern)" rel="noopener ugc nofollow" target="_blank"><em class="hi"/></a>方法组成，前者执行过滤和排序(如按名字将学生排序到队列中，每个名字对应一个队列)，后者执行汇总操作(如统计每个队列中的学生数量，得出名字频率)。“MapReduce系统”(也称为“基础设施”或“框架”)通过<a class="ae la" href="https://en.wikipedia.org/wiki/Marshalling_(computer_science)" rel="noopener ugc nofollow" target="_blank">编组</a>分布式服务器，并行运行各种任务，管理系统各部分之间的所有通信和数据传输，并提供<a class="ae la" href="https://en.wikipedia.org/wiki/Redundancy_(engineering)" rel="noopener ugc nofollow" target="_blank">冗余</a>和<a class="ae la" href="https://en.wikipedia.org/wiki/Fault-tolerant_computer_system" rel="noopener ugc nofollow" target="_blank">容错</a>来协调处理。</p></blockquote><p id="0c00" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">参考:<a class="ae la" href="https://en.wikipedia.org/wiki/MapReduce" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/MapReduce</a></p><p id="cdca" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">有趣的是，这正是BigQuery在幕后所做的事情(或者至少是试图去做的事情)!在查看其详细的组织或架构细节之前，让我们以一种简单的方式快速了解一个典型的查询是如何在BigQuery中执行的:</p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es mj"><img src="../Images/79574e9e96c3fc230730484cb88ce472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qFwaQ2j6SCzWUTnEVa9k8A.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">BigQuery查询生命周期概述</figcaption></figure><p id="85d0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">本质上，对于在BigQuery上运行的每个查询，我们都有一个映射阶段(左下角的第一个方形框，下一个是workers)，其中数据被映射到特定的Workers，并可能根据查询语法和语义进行过滤或排序。此外，产生的数据子集被写出到某个中间阶段(上面提到的，作为混洗系统)，然后最后在最后阶段被减少(由上面图中的工作人员)，以便输出可以被写出给用户(以输出结果对象的形式)。虽然我们将在本系列文章的后面部分深入研究查询执行，但有趣的是要注意上面的几点:</p><ul class=""><li id="8929" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">静止的输入或数据被视为分块或分成几部分。</li><li id="d99f" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">每个工作者在初始阶段处理数据的一个特定部分。</li><li id="c328" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">所有人一起被带到洗牌阶段。</li><li id="2c73" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">最后，结果由一个(或多个)工作者输出到磁盘。</li></ul><p id="1042" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">为了有效地工作，我们需要在Hadoop等已知框架中对我们过去执行Map Reduce程序的方式进行实质性的改进。其中一些，以及BigQuery在后台使用的解决方案是:</p><ul class=""><li id="a7f5" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">一个高度可扩展和高吞吐量的网络:这就是谷歌的超高速和全球规模的Pb级网络<a class="ae la" href="https://cloud.google.com/blog/topics/systems/the-evolution-of-googles-jupiter-data-center-network" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">木星</strong> </a> <strong class="jq hj"> </strong>发挥作用的地方！</li><li id="9c24" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">一个高度冗余和高性能的磁盘组织:这就是<a class="ae la" href="https://cloud.google.com/blog/products/storage-data-transfer/a-peek-behind-colossus-googles-file-system" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">巨像</strong> </a>来拯救的地方！</li><li id="264f" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">一个复杂的处理引擎，可以使用矢量化等技术改善程序执行:这就是<a class="ae la" href="https://research.google/pubs/pub36632/" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj"> Dremel </strong> </a>发挥作用的地方！</li></ul><p id="d37d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">上面的例子(在图表中)有一个普通的查询；在大规模连接和大规模执行的情况下，BigQuery中遵循的总体策略可以总结为下图:</p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es mk"><img src="../Images/1f54ffd2ceb4f7994487ba84a83ee11b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y4iveJ5U_g5kWyBgxkmQkw.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">BigQuery中的大规模连接</figcaption></figure><p id="2d0e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">总之，对于大规模连接，首先将数据映射到worker，其中它们基本上只是从分布式存储中读取，然后对数据进行排序，以便连接键的每个散列的行都在同一个worker中结束！</p><p id="e7ac" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，让我们慢慢理解BigQuery的架构。</p></div><div class="ab cl lh li gp lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="hb hc hd he hf"><h1 id="cfd9" class="iq ir hi bd is it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn bi translated">BigQuery架构——一个温和的介绍</h1><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es ml"><img src="../Images/240d377073fa976dc72a0cc4b7ca17b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPhV8tkkxq6-mfbLZE8Kxw.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">BigQuery:整体架构:摘要</figcaption></figure><p id="bc36" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">让我们逐点探索BigQuery整体架构的上述图示:</p><ul class=""><li id="45be" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">首先，我们需要注意的是，存储和计算是分开的，可以独立地按需扩展。这就是BigQuery对于大规模数据分析用例表现优异的本质！</li><li id="1985" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">在架构的中间部分，我们遇到了<a class="ae la" href="https://cloud.google.com/blog/products/storage-data-transfer/a-peek-behind-colossus-googles-file-system" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">巨像</strong> </a> —谷歌的分布式文件系统，这是BigQuery在谷歌云平台中原生存储客户数据的地方。在架构的右边，我们找到了<a class="ae la" href="https://research.google/pubs/pub36632/" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj"> Dremel </strong> </a>，我们的查询引擎！</li><li id="b7b7" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">与传统的事务数据库相比，前者中的存储和计算单元在本地存储时彼此非常接近，以保证ACID原则和性能。到目前为止，我们已经拥有了速度惊人的大型网络，因此紧密耦合不再是一个硬性限制！同样，我们计划实践真正大规模的分析，因此，查询通常会运行一段时间来处理我们所有的数据！这意味着，延迟也不那么重要。</li></ul><p id="8acd" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">对于BigQuery，将存储和计算分离有很大的好处，如下所示:</p><ul class=""><li id="19d0" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><strong class="jq hj">可扩展性</strong>:无需任何数据移动，就可以将新节点添加到节点集群中！因此，与计算和存储紧密耦合的数据库需要数小时或数天相比，计算和存储分离的集群横向扩展速度非常快(即，只需几秒钟)。</li><li id="8d6a" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated"><strong class="jq hj">可用性:</strong>出现节点故障时，数据永不丢失！群集中的幸存节点可以访问所有数据(通过网络)，因此任何或所有系统从节点故障中的恢复都可以由一个(或多个)幸存的工作节点非常快速地执行！</li></ul><p id="cfe7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在上面的架构图中间，我们也有分布式内存洗牌，我们肯定会在接下来的帖子中深入探讨。所有这些操作都在<a class="ae la" href="https://cloud.google.com/blog/topics/systems/the-evolution-of-googles-jupiter-data-center-network" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj"> Jupiter </strong> </a>上运行，这是谷歌巨大的Pb级网络，它允许任何谷歌云平台客户有效地利用谷歌作为一个组织的规模。</p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es mm"><img src="../Images/4a4b71fedae56a74be3b23ba0e850d42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zs9pyt0eX0K9t22NTPE6IA.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">整体BigQuery组织和架构</figcaption></figure><p id="da9f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">除了基本设计原则，我们还发现:</p><ul class=""><li id="b879" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">有很多方法可以将数据导入BigQuery进行分析。最常见的方法包括使用命令行的<strong class="jq hj">批处理/批量摄取</strong>或其他GCP产品，如<a class="ae la" href="https://cloud.google.com/dataflow" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">数据流</strong> </a>，使用<a class="ae la" href="https://cloud.google.com/bigquery/docs/samples/bigquery-table-insert-rows" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj"> BigQuery流式传输</strong> </a>选项或数据流的流式摄取，使用<a class="ae la" href="https://cloud.google.com/bigquery/docs/dts-introduction" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj"> BigQuery数据传输服务</strong> </a>选项的托管传输等等。</li><li id="920b" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated"><a class="ae la" href="https://cloud.google.com/bigquery/docs/cloud-sql-federated-queries" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">存储联盟</strong> </a>选项内置在BigQuery中作为服务，这样我们甚至可以在Google云存储中概念化我们的数据湖，并在BigQuery中以假设的外部表的形式直接读取(通常是结构化或JSON/XML)数据。</li><li id="7ee2" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">要像数据分析师一样以编程方式与BigQuery交互，我们不仅有标准的<strong class="jq hj"> SQL方言</strong>，而且还有<a class="ae la" href="https://cloud.google.com/bigquery-ml/docs/introduction" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">机器学习集成</strong> </a>，以及类似<strong class="jq hj">地理空间功能</strong>的特性。</li><li id="4ceb" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">在BigQuery中，我们设计了<strong class="jq hj"> <em class="lg">无状态工人节点</em> </strong>。简单地说，这些是我们执行查询的标准计算人员。此外，到目前为止，我们还为BI引擎提供了BI查询节点，查询在内存中执行，从而使事情变得非常快。更多的双引擎稍后！</li><li id="f9b5" class="kr ks hi jq b jr lb jv lc jz ld kd le kh lf kl kw kx ky kz bi translated">我们还可以通过Web UI、命令行界面、客户端库等与BigQuery进行交互。这使得BigQuery对开发人员来说非常灵活，只受IAM角色所赋予的不同用户角色的限制。</li></ul></div><div class="ab cl lh li gp lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="hb hc hd he hf"><h1 id="7c2e" class="iq ir hi bd is it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn bi translated">结论:第一部分</h1><p id="4912" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">希望这第一套对BigQuery及其内部原理的介绍对我们的读者(数据工程师、数据科学家等)有用！).在这一系列博客文章的下一部分，我们将揭示BigQuery更多的内部工作方式，从存储(Colossus)的内部工作方式开始，Dremel查询执行引擎如何有效地运行我们的查询，等等。</p><p id="77b3" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">对于那些寻找视频格式快速介绍的读者来说，Youtube上已经有一个由我们的谷歌同事创建的优秀播放列表了！此处 可用<a class="ae la" href="https://www.youtube.com/watch?v=d3MDxC_iuaw&amp;list=PLIivdWyY5sqLAbIdmcMwsxWg-w8Px34MS" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">。</strong></a></p><p id="522f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">快乐学习！！！</p></div></div>    
</body>
</html>