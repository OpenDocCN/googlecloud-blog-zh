<html>
<head>
<title>Spring Boot Logging in GCP Stackdriver</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GCP的Spring Boot伐木公司</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/spring-boot-logging-in-gcp-stackdriver-40da0ac53a28?source=collection_archive---------0-----------------------#2019-12-29">https://medium.com/google-cloud/spring-boot-logging-in-gcp-stackdriver-40da0ac53a28?source=collection_archive---------0-----------------------#2019-12-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6d1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你正在谷歌云平台上部署一个Spring Boot应用，并试图找出如何有效地登录Stackdriver，这是适合你的帖子。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/6b7310939a24ad74d4c248b4ca6a3e4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*gN2yiS3EtraUpVD_E41Ebw.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">堆叠驱动测井</figcaption></figure><h2 id="6228" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">一些考虑</h2><ul class=""><li id="5a4a" class="kk kl hi ih b ii km im kn iq ko iu kp iy kq jc kr ks kt ku bi translated"><strong class="ih hj">格式</strong>:stack driver的构造方式，默认的spring boot日志格式不方便。JSON格式更理想。GCP的建议是使用<a class="ae kv" href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry" rel="noopener ugc nofollow" target="_blank"> <em class="kw"> LogEntry </em> </a>对象及其关联格式。</li></ul><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="dce1" class="jp jq hi ky b fi lc ld l le lf">{<br/>  "logName": string,<br/>  "resource": {<br/>    object (<a class="ae kv" href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/MonitoredResource" rel="noopener ugc nofollow" target="_blank">MonitoredResource</a>)<br/>  },<br/>  "timestamp": string,<br/>  "receiveTimestamp": string,<br/>  "severity": enum (<a class="ae kv" href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry#LogSeverity" rel="noopener ugc nofollow" target="_blank">LogSeverity</a>),<br/>  "insertId": string,<br/>  "httpRequest": {<br/>    object (<a class="ae kv" href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry#HttpRequest" rel="noopener ugc nofollow" target="_blank">HttpRequest</a>)<br/>  },<br/>  "labels": {<br/>    string: string,<br/>    ...<br/>  },<br/>  "metadata": {<br/>    object (<a class="ae kv" href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry#MonitoredResourceMetadata" rel="noopener ugc nofollow" target="_blank">MonitoredResourceMetadata</a>)<br/>  },<br/>  "operation": {<br/>    object (<a class="ae kv" href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry#LogEntryOperation" rel="noopener ugc nofollow" target="_blank">LogEntryOperation</a>)<br/>  },<br/>  "trace": string,<br/>  "spanId": string,<br/>  "traceSampled": boolean,<br/>  "sourceLocation": {<br/>    object (<a class="ae kv" href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry#LogEntrySourceLocation" rel="noopener ugc nofollow" target="_blank">LogEntrySourceLocation</a>)<br/>  },<br/><br/>  // Union field <!-- -->payload<!-- --> can be only one of the following:<br/>  "protoPayload": {<br/>    "@type": string,<br/>    field1: ...,<br/>    ...<br/>  },<br/>  "textPayload": string,<br/>  "jsonPayload": {<br/>    object<br/>  }<br/>  // End of list of possible types for union field <!-- -->payload<!-- -->.<br/>}</span></pre><ul class=""><li id="97a3" class="kk kl hi ih b ii ij im in iq lg iu lh iy li jc kr ks kt ku bi translated"><strong class="ih hj">跟踪</strong>:默认的spring boot日志捕获跟踪和span信息，这也需要捕获JSON格式。为此，我们将使用<a class="ae kv" href="https://spring.io/projects/spring-cloud-sleuth" rel="noopener ugc nofollow" target="_blank"> <em class="kw">春云侦探</em> </a>。</li><li id="0c76" class="kk kl hi ih b ii lj im lk iq ll iu lm iy ln jc kr ks kt ku bi translated">链接<strong class="ih hj">堆栈驱动跟踪</strong>和<strong class="ih hj">堆栈驱动记录</strong>:每当你点击堆栈驱动跟踪中的一个跟踪时，会有一个类似这样的小按钮</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lo"><img src="../Images/68b36535739d9099a03c85786f3de458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*Bkco1a2_m-9xoUO-ORq7eQ.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">当您单击堆栈驱动程序跟踪中的跟踪时</figcaption></figure><p id="52ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们单击<em class="kw">视图</em>时，我们将被重定向到Stackdriver日志记录部分，其中包含该特定跟踪下的所有日志。嗯，至少那是理想状态。</p><p id="9a5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了实现这一点，当我们将日志写入<a class="ae kv" href="https://cloud.google.com/logging/" rel="noopener ugc nofollow" target="_blank"> Stackdriver Logging </a>时，我们需要使用格式<strong class="ih hj">“项目/[项目标识]/跟踪/[跟踪标识]”</strong>来设置LogEntry“跟踪”字段。</p><p id="2fa0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">示例:</p><p id="65ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">追踪:<code class="du lp lq lr ky b">projects/my-projectid/traces/06796866738c859f2f19b7cfb3214824</code></p><p id="651e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi ls translated"><span class="l lt lu lv bm lw lx ly lz ma di">N</span>T27】注:如果您通过Fluentd使用<a class="ae kv" href="https://cloud.google.com/kubernetes-engine/" rel="noopener ugc nofollow" target="_blank"> Google Kubernetes引擎</a>或<a class="ae kv" href="https://cloud.google.com/logging/docs/agent/" rel="noopener ugc nofollow" target="_blank"> Stackdriver日志代理</a>，我们可以通过使用<strong class="ih hj">" Logging . Google APIs . com/trace "</strong>和<strong class="ih hj">" Logging . Google APIs . com/span_id "</strong>关键字编写结构化日志来设置LogEntry "trace "和" span _ id "字段。</p><p id="9ec2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">示例:</p><p id="f708" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">logging.googleapis.com/trace:<code class="du lp lq lr ky b">projects/my-projectid/traces/06796866738c859f2f19b7cfb3214824</code></p><p id="8515" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">logging.googleapis.com/spanId:<code class="du lp lq lr ky b">2797cfb321482485</code></p><p id="074c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过使用<a class="ae kv" href="http://spring-cloud-gcp-starter-logging" rel="noopener ugc nofollow" target="_blank"> <em class="kw">春云GCP项目的Spring-Cloud-GCP-starter-logging</em></a><em class="kw">来实现。</em></p></div><div class="ab cl mb mc gp md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hb hc hd he hf"><h1 id="5a0c" class="mi jq hi bd jr mj mk ml jv mm mn mo jz mp mq mr kc ms mt mu kf mv mw mx ki my bi translated">履行</h1><p id="ee0d" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq mz is it iu na iw ix iy nb ja jb jc hb bi translated">创建Spring Boot应用程序。</p><p id="a614" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">pom.xml:</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="cf52" class="jp jq hi ky b fi lc ld l le lf"><em class="kw">&lt;?</em><strong class="ky hj">xml version="1.0" encoding="UTF-8"</strong><em class="kw">?&gt;<br/></em>&lt;<strong class="ky hj">project  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br/>       xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</strong>&gt;<br/>   &lt;<strong class="ky hj">modelVersion</strong>&gt;4.0.0&lt;/<strong class="ky hj">modelVersion</strong>&gt;<br/>   &lt;<strong class="ky hj">parent</strong>&gt;<br/>      &lt;<strong class="ky hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>      &lt;<strong class="ky hj">artifactId</strong>&gt;spring-boot-starter-parent&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>      &lt;<strong class="ky hj">version</strong>&gt;2.2.2.RELEASE&lt;/<strong class="ky hj">version</strong>&gt;<br/>      &lt;<strong class="ky hj">relativePath</strong>/&gt; <em class="kw">&lt;!-- lookup parent from repository --&gt;<br/>   </em>&lt;/<strong class="ky hj">parent</strong>&gt;<br/>   &lt;<strong class="ky hj">groupId</strong>&gt;com.anoophp&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>   &lt;<strong class="ky hj">artifactId</strong>&gt;gcp-stackdriver-logging&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>   &lt;<strong class="ky hj">version</strong>&gt;0.0.1-SNAPSHOT&lt;/<strong class="ky hj">version</strong>&gt;<br/>   &lt;<strong class="ky hj">name</strong>&gt;gcp-stackdriver-logging&lt;/<strong class="ky hj">name</strong>&gt;<br/>   &lt;<strong class="ky hj">description</strong>&gt;GCP Stackdriver Logging example&lt;/<strong class="ky hj">description</strong>&gt;<br/><br/>   &lt;<strong class="ky hj">properties</strong>&gt;<br/>      &lt;<strong class="ky hj">java.version</strong>&gt;1.8&lt;/<strong class="ky hj">java.version</strong>&gt;<br/>      &lt;<strong class="ky hj">spring-cloud.version</strong>&gt;Hoxton.SR1&lt;/<strong class="ky hj">spring-cloud.version</strong>&gt;<br/>   &lt;/<strong class="ky hj">properties</strong>&gt;<br/><br/>   &lt;<strong class="ky hj">dependencies</strong>&gt;<br/>      &lt;<strong class="ky hj">dependency</strong>&gt;<br/>         &lt;<strong class="ky hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>         &lt;<strong class="ky hj">artifactId</strong>&gt;spring-boot-starter-webflux&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>      &lt;/<strong class="ky hj">dependency</strong>&gt;<br/>      &lt;<strong class="ky hj">dependency</strong>&gt;<br/>         &lt;<strong class="ky hj">groupId</strong>&gt;org.springframework.cloud&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>         &lt;<strong class="ky hj">artifactId</strong>&gt;spring-cloud-gcp-starter-logging&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>      &lt;/<strong class="ky hj">dependency</strong>&gt;<br/>      &lt;<strong class="ky hj">dependency</strong>&gt;<br/>         &lt;<strong class="ky hj">groupId</strong>&gt;org.springframework.cloud&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>         &lt;<strong class="ky hj">artifactId</strong>&gt;spring-cloud-starter-sleuth&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>      &lt;/<strong class="ky hj">dependency</strong>&gt;<br/><br/>      &lt;<strong class="ky hj">dependency</strong>&gt;<br/>         &lt;<strong class="ky hj">groupId</strong>&gt;org.projectlombok&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>         &lt;<strong class="ky hj">artifactId</strong>&gt;lombok&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>         &lt;<strong class="ky hj">optional</strong>&gt;true&lt;/<strong class="ky hj">optional</strong>&gt;<br/>      &lt;/<strong class="ky hj">dependency</strong>&gt;<br/>      &lt;<strong class="ky hj">dependency</strong>&gt;<br/>         &lt;<strong class="ky hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>         &lt;<strong class="ky hj">artifactId</strong>&gt;spring-boot-starter-test&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>         &lt;<strong class="ky hj">scope</strong>&gt;test&lt;/<strong class="ky hj">scope</strong>&gt;<br/>         &lt;<strong class="ky hj">exclusions</strong>&gt;<br/>            &lt;<strong class="ky hj">exclusion</strong>&gt;<br/>               &lt;<strong class="ky hj">groupId</strong>&gt;org.junit.vintage&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>               &lt;<strong class="ky hj">artifactId</strong>&gt;junit-vintage-engine&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>            &lt;/<strong class="ky hj">exclusion</strong>&gt;<br/>         &lt;/<strong class="ky hj">exclusions</strong>&gt;<br/>      &lt;/<strong class="ky hj">dependency</strong>&gt;<br/>      &lt;<strong class="ky hj">dependency</strong>&gt;<br/>         &lt;<strong class="ky hj">groupId</strong>&gt;io.projectreactor&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>         &lt;<strong class="ky hj">artifactId</strong>&gt;reactor-test&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>         &lt;<strong class="ky hj">scope</strong>&gt;test&lt;/<strong class="ky hj">scope</strong>&gt;<br/>      &lt;/<strong class="ky hj">dependency</strong>&gt;<br/>   &lt;/<strong class="ky hj">dependencies</strong>&gt;<br/><br/>   &lt;<strong class="ky hj">dependencyManagement</strong>&gt;<br/>      &lt;<strong class="ky hj">dependencies</strong>&gt;<br/>         &lt;<strong class="ky hj">dependency</strong>&gt;<br/>            &lt;<strong class="ky hj">groupId</strong>&gt;org.springframework.cloud&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>            &lt;<strong class="ky hj">artifactId</strong>&gt;spring-cloud-dependencies&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>            &lt;<strong class="ky hj">version</strong>&gt;${spring-cloud.version}&lt;/<strong class="ky hj">version</strong>&gt;<br/>            &lt;<strong class="ky hj">type</strong>&gt;pom&lt;/<strong class="ky hj">type</strong>&gt;<br/>            &lt;<strong class="ky hj">scope</strong>&gt;import&lt;/<strong class="ky hj">scope</strong>&gt;<br/>         &lt;/<strong class="ky hj">dependency</strong>&gt;<br/>      &lt;/<strong class="ky hj">dependencies</strong>&gt;<br/>   &lt;/<strong class="ky hj">dependencyManagement</strong>&gt;<br/><br/>   &lt;<strong class="ky hj">build</strong>&gt;<br/>      &lt;<strong class="ky hj">plugins</strong>&gt;<br/>         &lt;<strong class="ky hj">plugin</strong>&gt;<br/>            &lt;<strong class="ky hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="ky hj">groupId</strong>&gt;<br/>            &lt;<strong class="ky hj">artifactId</strong>&gt;spring-boot-maven-plugin&lt;/<strong class="ky hj">artifactId</strong>&gt;<br/>         &lt;/<strong class="ky hj">plugin</strong>&gt;<br/>      &lt;/<strong class="ky hj">plugins</strong>&gt;<br/>   &lt;/<strong class="ky hj">build</strong>&gt;<br/><br/>&lt;/<strong class="ky hj">project</strong>&gt;</span></pre><p id="f3a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<em class="kw"> main/resources </em>下创建一个文件</p><p id="213e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kw"> logback-spring.xml </em>:</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="b41c" class="jp jq hi ky b fi lc ld l le lf">&lt;<strong class="ky hj">configuration</strong>&gt;<br/><br/>    &lt;<strong class="ky hj">property name="projectId" value="${projectId:-${GOOGLE_CLOUD_PROJECT}}"</strong>/&gt;<br/><br/>    &lt;<strong class="ky hj">appender name="CONSOLE_JSON" class="ch.qos.logback.core.ConsoleAppender"</strong>&gt;<br/>        &lt;<strong class="ky hj">encoder class="ch.qos.logback.core.encoder.LayoutWrappingEncoder"</strong>&gt;<br/>            &lt;<strong class="ky hj">layout class="org.springframework.cloud.gcp.logging.StackdriverJsonLayout"</strong>&gt;<br/>                &lt;<strong class="ky hj">projectId</strong>&gt;${projectId}&lt;/<strong class="ky hj">projectId</strong>&gt;<br/>            &lt;/<strong class="ky hj">layout</strong>&gt;<br/>        &lt;/<strong class="ky hj">encoder</strong>&gt;<br/>    &lt;/<strong class="ky hj">appender</strong>&gt;<br/><br/>    &lt;<strong class="ky hj">root level="INFO"</strong>&gt;<br/>        &lt;<strong class="ky hj">appender-ref ref="CONSOLE_JSON" </strong>/&gt;<br/>    &lt;/<strong class="ky hj">root</strong>&gt;<br/>&lt;/<strong class="ky hj">configuration</strong>&gt;</span></pre><p id="74a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们正在使用<strong class="ih hj">org . spring framework . cloud . gcp . Logging . stackdriverjsonlayout</strong>Layout<strong class="ih hj"/>提供我们已经导入到POM中的GCP日志记录启动项目。</p><p id="4b5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这确保了在GKE和GCE中部署时自动设置项目ID。</p><p id="18ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kw">gcpstackdriverloggingapplication . Java:</em></p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="8a3e" class="jp jq hi ky b fi lc ld l le lf"><strong class="ky hj">package </strong>com.anoophp.gcpstackdriverlogging;<br/><br/><strong class="ky hj">import </strong>lombok.extern.slf4j.Slf4j;<br/><strong class="ky hj">import </strong>org.springframework.boot.SpringApplication;<br/><strong class="ky hj">import </strong>org.springframework.boot.autoconfigure.SpringBootApplication;<br/><strong class="ky hj">import </strong>org.springframework.web.bind.annotation.GetMapping;<br/><strong class="ky hj">import </strong>org.springframework.web.bind.annotation.RestController;<br/><br/>@SpringBootApplication<br/><strong class="ky hj">public class </strong>GcpStackdriverLoggingApplication {<br/><br/>   <strong class="ky hj">public static void </strong>main(String[] args) {<br/>      SpringApplication.<em class="kw">run</em>(GcpStackdriverLoggingApplication.<strong class="ky hj">class</strong>, args);<br/>   }<br/><br/>}<br/><br/>@RestController<br/>@Slf4j<br/><strong class="ky hj">class </strong>Foo {<br/><br/>   @GetMapping(<strong class="ky hj">"/foo"</strong>)<br/>   <strong class="ky hj">public </strong>String bar() {<br/>      <strong class="ky hj"><em class="kw">log</em></strong>.info(<strong class="ky hj">"Test log"</strong>);<br/>      <strong class="ky hj">return "bar"</strong>;<br/>   }<br/>}</span></pre><p id="01fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！！</p><p id="bbf5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您在GCP内外运行这个应用程序并点击/foo端点时，您会看到这个。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="4a91" class="jp jq hi ky b fi lc ld l le lf">/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home/bin/java com.anoophp.gcpstackdriverlogging.GcpStackdriverLoggingApplication</span><span id="4339" class="jp jq hi ky b fi nc ld l le lf">.   ____          _            __ _ _<br/> /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \<br/>( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \<br/> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )<br/>  '  |____| .__|_| |_|_| |_\__, | / / / /<br/> =========|_|==============|___/=/_/_/_/<br/> :: Spring Boot ::        (v2.2.2.RELEASE)</span><span id="2cf8" class="jp jq hi ky b fi nc ld l le lf">{"timestampSeconds":1577607033,"timestampNanos":29000000,"severity":"INFO","thread":"main","logger":"com.anoophp.gcpstackdriverlogging.GcpStackdriverLoggingApplication","message":"No active profile set, falling back to default profiles: default","context":"default"}<br/>{"timestampSeconds":1577607033,"timestampNanos":479000000,"severity":"INFO","thread":"main","logger":"org.springframework.cloud.context.scope.GenericScope","message":"BeanFactory id\u003dc7b095b5-61ce-30c0-b7a7-fcc51940dbd3","context":"default"}</span><span id="640f" class="jp jq hi ky b fi nc ld l le lf">{"timestampSeconds":1577607033,"timestampNanos":686000000,"severity":"INFO","thread":"main","logger":"org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker","message":"Bean \u0027org.springframework.cloud.sleuth.instrument.web.client.TraceWebClientAutoConfiguration$NettyConfiguration\u0027 of type [org.springframework.cloud.sleuth.instrument.web.client.TraceWebClientAutoConfiguration$NettyConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)","context":"default"}</span><span id="2e8e" class="jp jq hi ky b fi nc ld l le lf">{"timestampSeconds":1577607034,"timestampNanos":131000000,"severity":"INFO","thread":"main","logger":"com.google.auth.oauth2.ComputeEngineCredentials","message":"Failed to detect whether we are running on Google Compute Engine.","context":"default"}</span><span id="d055" class="jp jq hi ky b fi nc ld l le lf">{"timestampSeconds":1577607034,"timestampNanos":131000000,"severity":"WARN","thread":"main","logger":"org.springframework.cloud.gcp.core.DefaultCredentialsProvider","message":"No core credentials are set. Service-specific credentials (e.g., spring.cloud.gcp.pubsub.credentials.*) should be used if your app uses services that require credentials.","context":"default"}</span><span id="ac31" class="jp jq hi ky b fi nc ld l le lf">{"timestampSeconds":1577607034,"timestampNanos":133000000,"severity":"INFO","thread":"main","logger":"org.springframework.cloud.gcp.autoconfigure.core.GcpContextAutoConfiguration","message":"The default project ID is gcp-webflux-logging-tracing","context":"default"}</span><span id="837a" class="jp jq hi ky b fi nc ld l le lf">{"timestampSeconds":1577607034,"timestampNanos":325000000,"severity":"INFO","thread":"main","logger":"org.springframework.boot.web.embedded.netty.NettyWebServer","message":"Netty started on port(s): 8080","context":"default"}</span><span id="47a6" class="jp jq hi ky b fi nc ld l le lf">{"timestampSeconds":1577607034,"timestampNanos":330000000,"severity":"INFO","thread":"main","logger":"com.anoophp.gcpstackdriverlogging.GcpStackdriverLoggingApplication","message":"Started GcpStackdriverLoggingApplication in 1.998 seconds (JVM running for 2.472)","context":"default"}</span><span id="9a3b" class="jp jq hi ky b fi nc ld l le lf">{<strong class="ky hj">"traceId":"5e8a279c5b6f16ab"</strong>,"spanId":"5e8a279c5b6f16ab","spanExportable":"false","timestampSeconds":1577607071,"timestampNanos":863000000,"severity":"INFO","thread":"reactor-http-nio-2","logger":"com.anoophp.gcpstackdriverlogging.Foo","message":"Test log","context":"default","logging.googleapis.com/trace":<strong class="ky hj">"projects/gcp-webflux-logging-tracing/traces/00000000000000005e8a279c5b6f16ab"</strong>,<strong class="ky hj">"logging.googleapis.com/spanId":"5e8a279c5b6f16ab"</strong>}</span></pre><p id="7e20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您导航到Stackdriver Trace -&gt;单击一个Trace -&gt; View来查看Stackdriver日志记录和该特定跟踪的所有相关日志。</p><p id="f1af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在GitHub <a class="ae kv" href="https://github.com/anoophp777/gcp-stackdriver-logging" rel="noopener ugc nofollow" target="_blank">中找到完整的项目。</a></p><p id="8106" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你有任何问题，请留言。</p></div></div>    
</body>
</html>