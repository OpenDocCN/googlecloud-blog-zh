# 谷歌云的 Spot 实例大获全胜，你也应该如此

> 原文：<https://medium.com/google-cloud/google-clouds-spot-instances-win-big-and-you-should-too-5b244ca3facf?source=collection_archive---------2----------------------->

节日快乐！办公室里的事情有点慢，所以我决定写下一些关于我最喜欢的谷歌云功能之一——Spot Instances 的想法。在谷歌，它们实际上被称为[可抢占虚拟机](https://cloud.google.com/preemptible-vms/)。他们**在短暂的工作负载下绝对摇滚**！以下是方法和原因。

**基础知识**

除非你一直生活在岩石下，否则你可能[知道](http://fortune.com/2016/01/08/google-amazon-cloud-price-war/)谷歌几年来一直是云[价格](https://cloud.google.com/products/calculator/)的领导者。还有更好的:

*   谷歌的可抢占虚拟机不是托管一个不稳定的二级市场，而是定价的 80%。保持简单。
*   **按分钟计费**让你不再担心四舍五入到最接近的小时。
*   **自定义虚拟机**让您[选择](https://cloud.google.com/custom-machine-types/)自己的 CPU 和 RAM 组合。多酷啊。？？
*   可抢占的虚拟机受到大规模的支持。例如，[这个家伙](https://news.ycombinator.com/item?id=13259575)在**25000 个可抢占实例**上经营他的生意！祝你在别处获得这种短暂的能力！

既然我们已经介绍了基础知识，是时候做一些细微的改变了。

**实例类型简单性**

Google Compute Engine 的产品并没有分割成几十种实例类型。你不需要一个“网络优化的虚拟机”来获得谷歌的快速网络，你也不需要一个“存储优化的虚拟机”来获得大量的存储。您可以与任何实例快速联网，并且您的磁盘决策与实例类型无关。我们也不做多代实例。

有了谷歌云，你只需选择你的 CPU 和内存组合。当然，正如我上面提到的，您甚至可以用这种方式创建自己的实例类型！

换句话说，谷歌的业务不是在他们的货架上储存各种谷物选择，而是试图给你一个简单而功能丰富的产品。提供的深度，而不是广度。

![](img/5ce1460c2eb1f148a37fe006bd1fe7a0.png)

有时候选择太多不是好事。

**固定的零波动市场**

谷歌云的可抢占虚拟机不在二级市场上运行。这是计算引擎围绕实时迁移、虚拟机规模调整、自定义虚拟机和客户租赁所做决策的剩余容量:

*   价格是固定的，所以你不需要担心管理投标，也不需要担心价格的波动。可悲的是，帮助你充分利用 AWS Spot 实例的数十家创业公司中，大多数在谷歌都是多余的。我们热爱简单，你也应该如此！
*   实例类型少意味着你不需要以你的能力玩俄罗斯方块。您不需要仅仅为了获得 CPU 和 RAM 而创建实例 soup。因此，短暂实例的市场不那么复杂，也不那么分散。灵活性。

![](img/1f4c017a3cd9b94981f5d0158724c8fd.png)

市场波动——一次也没有。

**简单操作**

除了简单的定价和简单的选择，谷歌云还为人们提供了一些管理可抢占虚拟机的好工具:

*   在被驱逐之前你会得到 30 秒的通知。保存你的东西，并转移到另一个实例。
*   [托管实例组](https://cloud.google.com/compute/docs/instances/preemptible#preemptible_with_instance_groups)在实例被抢占后回收它们。

Google Cloud Dataproc，Google 的托管 Hadoop 和 Spark 服务，为您利用所有这些优点，在抢占的情况下自动修复您的工作！您可以利用所有这些优势运行 Spark:

*   每分钟计费
*   可抢占实例 80%折扣
*   自定义虚拟机类型

如果你已经做到这一步，你可能是一个球迷。至少我希望我让你停下来想一想。