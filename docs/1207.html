<html>
<head>
<title>Join, Group By and Aggregate in Cloud Data Fusion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云数据融合中的连接、分组和聚合</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/join-group-by-and-aggregate-in-cloud-data-fusion-a7b9919a0401?source=collection_archive---------0-----------------------#2019-11-24">https://medium.com/google-cloud/join-group-by-and-aggregate-in-cloud-data-fusion-a7b9919a0401?source=collection_archive---------0-----------------------#2019-11-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/59b29b344e00026f096ca23d5bdbfa76.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/0*SP4kyp-M2gwDwd6n"/></div></figure><p id="ed25" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">好消息！<a class="ae jk" href="https://cloud.google.com/data-fusion/" rel="noopener ugc nofollow" target="_blank">云数据融合</a>现已GA。2019年11月21日在Google Next '19 UK上宣布，云数据融合是一种完全托管的云原生企业数据集成服务，用于快速构建和管理数据管道。云数据融合web UI允许您构建可扩展的数据集成解决方案来清理、准备、混合、传输和转换数据，而无需管理基础架构。云数据融合由开源项目<a class="ae jk" href="https://cdap.io/" rel="noopener ugc nofollow" target="_blank"> CDAP </a>提供支持。</p><p id="2589" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">云数据融合如何入门？这篇文章向您展示了如何在云数据融合中简单地构建和使用牧马人和数据管道功能来清理、转换和处理飞行数据。</p><p id="fbac" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ETL过程</strong> <br/>该图显示了将要发生的转换。这将是读取两个文件，转换数据，并加载到一个输出；每个航空公司的航班总数。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jl"><img src="../Images/9e86b2b38409264e7dc7a4b4d746561d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8xb_l2GppdsU9-yW.png"/></div></div></figure><h2 id="e338" class="ju jv hi bd jw jx jy jz ka kb kc kd ke ix kf kg kh jb ki kj kk jf kl km kn ko bi translated">目标</h2><ul class=""><li id="fcb6" class="kp kq hi io b ip kr it ks ix kt jb ku jf kv jj kw kx ky kz bi translated">将云数据融合连接到数据源</li><li id="3549" class="kp kq hi io b ip la it lb ix lc jb ld jf le jj kw kx ky kz bi translated">应用基本转换</li><li id="c1e4" class="kp kq hi io b ip la it lb ix lc jb ld jf le jj kw kx ky kz bi translated">按数据源连接和分组</li><li id="3ea0" class="kp kq hi io b ip la it lb ix lc jb ld jf le jj kw kx ky kz bi translated">向水槽写信</li></ul><p id="2387" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你可以开始了！</p><h2 id="ce0e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke ix kf kg kh jb ki kj kk jf kl km kn ko bi translated">登录到GCP控制台</h2><p id="b63d" class="pw-post-body-paragraph im in hi io b ip kr ir is it ks iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">首先进入<a class="ae jk" href="https://console.cloud.google.com" rel="noopener ugc nofollow" target="_blank"> GCP控制台</a>，使用你的谷歌账户登录。</p><h2 id="9b4a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke ix kf kg kh jb ki kj kk jf kl km kn ko bi translated">选择或创建一个GCP项目</h2><p id="c2b2" class="pw-post-body-paragraph im in hi io b ip kr ir is it ks iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">您需要选择一个项目。如果您没有任何项目，请转到项目选择器页面创建一个——在本练习中，我创建并使用了一个名为<em class="li"> flights-analysis </em>的特定项目。<strong class="io hj">我强烈建议您为本演练创建一个新项目</strong>。如果需要帮助，请参考<a class="ae jk" href="https://cloud.google.com/resource-manager/docs/creating-managing-projects" rel="noopener ugc nofollow" target="_blank">创建您的项目</a>。</p><h2 id="f772" class="ju jv hi bd jw jx jy jz ka kb kc kd ke ix kf kg kh jb ki kj kk jf kl km kn ko bi translated">创建GCS存储桶并复制数据</h2><p id="bb10" class="pw-post-body-paragraph im in hi io b ip kr ir is it ks iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">你需要数据！这两个小数据集位于GCS存储桶中，您需要将其复制到您自己的存储桶中。</p><p id="7cdf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先创建您的存储桶，您可以通过在资源和产品搜索字段中键入<em class="li">存储桶</em>并选择<em class="li">创建存储桶</em>来完成。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lj"><img src="../Images/513ad698a7c6a2749fd628cdc245db1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vy5dIzlU93hd2YTZ.png"/></div></div></figure><p id="8327" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在创建存储桶页面上，提供您的存储桶的名称<em class="li"/><strong class="io hj">【1】</strong>，请记住，这些名称是全球唯一的，出于演示的目的，我已经输入了<em class="li"> flights-analysis-data2 </em>。选择<em class="li">区域</em> <strong class="io hj"> (2) </strong>作为位置类型，并选择您想要的<em class="li">位置</em> <strong class="io hj"> (3) </strong>，我选择了<em class="li">北美-东北1 </em>进行演示，然后单击<em class="li">创建</em> <strong class="io hj"> (4) </strong>来创建您的桶。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lk"><img src="../Images/6051942f0e93dbae8a165bf2cca89d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Tfr12Z3HsJ2ZKMLD.png"/></div></div></figure><p id="6a24" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">激活云壳</strong> <br/>你现在需要激活云壳，在GCP控制台右上方工具栏，点击打开云壳按钮。对话框打开后，可以立即点击<em class="li">继续</em>。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ll"><img src="../Images/0a79d3e4877901fc62bee4d01e4f04e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1J4R87sCF88OxiYh.png"/></div></div></figure><p id="11de" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">调配和连接到环境需要一些时间。当您连接时，您已经通过了身份验证，并且项目被设置为您的PROJECT_ID。</p><p id="2314" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">输出类似于以下内容:</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lm"><img src="../Images/01ecb00018ce15df12984a3c61a10e77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*F5MMMx3YkvyylK2X.png"/></div></div></figure><p id="1494" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您需要发出以下命令来将所需的样本文件和结构复制到您的GCS bucket中。将<strong class="io hj"> [BUCKET_NAME] </strong>替换为您之前创建的存储桶的名称。</p><pre class="jm jn jo jp fd ln lo lp lq aw lr bi"><span id="9409" class="ju jv hi lo b fi ls lt l lu lv">gsutil cp gs://flights-analysis-sample-data/input/airlines.csv gs://[BUCKET_NAME]]/input/ gsutil cp gs://flights-analysis-sample-data/input/flights_small.csv gs://[BUCKET_NAME]/input/</span></pre><p id="03ff" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">输出类似于以下内容:</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lw"><img src="../Images/0ea4d467bc6053743c7deeb8836094ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BKbtAVDcDr2XJteA.png"/></div></div></figure><h2 id="a509" class="ju jv hi bd jw jx jy jz ka kb kc kd ke ix kf kg kh jb ki kj kk jf kl km kn ko bi translated">创建云数据融合实例</h2><p id="d434" class="pw-post-body-paragraph im in hi io b ip kr ir is it ks iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">您现在已经准备好创建您的云数据融合实例了。</p><ol class=""><li id="55f0" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">转到云数据融合页面，您可以通过在资源和产品搜索字段中键入<em class="li">数据融合</em>并选择<em class="li">数据融合</em>来完成此操作。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mb"><img src="../Images/53f36fc6f8a4cddd43702a3a402e9ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lde9qYIl0Q0Bdavc.png"/></div></div></figure><ol class=""><li id="07a9" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">如果云数据融合API尚未启用，您必须通过点击<em class="li"> Enable </em>来启用它。<br/>这可能需要一段时间才能完成。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mc"><img src="../Images/503e37f59ceba175e18e0ecb8f0b3b75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ot1GE0QyF0WgMWUu.png"/></div></div></figure><ol class=""><li id="9e8a" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">提供一个<em class="li">实例名称</em> <strong class="io hj"> (1) </strong>，选择您的<em class="li">地区</em> <strong class="io hj"> (2) </strong>，选择<em class="li">版本</em> <strong class="io hj"> (3) </strong>基本，点击<em class="li">创建</em> <strong class="io hj"> (4) </strong>部署您的实例。出于本练习的目的，我选择了<em class="li"> flights_data-etl </em>作为我的实例的名称，并选择northamerica-northeast1作为我的地区。您可以为这些属性提供自己的值。<br/> <strong class="io hj"> <em class="li">注意:</em> </strong>这需要几分钟才能完成(耐心点)。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es md"><img src="../Images/a0ba113965d093d1da46253bac651e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3vA5m1pbgmpxDs0h.png"/></div></div></figure><h2 id="e9d8" class="ju jv hi bd jw jx jy jz ka kb kc kd ke ix kf kg kh jb ki kj kk jf kl km kn ko bi translated">构建数据管道</h2><ol class=""><li id="b85b" class="kp kq hi io b ip kr it ks ix kt jb ku jf kv jj ma kx ky kz bi translated">一旦进入<em class="li"> Studio </em>画布，您现在就可以构建数据管道了。首先选择或确保您在<em class="li">源</em><strong class="io hj">【1】</strong>视图中，单击<em class="li">GCS</em><strong class="io hj"/>源—这将在画布上添加一个GCS源，然后从GCS源中单击<em class="li">属性</em><strong class="io hj">【3】</strong>继续。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es me"><img src="../Images/bee1654189cbff1306b983a8cf2b6fbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sYrniDG2_1LNzZXM.png"/></div></div></figure><ol class=""><li id="2253" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">将显示GCS属性配置页面。为<em class="li">标签</em><strong class="io hj">(1)</strong>:“GCS-Flights Data”，然后为<em class="li">引用名称</em><strong class="io hj">(2)</strong>:“GCS _ Flights _ Data”输入以下值，提供<em class="li">路径</em> <strong class="io hj"> (3) </strong>到您之前创建的GCS Bucket，在这里您已经存储了flight_small.csv文件。为了这个练习的目的，我已经包括我的，确保提供您的适当的路径(如果您输入在这个图像中提供的内容，验证将不会成功)。点击<em class="li">验证</em> <strong class="io hj"> (4) </strong>验证所有属性，你应该看到绿色的<em class="li">没有发现错误</em>，最后点击<em class="li"> X </em> <strong class="io hj"> (5) </strong>关闭/保存GSC属性。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mf"><img src="../Images/bef578fc285d01a8a3da4d71d5b06816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YOJmGym9brmZPqlC.png"/></div></div></figure><ol class=""><li id="e2fa" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">将显示牧马人属性配置页面。为<em class="li">标签</em> <strong class="io hj"> (1) </strong>分配以下值:“牧马人-航班数据”，然后单击<em class="li">牧马人</em><strong class="io hj"/>继续。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mg"><img src="../Images/7f6dc100881869a0e79c1828ae4dbd37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wFoXiRNDLnAArIBh.png"/></div></div></figure><ol class=""><li id="3ab6" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">您需要选择/加载数据，选择flights_small.csv文件，该文件位于您之前创建的GCS存储桶中，然后继续。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mh"><img src="../Images/73efb2157bab012cfbe6a01b16a377cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*A29crSrW_h-DvO7P.png"/></div></div></figure><ol class=""><li id="e6fa" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">接下来是一系列解析和删除不需要的列的步骤。点击<em class="li">正文</em><strong class="io hj">【1】</strong>列上的下拉【列转换】，选择Parse-&gt;CSV<strong class="io hj">【2】</strong>，选择<em class="li">逗号</em><strong class="io hj">【3】</strong>作为分隔符，勾选<em class="li">设置首行为表头</em><strong class="io hj">【4】</strong>，然后点击<em class="li">应用</em><strong class="io hj">【5】</strong>继续。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mi"><img src="../Images/2ac3c1ba426f9ad4d518e554fe071284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wUGDxrtyGckQiXKJ.png"/></div></div></figure><ol class=""><li id="3108" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">您现在会注意到，Recipe框中已经填充了您刚才在争论活动中执行的指令。点击<em class="li">验证</em> <strong class="io hj"> (1) </strong>验证所有属性，你应该看到绿色的<em class="li">没有发现错误</em>，最后点击<em class="li"> X </em> <strong class="io hj"> (2) </strong>关闭/保存牧马人属性。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mj"><img src="../Images/6c37140bc4321611aa6f3457877a13a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wv3aq61EeSj8bPED.png"/></div></div></figure><ol class=""><li id="6bb1" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">将显示GCS属性配置页面。为<em class="li">标签</em><strong class="io hj">(1)</strong>:“GCS-Airlines Data”，然后为<em class="li">引用名称</em><strong class="io hj">(2)</strong>:“GCS _ Airlines _ Data”输入以下值，提供<em class="li">路径</em> <strong class="io hj"> (3) </strong>到您之前创建的GCS Bucket，其中存储了airlines.csv文件。为了这个练习的目的，我已经包括我的，确保提供您的适当的路径(如果您输入在这个图像中提供的内容，验证将不会成功)。点击<em class="li">验证</em> <strong class="io hj"> (4) </strong>验证所有属性，你应该看到绿色的<em class="li">没有发现错误</em>，最后点击<em class="li"> X </em> <strong class="io hj"> (5) </strong>关闭/保存GSC属性。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mk"><img src="../Images/8202a6f9a2d7291d829561e88ef36d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5jIha_nHLkdj8nQz.png"/></div></div></figure><ol class=""><li id="c0ed" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">将显示牧马人属性配置页面。为<em class="li">标签</em> <strong class="io hj"> (1) </strong>赋值如下:“牧马人—航空公司数据”，然后点击<em class="li">牧马人</em><strong class="io hj"/>继续。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mk"><img src="../Images/93b4124d2edf5b0e962eb4679eb81d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kczgylMFM1O4Z2xa.png"/></div></div></figure><ol class=""><li id="909b" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">像前面一样，您需要选择/加载数据，选择位于GCS存储桶中的airlines.csv文件继续。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mh"><img src="../Images/9aae97e900ca9137e1a83a7c524ddfdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*smmUEkRhk-86fP4x.png"/></div></div></figure><ol class=""><li id="b096" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">接下来是一系列解析和删除不需要的列的步骤。点击<em class="li">正文</em> <strong class="io hj"> (1) </strong>列上的下拉【列转换】，选择Parse - &gt; CSV <strong class="io hj"> (2) </strong>，选择<em class="li">逗号</em> <strong class="io hj"> (3) </strong>作为分隔符，勾选<em class="li">设置首行为表头</em> <strong class="io hj"> (4) </strong>，然后点击<em class="li">应用</em> <strong class="io hj"> (5) </strong>继续。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ml"><img src="../Images/a8fb885ab857db2b74aa4ff57f7727e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cECZcQIhmR24WQek.png"/></div></div></figure><ol class=""><li id="aa85" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">您现在会再次注意到，Recipe框中已经填充了您刚才在争论活动中执行的指令。点击<em class="li">验证</em> <strong class="io hj"> (1) </strong>验证所有属性，你应该看到绿色的<em class="li">没有发现错误</em>，最后点击<em class="li"> X </em> <strong class="io hj"> (2) </strong>关闭/保存牧马人属性。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mm"><img src="../Images/f1c91e6893abfa5196ab69916da2fe40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-khdDliLNLRMQH3L.png"/></div></div></figure><ol class=""><li id="829c" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">将显示Joiner属性配置框。在Join-Fields部分，展开<em class="li">Wrangler-Airlines Data</em><strong class="io hj">(1)</strong>，取消选中Code <strong class="io hj"> (2) </strong>，将以下值“Airline_name”分配给Description<em class="li">Alias</em><strong class="io hj">(3)</strong>，选择<em class="li"> Inner </em> <strong class="io hj"> (4) </strong>作为连接类型，在<em class="li">连接条件</em> <strong class="io hj"> (5) </strong>部分选择值“Airline” 单击<em class="li">获取</em> <strong class="io hj"> (6) </strong>获取模式，然后单击<em class="li">验证</em><strong class="io hj">【7】</strong>验证所有属性，您应该看到绿色的<em class="li">没有发现错误</em>，最后单击<em class="li">X</em><strong class="io hj">【8】</strong>关闭/保存连接器属性。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mn"><img src="../Images/07599a35080ac743f008210b8e671d37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Avjzp47-cofPAg2x.png"/></div></div></figure><ol class=""><li id="c52a" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">将显示“按属性分组”配置框。在<em class="li">分组依据字段</em>部分<strong class="io hj"> (1) </strong>添加以下字段:航空公司、航空公司_代码、航空公司_名称，在<em class="li">聚合</em> <strong class="io hj"> (2) </strong>部分输入“出发_时刻表”，选择“计数”作为聚合，输入“航班_计数”作为别名，点击<em class="li">获取模式</em> <strong class="io hj"> (3) </strong>，然后点击<em class="li">验证</em><strong class="io hj">(4)<strong class="io hj"/></strong></li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mo"><img src="../Images/f2e1c1d85b698e067e4598246cbc0111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N91myUPG5bxBfH5T.png"/></div></div></figure><ol class=""><li id="062c" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">将显示GCS属性配置页面。为<em class="li">标签</em><strong class="io hj">(1)</strong>:" GCS-Flight Count "，然后为<em class="li">引用名称</em><strong class="io hj">(2)</strong>:" GCS _ Flight _ Count "，提供<em class="li">路径</em> <strong class="io hj"> (3) </strong>到前面创建的输出的GCS桶。出于本练习的目的，我已经包括了我的，请确保提供您的适当路径(如果您输入此图像中提供的内容，验证将不会成功)，为输出文件的<em class="li">格式</em><strong class="io hj">【4】</strong>选择“csv”，单击<em class="li">验证</em><strong class="io hj">【5】</strong>验证所有属性，您应该会看到绿色的<em class="li">未发现错误</em>，最后单击<em class="li"/></li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mp"><img src="../Images/74a64c567ef1e9fd2dd96ddc18625eef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DrJYYzS6QBX29mrV.png"/></div></div></figure><ol class=""><li id="a2e6" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">管道将经历不同的周期；<strong class="io hj">部署</strong>，<strong class="io hj">置备</strong>，<strong class="io hj">启动</strong>，<strong class="io hj">运行</strong>，<strong class="io hj">取消置备</strong>，<strong class="io hj">成功</strong>在流水线页面的<em class="li">状态</em>中显示。一旦管道成功，下一步就是在GCS bucket中探索输出文件。</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mq"><img src="../Images/be46086a596f1a2ceebcd7924a7fdf9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xHxCX_djtuHX43Qy.png"/></div></div></figure><ol class=""><li id="76a9" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">要验证管道的输出接收器，请转到输出文件夹的GCS bucket，发出下面的gsutil命令来查看结果。请确保用您的信息替换<strong class="io hj">【BUCKET _ NAME】</strong>和<strong class="io hj">【REPLACE _ WITH _ YOUR _ FOLDER _ DATE】</strong>:</li></ol><ul class=""><li id="98f0" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj kw kx ky kz bi translated"><code class="du mr ms mt lo b">gsutil cat -h gs://[BUCKET_NAME]]/output/flight_count/[REPLACE_WITH_YOUR_FOLDER_DATE]/part-r-00000</code></li></ul><ol class=""><li id="087b" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">输出类似于以下内容:</li></ol><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mu"><img src="../Images/eb799a3df5cae35d2ca5a596ebdfb581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pXIrFNktUAVBmoxJ.png"/></div></div></figure><p id="d053" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">就是这样！您刚刚创建并运行了一个完整的云数据融合数据管道流程。</p><h2 id="82d7" class="ju jv hi bd jw jx jy jz ka kb kc kd ke ix kf kg kh jb ki kj kk jf kl km kn ko bi translated">清除</h2><p id="0a57" class="pw-post-body-paragraph im in hi io b ip kr ir is it ks iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">为了避免本演练中使用的资源向您的Google云平台帐户收取费用:</p><p id="7576" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果您想要删除整个项目，请遵循以下说明:</p><ol class=""><li id="2d31" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">在GCP控制台中，进入<a class="ae jk" href="https://console.cloud.google.com/iam-admin/projects" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">管理资源</strong> </a>页面。</li><li id="caf5" class="kp kq hi io b ip la it lb ix lc jb ld jf le jj ma kx ky kz bi translated">在项目列表中，选择想要删除的项目，点击<strong class="io hj">删除</strong>。</li><li id="13c2" class="kp kq hi io b ip la it lb ix lc jb ld jf le jj ma kx ky kz bi translated">在对话框中，键入项目ID，然后点击<strong class="io hj">关闭</strong>删除该项目。</li></ol><p id="a775" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">或者，如果您只想删除云数据融合实例，请遵循以下说明:</p><ol class=""><li id="edac" class="kp kq hi io b ip iq it iu ix lx jb ly jf lz jj ma kx ky kz bi translated">要查看您现有的云数据融合实例，请打开<a class="ae jk" href="https://console.cloud.google.com/data-fusion/locations/-/instances" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">实例</strong> </a>页面。</li><li id="71b4" class="kp kq hi io b ip la it lb ix lc jb ld jf le jj ma kx ky kz bi translated">要选择一个实例，<strong class="io hj">勾选实例名称旁边的框</strong>。</li><li id="8082" class="kp kq hi io b ip la it lb ix lc jb ld jf le jj ma kx ky kz bi translated">要删除实例，点击<strong class="io hj">删除</strong>。</li></ol><p id="ae57" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">:<em class="li">您也可以通过在实例详细信息页面上单击删除来删除实例。</em></p><p id="dc86" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">尽情享受吧！</p></div><div class="ab cl mv mw gp mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hb hc hd he hf"><p id="aea9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="li">原载于2019年11月24日</em><a class="ae jk" href="https://stephanefrechette.dev/posts/join-group-by-and-aggregate-in-cloud-data-fusion/" rel="noopener ugc nofollow" target="_blank"><em class="li">https://stephanefrechette . dev</em></a><em class="li">。</em></p></div></div>    
</body>
</html>