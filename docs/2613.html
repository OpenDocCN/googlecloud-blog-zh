<html>
<head>
<title>Why Cloud Function 2nd Generation?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么选择云函数第二代？</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/why-cloud-function-2nd-generation-51a6f80e030?source=collection_archive---------2-----------------------#2022-12-11">https://medium.com/google-cloud/why-cloud-function-2nd-generation-51a6f80e030?source=collection_archive---------2-----------------------#2022-12-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c038" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在最近的Google Cloud Next活动中，GCP强调了第二代云功能。你一定在想，即使Cloud Run已经推出，我们为什么还要讨论第二代？<strong class="ih hj">因为云功能—2代在后台使用云运行！</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d7818d26edf8e5512b27f3900fa3bfcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jSBcLPTnmCBfZhnm2NBxag.png"/></div></div></figure><p id="ad5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面我们来深入探讨一下云功能二代。二代有什么新的？众所周知，有两个版本可供选择:</p><ol class=""><li id="6b81" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">第一代:第一个版本</li><li id="d94f" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">第二代:基于云运行和Eventarc构建的新版本</li></ol></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="bb52" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">第二代产品的主要增强功能:</h1><h2 id="3d66" class="li kl hi bd km lj lk ll kq lm ln lo ku iq lp lq ky iu lr ls lc iy lt lu lg lv bi translated">*更长的请求时间:</h2><p id="6022" class="pw-post-body-paragraph if ig hi ih b ii lw ik il im lx io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">第二代为HTTP触发功能提供了60分钟的更长请求超时，几乎是第一代的6倍。</p><h2 id="444c" class="li kl hi bd km lj lk ll kq lm ln lo ku iq lp lq ky iu lr ls lc iy lt lu lg lv bi translated">*更大的实例大小:</h2><p id="1c8f" class="pw-post-body-paragraph if ig hi ih b ii lw ik il im lx io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">下一个重要的增强是大的实例大小。现在，云功能可以拥有高达16 GiB的RAM(预览版为32 GiB ),带有4个虚拟CPU。以前，它最多只能有8 GiB RAM和2个虚拟CPU。</p><h2 id="0062" class="li kl hi bd km lj lk ll kq lm ln lo ku iq lp lq ky iu lr ls lc iy lt lu lg lv bi translated">*并发性:</h2><p id="c0e3" class="pw-post-body-paragraph if ig hi ih b ii lw ik il im lx io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">另一个关键的增强是并发性。在早期的第一个版本中，云函数的一个实例只能有一个请求。然而，在第二代中，我们可以处理每个函数实例多达1000个并发请求。</p><h2 id="8e98" class="li kl hi bd km lj lk ll kq lm ln lo ku iq lp lq ky iu lr ls lc iy lt lu lg lv bi translated">*多种功能修订和流量分流:</h2><p id="6a34" class="pw-post-body-paragraph if ig hi ih b ii lw ik il im lx io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">第二代云函数构建在云运行之上。因此，它支持多种功能修订和流量分流等功能。第一代产品不直接支持这两种功能。</p><h2 id="16dd" class="li kl hi bd km lj lk ll kq lm ln lo ku iq lp lq ky iu lr ls lc iy lt lu lg lv bi translated">*事件类型:</h2><p id="a334" class="pw-post-body-paragraph if ig hi ih b ii lw ik il im lx io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">由于第二代由Eventarc支持，它支持90多个事件。我们过去只能获得第一代的7种事件类型。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/66180ffc08d2345603df9b66ff93c1d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*6fOm0j_4067_p-vR6Akh2Q.gif"/></div></figure><p id="21df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">登录你的谷歌云控制台，搜索云功能。点击“创建云功能”。如果所需的API不在下一个弹出窗口中，请启用它。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mc"><img src="../Images/135f2a76ecb4d48b7e2635a60bea2f21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AN7CY1qND7qmXhHGRXazqQ.png"/></div></div></figure><p id="a330" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给出函数名，并在环境中选择第二代。在EventTarc中，您可以探索90多个触发选项。对于演示，让我们只保留默认的HTTPS，如下所示，然后单击下一步:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es md"><img src="../Images/77ef9abab731c3f83d7e0e4df46ca3b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cLMTf4MhazNvQXXwihrdGQ.png"/></div></div></figure><p id="f07e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在运行时，您可以选择任何语言，现在，我们将继续使用Node.js 16和现有代码。只需点击部署。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es me"><img src="../Images/0222b2e82c4909ef9eea9ed60ea5444c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*noGXfWV5yiEYkzaQkRaU4Q.png"/></div></div></figure><p id="ce7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们现在看到的，构建已经开始。这个构建由云运行完成。因此，一个容器映像将在后台构建，包含我们的代码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mf"><img src="../Images/04f217034664ace1fbcde76c3b41ea0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*ecBlZMxK1BmadlA6K8l6kw.png"/></div></figure><p id="eaf2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，相同的容器映像将被部署到云运行，如图所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mg"><img src="../Images/8629cdbde7d1938cd149dc7093a39305.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*AjpkVwcqC2NKriz5hQBAWw.png"/></div></figure><p id="9623" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">过一会儿，我们将看到云功能准备就绪。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mh"><img src="../Images/25d688a7ebb8c6ba8eeb71a79ff561aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hJhI1TWwUXtrOZoBXtyiSg.png"/></div></div></figure><p id="9e94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们转到最后一个测试选项卡，在Cloud Shell中运行该命令。我们将得到以下结果:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mi"><img src="../Images/cd5ac701b63618bd6e483a99569468be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DXjzDxnAwIKGcfxnTxf5mA.png"/></div></div></figure><p id="9a0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们通过单击顶部的编辑按钮并单击下一步来编辑代码。如下所示编辑您的代码并部署它:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mj"><img src="../Images/4c554395278de534174f48b94debdf27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lN3939EDR9zHDh8f2chvdw.png"/></div></div></figure><p id="08ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">云功能会重新构建。现在，再次以同样的方式测试，我们将会看到我们的新代码变化是否被反映出来。因此，当我们更改云功能代码时，它也在更新云运行服务。</p><p id="84b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在通过在搜索栏中搜索它来进入云运行。我们应该可以在那里看到我们的云函数名称。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mk"><img src="../Images/3ff90fd43cf9dba080f8a53c5de9d907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ox1aXk0qNKa4xMIeHfnYCw.png"/></div></div></figure><p id="6327" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击函数名并转到修订选项卡。我们将看到同一个函数的两个版本。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ml"><img src="../Images/7a5225b5608473aa2fe9c12cc66be3da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bzG020mb34vRRFlllnhr5w.png"/></div></div></figure><p id="ee85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，有趣的是，我们可以配置发送到每个云功能的流量。我们可以点击功能前面的3个点，然后选择“管理流量”，如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mm"><img src="../Images/8a36f257d0d6aaad46ea286fe80b4efd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qjjN2lPD1WtDcDEVFRzUrQ.png"/></div></div></figure><p id="e70e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以配置我们想要发送50%的流量给第一个版本，50%给另一个版本，如下所示。这在第一代中是不可能的。这是第二代云函数才有可能实现的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mn"><img src="../Images/92369989dbb20e21e4ea82f882e5ed63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*s9B84qIj-zxwJcg3v__D7w.png"/></div></figure><p id="0b94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi mo translated">现在，我们已经看到，在所有第二代云功能的背后，都有云运行版本。所有通常与云运行相关的功能现在也可以与云功能一起使用。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><p id="d33b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望你喜欢。</p><p id="3cac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您有任何相关的疑问，请随时联系我。如果可以的话，我很乐意帮助你。保持联系:)</p><h2 id="9995" class="li kl hi bd km lj lk ll kq lm ln lo ku iq lp lq ky iu lr ls lc iy lt lu lg lv bi translated">如果你喜欢这篇文章，请为它鼓掌。我真的很感激。</h2><h2 id="7474" class="li kl hi bd km lj lk ll kq lm ln lo ku iq lp lq ky iu lr ls lc iy lt lu lg lv bi translated">推特:【https://twitter.com/SakshiKhandlwl<br/>T4 LinkedIn:<a class="ae my" href="http://www.linkedin.com/in/sakshikhandelwal276" rel="noopener ugc nofollow" target="_blank">www.linkedin.com/in/sakshikhandelwal276</a></h2><p id="1a23" class="pw-post-body-paragraph if ig hi ih b ii lw ik il im lx io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">编码快乐！</p></div></div>    
</body>
</html>