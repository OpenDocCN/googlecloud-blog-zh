<html>
<head>
<title>ELT with Google Bigquery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Google Bigquery的ELT</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/elt-with-google-bigquery-d4b84d77adaf?source=collection_archive---------0-----------------------#2021-08-26">https://medium.com/google-cloud/elt-with-google-bigquery-d4b84d77adaf?source=collection_archive---------0-----------------------#2021-08-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fa86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ELT——提取、加载和转换——构建ELT管道与构建ETL管道没有什么不同。这两种类型(ETL和ELT)的实现方法有所不同。</p><p id="0664" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ETL过程是在数据集成工具中发生转换后将数据加载到目标系统中，ELT方法首先将数据加载到目标系统中，然后再转换数据。通常ELT过程比传统的ETL过程更受欢迎，因为它实现起来更简单，加载数据更快。下图显示了不同之处</p><p id="f975" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ELT——提取、加载和转换——构建ELT管道与构建ETL管道没有什么不同。这两种类型(ETL和ELT)的实现方法有所不同。</p><p id="5779" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ETL过程是在数据集成工具中发生转换后将数据加载到目标系统中，ELT方法首先将数据加载到目标系统中，然后再转换数据。通常ELT过程比传统的ETL过程更受欢迎，因为它实现起来更简单，加载数据更快。下图显示了不同之处</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3abb70b464dc2167f500f13c301a8495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gfKO22sMNfS_2q2jZWSWPw.png"/></div></div></figure><p id="ab68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在加载到目标系统时转换数据。运行时的数据读取、转换和加载可以通过单个数据管道来实现。具有GCP服务的ETL管道可以通过使用从以下服务中选择的服务来实现</p><ul class=""><li id="6d70" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">数据融合</li><li id="6ca2" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">数据流</li><li id="ae6d" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">DataProc</li><li id="20b0" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">云函数</li></ul><p id="5819" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将数据加载到目标系统后转换数据称为ELT。要在加载后应用转换，可以使用SQL来实现，以获得更好的性能。这种方法是从GCP迁移到BigQuery的首选方法。带GCP的ELT管线可通过使用以下管线实施-</p><p id="7c3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提取/上传作业-&gt;将文件/数据加载到GCS -&gt; BigQuery -&gt;转换作业(SQL/过程/函数)[使用气流的编排]</p><p id="c1b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要将源数据上传到GCP，需要在GCP上设置以下列表中的一组选项-</p><ul class=""><li id="9176" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">数据传输服务</li><li id="8bd4" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">使用数据流的源提取作业</li><li id="60e6" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">在dataproc上使用Sqoop/Spark的数据导入作业</li><li id="f9f2" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">源文件上传到GCS</li><li id="10a5" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">发布\订阅到GCS的实时数据流</li><li id="81ed" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">使用ETL工具将系统间的数据推送到GCP/GCS/Bigquery</li></ul><p id="a154" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为目标层，我们可以从以下GCP数据服务中进行选择-</p><ul class=""><li id="0feb" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">BigQuery</li><li id="0565" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">云扳手</li></ul><p id="2224" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Bigquery被广泛用作GCP上的数据仓库服务/无服务器数据仓库实现。这用于集成GCP或GCP以外的服务/流程。大查询性能是在GCP上迁移/设置数据仓库/数据湖的关键之一。BQ还可以用作分析服务，使用任何BI工具/AI/ML模型在GCP基础上构建分析。</p><p id="a42b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">方法1 - &gt;数据传输服务+ BigQuery </strong></p><p id="549a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用于将数据复制/迁移到GCP的数据传输服务。使用此服务上传数据是性能的首选。一旦数据登陆到GCP，Bigquery就被用作数据仓库服务，以将源数据/登陆的数据暴露为暂存层。可以使用SQL-BQ作业、过程和函数来构建转换。可以创建BQ视图，以供BI/数据科学家进行分析。</p><h2 id="8ba3" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated">优势:</h2><ul class=""><li id="a94b" class="jp jq hi ih b ii ky im kz iq la iu lb iy lc jc ju jv jw jx bi translated">使用GCP本地服务</li><li id="38bd" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">转换可以通过SQL来完成。BQ中支持ANSI SQL标准(即使是技术经验较少的人员也可以实现数据准备逻辑。)</li><li id="bd68" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">DTS和Big Query是完全的SaaS技术(基础设施和扩展不需要额外的设置)。)</li><li id="69e0" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">DTS可以处理要迁移到GCP的任何类型的数据、卷和系统</li></ul><p id="1bd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">方法2 - &gt; GCS + BigQuery </strong></p><p id="e49e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过这种方法，我们获得了来自GCS登录层/存储桶的源数据。这可以使用Nifi、GCS实用程序、Distcp、Sqoop、Spark jobs、Dataflow等来完成。这取决于源系统和数据卸载的类型。下面可以是一些选择→</p><ul class=""><li id="a76c" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">源系统是RDBMS——数据流、DataProc临时集群上的Sqoop/Spark、ETL工具</li><li id="c845" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">源系统是基于文件的系统— SFTP/GSutil将文件推送到GCS</li><li id="9271" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">源系统是基于Hadoop的系统— gsutil，将文件分发到GCS —基于卷和目标系统的推/拉方法，将数据推送到GCS的Sqoop，将数据推送到GCS的Spark作业</li><li id="6f62" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">源是Teradata — TD到BQ连接器以获取源数据</li></ul><p id="3975" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦GCS上的数据可用，将源数据发送到GCS是首选方法，而不是直接加载到BQ。有了GCS，我们可以归档数据集，用它来处理故障、源数据问题测试、版本控制等。</p><p id="8917" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">BQ变换和目标层通常通过以下方法实现→</p><p id="3c72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">BQ暂存层(源数据)-&gt; BQ转换层(使用BQ SQL的转换)-&gt; BQ目标层(分析层/聚合层)-&gt; BQ报告层(如果需要，使用视图)</p><h2 id="e1d3" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated">优势:</h2><ul class=""><li id="e1c1" class="jp jq hi ih b ii ky im kz iq la iu lb iy lc jc ju jv jw jx bi translated">使用GCP本地服务</li><li id="1358" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">转换可以通过SQL来完成。BQ中支持ANSI SQL标准(即使是技术经验较少的人员也可以实现数据准备逻辑。)</li><li id="3663" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">GCS和Big Query是完全的SaaS技术(基础设施和扩展不需要额外的设置。)</li><li id="ca0a" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">GCS可以处理/存储要迁移到GCP的任何类型的数据、卷和系统</li><li id="7a07" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">参考资料-&gt;<a class="ae ld" href="https://cloud.google.com/architecture/dw2bq/dw-bq-data-pipelines" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/architecture/dw2bq/dw-bq-data-pipelines</a></li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es le"><img src="../Images/80fa4495d4bb4ea82ad7ec36b35bcc39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_nYVb7FnqOxhJ-azDxNnZw.png"/></div></div></figure><ul class=""><li id="5611" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><strong class="ih hj">关于我</strong></li></ul><blockquote class="lf lg lh"><p id="8902" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated"><em class="hi">我是DWBI和云师！我一直在处理各种遗留数据仓库、大数据实施、云平台/迁移。我是谷歌认证的专业云架构师。您可以联系我@</em><a class="ae ld" href="https://www.linkedin.com/in/poojakelgaonkar" rel="noopener ugc nofollow" target="_blank"><em class="hi">LinkedIn</em></a><em class="hi">如果您需要任何认证、GCP实施方面的帮助！</em></p></blockquote></div></div>    
</body>
</html>