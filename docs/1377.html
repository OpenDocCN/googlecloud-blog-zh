<html>
<head>
<title>Application Capacity Optimizations with Global Load Balancing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过全局负载平衡优化应用容量</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/application-capacity-optimizations-with-global-load-balancing-e0aa079d2c25?source=collection_archive---------1-----------------------#2020-04-16">https://medium.com/google-cloud/application-capacity-optimizations-with-global-load-balancing-e0aa079d2c25?source=collection_archive---------1-----------------------#2020-04-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1df0" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在云中烹饪</h2></div><p id="0fcd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">作者:<a class="ae jt" href="https://twitter.com/swongful" rel="noopener ugc nofollow" target="_blank">王从希</a>，<a class="ae jt" href="https://twitter.com/pvergadia" rel="noopener ugc nofollow" target="_blank">普里扬卡·韦尔加迪亚</a></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/5ef5b90fe4158163177ae44e1e80078e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tWt8nwHIe3978XanO3j7mg.gif"/></div></div></figure><h1 id="f577" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">介绍</h1><p id="5151" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">“<a class="ae jt" rel="noopener" href="/@pvergadia/get-cooking-in-cloud-an-introduction-5b3b90de534e">在云中烹饪</a>”是一个博客和<a class="ae jt" href="https://www.youtube.com/playlist?list=PLIivdWyY5sqIOyeovvRapCjXCZykZMLAe" rel="noopener ugc nofollow" target="_blank">视频</a>系列，帮助企业和开发者在谷歌云上构建商业解决方案。在这个系列中，我们计划确定开发人员希望在Google cloud上构建的特定主题。一旦确定，我们就以此为主题制作一个迷你系列。</p><p id="7b31" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个迷你系列中，我们将讨论Google云负载平衡。</p><ol class=""><li id="aeeb" class="ld le hi iz b ja jb jd je jg lf jk lg jo lh js li lj lk ll bi translated"><a class="ae jt" rel="noopener" href="/google-cloud/choosing-the-right-load-balancer-9ec909148a85">选择正确的负载平衡器</a></li><li id="3e10" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js li lj lk ll bi translated">通过全局负载平衡优化应用程序容量(<strong class="iz hj">本文</strong>)</li><li id="d9e3" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js li lj lk ll bi translated"><a class="ae jt" rel="noopener" href="/google-cloud/capacity-management-with-load-balancing-32bd22a716a7">负载平衡的容量管理</a></li><li id="596f" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js li lj lk ll bi translated"><a class="ae jt" rel="noopener" href="/google-cloud/container-load-balancing-on-google-kubernetes-engine-gke-4cbfaa80a6f6">GKE网络端点组的负载均衡</a></li></ol><p id="bf8d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将向您展示如何使用计算引擎管理的实例组的目标池来设置HTTP负载平衡器。</p><h1 id="a693" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">看看这个视频</h1><figure class="jv jw jx jy fd jz"><div class="bz dy l di"><div class="lr ls l"/></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">视频—通过全局负载平衡优化应用容量</figcaption></figure><h1 id="565d" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated"><strong class="ak">回顾</strong></h1><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lx"><img src="../Images/13c9d1187e7d22de4e5cdd8687d5aced.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*LlNCx0r213CWyPQ2qR4xgQ.png"/></div></figure><p id="5f70" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上一篇博客<a class="ae jt" rel="noopener" href="/google-cloud/choosing-the-right-load-balancer-9ec909148a85">中，我们介绍了Beyond Treat和他们正在发展的素食狗零食电子商务网站。他们继续面临着高流量，他们的网站后端正面临着来自世界各地的流量。</a></p><p id="6097" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们讨论了Google Cloud上负载平衡器的类型，以及何时适合使用每一种。一些因素包括全球与区域交通，以及被服务的交通类型。对于Beyond Treat，他们主要是向全世界的最终用户提供HTTP(S)流量。因此，他们决定使用<a class="ae jt" href="https://cloud.google.com/load-balancing/docs/https" rel="noopener ugc nofollow" target="_blank">全球HTTP(S)负载平衡器</a>来满足他们的流量需求。上面的视频解释了全局负载平衡如何采用区域瀑布算法将流量无缝溢出到下一个最近的具有可用后端的区域。让我们通过一个例子来设置一个针对后端实例组的HTTP负载平衡器。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ly"><img src="../Images/8777dcf779774128ded61b4b7465dcbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m2IljBKJwRldGhZQzTSf0w.png"/></div></div></figure><h1 id="a04b" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">你将学习和使用的东西</h1><ul class=""><li id="8f90" class="ld le hi iz b ja ky jd kz jg lz jk ma jo mb js mc lj lk ll bi translated">在区域托管实例组上启动演示web应用程序</li><li id="66d9" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js mc lj lk ll bi translated">配置一个全局负载平衡器，该平衡器将HTTP流量导向多个区域</li></ul><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es md"><img src="../Images/9467a9b9ded637b7788d4ff9386ad619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Onp_e21Di1utdjDS"/></div></div></figure><p id="07c5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">图表中的事件顺序是:</p><ol class=""><li id="da14" class="ld le hi iz b ja jb jd je jg lf jk lg jo lh js li lj lk ll bi translated">客户端向转发规则中定义的外部IPv4地址发送内容请求。</li><li id="7232" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js li lj lk ll bi translated">转发规则将请求定向到目标HTTP代理。</li><li id="b460" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js li lj lk ll bi translated">目标代理使用URL映射中的规则来确定单个后端服务接收所有请求。</li><li id="768f" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js li lj lk ll bi translated">负载平衡器确定后端服务只有一个实例组，并将请求定向到该组中的虚拟机。</li><li id="e1b2" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js li lj lk ll bi translated">VM提供用户请求的内容。</li></ol><p id="7c80" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您将使用:</p><ul class=""><li id="8670" class="ld le hi iz b ja jb jd je jg lf jk lg jo lh js mc lj lk ll bi translated">默认的VPC网络</li><li id="eecd" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js mc lj lk ll bi translated">计算引擎管理的实例组</li><li id="919d" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js mc lj lk ll bi translated">默认URL映射</li><li id="2bff" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js mc lj lk ll bi translated">保留的外部IP地址</li></ul><p id="449d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae jt" href="https://cloud.google.com/solutions/about-capacity-optimization-with-global-lb" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj">该解决方案</strong> </a> <strong class="iz hj"> </strong>通过全局负载平衡实现应用容量优化。</p><h1 id="aae8" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">创建托管实例组</h1><p id="67a7" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">要使用计算引擎后端设置负载平衡器，您的虚拟机需要位于一个实例组中。我们将使用运行Apache的Linux虚拟机创建一个托管实例组，然后设置负载平衡。托管实例组提供运行外部HTTP负载平衡器的后端服务器的虚拟机。</p><ol class=""><li id="4fbe" class="ld le hi iz b ja jb jd je jg lf jk lg jo lh js li lj lk ll bi translated">在Google Cloud项目中，通过在Google Cloud Shell中输入以下内容来创建一个实例模板。</li></ol><pre class="jv jw jx jy fd me mf mg mh aw mi bi"><span id="0624" class="mj kh hi mf b fi mk ml l mm mn">--region=us-east1 \</span><span id="3998" class="mj kh hi mf b fi mo ml l mm mn">--network=default \</span><span id="35b1" class="mj kh hi mf b fi mo ml l mm mn">--subnet=default \</span><span id="6f37" class="mj kh hi mf b fi mo ml l mm mn">--tags=allow-health-check \</span><span id="1a74" class="mj kh hi mf b fi mo ml l mm mn">--image-family=debian-9 \</span><span id="170c" class="mj kh hi mf b fi mo ml l mm mn">--image-project=debian-cloud \</span><span id="0565" class="mj kh hi mf b fi mo ml l mm mn">--metadata=startup-script='#! /bin/bash</span><span id="93cc" class="mj kh hi mf b fi mo ml l mm mn">apt-get update</span><span id="1f10" class="mj kh hi mf b fi mo ml l mm mn">apt-get install apache2 -y</span><span id="fba0" class="mj kh hi mf b fi mo ml l mm mn">a2ensite default-ssl</span><span id="ad9f" class="mj kh hi mf b fi mo ml l mm mn">a2enmod ssl</span><span id="63e1" class="mj kh hi mf b fi mo ml l mm mn">vm_hostname="$(curl -H "Metadata-Flavor:Google" \</span><span id="7e47" class="mj kh hi mf b fi mo ml l mm mn">http://169.254.169.254/computeMetadata/v1/instance/name)"</span><span id="0d81" class="mj kh hi mf b fi mo ml l mm mn">echo "Page served from: $vm_hostname" | \</span><span id="859f" class="mj kh hi mf b fi mo ml l mm mn">tee /var/www/html/index.html</span><span id="ccf7" class="mj kh hi mf b fi mo ml l mm mn">systemctl restart apache2'</span></pre><p id="1332" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以验证该模板是在Google Cloud控制台的模板页面上创建的:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mp"><img src="../Images/0697d32a867b162057eecdfd3db885e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jFbK_hhJU9JNlUkO"/></div></div></figure><p id="e423" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.基于模板创建托管实例组。</p><pre class="jv jw jx jy fd me mf mg mh aw mi bi"><span id="87a2" class="mj kh hi mf b fi mk ml l mm mn">gcloud compute instance-groups managed create lb-backend-example \</span><span id="8e3e" class="mj kh hi mf b fi mo ml l mm mn">--template=lb-backend-template --size=2 --zone=us-east1-b</span></pre><p id="7134" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以在Google Cloud控制台的托管实例组页面上验证托管实例组是否已创建:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mp"><img src="../Images/05e4d74dd4894abec88b202a4d6c8174.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cDlrn5n5Rfqf0pJV"/></div></div></figure><h1 id="1321" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">配置防火墙规则</h1><p id="6e55" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">接下来，创建防火墙允许健康检查规则。这是允许来自Google云健康检查系统(130.211.0.0/22和35.191.0.0/16)的流量的入口规则。此示例使用目标标记allow-health-check来标识虚拟机。</p><ol class=""><li id="7224" class="ld le hi iz b ja jb jd je jg lf jk lg jo lh js li lj lk ll bi translated">在云壳中，输入:</li></ol><pre class="jv jw jx jy fd me mf mg mh aw mi bi"><span id="5f02" class="mj kh hi mf b fi mk ml l mm mn">gcloud compute firewall-rules create fw-allow-health-check \</span><span id="9db8" class="mj kh hi mf b fi mo ml l mm mn">--network=default \</span><span id="1006" class="mj kh hi mf b fi mo ml l mm mn">--action=allow \</span><span id="8b2d" class="mj kh hi mf b fi mo ml l mm mn">--direction=ingress \</span><span id="29f8" class="mj kh hi mf b fi mo ml l mm mn">--source-ranges=130.211.0.0/22,35.191.0.0/16 \</span><span id="591c" class="mj kh hi mf b fi mo ml l mm mn">--target-tags=allow-health-check \</span><span id="d324" class="mj kh hi mf b fi mo ml l mm mn">--rules=tcp</span></pre><h1 id="336e" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">保留外部IP地址</h1><ol class=""><li id="9096" class="ld le hi iz b ja ky jd kz jg lz jk ma jo mb js li lj lk ll bi translated">现在您的实例已经启动并运行，设置一个全局静态外部IP地址，您的客户使用它来访问您的负载平衡器。</li></ol><pre class="jv jw jx jy fd me mf mg mh aw mi bi"><span id="8321" class="mj kh hi mf b fi mk ml l mm mn">gcloud compute addresses create lb-ipv4-1 \</span><span id="b913" class="mj kh hi mf b fi mo ml l mm mn">--ip-version=IPV4 \</span><span id="c70f" class="mj kh hi mf b fi mo ml l mm mn">--global</span></pre><h1 id="00ba" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">设置负载平衡器</h1><ol class=""><li id="cbdf" class="ld le hi iz b ja ky jd kz jg lz jk ma jo mb js li lj lk ll bi translated">创建健康检查。</li></ol><pre class="jv jw jx jy fd me mf mg mh aw mi bi"><span id="fdbb" class="mj kh hi mf b fi mk ml l mm mn">gcloud compute health-checks create http http-basic-check \</span><span id="3fbb" class="mj kh hi mf b fi mo ml l mm mn">--port 80</span></pre><p id="31a8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.创建后端服务。</p><pre class="jv jw jx jy fd me mf mg mh aw mi bi"><span id="89b0" class="mj kh hi mf b fi mk ml l mm mn">gcloud compute backend-services create web-backend-service \</span><span id="65ce" class="mj kh hi mf b fi mo ml l mm mn">--protocol HTTP \</span><span id="88ea" class="mj kh hi mf b fi mo ml l mm mn">--health-checks http-basic-check \</span><span id="0160" class="mj kh hi mf b fi mo ml l mm mn">--global</span></pre><p id="4c7f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.将您的实例组作为后端添加到后端服务。</p><pre class="jv jw jx jy fd me mf mg mh aw mi bi"><span id="640b" class="mj kh hi mf b fi mk ml l mm mn">gcloud compute backend-services add-backend web-backend-service \</span><span id="7b61" class="mj kh hi mf b fi mo ml l mm mn">--balancing-mode=UTILIZATION \</span><span id="80ab" class="mj kh hi mf b fi mo ml l mm mn">--max-utilization=0.8 \</span><span id="aca6" class="mj kh hi mf b fi mo ml l mm mn">--capacity-scaler=1 \</span><span id="5988" class="mj kh hi mf b fi mo ml l mm mn">--instance-group=lb-backend-example \</span><span id="68e1" class="mj kh hi mf b fi mo ml l mm mn">--instance-group-zone=us-east1-b \</span><span id="629b" class="mj kh hi mf b fi mo ml l mm mn">--global</span></pre><p id="50a3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.创建一个URL映射，将传入的请求路由到默认的后端服务。</p><pre class="jv jw jx jy fd me mf mg mh aw mi bi"><span id="6375" class="mj kh hi mf b fi mk ml l mm mn">gcloud compute url-maps create web-map-http \</span><span id="6978" class="mj kh hi mf b fi mo ml l mm mn">--default-service web-backend-service</span></pre><p id="4eb6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.创建一个目标HTTP代理，将请求路由到您的URL映射。</p><pre class="jv jw jx jy fd me mf mg mh aw mi bi"><span id="0f0a" class="mj kh hi mf b fi mk ml l mm mn">gcloud compute target-http-proxies create http-lb-proxy \</span><span id="1951" class="mj kh hi mf b fi mo ml l mm mn">--url-map web-map-http</span></pre><p id="2962" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.创建全局转发规则，将传入请求路由到代理。</p><pre class="jv jw jx jy fd me mf mg mh aw mi bi"><span id="f214" class="mj kh hi mf b fi mk ml l mm mn">gcloud compute forwarding-rules create http-content-rule \</span><span id="f1e7" class="mj kh hi mf b fi mo ml l mm mn">--address=lb-ipv4-1\</span><span id="b5c3" class="mj kh hi mf b fi mo ml l mm mn">--global \</span><span id="9539" class="mj kh hi mf b fi mo ml l mm mn">--target-http-proxy=http-lb-proxy \</span><span id="3c5e" class="mj kh hi mf b fi mo ml l mm mn">--ports=80</span></pre><p id="a575" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以在Google Cloud控制台的负载平衡页面上验证负载平衡器是否创建正确:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mp"><img src="../Images/c1e35caf6df777655c28634b9876125f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ouQL9pVfBLLXFMPG"/></div></div></figure><h1 id="937c" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">向您的实例发送流量</h1><p id="5c12" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">现在负载平衡服务正在运行，您可以将流量发送到转发规则，并观察流量被分散到不同的实例。</p><ol class=""><li id="7964" class="ld le hi iz b ja jb jd je jg lf jk lg jo lh js li lj lk ll bi translated">转到谷歌云控制台的负载平衡页面。</li><li id="6f01" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js li lj lk ll bi translated">单击您刚刚创建的负载平衡器。</li><li id="810a" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js li lj lk ll bi translated">在后端部分，确认虚拟机运行状况良好。“Healthy”列应该已填充，表明两个虚拟机都运行良好(2/2)。如果您看到其他情况，首先尝试重新加载页面。云控制台可能需要一些时间来指示虚拟机运行状况良好。如果它们仍未被列为健康状态，请检查防火墙配置和分配给后端虚拟机的网络标签。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mp"><img src="../Images/5e4438b8947fb2e66b88dea75d4643e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uXwCbpqOUwBgzcnZ"/></div></div></figure><ol class=""><li id="ae2d" class="ld le hi iz b ja jb jd je jg lf jk lg jo lh js li lj lk ll bi translated">您可以通过web浏览器访问<a class="ae jt" href="http://ip-address," rel="noopener ugc nofollow" target="_blank"> http://ip-address，</a>来测试您的负载平衡器，其中ip-address是负载平衡器的ip地址。</li><li id="6106" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js li lj lk ll bi translated">您的浏览器应该呈现一个页面，其内容显示为该页面提供服务的实例的名称，以及它的区域(例如，Page served from:l b-back end-example-xxxx)。如果刷新几次，您应该会看到两个实例之间的后端实例发生了变化。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mq"><img src="../Images/2cd77da2b30c06de636df069c5b22414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7j4J0N0L3hZDzqtO"/></div></div></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mr"><img src="../Images/024590cb80e074bd518ddd7fcf4f1cb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nZ31Sw2WrZHFtQdT"/></div></div></figure><blockquote class="ms"><p id="06fa" class="mt mu hi bd mv mw mx my mz na nb js dx translated">C <!-- --> ongrats！您只需设置一个全局HTTP负载平衡器，为计算管理实例组的目标池提供流量服务。</p></blockquote><p id="c7b3" class="pw-post-body-paragraph ix iy hi iz b ja nc ij jc jd nd im jf jg ne ji jj jk nf jm jn jo ng jq jr js hb bi translated">关于这个食谱的更多信息，请查看这个<a class="ae jt" href="https://cloud.google.com/solutions/about-capacity-optimization-with-global-lb" rel="noopener ugc nofollow" target="_blank">解决方案</a>和这个<a class="ae jt" href="https://cloud.google.com/load-balancing/docs/https/ext-http-lb-simple" rel="noopener ugc nofollow" target="_blank">教程</a>。关于跨区域负载平衡的更复杂的例子，使用了按区域瀑布算法，请继续关注本系列的下一篇文章。</p><h1 id="9e13" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">后续步骤和参考:</h1><ul class=""><li id="c075" class="ld le hi iz b ja ky jd kz jg lz jk ma jo mb js mc lj lk ll bi translated">在<a class="ae jt" href="https://medium.com/google-cloud" rel="noopener">谷歌云平台媒体</a>上关注这个博客系列。</li><li id="016b" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js mc lj lk ll bi translated">参考:<a class="ae jt" href="https://cloud.google.com/solutions/about-capacity-optimization-with-global-lb" rel="noopener ugc nofollow" target="_blank">通过全局负载平衡优化应用容量</a></li><li id="6cc0" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js mc lj lk ll bi translated">关注<a class="ae jt" href="https://www.youtube.com/watch?v=pxp7uYUjH_M" rel="noopener ugc nofollow" target="_blank">获取云端烹饪</a>视频系列，订阅谷歌云平台YouTube频道</li><li id="8477" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js mc lj lk ll bi translated">想要更多的故事？在<a class="ae jt" rel="noopener" href="/@swongra">媒体</a>和<a class="ae jt" href="http://twitter.com/swongful" rel="noopener ugc nofollow" target="_blank">推特</a>上关注我。</li><li id="d18b" class="ld le hi iz b ja lm jd ln jg lo jk lp jo lq js mc lj lk ll bi translated">请和我们一起欣赏这部迷你剧，并了解更多类似的谷歌云解决方案:)</li></ul></div></div>    
</body>
</html>