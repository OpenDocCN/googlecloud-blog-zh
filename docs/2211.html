<html>
<head>
<title>Migrating Workloads to GCP : Part II :Phases of Migration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将工作负载迁移到GCP:第二部分:迁移阶段</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/migrating-workloads-to-gcp-part-ii-phases-of-migration-e9167a039316?source=collection_archive---------1-----------------------#2022-06-05">https://medium.com/google-cloud/migrating-workloads-to-gcp-part-ii-phases-of-migration-e9167a039316?source=collection_archive---------1-----------------------#2022-06-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6941" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢你阅读我关于GCP移民系列的第一篇博客。如果你错过了阅读，那么你可以阅读第一篇博客@<a class="ae jd" href="https://poojakelgaonkar.medium.com/migrating-workloads-to-gcp-part-i-planning-migrations-ae8e301d207b" rel="noopener">https://poojakelgaonkar . medium . com/migrating-workloads-to-GCP-part-I-planning-migrations-ae8e 301d 207 b</a></p><p id="0aa6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个博客是迁移系列的第二章，我们将讨论更多关于迁移路径和迁移阶段的内容。在之前的博客中，我们了解到现有系统的评估、定义目标、定义适用于当前项目/应用的迁移类型。</p><p id="f14b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看一下迁移路径，它将引导我们评估/发现、规划/设计、开发/测试/部署并验证/优化迁移的应用程序。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/364e4270e1a1fada5ff36f2c437daad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*vDPXdYs2dMBa10tk34s53Q.png"/></div></div></figure><p id="4ede" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是迁移的四个阶段</p><p id="9223" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.<strong class="ih hj">评估</strong> —这是迁移的关键阶段。此阶段也称为发现阶段，在此阶段，我们重点分析现有应用程序，并获取迁移所需的指标。根据迁移的类型，我们需要收集以下一些指标作为评估阶段的一部分。</p><p id="8462" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a.传统—将数据仓库系统迁移到GCP —我们需要获取代表系统复杂性的指标，这有助于设计迁移计划。</p><p id="5e3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们考虑一个将Teradata数据仓库迁移到GCP的场景。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jq"><img src="../Images/425ae2275c5feb62723cfa2507b17e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oamcxOK1hlODFSMN.png"/></div></div></figure><p id="1fc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">二。我们需要获取以下一些分析所需的指标</p><p id="ca73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.源集成—什么类型的源与现有TD系统集成。如何将源数据导入TD进行处理？</p><p id="6573" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.目标集成—有哪些不同类型的集成— BI/Reporting/AI/ML或任何从TD访问数据的下游应用程序</p><p id="e502" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.负载类型—什么是负载类型—实时、批量负载</p><p id="a7f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.处理的数据类型—结构化、半结构化等。</p><p id="d9ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.实施类型— ETL或ELT</p><p id="0361" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.转换的类型——运行在TD之上的不同转换是什么——将它们分为简单/中等/复杂</p><p id="0b6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.用于处理数据的TD工具是什么——Bteq/TPT等。</p><p id="4edb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.TD中存储/处理的数据量有多大</p><p id="3c07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.调度/编排器用于调度加载/转换的是什么</p><p id="75bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">三。分析现有系统需要这些指标。对数据、工作/管道、应用和集成的复杂性进行分类</p><p id="5d9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.<strong class="ih hj">计划</strong> —在这个阶段，我们设计基础设施、服务选择、网络、项目结构、文件夹、组织设置。基于第一阶段，获取分析指标—实施设计以定义迁移策略。</p><p id="e4ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a.基于Teradata数据仓库迁移用例的评估场景，规划阶段包括以下策略</p><p id="648d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">I .组织设置—项目、文件夹设置</p><p id="8887" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">二。网络—针对源和目标集成的防火墙、子网、VPC设置</p><p id="e726" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">三。定义数据策略—热数据、温数据和冷数据</p><p id="cd1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">四。定义数据加载—历史加载和增量加载</p><p id="0e29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">动词 （verb的缩写）定义数据迁移策略—选择服务、设备和传输服务，将数据拷贝到GCP环境</p><p id="df7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不及物动词定义存储层—定义GCS存储桶结构</p><p id="0e3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">七。定义管道策略，设计管道来处理和转换数据</p><p id="51e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">八。使用GCP本地服务定义编排和调度</p><p id="92b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">九。定义迁移阶段——根据TD系统内流程的相互依赖性，迁移应用程序的哪一部分</p><p id="eb8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">x.定义运营和维护活动及设置</p><p id="27d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">xi。定义成本策略——成本估算和设置。请参考<a class="ae jd" href="https://poojakelgaonkar.medium.com/bigquery-pricing-model-and-cost-optimization-recommendations-d57ae1ebea36" rel="noopener">https://poojakelgaonkar . medium . com/big query-pricing-model-and-cost-optimization-recommendations-d 57 AE 1 ebea 36</a>了解更多关于BQ定价模式和成本优化的信息</p><p id="a0d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">十二。定义GCP的CI/CD</p><p id="239b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.<strong class="ih hj">开发/部署</strong> —在此阶段，我们设计并构建将负载转移到GCP的部署策略和流程。根据给定用例的最初两个阶段，我们将执行以下步骤</p><p id="78ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a.继续相同的场景—让我们假设GCP BQ用于替换Teradata数据仓库系统</p><p id="e089" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">b.假设-现有应用程序负载均使用Bteq进行ELT，TD数据来源于使用TD本地实用程序，BI报告在TD之上运行。</p><p id="80de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">c.数据加载—一次性历史数据迁移</p><p id="b28b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">d.用于将历史数据引入BQ的BQ传输服务</p><p id="5d5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">e.所有ELT Bteq管线转换为等效BQ管线</p><p id="fec1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">f.所有转换后的管道都使用GCP气流作为指挥器和调度器来触发</p><p id="9cf3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">g.所有BI报告继续在现有BI平台上运行，报告要更改的SQL和连接，以指向通过BQ读取的数据</p><p id="e7fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">h.对于实时加载——使用GCP服务发布/订阅或数据流将数据导入BQ，或使用BQ本地实用程序从GCS存储桶读取数据并近乎实时地推送到BQ——这取决于应用程序要求。</p><p id="3a56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">I .服务的选择完全取决于现有的应用程序设置、业务需求、应用程序要求和数据可用性要考虑的SLA</p><p id="09cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">j.部署使用GCP CI/CD安装程序构建的示例代码</p><p id="2fd4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">k.设置日志记录和监控—警报、阈值和自动邮件/报告</p><p id="87bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.<strong class="ih hj">优化&amp;验证</strong> —在这个阶段，我们验证迁移到GCP的应用程序/数据。有多种方法可以验证迁移的数据。我们可以使用任何现有的验证工具或开源工具，也可以根据应用需求开发一个自动化框架。作为此阶段的一部分，我们将执行以下步骤</p><p id="6b9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a.验证迁移的数据—运行验证脚本以确保迁移的历史数据与TD系统匹配</p><p id="318c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">b.验证数据管道—在相同的数据集上运行迁移的管道，在相同的数据集上运行现有的传统管道并进行比较。比较管道输出、执行时间、错误处理和捕获的日志等。</p><p id="1ef5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">c.验证转换后的SQL —在TD和BQ上运行相同的BI报告并进行比较</p><p id="ff55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">d.验证应用程序SLA</p><p id="5d1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">e.验证应用程序性能、灾难恢复、可扩展性和可用性</p><p id="beb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">f.验证TD和BQ上的操作和维护设置</p><p id="767c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">g.验证GCP应用程序的成本支出和实际成本</p><p id="a711" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们考虑了一个数据仓库迁移用例— Teradata到GCP的迁移。我们可以参考这些阶段和示例指标，以及这里捕获的步骤。这些是基于我在GCP迁移方面的专业知识。我们可以在Google文档中找到关于这些任务的更多细节—<a class="ae jd" href="https://cloud.google.com/architecture/migration-to-gcp-getting-started" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/architecture/migration-to-GCP-getting-started</a></p><p id="33c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一篇博客中，我们将了解更多关于GCP迁移的一些示例用例和参考架构。</p><blockquote class="jr js jt"><p id="91fa" class="if ig ju ih b ii ij ik il im in io ip jv ir is it jw iv iw ix jx iz ja jb jc hb bi translated"><strong class="ih hj">关于我:</strong></p><p id="769e" class="if ig ju ih b ii ij ik il im in io ip jv ir is it jw iv iw ix jx iz ja jb jc hb bi translated">我是DWBI和云建筑师！我一直在处理各种遗留数据仓库、大数据实施、云平台/迁移。我是谷歌认证的专业云架构师。如果您在认证、GCP实施方面需要任何进一步的帮助，您可以联系我@ <a class="ae jd" href="https://www.linkedin.com/in/poojakelgaonkar" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>！</p></blockquote></div></div>    
</body>
</html>