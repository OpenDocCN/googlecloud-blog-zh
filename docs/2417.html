<html>
<head>
<title>Kubernetes Services ☸☸ : Part-2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">kubernetes服务公司:第二部分</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/kubernetes-services-part-2-90b2cfa98d21?source=collection_archive---------0-----------------------#2022-10-12">https://medium.com/google-cloud/kubernetes-services-part-2-90b2cfa98d21?source=collection_archive---------0-----------------------#2022-10-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7ed9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">Kubernetes有哪些服务？</h2></div><h2 id="9a44" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">介绍🚩🚩</h2><p id="84e5" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">各位读者好👋正如我在上一篇文章中告诉大家的，“Kubernetes服务”是一个很大很长的主题。所以我决定为它写两部分。这不仅有助于我使文章简洁明了，也有助于你们更好、更深入地理解这个概念。</p><p id="0a04" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated"><strong class="jx hj"> <em class="kt">这将是这个系列的第二部，也是最后一部。在这一部分，我们将试着去理解下面的事情</em> </strong>:</p><ul class=""><li id="4455" class="ku kv hi jx b jy ko kb kp ji kw jm kx jq ky kn kz la lb lc bi translated">什么是ClusterIP服务？</li><li id="aa16" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">ClusterIP服务如何工作？</li><li id="1e7c" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">如何使用yaml文件创建ClusterIP服务？</li><li id="0885" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">什么是负载平衡器服务？</li><li id="4d97" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">如何使用yaml文件创建负载平衡器服务？</li></ul></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h2 id="dbe5" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">概述🔦🔦</h2><figure class="lq lr ls lt fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es lp"><img src="../Images/6e743e78b31cd25de06a33ebe4a56336.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hc4M-Z1Ntpg2OeSWKWjFtw.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">Kubernetes服务</figcaption></figure><p id="86b7" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">让我们快速回忆一下我们在本系列的前一部分已经讨论过的所有内容。</p><p id="b20e" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">Kubernetes   <em class="kt"> </em>中的<strong class="jx hj"> <em class="kt">服务是一种抽象的方式，将运行在一组Pods上的应用程序公开为网络服务。</em></strong></p><p id="b598" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">Kubernetes中有<strong class="jx hj"> <em class="kt">四种类型的服务</em> </strong>:</p><ul class=""><li id="d42e" class="ku kv hi jx b jy ko kb kp ji kw jm kx jq ky kn kz la lb lc bi translated">节点端口</li><li id="d714" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">ClusterIP</li><li id="8272" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">负载平衡器</li><li id="e9e4" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">外部名称</li></ul><p id="9b24" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated"><strong class="jx hj"> <em class="kt">下面的事情我在之前的帖子里已经全部讨论过了。</em> </strong></p><ul class=""><li id="3efd" class="ku kv hi jx b jy ko kb kp ji kw jm kx jq ky kn kz la lb lc bi translated">什么是Kubernetes服务？</li><li id="3aa5" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">Kubernetes的服务类型。</li><li id="dea8" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">节点端口服务是如何工作的？</li><li id="4479" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">如何使用yaml创建节点端口服务？</li></ul><p id="82d5" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">你们都可以在这里查阅</p><div class="mf mg ez fb mh mi"><a rel="noopener follow" target="_blank" href="/google-cloud/kubernetes-services-️️-part-1-42244ada9990"><div class="mj ab dw"><div class="mk ab ml cl cj mm"><h2 class="bd hj fi z dy mn ea eb mo ed ef hh bi translated">kubernetes服务公司第一部分</h2><div class="mp l"><h3 class="bd b fi z dy mn ea eb mo ed ef dx translated">Kubernetes有哪些服务？</h3></div><div class="mq l"><p class="bd b fp z dy mn ea eb mo ed ef dx translated">medium.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw lz mi"/></div></div></a></div><blockquote class="mx my mz"><p id="83a1" class="jv jw kt jx b jy ko ij ka kb kp im kd na kq kf kg nb kr ki kj nc ks kl km kn hb bi translated"><em class="hi">谈够了。<br/>所以没有任何进一步的拖延，让我们开始我们的文章:)</em></p></blockquote></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h2 id="8131" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">什么是ClusterIP服务？？🤔🤔</h2><figure class="lq lr ls lt fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es nd"><img src="../Images/7f2d26439309dc92f63610e78e16b0cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BTVLBKtmXc_gkUGcU-ogzw.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">Kubernetes集群中存在三组豆荚</figcaption></figure><p id="4f48" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated"><strong class="jx hj"> <em class="kt">让我们试着理解上图</em> </strong>中  <strong class="jx hj"> <em class="kt">所示的场景。<br/>在Kubernetes集群中，存在如下三组豆荚:</em></strong></p><ul class=""><li id="e240" class="ku kv hi jx b jy ko kb kp ji kw jm kx jq ky kn kz la lb lc bi translated"><strong class="jx hj"> <em class="kt">前端pod</em></strong>【运行web应用程序前端部分的pod】</li><li id="bceb" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated"><strong class="jx hj"> <em class="kt">后端pod</em></strong>【在其上运行web应用程序后端部分的pod】</li><li id="4c2f" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated"><strong class="jx hj"> <em class="kt">数据库窗格</em> </strong>【在其上运行数据库应用程序实例的窗格】</li></ul><p id="e04c" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">以上所有的pod都运行正常，并且在其上运行的应用程序也处于良好的状态。但是对于最终用户应用程序的正常工作来说，重要的是所有的单元应该一起正常工作，而不是独立工作。</p><blockquote class="mx my mz"><p id="714a" class="jv jw kt jx b jy ko ij ka kb kp im kd na kq kf kg nb kr ki kj nc ks kl km kn hb bi translated"><strong class="jx hj">现在问题来了，我们如何将前端单元连接到后端单元，将后端单元连接到数据库单元</strong>？？🤔🤔</p></blockquote><p id="b9b7" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">一个简单的解决方案是使用IP地址手动配置pod的属性，以便它们可以相互通信。</p><p id="8655" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">但是上述做法会给管理员<strong class="jx hj"> <em class="kt">不可想象的噩梦</em> </strong>👻。<br/>想象一下配置1000个pod，其中一些会停止运行，然后恢复运行。都有不同的和新的IP。<strong class="jx hj"> <em class="kt">末日轮回看来是</em> </strong>😰</p><blockquote class="mx my mz"><p id="70a3" class="jv jw kt jx b jy ko ij ka kb kp im kd na kq kf kg nb kr ki kj nc ks kl km kn hb bi translated">下面是类型为<strong class="jx hj"> ClusterIP </strong>的服务。他们让所有这些工作变得简单可行。让我们看看如何🐵</p></blockquote></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h2 id="d139" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">ClusterIP服务如何工作？？🤔🤔</h2><figure class="lq lr ls lt fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es ne"><img src="../Images/ff02fcc075064e5686a8a92259c33519.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gF4k3ts-pUzAu1N0gfVrFA.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">集群IP服务</figcaption></figure><p id="41b8" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated"><strong class="jx hj"> <em class="kt">让我们试着理解上图中</em> </strong> <strong class="jx hj"> <em class="kt">所示的场景:</em> </strong></p><ul class=""><li id="8231" class="ku kv hi jx b jy ko kb kp ji kw jm kx jq ky kn kz la lb lc bi translated">有三组PODs前端、后端和数据库]</li><li id="71ea" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">我们创建了两个ClusterIP服务(后端和redis)来简化pod间的通信过程。</li></ul><p id="791a" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated"><strong class="jx hj"> <em class="kt">让我们来探究一下ClusterIP服务在幕后是如何工作的:</em> </strong></p><ol class=""><li id="e95d" class="ku kv hi jx b jy ko kb kp ji kw jm kx jq ky kn nf la lb lc bi translated">假设一个前端POD需要获取一些后端服务。</li><li id="24ee" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn nf la lb lc bi translated">前端POD将联系我们创建的后端服务。</li><li id="68bf" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn nf la lb lc bi translated">后端服务将把POD通信请求映射到合适的后端POD上。</li><li id="c962" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn nf la lb lc bi translated">后端POD将返回所需的数据，这些数据将通过服务提供给前端POD。</li></ol><p id="ebee" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">所有的事情，比如请求应该传递给哪个POD，或者数据应该如何返回给请求者POD，都将由服务本身处理，而不需要管理员的干预。</p><p id="9553" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">即使在此之上，POD层也可以根据集群上的负载随时扩大或缩小，并且不会中断这些服务正在设计的通信系统。<br/>因为即使有1000个节点，服务也可以毫无困难地沿着集群扩展。</p><blockquote class="mx my mz"><p id="7584" class="jv jw kt jx b jy ko ij ka kb kp im kd na kq kf kg nb kr ki kj nc ks kl km kn hb bi translated">以这种简单的方式，通过使用<strong class="jx hj">集群IP服务</strong>。pod能够轻松地与集群中的其他pod进行通信:))</p></blockquote></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h2 id="064d" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">我们如何创建ClusterIP服务？？🤯🤯</h2><p id="08b7" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">我们可以使用YAML文件创建ClusterIP服务。要使用YAML创建Kubernetes ClusterIP服务，首先要创建一个空文件，为它分配必要的访问权限，然后定义必要的键-值对。</p><p id="e4c2" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">下面是一个集群IP服务定义文件<em class="kt">(</em><strong class="jx hj"><em class="kt">cluster _ IP . YAML</em></strong><em class="kt">)</em>的例子</p><pre class="lq lr ls lt fd ng nh ni nj aw nk bi"><span id="d01e" class="ix iy hi nh b fi nl nm l nn no"><strong class="nh hj">apiVersion</strong>: v1<br/><strong class="nh hj">kind</strong>: Service<br/><strong class="nh hj">metadata</strong>:<br/>  <strong class="nh hj">name</strong>: back-end<br/><strong class="nh hj">spec</strong>:<br/>  <strong class="nh hj">type</strong>: ClusterIP<br/>  <strong class="nh hj">selector: </strong><br/>      <strong class="nh hj">name</strong>: myapp<br/>      <strong class="nh hj">type</strong>: back-end  <br/>  <strong class="nh hj">ports</strong>:<br/>    - <strong class="nh hj">targetPort</strong>: 80<br/>      <strong class="nh hj">port</strong>: 80</span></pre><p id="5035" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">这个文件中有很多方面和组件。让我们逐一分析😀</p><ul class=""><li id="b46e" class="ku kv hi jx b jy ko kb kp ji kw jm kx jq ky kn kz la lb lc bi translated">让我们从<code class="du np nq nr nh b">apiVersion</code>(键值对)开始。这用于说明在创建ClusterIP服务时，您将在后台运行什么API服务器和版本。</li><li id="1098" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">接下来是<code class="du np nq nr nh b">kind</code>,表示这是一种定义文件。在我们的例子中，它是一种“服务”。</li><li id="d581" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">接下来是<code class="du np nq nr nh b">metadata</code>，是包含物品名称的字典。元数据存储分配给正在创建的ClusterIP服务的值。</li><li id="6fb0" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">最后是<code class="du np nq nr nh b">spec</code>，它实际上是一个数组/列表。以下是其中存在的值及其含义。<br/> <code class="du np nq nr nh b">type</code>:这个键的值，定义了正在创建的服务的类型。在我们的例子中，它是一个“集群IP”。<br/> <code class="du np nq nr nh b">selector</code>:它基本上有pod的标签，从而帮助服务识别它必须使用的pod。<br/> <code class="du np nq nr nh b">ports</code>:这个部分包含服务必须使用的端口。<br/> <code class="du np nq nr nh b">port</code>具有服务对象上的端口值，调用请求将映射到该端口。<br/></li></ul><p id="eccb" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">我们已经完成了ClusterIP服务定义文件。现在我们可以保存并退出文件。</p><p id="66db" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">使用此命令基于上述YAML文件创建ClusterIP服务:</p><pre class="lq lr ls lt fd ng nh ni nj aw nk bi"><span id="59b6" class="ix iy hi nh b fi nl nm l nn no">kubectl create -f cluster_ip.yaml</span></pre><p id="14e9" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">使用此命令查看群集上运行的所有服务:</p><pre class="lq lr ls lt fd ng nh ni nj aw nk bi"><span id="3ea0" class="ix iy hi nh b fi nl nm l nn no">kubectl get services</span></pre></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h2 id="5956" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">什么是负载平衡器服务？？🤔🤔</h2><figure class="lq lr ls lt fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es ns"><img src="../Images/e92902cada2ed40ab963b00e60e2bbe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-HC8bXNOvD3qxZUq"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">由Pavel Neznanov 在<a class="ae nt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5af4" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated"><strong class="jx hj">想象一个场景，其中已经执行了以下操作</strong>:</p><ol class=""><li id="2f81" class="ku kv hi jx b jy ko kb kp ji kw jm kx jq ky kn nf la lb lc bi translated">您已经使用NodePort服务将运行在POD上的应用程序暴露给工作节点的端口。</li><li id="2114" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn nf la lb lc bi translated">现在让我们假设有100个pod跨不同的工作节点运行相同的应用程序。</li><li id="4acb" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn nf la lb lc bi translated">每个工作节点有不同的ip地址。因此，即使端口相同，每个节点上要访问的URL也会不同。</li></ol><p id="9248" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">那么在给用户端点的时候，你会给哪个节点的URL，给多少个URL😓。最终这将导致一片混乱。</p><p id="c4a6" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated"><strong class="jx hj"> <em class="kt">现在为了解决上述问题，我们创建一个负载平衡器服务。<br/> </em> </strong>简单来说，通过给用户一个URL来展示整个应用程序。此外，它使用一些云提供商(gcp、azure、aws等)的负载平衡器来平衡用户对运行这些服务的pod的请求。</p><blockquote class="mx my mz"><p id="39f7" class="jv jw kt jx b jy ko ij ka kb kp im kd na kq kf kg nb kr ki kj nc ks kl km kn hb bi translated">以这种简单的方式，通过使用<strong class="jx hj">负载平衡器</strong> <strong class="jx hj">服务</strong>。用户请求可以很容易地实现负载平衡，整个应用程序可以通过一个URL向最终用户公开:))</p></blockquote></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h2 id="f9a4" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">我们如何创建一个负载平衡器服务？？🤯🤯</h2><p id="46a6" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">我们可以使用YAML文件创建一个负载平衡器服务。要使用YAML创建Kubernetes LoadBalancer服务，首先要创建一个空文件，为它分配必要的访问权限，然后定义必要的键-值对。</p><p id="5e73" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">下面是一个负载平衡器服务定义文件<em class="kt">(</em><strong class="jx hj"><em class="kt">load _ balancer . YAML</em></strong><em class="kt">)</em>的例子</p><pre class="lq lr ls lt fd ng nh ni nj aw nk bi"><span id="f460" class="ix iy hi nh b fi nl nm l nn no"><strong class="nh hj">apiVersion</strong>: v1<br/><strong class="nh hj">kind</strong>: Service<br/><strong class="nh hj">metadata</strong>:<br/>  <strong class="nh hj">name</strong>: myapp-service<br/><strong class="nh hj">spec</strong>:<br/>  <strong class="nh hj">type</strong>: LoadBalancer<br/>  <strong class="nh hj">selector</strong>:<br/>    <strong class="nh hj">app</strong>: front-end<br/>  <strong class="nh hj">ports</strong>:<br/>    - <strong class="nh hj">port</strong>: 80<br/>      <strong class="nh hj">targetPort</strong>: 80<br/>      <strong class="nh hj">nodePort: </strong>30008</span></pre><p id="dafc" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">这个文件中有很多方面和组件。让我们逐一分析😀</p><ul class=""><li id="df0e" class="ku kv hi jx b jy ko kb kp ji kw jm kx jq ky kn kz la lb lc bi translated">让我们从<code class="du np nq nr nh b">apiVersion</code>(键值对)开始。这用于说明在创建LoadBalancer服务时，您将在后台运行什么API服务器和版本。</li><li id="b5f0" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">接下来是<code class="du np nq nr nh b">kind</code>,表示这是一种定义文件。在我们的例子中，它是一种“服务”。</li><li id="5dfb" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">接下来是<code class="du np nq nr nh b">metadata</code>，这是一个包括项目名称的字典。元数据存储分配给正在创建的负载平衡器服务的值。</li><li id="215d" class="ku kv hi jx b jy ld kb le ji lf jm lg jq lh kn kz la lb lc bi translated">最后是<code class="du np nq nr nh b">spec</code>，它实际上是一个数组/列表。以下是其中存在的值及其含义。<br/> <code class="du np nq nr nh b">type</code>:这个键的值，定义了正在创建的服务的类型。在我们的例子中，它是一个“负载平衡器”。<br/> <code class="du np nq nr nh b">selector</code>:它基本上有pod的标签，从而帮助服务识别它必须使用的pod。<br/> <code class="du np nq nr nh b">ports</code>:包含服务必须使用的端口的部分。<br/> <code class="du np nq nr nh b">nodePort</code>拥有用户请求将要到达的节点上的端口值。<br/> <code class="du np nq nr nh b">port</code>具有服务对象上的端口值，用户请求将映射到该端口。<br/></li></ul><p id="8d23" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">我们已经完成了负载平衡器服务定义文件。现在我们可以保存并退出文件。</p><p id="c987" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">使用此命令基于上述YAML文件创建负载平衡器服务:</p><pre class="lq lr ls lt fd ng nh ni nj aw nk bi"><span id="2a04" class="ix iy hi nh b fi nl nm l nn no">kubectl create -f load_balancer<strong class="nh hj"><em class="kt">.</em></strong>yaml</span></pre><p id="3cd7" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">使用此命令查看群集上运行的所有服务:</p><pre class="lq lr ls lt fd ng nh ni nj aw nk bi"><span id="4a0d" class="ix iy hi nh b fi nl nm l nn no">kubectl get services</span></pre></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h2 id="3828" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">接下来呢？👀 👀</h2><figure class="lq lr ls lt fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es nu"><img src="../Images/196fcf0c880648e86aa6d3f53b37687b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5Bm3v-Afppd5gpWf"/></div></div></figure><blockquote class="mx my mz"><p id="6592" class="jv jw kt jx b jy ko ij ka kb kp im kd na kq kf kg nb kr ki kj nc ks kl km kn hb bi translated">非常感谢你来到这里！是本文的结尾。<br/>但我们只是触及了K8s生态系统的表面:)】<br/>还有很多，这将是一次有趣的旅程，我们将一起学习许多很酷的东西。</p><p id="0b6a" class="jv jw kt jx b jy ko ij ka kb kp im kd na kq kf kg nb kr ki kj nc ks kl km kn hb bi translated">鼓掌，跟我来🙈如果你喜欢我的作品，并希望在未来更多地阅读我的作品:)</p></blockquote><p id="09e4" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">如果你对这篇文章有任何疑问，或者想聊聊天，请随时联系我的社交媒体账号</p><p id="7749" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated"><em class="kt">推特—</em><a class="ae nt" href="https://twitter.com/ChindaVibhor" rel="noopener ugc nofollow" target="_blank">T3】https://twitter.com/ChindaVibhorT5】</a></p><p id="e874" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated"><em class="kt">领英—</em><a class="ae nt" href="https://www.linkedin.com/in/vibhor-chinda-465927169/" rel="noopener ugc nofollow" target="_blank"><em class="kt">https://www.linkedin.com/in/vibhor-chinda-465927169/</em></a></p><h2 id="1c87" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">我以前写的文章:</h2><div class="mf mg ez fb mh mi"><a rel="noopener follow" target="_blank" href="/google-cloud/kubernetes-services-️️-part-1-42244ada9990"><div class="mj ab dw"><div class="mk ab ml cl cj mm"><h2 class="bd hj fi z dy mn ea eb mo ed ef hh bi translated">kubernetes服务公司第一部分</h2><div class="mp l"><h3 class="bd b fi z dy mn ea eb mo ed ef dx translated">Kubernetes有哪些服务？</h3></div><div class="mq l"><p class="bd b fp z dy mn ea eb mo ed ef dx translated">medium.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw lz mi"/></div></div></a></div><div class="mf mg ez fb mh mi"><a rel="noopener follow" target="_blank" href="/google-cloud/what-are-namespaces-in-kubernetes-d03c76a83d04"><div class="mj ab dw"><div class="mk ab ml cl cj mm"><h2 class="bd hj fi z dy mn ea eb mo ed ef hh bi translated">Kubernetes中的名称空间是什么？？</h2><div class="mp l"><h3 class="bd b fi z dy mn ea eb mo ed ef dx translated">名称空间是Kubernetes对象，它将一个Kubernetes集群划分成多个虚拟集群。在…</h3></div><div class="mq l"><p class="bd b fp z dy mn ea eb mo ed ef dx translated">medium.com</p></div></div><div class="mr l"><div class="nv l mt mu mv mr mw lz mi"/></div></div></a></div><div class="mf mg ez fb mh mi"><a href="https://faun.pub/kubernetes-object-deployments-1e09cd904963" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab dw"><div class="mk ab ml cl cj mm"><h2 class="bd hj fi z dy mn ea eb mo ed ef hh bi translated">Kubernetes对象:☸☸部署</h2><div class="mp l"><h3 class="bd b fi z dy mn ea eb mo ed ef dx translated">Kubernetes中有哪些部署？</h3></div><div class="mq l"><p class="bd b fp z dy mn ea eb mo ed ef dx translated">faun.pub</p></div></div><div class="mr l"><div class="nw l mt mu mv mr mw lz mi"/></div></div></a></div><h2 id="d4d1" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">参考资料:</h2><div class="mf mg ez fb mh mi"><a href="https://kubernetes.io/docs/concepts/services-networking/service/" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab dw"><div class="mk ab ml cl cj mm"><h2 class="bd hj fi z dy mn ea eb mo ed ef hh bi translated">服务</h2><div class="mp l"><h3 class="bd b fi z dy mn ea eb mo ed ef dx translated">将运行在集群中的应用程序暴露在单个外向端点之后，即使工作负载被拆分…</h3></div><div class="mq l"><p class="bd b fp z dy mn ea eb mo ed ef dx translated">kubernetes.io</p></div></div><div class="mr l"><div class="nx l mt mu mv mr mw lz mi"/></div></div></a></div><p id="a394" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">我仍然会继续发表新的文章，涵盖我正在探索的一系列主题。</p><p id="e844" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">那都是乡亲们！！涂鸦:))</p></div></div>    
</body>
</html>