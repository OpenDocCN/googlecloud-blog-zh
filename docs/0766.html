<html>
<head>
<title>Checking JavaScript with Cloud Builder</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用云构建器检查JavaScript</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/checking-javascript-with-cloud-builder-dab387f6d6ff?source=collection_archive---------0-----------------------#2018-09-18">https://medium.com/google-cloud/checking-javascript-with-cloud-builder-dab387f6d6ff?source=collection_archive---------0-----------------------#2018-09-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f886" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章展示了使用Google <a class="ae jd" href="https://cloud.google.com/cloud-build/docs/" rel="noopener ugc nofollow" target="_blank">云构建</a>和JavaScript linter <a class="ae jd" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> eslint </a>进行样式检查。随着ES6的发布和现代JavaScript的普及，您将需要集成Node.js和相关工具来开发任何实质性的web应用程序，不管您的后端语言是什么。检查JavaScript代码风格是开始集成的好地方。</p><p id="4f4d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://gist.github.com/alexamies/8e7aa81d1078ceadc2298e0df92f9865" rel="noopener ugc nofollow" target="_blank">对应要点</a>中的sum.js文件改编自Mark Ethan Trostler所著的《可测试的<em class="je">JavaScript:确保可靠的代码</em> 一书，该书包含了对JavaScript代码风格和开发可测试JavaScript的精彩讨论。文件sum.js包含一些样式错误，我们希望使用eslint来识别和纠正这些错误。此外，我们可以使用<br/><a class="ae jd" href="https://github.com/GoogleCloudPlatform/cloud-builders/tree/master/docker" rel="noopener ugc nofollow" target="_blank">Docker Cloud Builder</a>运行eslint，以避免在本地环境中设置许多Node.js依赖项，并建立一个可重复的自动化构建过程。</p><p id="d447" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，将Gist文件复制到您的本地环境中。</p><p id="51cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过使用npm安装eslint并使用命令运行，在本地进行样式检查</p><pre class="jf jg jh ji fd jj jk jl jm aw jn bi"><span id="9161" class="jo jp hi jk b fi jq jr l js jt">npm install -g eslint eslint-config-google<br/>eslint .</span></pre><p id="1c52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这使用Google风格的规则，您可以通过编辑eslint配置文件. eslintrc.json来更改这些规则。</p><p id="7b01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要在云构建中运行，请使用以下命令</p><pre class="jf jg jh ji fd jj jk jl jm aw jn bi"><span id="923f" class="jo jp hi jk b fi jq jr l js jt">gcloud builds submit . --config=cloudbuild.yaml</span></pre><p id="277e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们预计会看到一些错误，因为sum.js有已知的问题。eslint报告的缺少分号和缺少<a class="ae jd" href="http://usejsdoc.org/" rel="noopener ugc nofollow" target="_blank"> JSDoc </a>的一些问题。通过编辑sum.js来纠正这些问题，用以下代码替换现有内容:</p><pre class="jf jg jh ji fd jj jk jl jm aw jn bi"><span id="5cc4" class="jo jp hi jk b fi jq jr l js jt">/**<br/> * Add two numbers together<br/> * @param {number} a - The first operand<br/> * @param {number} b - The second operand<br/> * @return {number} The sum of the two operands<br/> */<br/>function sum(a, b) {<br/>  return a + b;<br/>}<br/>console.log('1 + 1 = ' + sum(1, 1));</span></pre><p id="6ba2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后再次运行gclould build</p><pre class="jf jg jh ji fd jj jk jl jm aw jn bi"><span id="9858" class="jo jp hi jk b fi jq jr l js jt">gcloud builds submit . --config=cloudbuild.yaml</span></pre><p id="abd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一次构建应该会成功。</p></div></div>    
</body>
</html>