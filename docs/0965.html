<html>
<head>
<title>Hybrid Cloud — Linking GCP with on-premise datacenters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">混合云—将GCP与内部数据中心联系起来</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/hybrid-cloud-linking-gcp-with-on-premise-datacenters-b106dbdfa8c8?source=collection_archive---------0-----------------------#2019-04-05">https://medium.com/google-cloud/hybrid-cloud-linking-gcp-with-on-premise-datacenters-b106dbdfa8c8?source=collection_archive---------0-----------------------#2019-04-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/d589fa564463cc1193e471f5de02590a.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*b4jl6tc8tDf5VhNe.png"/></div></figure><p id="7d8e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这一周非常忙碌；然而，对于我们的团队来说，这是值得的，因为我们通过将公共云工作负载与本地工作负载联系起来，成功地为客户实施了Google混合云。为了保持简短，我将这篇博客分成两部分(第一部分是解决方案概述，第二部分是实现细节)。在这篇博客中，我将写下我对采用云的主要障碍以及混合云如何解决它的想法。</p><h1 id="f987" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">是什么阻碍了公共云的采用？</h1><p id="ed14" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">每种技术都有其优缺点。我们都知道使用公共云的好处。那么，为什么企业应用程序仍然停留在内部数据中心呢？让我们来看看双方的主要因素。</p><p id="0c44" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">对公共云的偏好</strong></p><ol class=""><li id="bf28" class="kn ko hi io b ip iq it iu ix kp jb kq jf kr jj ks kt ku kv bi translated">最新的硬件和软件</li><li id="75b2" class="kn ko hi io b ip kw it kx ix ky jb kz jf la jj ks kt ku kv bi translated">利用可快速轻松部署的资源降低IT成本</li><li id="243e" class="kn ko hi io b ip kw it kx ix ky jb kz jf la jj ks kt ku kv bi translated">数据分析</li><li id="a666" class="kn ko hi io b ip kw it kx ix ky jb kz jf la jj ks kt ku kv bi translated">自动缩放</li><li id="618d" class="kn ko hi io b ip kw it kx ix ky jb kz jf la jj ks kt ku kv bi translated">高可用性(跨多个地区/区域)</li></ol><p id="7bf7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">对内部部署的偏好</strong></p><ol class=""><li id="36aa" class="kn ko hi io b ip iq it iu ix kp jb kq jf kr jj ks kt ku kv bi translated">传统位置</li><li id="a264" class="kn ko hi io b ip kw it kx ix ky jb kz jf la jj ks kt ku kv bi translated">传统硬件</li><li id="1588" class="kn ko hi io b ip kw it kx ix ky jb kz jf la jj ks kt ku kv bi translated">网络连接性差</li><li id="8b01" class="kn ko hi io b ip kw it kx ix ky jb kz jf la jj ks kt ku kv bi translated">数据限制(数据保护法)</li></ol><p id="297d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">行业需要公共和内部数据中心的优势。这种必要性导致了混合云的发展！</p><p id="9ca0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们看看我们是如何为客户实施混合云的</p><h1 id="81c3" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">第1天:内部设置</h1><p id="6dc0" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">我们的客户在其内部数据中心托管了一个微服务应用程序，并希望利用Google Cloud的功能。他们的应用程序有一个基于web的前端和一个MySQL后端，要求如下</p><p id="ea53" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">前端服务</strong></p><p id="d5d0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">1.自动扩展(根据工作负载无缝扩展)</p><p id="bd99" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2.高可用性(美国、欧洲、APAC客户的多区域部署)</p><p id="1ed5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">3.无操作(快速简单的管理)</p><p id="645d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">后端服务</strong></p><p id="fb16" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">1.遵守数据保护法</p><p id="9d32" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2.到数据库的本地连接</p><p id="7ffc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">后端要求非常适合本地设置，而前端需要公共云来克服资源限制。</p><h1 id="68b7" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">混合云架构</h1><p id="f3cd" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">我们必须找到一种解决方案来拆分微服务应用，将前端组件迁移到GCP，同时保留连接到私有数据中心MySQL的本地后端服务。我们通过<a class="ae lb" href="https://preliminary.istio.io/docs/concepts/what-is-istio/" rel="noopener ugc nofollow" target="_blank"> Istio </a> ( <a class="ae lb" href="https://preliminary.istio.io/docs/concepts/multicluster-deployments/#multiple-control-plane-topology" rel="noopener ugc nofollow" target="_blank">网关连接集群</a>特性)将两个独立的Istio服务网格合并为一个逻辑混合网格来实现这一目标。如果你不知道<a class="ae lb" href="https://preliminary.istio.io/docs/concepts/what-is-istio/" rel="noopener ugc nofollow" target="_blank">伊斯蒂奥</a>和<a class="ae lb" href="https://cloud.google.com/kubernetes-engine/" rel="noopener ugc nofollow" target="_blank"> GKE </a>，我会在<a class="ae lb" href="http://www.priyasaxena.co.uk/p/geeky-corner.html" rel="noopener ugc nofollow" target="_blank">极客角落</a>的一个独立博客中谈到这些基础知识。</p><p id="f6ca" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="lc">请注意，该混合云解决方案仅适用于在Kubernetes上运行的容器化微服务。</em></p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/0af44eb2f0e3ae9e6aa3bdf510f4a92c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*GeOo5zNoo0_i6G9l.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">Megan O'Keefe的潮人商店微服务应用的多集群演示</figcaption></figure><p id="fbee" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">实施</strong> <br/> <br/> <strong class="io hj">步骤1 </strong>:在GCP为前端服务创建了一个<a class="ae lb" href="https://cloud.google.com/kubernetes-engine/" rel="noopener ugc nofollow" target="_blank"> GKE </a>集群<br/> <strong class="io hj">步骤2 </strong>:为后端服务创建了另一个<a class="ae lb" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>本地集群<br/> <strong class="io hj">步骤3 : </strong>为两个集群(本地和云)设置单独的Istio控制平面。<br/> <strong class="io hj">第四步:</strong>配置了KubeDNS与Istio的CoreDNS对话。这是连接两个集群的关键。它允许一个集群中的服务引用另一个集群中的服务，就像它们是自己的网格的一部分一样。<br/> <strong class="io hj">第五步:</strong>部署微服务应用，配置Istio入口网关，让两个集群相互通信。</p><p id="c716" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们的解决方案类似于下图所示(除了下图显示了GCP上的两个集群；而我们的解决方案是针对混合云的)。</p><p id="9c74" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在我的下一篇博客中，我们将深入探讨这些步骤中的每一步(使用支持脚本)来为微服务演示应用实施混合云。此外，看看谷歌的混合和云计算产品<a class="ae lb" href="https://cloud.google.com/cloud-services-platform/" rel="noopener ugc nofollow" target="_blank"> Anthos </a>，它可以让你跨环境构建和管理现代混合应用。</p><p id="2c87" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">目前就这些。我们将在下一篇博客中深入探讨实现。我还会把我的项目上传到GitHub上，让你实现自己的混合云。看好这个空间！</p><p id="4395" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Priya Saxena </p><p id="579c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">谷歌战略云工程师</p></div><div class="ab cl lm ln gp lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="hb hc hd he hf"><p id="14d8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="lc">原载于2019年4月5日</em><a class="ae lb" href="http://www.priyasaxena.co.uk/2019/04/hybrid-cloud-linking-gcp-with-on.html" rel="noopener ugc nofollow" target="_blank"><em class="lc">【www.priyasaxena.co.uk</em></a><em class="lc">。</em></p></div></div>    
</body>
</html>