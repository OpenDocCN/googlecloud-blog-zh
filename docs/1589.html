<html>
<head>
<title>A first look at serverless orchestration with Workflows</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">工作流的无服务器编排初探</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/a-first-look-at-serverless-orchestration-with-workflows-d80e41e9e04f?source=collection_archive---------1-----------------------#2020-09-09">https://medium.com/google-cloud/a-first-look-at-serverless-orchestration-with-workflows-d80e41e9e04f?source=collection_archive---------1-----------------------#2020-09-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="4904" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">连接服务的挑战</h1><p id="ceaf" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">当我思考我最近的项目时，我可能花了一半时间编写新服务，另一半时间连接服务。服务A调用服务B，或者服务C调用外部服务并使用结果反馈给另一个服务d。</p><p id="660c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">连接服务是“应该很容易”的事情之一，但实际上，这需要花费大量的时间和精力。您需要为服务找出一个通用的连接格式，建立连接，解析结果，并传递结果。我甚至没有提到错误处理、重试以及所有那些您最终需要做的生产就绪型功能。</p><p id="7cad" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这就是为什么当我看到来自<a class="ae kg" href="https://twitter.com/FilipKnapik1" rel="noopener ugc nofollow" target="_blank"> Filip Knapik </a>的关于一款名为Workflows的新产品的测试版发布时，我感到非常兴奋:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/7a432f8c14cc1416aa132c473b10853f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XimecAvSWuxZt88-bY0kAQ.png"/></div></div></figure><h1 id="fc23" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是工作流？</h1><p id="8df8" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">简而言之，<a class="ae kg" href="http://cloud.google.com/workflows" rel="noopener ugc nofollow" target="_blank">工作流</a>允许你将“事情”连接在一起。什么样的事情？几乎任何有公共API的东西。您可以将多个云功能连接在一起，或者使用Google Cloud APIs甚至外部API将云功能与云运行服务混合使用。</p><p id="69b5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">除了连接不同的服务，工作流还处理服务之间的解析和传递值。它有内置的错误处理和重试策略。它是无服务器的，可以根据需求无缝扩展，甚至可以缩减到零。</p><p id="4ea3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这听起来很棒，让我们看看我们能做些什么！</p><h1 id="df99" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">连接两个云函数</h1><p id="a252" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">作为第一个示例，让我们使用工作流连接两个云功能。</p><p id="684a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">第一个服务是<a class="ae kg" href="https://github.com/meteatamel/workflow-samples/tree/master/randomgen" rel="noopener ugc nofollow" target="_blank"> randomgen </a>。它会生成一个介于1到100之间的随机数:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="8a11" class="ky ig hi ku b fi kz la l lb lc">import random, json<br/>from flask import jsonify</span><span id="5846" class="ky ig hi ku b fi ld la l lb lc">def randomgen(request):<br/>    randomNum = random.randint(1,100)<br/>    output = {"random":randomNum}<br/>    return jsonify(output)</span></pre><p id="c75c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">部署到云功能:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="2464" class="ky ig hi ku b fi kz la l lb lc">gcloud functions deploy randomgen \<br/>    --runtime python37 \<br/>    --trigger-http \<br/>    --allow-unauthenticated</span></pre><p id="4e47" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">第二个服务是<a class="ae kg" href="https://github.com/meteatamel/workflow-samples/tree/master/multiply" rel="noopener ugc nofollow" target="_blank">乘</a>。它将接收到的输入乘以2:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="f148" class="ky ig hi ku b fi kz la l lb lc">import random, json<br/>from flask import jsonify</span><span id="8c38" class="ky ig hi ku b fi ld la l lb lc">def multiply(request):<br/>    request_json = request.get_json()<br/>    output = {"multiplied":2*request_json['input']}<br/>    return jsonify(output)</span></pre><p id="f1f5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">部署到云功能:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="4ef2" class="ky ig hi ku b fi kz la l lb lc">gcloud functions deploy multiply \<br/>    --runtime python37 \<br/>    --trigger-http \<br/>    --allow-unauthenticated</span></pre><p id="e916" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">使用第一个工作流连接两个服务。创建一个<code class="du le lf lg ku b">workflow.yaml</code>文件:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="352d" class="ky ig hi ku b fi kz la l lb lc">- randomgenFunction:<br/>    call: http.get<br/>    args:<br/>        url: <a class="ae kg" href="https://us-central1-workflows-atamel.cloudfunctions.net/randomgen" rel="noopener ugc nofollow" target="_blank">https://us-central1-workflows-atamel.cloudfunctions.net/randomgen</a><br/>    result: randomgenResult<br/>- multiplyFunction:<br/>    call: http.post<br/>    args:<br/>        url: <a class="ae kg" href="https://us-central1-workflows-atamel.cloudfunctions.net/multiply" rel="noopener ugc nofollow" target="_blank">https://us-central1-workflows-atamel.cloudfunctions.net/multiply</a><br/>        body:<br/>            input: ${randomgenResult.body.random}<br/>    result: multiplyResult<br/>- returnResult:<br/>    return: ${multiplyResult}</span></pre><p id="bb4b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">请注意，只使用url调用不同的服务、解析一个服务的结果并输入到另一个服务中是多么容易。</p><p id="b7ca" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">部署工作流:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="b919" class="ky ig hi ku b fi kz la l lb lc">gcloud beta workflows deploy workflow \<br/>    --source=workflow.yaml</span></pre><p id="a25c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">执行工作流程:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="0d30" class="ky ig hi ku b fi kz la l lb lc">gcloud beta workflows execute workflow</span></pre><p id="cbbc" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这为您提供了查看工作流程进度的命令。在我的例子中，命令是这样的:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="ddd3" class="ky ig hi ku b fi kz la l lb lc">gcloud beta workflows executions describe bc0e0c53-2b77-438a-a2dc-824be577f5f9 \<br/>   --workflow workflow</span><span id="02cd" class="ky ig hi ku b fi ld la l lb lc">{<br/>  "body": {<br/>    "multiplied": 34<br/>  },<br/>  "code": 200,<br/>  "headers": {<br/>   ...</span></pre><p id="e1ca" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">注意，我们得到了一个<code class="du le lf lg ku b">multiplied</code>值和状态码<code class="du le lf lg ku b">200</code>。很好，我们的第一个工作流已经启动并运行了！</p><h1 id="bdc9" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">连接外部服务</h1><p id="265f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在下一个示例中，让我们连接到<a class="ae kg" href="https://api.mathjs.org/" rel="noopener ugc nofollow" target="_blank"> math.js </a>作为工作流中的外部服务。</p><p id="32e3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在<code class="du le lf lg ku b">math.js</code>中，你可以这样计算数学表达式:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="0c2e" class="ky ig hi ku b fi kz la l lb lc">curl <a class="ae kg" href="https://api.mathjs.org/v4/?expr=log(56)" rel="noopener ugc nofollow" target="_blank">https://api.mathjs.org/v4/?expr=log(56)</a></span><span id="d170" class="ky ig hi ku b fi ld la l lb lc">+4.02535169073515</span></pre><p id="d4cf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这一次，我们将使用云控制台来更新我们的工作流。在谷歌云控制台中找到<code class="du le lf lg ku b">Workflows</code>:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lh"><img src="../Images/705b18a6d1e6f90ca326ae5765cbfa6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/0*-Z7LCuy8z-Zll8Je.png"/></div></figure><p id="cfdf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">进入我们的工作流程，点击<code class="du le lf lg ku b">Definition</code>标签:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es li"><img src="../Images/b1f3bb18bd37044bb845698665734744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zaI2XbFrm4091uTY.png"/></div></div></figure><p id="b9a3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">编辑定义以包括<code class="du le lf lg ku b">math.js</code>:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="382a" class="ky ig hi ku b fi kz la l lb lc">- randomgenFunction:<br/>    call: http.get<br/>    args:<br/>        url: <a class="ae kg" href="https://us-central1-workflows-atamel.cloudfunctions.net/randomgen" rel="noopener ugc nofollow" target="_blank">https://us-central1-workflows-atamel.cloudfunctions.net/randomgen</a><br/>    result: randomgenResult<br/>- multiplyFunction:<br/>    call: http.post<br/>    args:<br/>        url: <a class="ae kg" href="https://us-central1-workflows-atamel.cloudfunctions.net/multiply" rel="noopener ugc nofollow" target="_blank">https://us-central1-workflows-atamel.cloudfunctions.net/multiply</a><br/>        body:<br/>            input: ${randomgenResult.body.random}<br/>    result: multiplyResult<br/>- logFunction:<br/>    call: http.get<br/>    args:<br/>        url: <a class="ae kg" href="https://api.mathjs.org/v4/" rel="noopener ugc nofollow" target="_blank">https://api.mathjs.org/v4/</a><br/>        query:<br/>            expr: ${"log(" + string(multiplyResult.body.multiplied) + ")"}<br/>    result: logResult<br/>- returnResult:<br/>    return: ${logResult}</span></pre><p id="85ad" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这将指导您编辑和部署工作流。完成后，点击<code class="du le lf lg ku b">Execute</code>执行工作流程。你会看到执行的细节:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lj"><img src="../Images/9885c9947b190f71b57118845575ef8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ycuQybKlG_E3nzrY.png"/></div></div></figure><p id="8c13" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">注意状态代码<code class="du le lf lg ku b">200</code>。</p><p id="6e50" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们刚刚将一个外部服务集成到我们的工作流中，超级酷！</p><h1 id="612a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">连接经过身份验证的云运行服务</h1><p id="946b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在最后一个示例中，让我们通过调用云运行服务来结束我们的工作流。为了让它更有趣，部署一个内部云运行服务。这意味着需要对工作流进行身份验证才能调用云运行服务。</p><p id="1a20" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">服务<a class="ae kg" href="https://github.com/meteatamel/workflow-samples/tree/master/floor" rel="noopener ugc nofollow" target="_blank">楼层</a>返回传入数量的<code class="du le lf lg ku b">math.floor</code>:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="b7a9" class="ky ig hi ku b fi kz la l lb lc">import json<br/>import logging<br/>import os<br/>import math</span><span id="8db5" class="ky ig hi ku b fi ld la l lb lc">from flask import Flask, request</span><span id="2e46" class="ky ig hi ku b fi ld la l lb lc">app = Flask(__name__)</span><span id="1cc5" class="ky ig hi ku b fi ld la l lb lc"><a class="ae kg" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route('/', methods=['POST'])<br/>def handle_post():<br/>    content = json.loads(request.data)<br/>    input = float(content['input'])<br/>    return f"{math.floor(input)}", 200</span><span id="b3f0" class="ky ig hi ku b fi ld la l lb lc">if __name__ != '__main__':<br/>    # Redirect Flask logs to Gunicorn logs<br/>    gunicorn_logger = logging.getLogger('gunicorn.error')<br/>    app.logger.handlers = gunicorn_logger.handlers<br/>    app.logger.setLevel(gunicorn_logger.level)<br/>    app.logger.info('Service started...')<br/>else:<br/>    app.run(debug=True, host='0.0.0.0', port=int(os.environ.get('PORT', 8080)))</span></pre><p id="5120" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">正如你可能知道的，Cloud Run部署容器，所以你需要一个<code class="du le lf lg ku b">Dockerfile</code>，你的容器需要绑定到<code class="du le lf lg ku b">0.0.0.0</code>和<code class="du le lf lg ku b">PORT</code> env变量，因此上面的代码。</p><p id="2284" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">可以使用下面的<a class="ae kg" href="https://github.com/meteatamel/workflow-samples/blob/master/floor/Dockerfile" rel="noopener ugc nofollow" target="_blank"> Dockerfile </a>。</p><p id="6982" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">构建容器:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="9ed6" class="ky ig hi ku b fi kz la l lb lc">export SERVICE_NAME=floor<br/>gcloud builds submit --tag gcr.io/${PROJECT_ID}/${SERVICE_NAME}</span></pre><p id="c414" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">部署到云运行。注意<code class="du le lf lg ku b">no-allow-unauthenticated</code>标志。这可以确保服务只接受经过身份验证的呼叫:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="47ad" class="ky ig hi ku b fi kz la l lb lc">gcloud run deploy ${SERVICE_NAME} \<br/>  --image gcr.io/${PROJECT_ID}/${SERVICE_NAME} \<br/>  --platform managed \<br/>  --no-allow-unauthenticated</span></pre><h2 id="4513" class="ky ig hi bd ih lk ll lm il ln lo lp ip jo lq lr it js ls lt ix jw lu lv jb lw bi translated">工作流的服务帐户</h2><p id="f4be" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在配置工作流以调用云运行服务之前，我们需要创建一个服务帐户供工作流使用:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="6354" class="ky ig hi ku b fi kz la l lb lc">export SERVICE_ACCOUNT =workflows-sa<br/>gcloud iam service-accounts create ${ SERVICE_ACCOUNT }</span></pre><p id="93e9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">授予服务帐户<code class="du le lf lg ku b">run.invoker</code>角色。这将允许服务帐户调用经过身份验证的云运行服务:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="2711" class="ky ig hi ku b fi kz la l lb lc">export PROJECT_ID=$(gcloud config get-value project)<br/>gcloud projects add-iam-policy-binding ${PROJECT_ID} \<br/>    --member "serviceAccount:${SERVICE_ACCOUNT}@${PROJECT_ID}.iam.gserviceaccount.com" \<br/>    --role "roles/run.invoker"</span></pre><h2 id="8ff6" class="ky ig hi bd ih lk ll lm il ln lo lp ip jo lq lr it js ls lt ix jw lu lv jb lw bi translated">更新工作流程</h2><p id="f950" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">更新<code class="du le lf lg ku b">workflow.yaml</code>以包含云运行服务。请注意，我们还包含了<code class="du le lf lg ku b">auth</code>字段，以确保工作流在其对云运行服务的调用中传递身份验证令牌:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="c91b" class="ky ig hi ku b fi kz la l lb lc">- randomgenFunction:<br/>    call: http.get<br/>    args:<br/>        url: <a class="ae kg" href="https://us-central1-workflows-atamel.cloudfunctions.net/randomgen" rel="noopener ugc nofollow" target="_blank">https://us-central1-workflows-atamel.cloudfunctions.net/randomgen</a><br/>    result: randomgenResult<br/>- multiplyFunction:<br/>    call: http.post<br/>    args:<br/>        url: <a class="ae kg" href="https://us-central1-workflows-atamel.cloudfunctions.net/multiply" rel="noopener ugc nofollow" target="_blank">https://us-central1-workflows-atamel.cloudfunctions.net/multiply</a><br/>        body:<br/>            input: ${randomgenResult.body.random}<br/>    result: multiplyResult<br/>- logFunction:<br/>    call: http.get<br/>    args:<br/>        url: <a class="ae kg" href="https://api.mathjs.org/v4/" rel="noopener ugc nofollow" target="_blank">https://api.mathjs.org/v4/</a><br/>        query:<br/>            expr: ${"log(" + string(multiplyResult.body.multiplied) + ")"}<br/>    result: logResult<br/>- floorFunction:<br/>    call: http.post<br/>    args:<br/>        url: <a class="ae kg" href="https://floor-wvdg6hhtla-ew.a.run.app" rel="noopener ugc nofollow" target="_blank">https://floor-wvdg6hhtla-ew.a.run.app</a><br/>        auth:<br/>            type: OIDC<br/>        body:<br/>            input: ${logResult.body}<br/>    result: floorResult<br/>- returnResult:<br/>    return: ${floorResult}</span></pre><p id="e629" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">部署工作流，这次在<code class="du le lf lg ku b">service-account</code>中传递:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="6138" class="ky ig hi ku b fi kz la l lb lc">gcloud beta workflows deploy workflow \<br/>    --source=workflow.yaml \<br/>    --service-account=${SERVICE_ACCOUNT}@${PROJECT_ID}.iam.gserviceaccount.com</span></pre><p id="c032" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">执行工作流程:</p><pre class="ki kj kk kl fd kt ku kv kw aw kx bi"><span id="c2cb" class="ky ig hi ku b fi kz la l lb lc">gcloud beta workflows execute workflow</span></pre><p id="5a55" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">几秒钟后，您就可以查看工作流执行的结果。它应该是从floor函数返回的整数。</p><h1 id="fb92" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">包裹</h1><p id="0006" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">希望这篇文章能帮助你对什么是工作流有一个好的认识。这个新产品的潜力给我留下了深刻的印象。我将在以后的博文中尝试一些更复杂的用例。</p><p id="3e8e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">与此同时，如果你想了解一下，这里有一些链接:</p><ul class=""><li id="5ea2" class="lx ly hi jf b jg kb jk kc jo lz js ma jw mb ka mc md me mf bi translated"><a class="ae kg" href="https://cloud.google.com/workflows" rel="noopener ugc nofollow" target="_blank">工作流程概述</a></li><li id="06aa" class="lx ly hi jf b jg mg jk mh jo mi js mj jw mk ka mc md me mf bi translated"><a class="ae kg" href="https://cloud.google.com/workflows/docs" rel="noopener ugc nofollow" target="_blank">工作流文档</a></li><li id="09cb" class="lx ly hi jf b jg mg jk mh jo mi js mj jw mk ka mc md me mf bi translated"><a class="ae kg" href="https://cloud.google.com/workflows/docs/quickstarts" rel="noopener ugc nofollow" target="_blank">快速入门</a></li><li id="74f3" class="lx ly hi jf b jg mg jk mh jo mi js mj jw mk ka mc md me mf bi translated"><a class="ae kg" href="https://github.com/meteatamel/workflow-samples" rel="noopener ugc nofollow" target="_blank">工作流-示例</a>用本帖中的代码回购</li></ul><p id="6b47" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">欢迎在Twitter <a class="ae kg" href="https://twitter.com/meteatamel" rel="noopener ugc nofollow" target="_blank"> @meteatamel </a>上联系我，或者阅读我以前在<a class="ae kg" rel="noopener" href="/@meteatamel"> medium/@meteatamel </a>上的帖子。</p></div><div class="ab cl ml mm gp mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hb hc hd he hf"><p id="cbd5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="ms">最初发布于</em><a class="ae kg" href="https://atamel.dev/posts/2020/09-08_first_look_at_workflows/" rel="noopener ugc nofollow" target="_blank"><em class="ms">https://atamel . dev</em></a><em class="ms">。</em></p></div></div>    
</body>
</html>