<html>
<head>
<title>Who said you can’t code on a Chromebook? Local development with Cloud Functions.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谁说不能在Chromebook上编码了？具有云功能的本地开发。</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/who-said-you-cant-code-on-a-chromebook-local-development-with-cloud-functions-4e68dca1240b?source=collection_archive---------1-----------------------#2021-12-01">https://medium.com/google-cloud/who-said-you-cant-code-on-a-chromebook-local-development-with-cloud-functions-4e68dca1240b?source=collection_archive---------1-----------------------#2021-12-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0bcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我1月份加入谷歌时，我可以在Chrome、gLinux、macOS和gWindows四个主要平台的几个选项中选择我的笔记本电脑。我喜欢在5秒钟内启动笔记本电脑的想法(我的三星手机需要更长时间才能开机)，但我不能否认我对编码持怀疑态度。事实是，人们很容易忽视Chromebooks，尽管它们使用的操作系统规模不如Windows 10或macOS，但随着时间的推移，该平台已经成熟为一种轻量级但功能仍然很好的平台。</p><p id="d972" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇博文描述了在Chromebook上设置Linux，并使用Node.js运行时、Visual Studio代码和Google Cloud Functions Framework for node . js编写简单的HTTP Cloud函数的过程，让我们开始吧！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/063a69813780a8814408cd17a6dde005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*tNaWXyK2bEQmoBMtprr8jw.jpeg"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">奥斯卡·伊尔迪兹在<a class="ae jp" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="b452" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">在Chromebook上设置Linux、Node和Visual Studio</h1><p id="c216" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">首先，如果你想在Chromebook上开发软件，你需要安装Linux。你可以在Chromebook上安装Linux命令行工具、代码编辑器和ide(集成开发环境)。这些可以用来写代码，创建应用等等。<a class="ae jp" href="https://sites.google.com/a/chromium.org/dev/chromium-os/chrome-os-systems-supporting-linux" rel="noopener ugc nofollow" target="_blank">如果你的设备安装了Linux </a>，它将默认关闭。您可以随时从设置中打开它。在Chromebook的右下角，选择时间。然后选择设置&gt; <strong class="ih hj">高级</strong> &gt; <strong class="ih hj">开发者。</strong>在“Linux开发环境”旁边，选择打开并按照屏幕上的说明进行操作。Debian 10 (Buster)环境的设置可能需要10分钟或更长时间。您可以运行Linux命令，使用APT包管理器安装更多的工具，并定制您的shell。首先要做的一件事是更新APT⁠库索引并安装。APT是Debian的命令行包管理器，保持它的最新将确保你总是在它的库中安装最新版本的工具:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/26027b0abcf2ba91a8d3b71c66a4f579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qwRHc1pPvZRbLZrgujLSRg.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">运行“apt-获取更新”</figcaption></figure><p id="5985" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提示！访问Linux容器中的文件的一个简单方法是制作一个副本。为此，请打开文件应用程序，拖动您想要访问的任何目录或文件，并将其放入“Linux文件”中。</p><p id="125a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">既然Linux已经设置好了，要安装Node.js，我们需要确保我们正在以root用户身份运行安装程序命令(在撰写本文时，Node的当前版本是17.1.0)。</p><pre class="je jf jg jh fd ky kz la lb aw lc bi"><span id="316a" class="ld jr hi kz b fi le lf l lg lh">sudo /bin/bash<br/>curl -fsSL https://deb.nodesource.com/setup_17.x | bash -<br/>sudo apt-get install -y nodejs</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es li"><img src="../Images/b3945ba4038844aaf3547d083ac24b9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BnlB093QuAiZXK3eXjswgg.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">在终端中安装NodeSource Node.js 17.x repo</figcaption></figure><p id="73fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果由于Node的任何现有冲突版本而遇到错误，请通过运行以下命令清理您的环境:</p><pre class="je jf jg jh fd ky kz la lb aw lc bi"><span id="41f1" class="ld jr hi kz b fi le lf l lg lh">sudo apt remove — purge nodejs node npm<br/>sudo apt clean<br/>sudo apt autoclean<br/>sudo apt install -f<br/>sudo apt autoremove</span></pre><p id="70e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">既然已经设置了Crostini Linux容器并安装了Node，我们将继续学习Visual Studio代码。这是什么？这是一个轻量级但功能强大的源代码编辑器，运行在桌面上，可用于Windows、macOS和Linux。它内置了对JavaScript、TypeScript和Node.js的支持，并为其他语言(如C++、C#、Java、Python、PHP、Go)和运行时(如。NET和Unity)。</p><p id="b98a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然你总是可以通过<code class="du lj lk ll kz b">sudo apt install</code>在终端中安装应用和工具，但Chrome OS上的Linux支持双击安装文件应用中的<code class="du lj lk ll kz b">.deb</code>文件(Debian软件包)，允许你像习惯一样下载和安装应用。例如，Visual Studio代码提供了一个<code class="du lj lk ll kz b"><a class="ae jp" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank">.deb</a></code> <a class="ae jp" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank"> ⁠ </a>包，你可以尝试一下。下载后，打开文件应用程序，右键单击并选择“安装Linux(测试版)”。您将看到一个提示，其中包含有关您要安装的应用程序的信息，以及安装应用程序的选项。从现在开始，一旦Linux安装程序完成，你就可以像Chromebook上的任何其他应用程序一样，从应用程序抽屉中启动Visual Studio代码。您也可以从终端简单地输入<em class="lm">代码</em>来启动它。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ln"><img src="../Images/4ee399ad1cb250ebd0372b45de94ccc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eRaxjKrgmQc5I6ntnlOa6w.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">Chrome操作系统上的Visual Studio代码</figcaption></figure><h1 id="b38e" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">在本地创建并测试HTTP云功能</h1><p id="c159" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated"><a class="ae jp" href="https://cloud.google.com/functions" rel="noopener ugc nofollow" target="_blank"> Google Cloud Functions </a>是一个事件驱动的无服务器计算平台。云功能允许您编写代码，而无需担心资源调配或扩展以处理不断变化的需求。因为在云函数上测试代码本身需要等待已部署的代码和日志条目变得可用，所以在开发机器上运行和测试您的函数可以显著加快测试过程(进而加快开发过程)。</p><p id="7248" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们在Visual Studio中创建和测试云函数之前，作为本地开发环境设置的一部分，我们还需要做最后一步:为Node.js 安装<a class="ae jp" href="https://codelabs.developers.google.com/codelabs/local-development-with-cloud-functions#2" rel="noopener ugc nofollow" target="_blank">函数框架。Google Cloud Functions团队已经创建了一个开源的FaaS (Function as a Service)框架，用于编写可移植的Node.js函数，这些函数可以在许多不同的环境中运行，包括Google Cloud Functions、您的本地开发机器、Cloud Run以及基于GKE和Knative的环境中的Cloud Run。</a></p><p id="f495" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，让我们通过在终端中运行<code class="du lj lk ll kz b">npm init</code>来创建一个新的Node.js应用程序。接受默认值时，确保使用<code class="du lj lk ll kz b">index.js</code>作为应用程序的入口点。</p><pre class="je jf jg jh fd ky kz la lb aw lc bi"><span id="c795" class="ld jr hi kz b fi le lf l lg lh">mkdir ~/helloworld<br/>cd ~/helloworld<br/>npm init </span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es li"><img src="../Images/7971c5c8f1fef4e7e99646424cc76690.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c98Cy0YqiEcDfrL1Yj3qYA.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">使用npm init创建一个简单的HTTP云函数</figcaption></figure><p id="772e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后安装Node.js的函数框架(<code class="du lj lk ll kz b">npm install @google-cloud/functions-framework</code>)。打开你的<em class="lm"> package.json </em>。验证您是否看到作为依赖项列出的函数框架，如下例所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lo"><img src="../Images/ce41c55a2d81af209be72ac76fe08b09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ya0xK0EJ8a9zWDRdtGwJAQ.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">安装功能框架</figcaption></figure><p id="d2ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在准备在Visual Studio代码中编辑云函数。单击IDE中的资源管理器图标，打开刚刚创建的文件夹。现在在<code class="du lj lk ll kz b">helloworld</code>目录下创建一个<code class="du lj lk ll kz b">index.js</code>文件，并添加一些hello world代码:-)。若要使用Visual Studio中的集成终端测试函数，请打开一个终端窗口并运行以下命令:</p><pre class="je jf jg jh fd ky kz la lb aw lc bi"><span id="0503" class="ld jr hi kz b fi le lf l lg lh">npx functions-framework --target=helloWorld</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lp"><img src="../Images/3fb72399e7472942d46d0b2d1f1081f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qUSI6Eaee1hnsfyEnJtCXA.png"/></div></div></figure><p id="8915" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个命令启动一个本地服务器，当服务器接收到一个HTTP请求时，它准备调用<code class="du lj lk ll kz b">helloWorld</code>函数。为了测试这个函数，创建第二个终端窗口，并运行下面的命令，向服务于<code class="du lj lk ll kz b">helloWorld</code>函数的本地服务器发送一个名称负载。</p><pre class="je jf jg jh fd ky kz la lb aw lc bi"><span id="40b5" class="ld jr hi kz b fi le lf l lg lh">curl -X POST http://localhost:8080 -H "Content-Type:application/json"  -d '{"name":"Alessia"}'</span></pre><p id="7108" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">既然您已经在本地机器上创建并测试了云功能，那么您就可以将它部署到Google Cloud了。但是在此之前，我们需要确保当我们部署到Google Cloud时，所有的<em class="lm"> node_modules </em>都将被排除在部署之外。为此，我们需要在顶层目录中添加一个名为<code class="du lj lk ll kz b">.gcloudignore</code>的文件。此<code class="du lj lk ll kz b">.gcloudignore</code>防止上传<code class="du lj lk ll kz b">node_modules/</code>目录和任何以<code class="du lj lk ll kz b">~</code>结尾的文件:</p><pre class="je jf jg jh fd ky kz la lb aw lc bi"><span id="d449" class="ld jr hi kz b fi le lf l lg lh">/node_modules/<br/>*~</span></pre><h1 id="9cb7" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">将云功能从本地机器部署到Google Cloud</h1><p id="6f15" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">既然我们已经为云功能打包了应用程序，下一步就是将它部署到Google Cloud。为此，我们需要<a class="ae jp" href="https://cloud.google.com/sdk/docs/quickstart#installing_the_latest_version" rel="noopener ugc nofollow" target="_blank">在本地安装云SDK </a>，并使用<code class="du lj lk ll kz b"><a class="ae jp" href="https://cloud.google.com/sdk/gcloud/reference/init" rel="noopener ugc nofollow" target="_blank">gcloud init</a></code>命令执行几个常见的云SDK设置任务。这些包括授权Cloud SDK工具使用您的用户帐户凭据访问Google Cloud，并设置默认配置(确保设置项目ID而不是项目编号)。</p><p id="3f09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您的Google Cloud SDK配置完毕，可以在任何终端窗口中使用，请运行以下命令:</p><pre class="je jf jg jh fd ky kz la lb aw lc bi"><span id="b70c" class="ld jr hi kz b fi le lf l lg lh">gcloud functions deploy helloWorld --trigger-http --runtime nodejs12 --allow-unauthenticated</span></pre><p id="62c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">部署完成后，您将在输出中看到以下内容:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lq"><img src="../Images/416d0b961a9495b4697763b7e03ab3f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4qFeh5h5xx6ZFIEnMPB4bA.png"/></div></div></figure><p id="8748" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们完了！感谢您阅读这篇博文，在这篇博文中，我们探讨了如何在Chromebook上使用Visual Studio代码，通过Node.js的云函数来简化本地开发。</p></div></div>    
</body>
</html>