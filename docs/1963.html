<html>
<head>
<title>AutoML NLP: Convert PDFs to JSONLs!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AutoML NLP:将pdf转换为JSONLs！</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/automl-nlp-convert-pdfs-to-jsonls-c01f1da0899?source=collection_archive---------0-----------------------#2021-09-19">https://medium.com/google-cloud/automl-nlp-convert-pdfs-to-jsonls-c01f1da0899?source=collection_archive---------0-----------------------#2021-09-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="c7de" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">学习使用AutoML docs提供的脚本将文本文件转换成jsonl格式。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/d400f726b87ffbbf2baa36c89d95df9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i9R9dCrcspzJpYi6B3SOlA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">截图来自GCP <a class="ae jn" href="https://cloud.google.com/natural-language/automl/docs/prepare#expandable-2" rel="noopener ugc nofollow" target="_blank"> AutoML docs </a>【作者图片】</figcaption></figure><p id="65fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你从GCP的AutoML NLP开始，你已经知道第一步了。将您的文档转换为<code class="du kk kl km kn b">.jsonl</code>格式，然后作为培训数据传递。AutoML 文档已经为你提供了一个python脚本，但是如果你发现这个脚本有点难以理解或使用，你并不孤单！</p><p id="0a74" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当我浏览文档时，我希望有一个使用 <a class="ae jn" href="https://cloud.google.com/natural-language/automl/docs/scripts/input_helper_v2.py" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj"> python脚本</strong> </a>的一步一步的指南，所以它在这里。</p><h2 id="fa91" class="ko kp hi bd kq kr ks kt ku kv kw kx ky jx kz la lb kb lc ld le kf lf lg lh li bi translated">什么是AutoML？</h2><p id="c40f" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">AutoML是Google云平台上AI的积木之一。当您想要创建和训练定制的高质量模型，并且机器学习专业知识有限时，它尤其有用。它提供了一个接口来帮助您将数据传输到算法中以构建您的模型。它会自动选择最佳的神经网络架构，并根据您的目标为您调整超参数，基本上节省了重新训练和微调的人工努力。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lo"><img src="../Images/d0a2167bad247a7baab2a54f4fc2b563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uogTxM0a-lVa__VkjFBjew.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">文档中提供的脚本是用Python2编写的。[图片由<a class="ae jn" href="https://unsplash.com/@hiteshchoudhary?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Hitesh Choudhary </a>在<a class="ae jn" href="https://unsplash.com/s/photos/python?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄]</figcaption></figure><h2 id="1219" class="ko kp hi bd kq kr ks kt ku kv kw kx ky jx kz la lb kb lc ld le kf lf lg lh li bi translated">因此，第一步——获取您的数据！</h2><p id="f1e7" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">我不会写在AutoML上创建和训练模型过程中的所有步骤，因为你可以在这里找到很好的文档<a class="ae jn" href="https://cloud.google.com/natural-language/automl/docs" rel="noopener ugc nofollow" target="_blank"/>。我们的重点是引起一点摩擦的任务。</p><p id="54c8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">确保您的pdf的大小&lt; 2 Mb. If they contain pictures or any graphical data, you might want to read this <a class="ae jn" href="https://towardsdatascience.com/how-to-extract-the-text-from-pdfs-using-python-and-the-google-cloud-vision-api-7a0a798adc13" rel="noopener" target="_blank"> <strong class="jq hj">文章</strong> </a>解释了如何使用cloud vision API和python从pdf中的图像提取文本数据。</p><h1 id="9d24" class="lp kp hi bd kq lq lr ls ku lt lu lv ky io lw ip lb ir lx is le iu ly iv lh lz bi translated">将pdf转换为JSONL —在gCloud shell中</h1><p id="b65e" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">该脚本可以在gCloud命令行shell中运行，或者如果您已经安装了gCloud SDK，那么您可以直接从您的机器上运行该脚本，并将存储在GCS buckets中的pdf转换为jsonl文件。它是用Python2编写的，接受三个参数— <em class="ma">脚本文件名、pdf文件的路径和目的地bucket的路径</em>。</p><pre class="iy iz ja jb fd mb kn mc md aw me bi"><span id="7b7c" class="ko kp hi kn b fi mf mg l mh mi">python2 &lt;script&gt; <!-- -->gs://&lt;path_to_src_pdf&gt; gs://&lt;dest_bucket&gt;/</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mj"><img src="../Images/a799befac0f31f52a6c0f96d4b66c4bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_uFtiDmMTKCxnyRzN22VkQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">将脚本和您的源pdf文件上传到GCS桶中[图片由作者提供]</figcaption></figure><ol class=""><li id="c3d5" class="mk ml hi jq b jr js ju jv jx mm kb mn kf mo kj mp mq mr ms bi translated">将<a class="ae jn" href="https://cloud.google.com/natural-language/automl/docs/scripts/input_helper_v2.py" rel="noopener ugc nofollow" target="_blank">脚本</a> ( <code class="du kk kl km kn b">input_helper_v2.py</code>)和您的源PDF(以后称为<code class="du kk kl km kn b">src.pdf</code>)文件上传到GCS bucket中。请注意这两个文档的路径。</li><li id="055d" class="mk ml hi jq b jr mt ju mu jx mv kb mw kf mx kj mp mq mr ms bi translated">在云壳中安装python2。<code class="du kk kl km kn b">sudo apt install python2</code></li><li id="c9d0" class="mk ml hi jq b jr mt ju mu jx mv kb mw kf mx kj mp mq mr ms bi translated">在区域(<code class="du kk kl km kn b">us-central1</code>)中创建一个GCS存储桶，并将存储类别设置为<code class="du kk kl km kn b">standard</code>。AutoML加工的区域必须是<code class="du kk kl km kn b">us-central1</code>。(截至2011年9月的数据)</li><li id="aa36" class="mk ml hi jq b jr mt ju mu jx mv kb mw kf mx kj mp mq mr ms bi translated">将存储在GCS bucket中的脚本复制到cloud shell主目录中。<code class="du kk kl km kn b">gsutil -m cp gs://&lt;path_to_script&gt;</code></li><li id="1d53" class="mk ml hi jq b jr mt ju mu jx mv kb mw kf mx kj mp mq mr ms bi translated">第4步是将脚本加载到我们的云shell VM的主目录中。运行<code class="du kk kl km kn b">ls</code>确认脚本是否复制成功。</li><li id="ea43" class="mk ml hi jq b jr mt ju mu jx mv kb mw kf mx kj mp mq mr ms bi translated">在云壳中，运行<code class="du kk kl km kn b">python2 input_helper_v2.py gs://&lt;path_to_src_pdf&gt; gs://&lt;path_to_gcs_bucket&gt;/</code></li></ol><blockquote class="my mz na"><p id="2cfe" class="jo jp ma jq b jr js ij jt ju jv im jw nb jy jz ka nc kc kd ke nd kg kh ki kj hb bi translated">如果想一次转换多个文件，可以用<code class="du kk kl km kn b">*.extension</code>代替一个文件名。示例— <code class="du kk kl km kn b"> *.pdf</code></p></blockquote><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ne nf l"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ng"><img src="../Images/f87f2d57c7ef88277161b517d6c333b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bPbu_TLlMM4mCiwU"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">运行脚本后创建的JSONL文件[图片由作者提供—截图来自GCP控制台&gt;云存储]</figcaption></figure><p id="2505" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">带有jsonl文件URIs(可直接用于导入训练数据)和jsonl文件的CSV数据集已创建并存储在您指定的目标GCS存储桶中。前往<a class="ae jn" href="https://cloud.google.com/natural-language/automl/docs/prepare#importing_training_documents" rel="noopener ugc nofollow" target="_blank">文档</a>(在autoMl控制台中导入您的训练数据)并继续构建您的定制模型！</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nh"><img src="../Images/1d6327938d309ae8e7fc9facdbaf4bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V2GWn1Z62HwcPQhuu4Fifg.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">希望这个指南对你有帮助！如果遇到任何问题，请发表评论。[作者照片，灵感来自<a class="ni nj ge" href="https://medium.com/u/9b9e67983b04?source=post_page-----c01f1da0899--------------------------------" rel="noopener" target="_blank">普里扬卡·韦尔加迪亚</a>🤗]</figcaption></figure></div></div>    
</body>
</html>