<html>
<head>
<title>Google Cloud Dataprep - Data Handling Made Easier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google Cloud Dataprep -数据处理变得更简单</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/google-cloud-dataprep-data-handling-made-easier-79d7c35fbbe7?source=collection_archive---------0-----------------------#2017-09-26">https://medium.com/google-cloud/google-cloud-dataprep-data-handling-made-easier-79d7c35fbbe7?source=collection_archive---------0-----------------------#2017-09-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d166" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们在<a class="ae jd" href="https://panorays.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Panorays </strong> </a>上看到有一个选项可以在<a class="ae jd" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Google云平台</strong> </a>上试用<a class="ae jd" href="https://cloud.google.com/dataprep/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Cloud Dataprep </strong> </a>作为测试版时，我们立即注册，发现非常有用和省时，可以说这让我们的数据科学家，令人敬畏的<a class="ae jd" rel="noopener" href="/@talperetz24"> <strong class="ih hj"> Tal Peretz </strong> </a>非常非常高兴！</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/c4668bd2eaf6a19acc3721deadfd315a.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*PZBSMFQzL3TmC_wJ."/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">云数据准备</figcaption></figure><p id="589c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从我们试图解决的问题开始(总有一个“问题”:)，</p><p id="4fd9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们有很多(大约700 GB)文件需要解析、过滤和一些转换(原始CSV、SQL和常规文本文件，其中一些是压缩格式的“tar.gz”)。<br/>如您所知，数据科学家80%的日常工作是数据准备、数据过滤和数据丰富，因此我们的目标当然是在这一阶段尽可能节省时间。</p><h1 id="77ff" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak">TL；博士:</strong></h1><p id="e2c2" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">使用Dataprep，我们已经能够节省大量的时间和精力(可能还有计算资源)。(不，没有人付钱让我写这个帖子……)</p><p id="5cea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">好处:</strong></p><ol class=""><li id="1507" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">易于使用和升级。</li><li id="c6bf" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">不需要在任何虚拟机上运行“代码”(几乎没有服务器)。</li><li id="6c6d" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">方便的图形用户界面，让您可以看到整个过程和统计数据和元数据。</li><li id="6790" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">以非常高效的方式运行。</li></ol><p id="4037" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们仍然不能用Dataprep做什么:</strong></p><ol class=""><li id="7422" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">在开箱即用的压缩文件上运行流。</li><li id="bd25" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">在拯救GCP项目中的不同用户之间共享流量。</li><li id="13be" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">将数据存储在另一个数据存储中，用于数据管道的其余部分——但在我看来，这也不是使用Dataprep的用例。</li></ol><p id="6f6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">现在到实际过程:</strong></p><p id="1528" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们把它们放在<a class="ae jd" href="https://cloud.google.com/storage/" rel="noopener ugc nofollow" target="_blank">谷歌云存储</a>上用于存储目的(你知道，它是完全复制的，非常便宜，为什么不呢)，正因为如此，它非常适合我们使用Dataprep从云存储中读取输入的方式。</p><p id="a22c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">主要目标:</strong></p><ol class=""><li id="8e7b" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">检查所有文件，其他类型的文件有不同的逻辑。</li><li id="ff94" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">提取相关特征，最后将它们合并到包含所有行的最终输出“文件”中，然后继续处理数据管道。</li><li id="44c1" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">将它移动到另一个索引数据存储，以便以后能够以单个数据点的分辨率查询数据。</li><li id="89a0" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">能够运行分析，并利用输出数据创建一些机器学习模型。</li></ol><p id="37af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">那么，我们是如何通过Dataprep </strong>做到这一点的(当然有一些截图):</p><ul class=""><li id="a250" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc lh kz la lb bi translated">我们已经创建了一个流程来处理所有的原始数据，在这个流程中，我们为每种类型的文件格式创建了一个“配方”,其中包含了数据的上下文。<br/>所有这些都将通过特定的特征被合并到同一个输出“文件”中，我们通过这些特征进行连接。</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/d5df6474ce0ad96fc4e334eb1c012fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mYMOaC_JWuCqN69J."/></div></div></figure><ul class=""><li id="0802" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc lh kz la lb bi translated">在这里，您可以看到特定作业的“作业”执行和数据分布，然后再对从其中一个数据源获取的样本数据进行运行。(看起来挺酷的吧？)</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/89fe3c05fe6d109d5527cfc4e74e8c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*P0ngnYN0LWRcS_a9."/></div></div></figure><ul class=""><li id="76ce" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc lh kz la lb bi translated">作业结果以一种非常方便的方式导出报告。<br/>还可以看到所有匹配和不匹配的行的计数，运行大约需要30分钟，输出结果大约为12GB(当然是在过滤之后)。我们还可以看到输出数据分布的一些概述，这真的很酷</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/5fee3c88a0835a3588795b15cbbbf4cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sNsS04dB88ENaMYB."/></div></div></figure><ul class=""><li id="83d2" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc lh kz la lb bi translated">我们可以看到，这基本上是在<a class="ae jd" href="https://cloud.google.com/dataflow/" rel="noopener ugc nofollow" target="_blank">云数据流</a>的后台运行的，作业本身可以显示为数据流作业，其所有DAG都已分解。</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ln"><img src="../Images/bebebf43e5cab2d4c42f5caab9d0698d.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/0*uMW8XSc_v2HyX20S."/></div></figure><ol class=""><li id="7485" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">毕竟它必须被保存在某个地方，对吗？<br/>所以如果不去谷歌云存储的话。您可以看到输出以分片分布式的方式保存在Dataprep环境的已定义沙箱桶中。</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/0b777078b2594b21c501c46be662e3b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7Klj_JC_zvuKvNDo."/></div></div></figure><h1 id="feb7" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">所以总结一下，</h1><p id="a333" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我们在大约一天的工作中成功地转换和过滤了大量的原始数据。<br/>如果我们尝试通过“<a class="ae jd" href="https://spark.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Spark </a>”(我个人迄今为止最喜欢的)来做这件事，即使是在像<a class="ae jd" href="https://cloud.google.com/dataproc/" rel="noopener ugc nofollow" target="_blank"> Cloud Dataproc </a>这样的托管环境中，编写代码和运行所有转换也要花费我们长得多的时间。<br/>运行时间非常好，我们不需要自己维护或安排任何资源。</p><p id="a4b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在测试版中仍然有一些障碍，例如，我们不能在同一个GCP项目的不同用户之间共享作业，这非常不方便。</p><p id="b287" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们无法在Dataprep中提取带转换的压缩文件，所以我们事先手动完成了提取阶段，并将提取的文件重新上传到云存储。</p><p id="b249" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但总的来说，它看起来是一个很好的数据准备工具，有着非常好的用户界面，我相信在GA版本中会有更多的功能。</p><p id="5af0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我要感谢</strong> <a class="ae jd" href="https://www.linkedin.com/in/tal-per/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">塔尔·佩雷茨</strong> </a> <strong class="ih hj">的伟大作品伟大的作品！(很多“快速见效”都是因为他)。</strong></p><p id="0b87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望<strong class="ih hj"> Cloud Dataprep </strong>团队提供更多出色的功能，让数据工程师和数据科学家的生活变得更加轻松。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lo"><img src="../Images/b5b4a685ed0cb04a8dbd497c78599c59.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*DmTP_eenNQkWQIz9ljd5ow.png"/></div></figure></div></div>    
</body>
</html>