<html>
<head>
<title>A to Z of Google Cloud Platform a personal selection — U — Uniqueness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云平台的a到Z个人精选— U —唯一性</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-u-uniqueness-974cd289f305?source=collection_archive---------1-----------------------#2016-05-08">https://medium.com/google-cloud/a-to-z-of-google-cloud-platform-a-personal-selection-u-uniqueness-974cd289f305?source=collection_archive---------1-----------------------#2016-05-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="471e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是这个系列中又一个有点奇怪的帖子(至少在下一个帖子中会恢复正常服务，但是至少可以说这些剩余的信件是有挑战性的！)</p><p id="8639" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">能够“真正”拥有大规模运行的应用身份需要进行抽象，这样，作为云规模服务的消费者，您实际上并不关心。仅仅因为你不关心那些身份，并不意味着你使用的服务不关心！</p><p id="0497" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以说，显而易见的是，每样东西都有某种同一性，是的，即使是我反复提到的那些例子，你也不应该在意(谷歌牛和宠物，我不会直接添加到关于这个概念的数百个帖子中)</p><p id="545c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我将首先关注GCE，并探索<strong class="ih hj">独特性</strong>及其对你的意义(是的，我要说出来！)在一个云原生世界。然后，我将讨论在GCP以微服务为导向的世界中的独特性。</p><p id="48b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，一个实例被启动，并被赋予多个标识符，这些标识符共同允许您或作为其前端的服务来识别它(例如名称、IP地址)。让我们快速看一下我已经开始的一个例子。如果你刚到GCP，那么看看文档，看看如何<a class="ae jd" href="https://cloud.google.com/compute/docs/instances/create-start-instance" rel="noopener ugc nofollow" target="_blank">启动实例</a>。</p><p id="7687" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您查看控制台，您将看到一些基本的细节，可以说，这些细节允许您将实例标识为一个个体！</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/f8ad3d4209f28a996aeff6549c135762.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pIsMzgcV8R8k2ffz."/></div></div></figure><p id="9bb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您也可以使用gcloud instances describe命令:</p><p id="ddc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在我使用实例example-instance的示例中，命令如下所示</p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="efa3" class="jv jw hi jr b fi jx jy l jz ka">$ gcloud compute instances describe example-instance</span></pre><p id="3f91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以看到更多的细节</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kb"><img src="../Images/f7f6d8f6672adaf8beb1f49a936f0d0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6e8nbFrCOLkd4lDs."/></div></div></figure><p id="8702" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果实例是托管实例组的一部分，您个人不会在意，但使用这些托管实例的负载平衡器会在意，毕竟它需要知道哪些实例是健康的，以及将流量定向到哪里。</p><p id="87d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你能想象在一个所有人都被称为“乔·布朗”的会议中，没有人有任何便于识别的昵称吗？(对不起乔你知道你是谁！)</p><p id="e6f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">磁盘也有一个身份，也有一个名称。在我的例子中，我只有启动盘，它默认为使用它的实例的名称。在控制台上看起来是这样的</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kc"><img src="../Images/7d4a804aa560e5e526fb4ecf68030d35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/0*Kd-vdbhgXUwH-J6-."/></div></figure><p id="e6fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这很好，但是操作系统需要可以使用的标识符。</p><p id="c500" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我ssh到实例上并执行fdsik -l，您可以看到磁盘上的操作系统信息。请注意，除了在格式化和挂载磁盘时，操作系统不会使用您使用gcloud命令或控制台为磁盘指定的名称。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kd"><img src="../Images/5fe3ea1594b8eb7d76b223de01ec4f45.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/0*4iZvChhdLovjYoMg."/></div></figure><p id="eac4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">阅读这里关于创建<a class="ae jd" href="https://cloud.google.com/compute/docs/disks/add-persistent-disk" rel="noopener ugc nofollow" target="_blank">持久磁盘</a>的文档，了解如何创建额外的磁盘以及如何让操作系统看到它的细节。</p><p id="85db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快照也是独一无二的，也需要命名。参见<a class="ae jd" href="https://cloud.google.com/compute/docs/disks/create-snapshots" rel="noopener ugc nofollow" target="_blank">文档</a></p><p id="045d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好吧，我能听到你，所以我们明白，但我为什么要关心。如果您使用<a class="ae jd" href="https://cloud.google.com/compute/docs/instance-groups/#create_managed_group" rel="noopener ugc nofollow" target="_blank">管理的实例组</a>运行真正不可变的配置，并且您的实例是短暂的，那么您不必真的担心单个实例(是的，是的，我知道故障排除等，但在本文的上下文中，这是一个公平的陈述)，但您确实需要知道实例组的身份/名称，以便您可以自动伸缩，并允许该组中的实例由负载平衡器处理。</p><h2 id="fd05" class="jv jw hi bd ke kf kg kh ki kj kk kl km iq kn ko kp iu kq kr ks iy kt ku kv kw bi translated">服务注册中心</h2><p id="a67a" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">如果您或您的应用程序确实需要直接关心实例身份，那么使用服务注册中心或中央索引，实例和应用程序可以自行注册，如果它们不再存在，也可以被删除。您的应用程序应该使用注册表来查找它们需要使用的实例和/或服务。</p><p id="d3bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着微服务的出现，这突然增加了您需要跟踪的独特服务和实例的数量，并且不可避免地，您需要考虑使用服务注册。</p><p id="c3d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">服务注册中心的一个常见例子是DNS服务器。例如，如果您使用windows，那么您将使用DNS来允许发现域控制器。</p><p id="02fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在继续之前，我想介绍一下GCP实时迁移计算解决方案中我最喜欢的一个功能</p><p id="d314" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，需要设置域控制器和DNS身份，并让其他具有临时实例的机器知道，这实际上是行不通的，因此您可以利用GCP的实时迁移来帮助您维护该身份。<a class="ae jd" href="https://cloudplatform.googleblog.com/2015/03/Google-Compute-Engine-uses-Live-Migration-technology-to-service-infrastructure-without-application-downtime.html" rel="noopener ugc nofollow" target="_blank">这篇来自2015年3月的</a>博文很好地概述了实时迁移的工作原理。</p><p id="eb73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">DNS可以说是最受欢迎的注册服务，如果你正在阅读这篇文章，你是利用它来到这里的。</p><p id="2895" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我还想提一下其他三个服务注册中心，排名不分先后。我不会花任何时间去比较和对比他们每一个人(互联网已经在这方面做得很好了)。最终，它们提供了一种注册和注销服务端点的动态方法，其他应用程序可以查找和使用这些端点。</p><p id="1fe4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Zookeeper  — ZooKeeper允许分布式进程通过一个共享的层级名称空间相互协调，该名称空间的组织方式类似于标准文件系统。名称空间由数据寄存器组成——用ZooKeeper的说法叫做z nodes——这些类似于文件和目录。Stackdriver 有一个<a class="ae jd" href="https://cloud.google.com/monitoring/agent/plugins/zookeeper" rel="noopener ugc nofollow" target="_blank">动物园管理员插件。@vicnastea讨论用</a><a class="ae jd" href="https://cloudplatform.googleblog.com/2016/04/taming-the-herd-using-Zookeeper-and-Exhibitor-on-Google-Container-Engine.html" rel="noopener ugc nofollow" target="_blank">动物园管理员与参展商</a> r整合GKE</p><p id="b734" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://www.consul.io/" rel="noopener ugc nofollow" target="_blank"> Consul </a> — Consul客户端运行在集群中的每个节点上。这些客户端是提供多种功能的<a class="ae jd" href="https://www.consul.io/docs/internals/gossip.html" rel="noopener ugc nofollow" target="_blank">八卦池</a>的一部分，包括分布式健康检查。。可以很容易地在GCP上运行，这篇关于在计算引擎上使用HAProxy和Consul的文章对在GCP上配置和使用Consul进行了很好的演练</p><p id="fd84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">e <a class="ae jd" href="https://github.com/coreos/etcd/" rel="noopener ugc nofollow" target="_blank"> tcd </a>可通过HTTP访问的键/值存储。它是分布式的，具有可用于构建服务发现的分层配置系统。它由<a class="ae jd" href="http://kubernetes.io/docs/admin/etcd/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>使用</p><p id="8de7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它们的核心都有一个<a class="ae jd" href="https://en.wikipedia.org/wiki/Consensus_(computer_science)" rel="noopener ugc nofollow" target="_blank">共识协议</a>来提供<a class="ae jd" href="https://en.wikipedia.org/wiki/CAP_theorem" rel="noopener ugc nofollow" target="_blank">一致性</a></p><p id="4588" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于那些对这些注册管理机构使用的共识性模型理论感兴趣的人，这里有一些起点:</p><p id="96f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="http://research.microsoft.com/en-us/um/people/lamport/pubs/paxos-simple.pdf" rel="noopener ugc nofollow" target="_blank">Paxos</a>——不了解Pax OS你就无法开始钻研共识，所以我建议从这里的<a class="ae jd" href="http://harry.me/blog/2014/12/27/neat-algorithms-paxos/" rel="noopener ugc nofollow" target="_blank">开始</a>，它有一个出色的可视化来帮助解释它是如何工作的。这两种zab &amp;木筏都可以追溯到paxos。T <a class="ae jd" href="http://static.googleusercontent.com/media/research.google.com/en//archive/paxos_made_live.pdf" rel="noopener ugc nofollow" target="_blank">他来自谷歌的</a>论文描述了他们在实现paxos时遇到的一些挑战(这多少说明了为什么Raft至少成为了一件东西),这是一篇好文章</p><p id="b582" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://raft.github.io/" rel="noopener ugc nofollow" target="_blank"> Raft </a>是etcd和consul用的型号</p><p id="dcfd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Zab是动物园管理员使用的模型</p></div></div>    
</body>
</html>