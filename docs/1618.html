<html>
<head>
<title>Explore &amp; Visualize 200+ Years of Global Temperature</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索和可视化200多年的全球温度</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/explore-visualize-200-years-of-global-temperature-using-apache-spark-bigquery-and-google-data-699ed8b3c67?source=collection_archive---------2-----------------------#2020-10-12">https://medium.com/google-cloud/explore-visualize-200-years-of-global-temperature-using-apache-spark-bigquery-and-google-data-699ed8b3c67?source=collection_archive---------2-----------------------#2020-10-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="eaa2" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">GCP/Data proc/big query/Data Studio/Apache Spark/亚马逊S3/气候学/气候变化</h2><div class=""/><div class=""><h2 id="63a7" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">使用NOAA的历史天气数据、Apache Spark、BiqQuery和Data Studio可视化可观察到的全球温度变化</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/cf0c7ed24bf3efb0bf2b2ebdda8fe12d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OYPmroZggUxBD5xT"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">由<a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jw" href="https://unsplash.com/@karsten_wuerth?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡斯滕·沃思</a>拍摄的照片</figcaption></figure><p id="8a41" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">我们每天都读到并经历着气候变化的影响。我们已经看到了这样的数字:目前<strong class="jz hs">的全球平均气温比19世纪末</strong>高了0.85摄氏度，并且<strong class="jz hs">自1850年有记录以来，过去三十年中的每一年都比之前任何十年都要热</strong><a class="ae jw" href="http://The current global average temperature is 0.85ºC higher than it was in the late 19th century. Each of the past three decades has been warmer than any preceding decade since records began in 1850." rel="noopener ugc nofollow" target="_blank">*</a>。</p><p id="bcc3" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">我很好奇气候学家是如何确定这些数字的。这一领域正在进行大量的研究。我偶然发现了一个来自NOAA的重要气象数据集，它被广泛用于研究。</p><p id="320e" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">在这篇博客中，我将解释我是如何从NOAA的历史天气数据中执行一些简单的分析和可视化重要模式的。</p><p id="d6d4" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">从这个数据集中可以获得很多真知灼见。请继续阅读，了解如何使用免费的云资源和开源技术进行自己的天气分析。</p><h1 id="119c" class="kt ku hi bd kv kw kx ky kz la lb lc ld ix le iy lf ja lg jb lh jd li je lj lk bi translated">先决条件:</h1><p id="f478" class="pw-post-body-paragraph jx jy hi jz b ka ll is kc kd lm iv kf kg ln ki kj kk lo km kn ko lp kq kr ks hb bi translated">我们将需要AWS凭证来读取公共S3桶，以及一个GCP帐户来分析谷歌云上的数据集。</p><ol class=""><li id="b916" class="lq lr hi jz b ka kb kd ke kg ls kk lt ko lu ks lv lw lx ly bi translated"><strong class="jz hs">创建AWS IAM用户凭证以读取亚马逊S3的NOAA数据</strong></li></ol><p id="e548" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">如果您没有AWS帐户，请注册<a class="ae jw" href="https://aws.amazon.com/free/" rel="noopener ugc nofollow" target="_blank"> AWS自由层</a>，然后按照说明<a class="ae jw" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html" rel="noopener ugc nofollow" target="_blank">创建IAM用户</a></p><p id="d648" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">授予您的用户<a class="ae jw" href="https://console.aws.amazon.com/iam/home?region=us-east-2#/policies/arn%3Aaws%3Aiam%3A%3Aaws%3Apolicy%2FAmazonS3ReadOnlyAccess" rel="noopener ugc nofollow" target="_blank"> AmazonS3ReadOnlyAccess </a></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lz"><img src="../Images/6061381aecb6f98fb4b1885a17661144.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1cteVFLGsb76cKbJ99QIkQ.png"/></div></div></figure><p id="cff8" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">为您的用户创建访问密钥。(记下您的<strong class="jz hs">访问密钥ID </strong>和<strong class="jz hs">秘密访问密钥。我们将向我们的spark工作提供这些凭据。)</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ma"><img src="../Images/1c6a297d8827e8858184493fb798b94b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hDMmLZ0APQYhWtt8Eb5Tvg.png"/></div></div></figure><p id="25a7" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> 2。如果您没有GCP帐户，请创建一个帐户</strong></p><p id="5d63" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><a class="ae jw" href="https://cloud.google.com/free" rel="noopener ugc nofollow" target="_blank"> GCP免费等级——免费延长试用和永远免费|谷歌云</a></p><p id="6e04" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">一旦你注册并登录到GCP控制台。通过点击下面截图中突出显示的图标来激活云壳。Cloud Shell提供了对虚拟机实例的命令行访问，这是我们将要设置用例的地方。(或者，您也可以在笔记本电脑终端上完成此操作)</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mb"><img src="../Images/19bfe63e9947a66301c0fb40d48ef560.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XvmtItkejMnCk5_HiQqZZQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">GCP控制台</figcaption></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mc"><img src="../Images/003fe3625ee4d0129a2e234a0312319d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t8xty3cFtGsaaB2_tkiaCQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">谷歌云外壳</figcaption></figure><p id="6693" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">对于源代码，这里是GitHub项目。</p><div class="md me ez fb mf mg"><a href="https://github.com/ksree/ghcn-daily-analysis" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab dw"><div class="mi ab mj cl cj mk"><h2 class="bd hs fi z dy ml ea eb mm ed ef hr bi translated">ksree/ghcn-每日分析</h2><div class="mn l"><h3 class="bd b fi z dy ml ea eb mm ed ef dx translated">全球历史气候网络分析</h3></div><div class="mo l"><p class="bd b fp z dy ml ea eb mm ed ef dx translated">github.com</p></div></div><div class="mp l"><div class="mq l mr ms mt mp mu jq mg"/></div></div></a></div><p id="bad2" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">现在我们已经有了AWS和GCP证书，让我们开始吧。</p></div><div class="ab cl mv mw gp mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hb hc hd he hf"><h1 id="a03c" class="kt ku hi bd kv kw nc ky kz la nd lc ld ix ne iy lf ja nf jb lh jd ng je lj lk bi translated">建立您的GCP数据湖</h1><p id="3322" class="pw-post-body-paragraph jx jy hi jz b ka ll is kc kd lm iv kf kg ln ki kj kk lo km kn ko lp kq kr ks hb bi translated">要设置我们的GCP环境，我们需要执行以下操作:</p><ul class=""><li id="41a0" class="lq lr hi jz b ka kb kd ke kg ls kk lt ko lu ks nh lw lx ly bi translated">创建项目</li><li id="726f" class="lq lr hi jz b ka ni kd nj kg nk kk nl ko nm ks nh lw lx ly bi translated">启用计费(仍在免费层)</li><li id="5828" class="lq lr hi jz b ka ni kd nj kg nk kk nl ko nm ks nh lw lx ly bi translated">启用Dataproc和BigQuery服务</li><li id="2e12" class="lq lr hi jz b ka ni kd nj kg nk kk nl ko nm ks nh lw lx ly bi translated">创建一个谷歌云存储桶</li><li id="cba3" class="lq lr hi jz b ka ni kd nj kg nk kk nl ko nm ks nh lw lx ly bi translated">创建大查询数据集</li><li id="35d2" class="lq lr hi jz b ka ni kd nj kg nk kk nl ko nm ks nh lw lx ly bi translated">创建一个Dataproc集群</li></ul><p id="0a3e" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">要执行上述任务:</p><p id="ddff" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">在<a class="ae jw" href="https://github.com/ksree/ghcn-daily-analysis" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上查看我的项目ghcn-daily-analysis，并执行数据湖创建脚本，如下所示。</p><p id="0b68" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">在您的google cloud shell上，运行以下命令。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nn no l"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">在您的google cloud shell上执行这些命令。</figcaption></figure><p id="757a" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">下面是输出的样子</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es np"><img src="../Images/01a4fe8a885e220d09b92620d742ee4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VUGmmmoUpLUgOc7T3P-niw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">setup_gcp_datalake.sh的输出</figcaption></figure><p id="1c22" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">到目前为止一切顺利。接下来，让我们将数据放入BigQuery。</p><h1 id="4955" class="kt ku hi bd kv kw kx ky kz la lb lc ld ix le iy lf ja lg jb lh jd li je lj lk bi translated">从亚马逊S3下载NOAA全球历史气候网络日报(GHCN-D)到BigQuery</h1><p id="192c" class="pw-post-body-paragraph jx jy hi jz b ka ll is kc kd lm iv kf kg ln ki kj kk lo km kn ko lp kq kr ks hb bi translated">要将<a class="ae jw" href="https://ncics.org/" rel="noopener ugc nofollow" target="_blank"> NOAA </a> GHCN-D数据从<a class="ae jw" href="https://registry.opendata.aws/noaa-ghcn/" rel="noopener ugc nofollow" target="_blank">公共亚马逊S3 </a>复制到您的Google Bigquery实例，请遵循以下两个步骤。</p><ol class=""><li id="bb3d" class="lq lr hi jz b ka kb kd ke kg ls kk lt ko lu ks lv lw lx ly bi translated"><strong class="jz hs">运行下面的脚本</strong>，构建并打包spark应用程序</li></ol><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nn no l"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">通过在您的云shell上运行这个脚本来构建和打包spark应用程序。</figcaption></figure><p id="c44d" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">您将看到如下输出:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nq"><img src="../Images/955c9e5a612fc5345641ece5985d0569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9QaP9qLeIH9Q5w3dg4-9nw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">build_spark_app.sh执行输出</figcaption></figure><p id="0c96" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">验证生成的应用程序配置文件:</p><pre class="jh ji jj jk fd nr ns nt nu aw nv bi"><span id="a6f8" class="nw ku hi ns b fi nx ny l nz oa">cat $HOME/application.conf</span></pre><p id="bade" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">检查您的AWS密钥和密码。起始年和结束年是我们将从AWS开放数据中提取的数据集范围。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ob"><img src="../Images/0167e821b2257f1ed1586dc1c2167fed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b9Ukv-SDtBXNIvRrJl9TYw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">Spark应用程序配置文件</figcaption></figure><p id="7244" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> 2。提交Dataproc作业以将数据加载到BigQuery中</strong></p><p id="0b6f" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">运行以下脚本提交Dataproc作业:</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nn no l"/></div></figure><p id="c216" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">您可以检查<a class="ae jw" href="https://console.cloud.google.com/dataproc" rel="noopener ugc nofollow" target="_blank"> Dataproc控制台</a>来查看工作状态。在自由层基础架构上，这项工作需要几个小时才能完成。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es oc"><img src="../Images/92204ce2f6ecfe4d26d86b69f352e3cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o9VTUrR09XBGzFqw0szYYQ.png"/></div></div></figure><p id="ca96" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">现在我们的BigQuery数据集中有了NOAA全球历史气候网络。让我们继续做一些分析。</p><p id="a063" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> BigQuery (GHCN-D) </strong> <strong class="jz hs">数据集洞察:</strong></p><p id="684d" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">转到BigQuery控制台，查看新创建的表globalshistoricalweatherdata . ghcn _ daily</p><p id="9d48" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">details选项卡显示了数据集的大小:<strong class="jz hs"> 125 GB </strong>，有<strong class="jz hs">17.5亿行。</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es od"><img src="../Images/7228209d9d356696c8ee8ecc534039b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ra9lq0D5fdTxPAO-A0kuHA.png"/></div></div></figure><p id="9cc8" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">请注意，该表在<em class="oe"> partition_date </em>列上是按年份划分的<strong class="jz hs">。它被设置为年初。</strong></p><p id="7622" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">此外，为了提高查询性能，我让<strong class="jz hs">对列<em class="oe"> country </em>上的表数据进行了聚类</strong>，因为这是最常用的过滤器。Bigquery使用集群列来存放相关数据。列的顺序很重要，它决定了数据的排序顺序。</p><p id="a537" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">让我们在BigQuery数据集上运行一些查询</p><p id="27d4" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">观察总数:</strong></p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nn no l"/></div></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es of"><img src="../Images/7f44c93818b5361fe1e8c729ee62f858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iDR8mjvplcqEpw6m9aHYjg.png"/></div></div></figure><p id="eb58" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">美国各州2020年迄今最热的一天:</strong></p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nn no l"/></div></figure><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nn no l"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated"><strong class="ak">美国各州2020年至今最暖日查询结果</strong></figcaption></figure><p id="1b10" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">旧金山站1980年以来最热日:</strong></p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nn no l"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">自1980年以来旧金山最热的一天</figcaption></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es og"><img src="../Images/d628035d1de19f5d8861a491bfd07012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ur2j3tqVf_UZuw9a6XyXBg.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">查询输出，旧金山最热的一天。前3名活跃电台。</figcaption></figure><p id="6342" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">接下来，让我们做一些可视化来更好地理解天气模式的趋势。</p><h2 id="45d8" class="nw ku hi bd kv oh oi oj kz ok ol om ld kg on oo lf kk op oq lh ko or os lj ho bi translated">使用Google Data Studio可视化全球历史天气数据</h2><p id="9c1c" class="pw-post-body-paragraph jx jy hi jz b ka ll is kc kd lm iv kf kg ln ki kj kk lo km kn ko lp kq kr ks hb bi translated">Data Studio 让您轻松连接到各种数据源，并通过高度可配置的图表和表格可视化您的数据。</p><p id="bab0" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">使用Data Studio BigQuery连接器连接到您的ghcn-d天气数据集。</p><p id="ecb5" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">这里是全球气象站和观测总数的可视化。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ot"><img src="../Images/d15ac644512775e32a76f14fa4546cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1I5Pva6_C1Ar7f9KDK4DOw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">全球气象站和观测的谷歌数据工作室仪表板</figcaption></figure><p id="72f1" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">2019年多伦多市最低最高气温</strong></p><p id="de2c" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">要绘制2019年多伦多市最高和最低温度的时间序列图，请将数据范围维度设置为ghcn_d.date列，并包括指标min_temp和max_temp。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ou"><img src="../Images/79004bf82adf31c06453023510b0ce92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cW6aaUeWA4QYPD0XiTNQkA.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">最低和最高温度摄氏度，多伦多2019</figcaption></figure><h1 id="2d20" class="kt ku hi bd kv kw kx ky kz la lb lc ld ix le iy lf ja lg jb lh jd li je lj lk bi translated"><strong class="ak">霍恩佩恩贝格气象观测站的温度异常</strong></h1><p id="9efd" class="pw-post-body-paragraph jx jy hi jz b ka ll is kc kd lm iv kf kg ln ki kj kk lo km kn ko lp kq kr ks hb bi translated">异常是指在一年的某个特定时间，某个特定地点的条件偏离了平均条件。正异常意味着温度比正常温度高；负异常表示温度比正常温度低。</p><blockquote class="ov ow ox"><p id="0344" class="jx jy oe jz b ka kb is kc kd ke iv kf oy kh ki kj oz kl km kn pa kp kq kr ks hb bi translated">这里我们计算了德国霍恩佩森伯格<a class="ae jw" href="https://en.wikipedia.org/wiki/Hohenpei%C3%9Fenberg_Meteorological_Observatory" rel="noopener ugc nofollow" target="_blank">的温度异常。奥古斯丁的僧侣们在这个地方进行了第一次气象观测，并且自1781年以来一直持续进行。</a></p><p id="f9da" class="jx jy oe jz b ka kb is kc kd ke iv kf oy kh ki kj oz kl km kn pa kp kq kr ks hb bi translated">该测量系列是有史以来最长的，并且从未受到城市热岛效应的影响。</p></blockquote><p id="b492" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">以下是计算年平均温度异常的查询。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nn no l"/></div></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es pb"><img src="../Images/c83188263c8e35da8ec9d329df8a5911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ih_jQFm6va4OkzbrftEWmw.png"/></div></div></figure><h1 id="aaeb" class="kt ku hi bd kv kw kx ky kz la lb lc ld ix le iy lf ja lg jb lh jd li je lj lk bi translated"><strong class="ak">在</strong>霍恩佩恩贝格气象观测站观察气温上升</h1><p id="5feb" class="pw-post-body-paragraph jx jy hi jz b ka ll is kc kd lm iv kf kg ln ki kj kk lo km kn ko lp kq kr ks hb bi translated">让我们画出德国Hohenpeissenberg从1781年到2000年的月平均温度和从2000年到2020年的月平均温度。</p><p id="63c1" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">以下是计算月平均值的查询。创建一个视图，并在Google Data Studio中导入这个视图。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nn no l"/></div></figure><blockquote class="ov ow ox"><p id="8771" class="jx jy oe jz b ka kb is kc kd ke iv kf oy kh ki kj oz kl km kn pa kp kq kr ks hb bi translated"><strong class="jz hs">下面两条线之间的空隙，显示了200多年来气温的升高。</strong></p></blockquote><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es pc"><img src="../Images/821e84d50372b9dcb5d47a4047553f0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NBRqF7oKnV3yEqZ_zeywYA.png"/></div></div></figure><h1 id="e3ee" class="kt ku hi bd kv kw kx ky kz la lb lc ld ix le iy lf ja lg jb lh jd li je lj lk bi translated"><strong class="ak">重述</strong></h1><p id="fde8" class="pw-post-body-paragraph jx jy hi jz b ka ll is kc kd lm iv kf kg ln ki kj kk lo km kn ko lp kq kr ks hb bi translated">我们是这样做的:</p><ol class=""><li id="e5f0" class="lq lr hi jz b ka kb kd ke kg ls kk lt ko lu ks lv lw lx ly bi translated">通过使用Apache Spark，我们连接到NOAA的全球历史气候网络——S3自动气象站托管的每日数据集，应用简单的转换，并用地理信息增强数据集。最后，我们<strong class="jz hs">将这个数据集加载到BigQuery </strong>中</li><li id="5acb" class="lq lr hi jz b ka ni kd nj kg nk kk nl ko nm ks lv lw lx ly bi translated"><strong class="jz hs">使用<strong class="jz hs"> BigQuery </strong>获得对历史天气数据的洞察</strong></li><li id="b9d0" class="lq lr hi jz b ka ni kd nj kg nk kk nl ko nm ks lv lw lx ly bi translated"><strong class="jz hs">使用<strong class="jz hs"> Data Studio </strong>可视化</strong>天气的历史趋势</li></ol><p id="59f6" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">这个博客的目标是展示如何使用云和开源工具来探索这个大型天气数据集并从中获得洞察力。</p><p id="efbc" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">正如我所说的，在这个数据集上可以进行更多的探索。创造和分享你自己的见解。</p></div></div>    
</body>
</html>