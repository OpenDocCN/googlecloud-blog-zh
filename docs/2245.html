<html>
<head>
<title>Query Cloud Spanner using Federated Query in BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在BigQuery中使用联邦查询的查询云扳手</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/query-cloud-spanner-using-federated-query-in-bigquery-d8eff8ec29c?source=collection_archive---------1-----------------------#2022-07-03">https://medium.com/google-cloud/query-cloud-spanner-using-federated-query-in-bigquery-d8eff8ec29c?source=collection_archive---------1-----------------------#2022-07-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5572777194deb82cf2939a2c5717109b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HVgBmVtgvjXbZotq_2rHvw.png"/></div></div></figure><p id="1ba3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">简介</strong></p><p id="35b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">联邦查询是一种向外部数据库发送查询语句<strong class="is hj">并将结果作为临时表</strong>返回的方式。</p><p id="5b0c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">联邦查询使用BigQuery连接API来建立与外部数据库的连接。</p><p id="f96e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在您的标准SQL查询中，您使用EXTERNAL_QUERY函数向外部数据库发送查询语句，使用该数据库的SQL方言。结果被转换为BigQuery标准SQL数据类型。</p><p id="3f23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以对以下外部数据库使用联邦查询:</p><p id="4837" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">云扳手</p><p id="3416" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">云SQL</p><p id="3d4d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">步伐</p><ol class=""><li id="0b3e" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">创建云扳手实例、数据库和样本表</li><li id="020a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">在BigQuery for Cloud Span中创建外部数据源连接</li><li id="d352" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">查询云扳手数据库</li></ol><p id="6607" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第一步</strong></p><p id="e8ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于本文，我们假设已经创建了云扳手实例和数据库。</p><p id="a3e9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们有云扳手实例:扳手测试</p><p id="6f3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们有云扳手数据库:demo_db</p><p id="1782" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们在demo_db数据库中创建了示例表:emp</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/2561394d5e73b4f6939dca199aad1f76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0UNB83qmG8zx3RI2fu6BMA.png"/></div></div></figure><p id="469f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第二步</strong></p><p id="016b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要在BigQuery中创建外部数据源连接，请导航到+添加数据&gt;外部数据源</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/9901f9ec52c4d801d1614a608a2faa85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-d_f_4MMMrLeKTpwQg2Xyg.png"/></div></div></figure><p id="f6f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从下拉列表中选择云扳手</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/fb1f062a40a694fdc36cc408c937dc45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*aUWEPqF00R_cRpX5Gdd6Lg.png"/></div></figure><p id="9873" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如下填写创建连接所需的详细信息，并点击<strong class="is hj">创建连接</strong></p><p id="5e4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据库名称应采用以下格式</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/72f04cdb52d4e09f19638e5ca4643e8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*7HnY08GZICGWm7J2_wISfA.png"/></div></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es kk"><img src="../Images/b5700ed79f0d2dfcad762991eb10bf68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*GqYIFh_Y75GgWHBVjwTMnQ.png"/></div></figure><p id="5032" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦创建了连接，您将在项目名称下的BugQuery中看到外部连接。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/7354843c92ab36653c364a4dbbb4a1dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yqc74oKlcl54K1wUJ0EFMg.png"/></div></div></figure><p id="cac5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击查询按钮，立即对扳手数据库执行查询。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/981d59160a4fbdd47ecafdc08c98191e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JdjZmAMAtXXiM-aj8_NvDA.png"/></div></div></figure><p id="e5e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你会看到扳手数据库的结果。</p><p id="c779" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如需视频演示，请参考以下视频</p><figure class="kd ke kf kg fd ij"><div class="bz dy l di"><div class="kn ko l"/></div></figure></div></div>    
</body>
</html>