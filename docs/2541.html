<html>
<head>
<title>SAP on Google Cloud : Deployment Considerations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google Cloud上的SAP:部署考虑</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/sap-on-google-cloud-deployment-considerations-3c99cccf7065?source=collection_archive---------7-----------------------#2022-11-22">https://medium.com/google-cloud/sap-on-google-cloud-deployment-considerations-3c99cccf7065?source=collection_archive---------7-----------------------#2022-11-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7c7d37cc059509da696c8aae5dbd9a72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*17jc4KxZwbDEdhtpV3VBFg.png"/></div></div></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><p id="5a8f" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">欢迎来到SAP on Google Cloud:部署考虑博客系列的第2部分。下面是<a class="ae jv" rel="noopener" href="/google-cloud/sap-on-google-cloud-series-the-fundamentals-a92901f1f312"> <strong class="iz hj"> <em class="jw">第一部</em> </strong> </a>供大家参考。</p><p id="8dfd" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">想知道当您考虑在Google Cloud上部署SAP时需要考虑哪些方面吗？</p><p id="a2ff" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">不熟悉云，我如何知道我是否遵循了最佳实践？</p><figure class="jy jz ka kb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/75a6c75f51dc3727ddfde5d4d7ca51b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pvcW54DS_jfbvrtG"/></div></div></figure><p id="8053" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">这篇博客试图回答一些关于SAP部署的问题。</p><p id="7091" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">现在，让我们首先确定在规划SAP迁移时最重要的组件</p><ul class=""><li id="9c18" class="kc kd hi iz b ja jb je jf ji ke jm kf jq kg ju kh ki kj kk bi translated"><strong class="iz hj">支持SAP应用&amp;数据库</strong>的各种模块</li><li id="b9e8" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju kh ki kj kk bi translated"><strong class="iz hj">选择正确的计算方式</strong></li><li id="f93f" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju kh ki kj kk bi translated"><strong class="iz hj">选择合适的储物件</strong></li><li id="94d2" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju kh ki kj kk bi translated"><strong class="iz hj">网络连接</strong></li></ul><p id="29d5" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">让我们逐一挑选并详细讨论。</p><h2 id="5c1b" class="kq kr hi bd ks kt ku kv kw kx ky kz la ji lb lc ld jm le lf lg jq lh li lj lk bi translated"><strong class="ak">支持SAP应用&amp;数据库</strong>的各种模块</h2><p id="2ed0" class="pw-post-body-paragraph ix iy hi iz b ja ll jc jd je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju hb bi translated">任何长期使用SAP系统的人都会明白，SAP解决方案获得SAP认证并在任何平台上运行是多么重要。</p><p id="2337" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">这里的关键词是<strong class="iz hj">“认证”——</strong>，这是获得SAP支持的必要条件。</p><p id="2191" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">我将认证组件进一步分为两个部分-</p><p id="f3ac" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">I]<strong class="iz hj">GCP SAP应用程序认证</strong></p><p id="275b" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">页面<a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/certifications-sap-apps" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">此处</em> </strong> </a>列出了经认证可在谷歌云上运行的SAP应用解决方案、操作系统以及经认证可与之一起运行的计算引擎虚拟机系列。记住这是为了应用。如果你正在寻找HANA，请看下一节。</p><p id="14c4" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz hj">II】SAP HANA在GCP的认证:</strong></p><p id="5039" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">此处  参见<a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/certifications-sap-hana" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">页面，该页面将包含HANA认证机器类型的更新列表。</em></strong></a></p><p id="b8f4" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">在上述两种情况下，不要忘记探索自定义虚拟机部分，该部分提供了有关如何调整虚拟机规模的指导原则，以确保SAP也能提供支持。</p><p id="fdbd" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">既然我们已经选择了经SAP认证可在GCP上运行的虚拟机系列，让我们继续探索如何为SAP应用程序/数据库选择合适的计算。</p></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="a81f" class="lq kr hi bd ks lr ls lt kw lu lv lw la lx ly lz ld ma mb mc lg md me mf lj mg bi translated"><strong class="ak">选择正确的计算方式</strong></h1><p id="8938" class="pw-post-body-paragraph ix iy hi iz b ja ll jc jd je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju hb bi translated">首先，我们检查所需的GCP地区和分区<a class="ae jv" href="https://cloud.google.com/compute/docs/regions-zones/#available" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">这里</em> </strong> </a>中有哪些虚拟机系列(SAP认证的虚拟机系列有n1、n2、n2d、c2、c2d、t2d、m1、m2)</p><p id="b237" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">请记住，对于HA部署，建议使用多区域部署。</p><p id="b5b9" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">现在，我们将SAP节点需求分为两种类型</p><p id="4542" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz hj"> I] SAP应用服务器或非HANA数据库服务器:</strong></p><p id="ef9a" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">从该<a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/certifications-sap-apps#sap-certified-vms" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">列表</em> </strong> </a>中挑选SAP认证的虚拟机，直到您符合总SAP&amp;RAM要求。</p><p id="9783" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">如果SAP认证的虚拟机外形不符合要求，您可以考虑定制虚拟机。</p><p id="8754" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">对于N1系列虚拟机，vCPU与RAM的比率至少应为1:3.75。</p><p id="d4ff" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">对于N2/N2D机器，该比率至少应为1:4。(这些比率在<a class="ae jv" href="https://launchpad.support.sap.com/#/notes/0002456432" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw"> SAP注</em> </strong> </a>中提到)</p><p id="8cfa" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">请遵循此处  提到的<a class="ae jv" href="https://cloud.google.com/compute/docs/general-purpose-machines#custom_machine_types" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">中针对每个虚拟机系列的vCPU/RAM定制调整指南。</em></strong></a></p><p id="ea8c" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz hj">二】SAP HANA DB服务器:</strong></p><p id="9b88" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">从列表中选择SAP认证的HANA形状<a class="ae jv" href="https://www.sap.com/dmc/exp/2014-09-02-hana-hardware/enEN/#/solutions?filters=iaas;ve:29;v:deCertified;v:deTdi" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">此处</em></strong><strong class="iz hj"><em class="jw"/></strong>或</a><a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/certifications-sap-hana#certified-vms" rel="noopener ugc nofollow" target="_blank"><strong class="iz hj"><em class="jw">link 2</em></strong></a></p><p id="ef22" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">根据您的工作量，具体检查认证类型，即OLTP (ECC，S4)与OLAP (BW，DWH)与SAP B1认证。</p><p id="d558" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">SAP还认证定制的HANA机器。</p><ol class=""><li id="de3a" class="kc kd hi iz b ja jb je jf ji ke jm kf jq kg ju mh ki kj kk bi translated">如果是N1机器系列，则vCPU与RAM的比率为1:6.5，vCPU数量介于32和64之间(vCPU为2的倍数，从32开始，最大值为64)。</li><li id="1956" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">如果是N2机器系列，vCPU与RAM的比率为1:8，vCPU数量介于32和64之间(vCPU是4的倍数，从32开始，最大为64。对于IceLake n2机器，最大。vCPU计数为80)</li></ol></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="9446" class="lq kr hi bd ks lr ls lt kw lu lv lw la lx ly lz ld ma mb mc lg md me mf lj mg bi translated"><strong class="ak">选择正确的存储方式</strong></h1><p id="75e0" class="pw-post-body-paragraph ix iy hi iz b ja ll jc jd je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju hb bi translated">选择合适的虚拟机后，我们来谈谈存储。</p><p id="3f3e" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">GCP提供3种类型的块存储—硬盘、平衡固态硬盘、固态硬盘</p><p id="b412" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">IOPS &amp;他们每个人的吞吐量指标都发表在<a class="ae jv" href="https://cloud.google.com/compute/docs/disks/performance#type_comparison" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">这里</em> </strong> </a></p><ol class=""><li id="d24b" class="kc kd hi iz b ja jb je jf ji ke jm kf jq kg ju mh ki kj kk bi translated">对于应用服务器，我们提供不同类型的持久磁盘。每种类型都有不同的性能特征。详情请参考<a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/certifications-sap-apps?hl=en#persistent_disk_storage_for_sap_applications" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">此处</em> </strong> </a> <strong class="iz hj"> <em class="jw">链接。</em> </strong></li><li id="617f" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">对于HANA服务器，我们可以考虑SSD或平衡PD至少等于或高于阈值，如表<a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/certifications-sap-hana?hl=en#minimum_sizes_and_performance_for_ssd-based_persistent_disks" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">此处</em> </strong> </a>中所述</li><li id="145a" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">请注意，对于HANA机器，SSD ( <code class="du mi mj mk ml b">pd-ssd</code>)和平衡(<code class="du mi mj mk ml b">pd-balanced</code>)持久磁盘有推荐的大小，以满足生产环境中针对SAP HANA认证的每种计算引擎机器类型的SAP HANA性能要求。<a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/certifications-sap-hana?hl=en#minimum_sizes_and_performance_for_ssd-based_persistent_disks" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">列出的大小</em></strong></a><strong class="iz hj"><em class="jw"/></strong>此处的<strong class="iz hj"> <em class="jw"> </em> </strong>提供了SAP HANA认证该机器类型所需的块存储性能</li><li id="3a5a" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">对于所有hana目录(/hana/data、/hana/log、hana/shared、/sap)，建议考虑SSD以获得最佳性能。如果您想控制成本，并接受轻微的性能影响，您可以考虑平衡PD。</li><li id="d63a" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">为了在成本和性能之间保持平衡，您可以考虑将SSD用于/data、/log，将平衡SSD用于HANA/共享卷和引导磁盘。</li><li id="dcef" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">对于生产非HANA数据库服务器，您可以根据IOPS/吞吐量要求考虑SSD或平衡SSD</li><li id="a843" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">对于非HANA数据库备份，您可以考虑使用硬盘进行本地转移。对于长期保留(根据备份频率)，谷歌云存储(基于对象的存储)可能是一个不错的选择。<br/><a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/sap-hana-backint-overview" rel="noopener ugc nofollow" target="_blank"><strong class="iz hj"><em class="jw">HANA back int API</em></strong></a>经过谷歌云存储(GCS)认证，即HANA备份可以直接写入GCS，中间无需硬盘作为暂存。</li><li id="ff25" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">如果您的应用程序设置需要NFS共享存储，那么谷歌文件存储企业或第三方市场产品。更多信息请点击<a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/filers-for-sap" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">此处</em> </strong> </a></li></ol></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="dc8a" class="lq kr hi bd ks lr ls lt kw lu lv lw la lx ly lz ld ma mb mc lg md me mf lj mg bi translated"><strong class="ak">网络连接</strong></h1><p id="5e05" class="pw-post-body-paragraph ix iy hi iz b ja ll jc jd je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju hb bi translated">需要在内部环境和Google Cloud之间建立网络连接，以支持SAP应用程序的重新托管。</p><p id="5e24" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">可以使用云VPN或者专用互联。了解更多关于<a class="ae jv" href="https://cloud.google.com/network-connectivity/docs/interconnect/concepts/dedicated-overview" rel="noopener ugc nofollow" target="_blank">专用互联</a>、<a class="ae jv" href="https://cloud.google.com/network-connectivity/docs/interconnect/concepts/partner-overview" rel="noopener ugc nofollow" target="_blank">伙伴互联</a>和<a class="ae jv" href="https://cloud.google.com/network-connectivity/docs/vpn/concepts/overview" rel="noopener ugc nofollow" target="_blank">云VPN </a>的信息。</p><p id="d3da" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz hj">注意</strong>:根据您的互联网连接和带宽要求，我们建议在生产环境中使用基于云VPN的专用互连或合作伙伴互连。</p><p id="80bd" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">在Google云平台中，您需要建立自己的专用网络，以适应您的组织结构和SAP部署要求。根据您的需求，您可以在一个或多个共享VPC上部署SAP。这两个场景在网络控制、SAP环境隔离和网络检查方面有所不同。更多细节请参考<a class="ae jv" href="https://cloud.google.com/blog/products/sap-google-cloud/set-up-your-network-for-a-seamless-sap-cloud-deployment" rel="noopener ugc nofollow" target="_blank">博客这里</a>。</p><p id="8507" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">至此，我们系列的第2篇博客到此结束，敬请关注我们关于SAP参考架构的下一篇博客，深入探讨在Google cloud上部署SAP的安全性和最佳实践</p><p id="2020" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">敬请期待！！！</p><p id="194f" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz hj">其他资源:</strong></p><p id="1697" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">有关SAP GCP部署指南文档的更多信息，请参考-</p><ol class=""><li id="5492" class="kc kd hi iz b ja jb je jf ji ke jm kf jq kg ju mh ki kj kk bi translated"><a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/checklist-sap-overview" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">概述</em> </strong> </a> : SAP在GCP的部署清单</li><li id="45cd" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">所有SAP <a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/netweaver-guides" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw"> Netweaver指南</em> </strong> </a>均来自GCP视角</li><li id="b2bd" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">所有SAP <a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/sap-hana-guides" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw"> HANA指南</em> </strong> </a>均来自GCP视角</li><li id="0064" class="kc kd hi iz b ja kl je km ji kn jm ko jq kp ju mh ki kj kk bi translated">所有<a class="ae jv" href="https://cloud.google.com/solutions/sap/docs/sap-data-integration-guides" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> <em class="jw">数据整合指南</em> </strong> </a></li></ol><p id="1b0d" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">投稿人:<a class="mm mn ge" href="https://medium.com/u/41b475b881ff?source=post_page-----3c99cccf7065--------------------------------" rel="noopener" target="_blank">世纪摩尔A K </a></p></div></div>    
</body>
</html>