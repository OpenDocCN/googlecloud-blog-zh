<html>
<head>
<title>5 Steps to deploy Website using Google Compute Engine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用谷歌计算引擎部署网站的5个步骤</h1>
<blockquote>原文：<a href="https://medium.com/google-cloud/hosting-a-website-on-google-cloud-using-google-compute-engine-c6fe84d76f51?source=collection_archive---------0-----------------------#2019-09-26">https://medium.com/google-cloud/hosting-a-website-on-google-cloud-using-google-compute-engine-c6fe84d76f51?source=collection_archive---------0-----------------------#2019-09-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="faeb" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在云中烹饪</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/ab653d573ba92e44aa12b8c5073760e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*A_PlPDmVTn7osT5c.png"/></div></div></figure><h1 id="28ff" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">介绍</h1><p id="a61c" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">在这个迷你系列中，我们将介绍如何在谷歌云上创建网站。这是本系列的第四篇文章。</p><ol class=""><li id="ddb0" class="kx ky hi kd b ke kz kh la kk lb ko lc ks ld kw le lf lg lh bi translated"><a class="ae li" rel="noopener" href="/@pvergadia/hosting-web-applications-on-google-cloud-an-overview-46f5605eb3a6">在谷歌云上托管网络应用:概述</a></li><li id="fdc9" class="kx ky hi kd b ke lj kh lk kk ll ko lm ks ln kw le lf lg lh bi translated"><a class="ae li" rel="noopener" href="/google-cloud/hosting-a-static-website-on-google-cloud-using-google-cloud-storage-ddebcdcc8d5b">使用谷歌云存储在谷歌云上托管网络应用</a></li><li id="c307" class="kx ky hi kd b ke lj kh lk kk ll ko lm ks ln kw le lf lg lh bi translated"><a class="ae li" rel="noopener" href="/google-cloud/hosting-a-website-on-google-cloud-using-cloud-run-a65343a98fce">使用Cloud Run在Google Cloud上托管web应用</a></li><li id="2a39" class="kx ky hi kd b ke lj kh lk kk ll ko lm ks ln kw le lf lg lh bi translated">使用谷歌计算引擎部署网站的5个步骤(本博客)</li><li id="437d" class="kx ky hi kd b ke lj kh lk kk ll ko lm ks ln kw le lf lg lh bi translated"><a class="ae li" rel="noopener" href="/p/d21d6ce3e837/">在谷歌计算引擎上扩展web应用</a></li><li id="141c" class="kx ky hi kd b ke lj kh lk kk ll ko lm ks ln kw le lf lg lh bi translated"><a class="ae li" rel="noopener" href="/faun/case-study-hosting-scalable-web-apps-on-google-cloud-c0bb675812c8">案例研究</a></li></ol><p id="58c2" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">作为一名工程师，最大的好处之一就是我们可以完全控制我们开发的东西的很多方面。对于你们中的许多人来说，这也延伸到了你们开发的网站。如果你需要比静态网站更先进的东西，但需要比谷歌云托管服务提供的更多的控制，那么你可以使用计算引擎。</p><h1 id="2af9" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">你会学到什么</h1><ul class=""><li id="fb11" class="kx ky hi kd b ke kf kh ki kk lr ko ls ks lt kw lu lf lg lh bi translated">创建一个网站使用计算引擎在五个简单的步骤。</li></ul><h1 id="7acd" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">先决条件</h1><ul class=""><li id="4e07" class="kx ky hi kd b ke kf kh ki kk lr ko ls ks lt kw lu lf lg lh bi translated">阅读<a class="ae li" rel="noopener" href="/@pvergadia/hosting-web-applications-on-google-cloud-an-overview-46f5605eb3a6">第一篇文章</a>，它涵盖了关于在Google Cloud上建立网站的高级概念。</li></ul><h1 id="d7fc" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">看看这个视频</h1><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">使用谷歌计算引擎在谷歌云上托管网络应用</figcaption></figure><h1 id="ed76" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">什么是谷歌计算引擎？</h1><p id="9bd6" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated"><a class="ae li" href="https://cloud.google.com/compute/" rel="noopener ugc nofollow" target="_blank">谷歌计算引擎</a>让你在谷歌基础设施上创建和运行虚拟机。计算引擎提供了规模、性能和价值，允许您在Google的基础设施上轻松启动大型计算集群。没有前期投资，您可以在一个系统上运行数以千计的虚拟CPU，该系统被设计为快速，并提供强大的性能一致性。</p><h1 id="c538" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">如何在计算引擎上创建网站</h1><p id="0a89" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">值得注意的是，一个设计良好的web应用程序应该随着需求的增加和减少而无缝扩展，并且能够承受一个或多个计算资源的损失。</p><p id="0d2e" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">但是，一个真正有弹性和可伸缩的web应用程序需要计划。让我们看看一个网站是如何工作的，使用谷歌计算引擎。敬请关注codelab！(即将推出)</p><h1 id="019f" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">步骤1:用户请求和DNS</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mb"><img src="../Images/34627b5fb9264222aa653a635396bdca.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*DJBefd6juzP9O9gaV8kDlg.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">用户请求登陆云DNS</figcaption></figure><p id="3895" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">当用户在浏览器中请求您的网站时，他们的请求最终会到达您的DNS提供商，在本例中，我们使用的是<a class="ae li" href="https://developers.google.com/speed/public-dns" rel="noopener ugc nofollow" target="_blank"> Google DNS </a>，这是一种高度可用的域名服务。</p><p id="4f5e" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">网络流量被路由到运行在谷歌云上的基础设施。</p><p id="a67d" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">如果您使用自己的DNS提供商，那么请求将首先到达那里，然后DNS提供商将流量路由到Google Cloud。</p><h1 id="1653" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">步骤2:缓存与非缓存内容</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mc"><img src="../Images/872612eee3a0cdae9e42494eca06649c.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*12WQPlj3FYmYqRrpJ9SQYQ.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">缓存与非缓存内容</figcaption></figure><p id="ee5c" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">然后，如果请求的是缓存的内容，则由CDN交付。在这个架构中，我们使用的是<a class="ae li" href="https://cloud.google.com/cdn/" rel="noopener ugc nofollow" target="_blank">云CDN </a>，一个边缘位置的全球网络。请求被自动路由到最近的边缘位置，因此内容以最佳性能交付。(您也可以与您选择的任何其他第三方CDN集成。)</p><p id="6592" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">web应用程序使用的静态内容存储在<a class="ae li" href="https://cloud.google.com/storage/" rel="noopener ugc nofollow" target="_blank">谷歌云存储</a>上，这是一个高度耐用的存储基础设施，专为关键任务和主要数据存储而设计。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es md"><img src="../Images/c560b6d2e1e4137b1a097ea1a4b609a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*D2hOCEJb65Q8apEDKpfTNg.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">请求由云负载平衡完成的负载平衡</figcaption></figure><h1 id="f3f6" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">步骤3:请求负载平衡</h1><p id="66ce" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">HTTP请求首先由<a class="ae li" href="https://cloud.google.com/load-balancing/" rel="noopener ugc nofollow" target="_blank">云负载平衡</a>处理，它自动在多个计算引擎实例之间分配传入的应用流量。</p><p id="0029" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">如果使用HTTPS，SSL会话将在负载平衡器处终止，并且需要至少一个签名的SSL证书。</p><h1 id="e2b9" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">步骤4 : Web和应用服务器</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es me"><img src="../Images/a673fbf53771ecd9f67a2c5c8b5ca2d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UGDwL8wVGWX3pYuYFai_eQ.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">Google计算引擎实例自动缩放以处理用户对web服务器的请求</figcaption></figure><p id="d96a" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">Web应用程序，包括应用服务器和web服务器，部署在Google计算引擎(GCE)实例上。使用<a class="ae li" href="https://cloud.google.com/compute/docs/instance-templates/" rel="noopener ugc nofollow" target="_blank">实例模板</a>自动无缝地完成部署和扩展。实例模板是GCE实例的特定定制配置，它通过使用托管实例组来促进实例配置的重用。</p><p id="c3d3" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">要了解关于实例组的更多信息，请查看下一篇文章！</p><h1 id="8074" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">步骤5:存储应用程序数据</h1><p id="25b9" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">要存储应用程序数据，您可以使用数据库。本例中使用的关系数据库是<a class="ae li" href="https://cloud.google.com/sql/docs/" rel="noopener ugc nofollow" target="_blank">云SQL </a>。Cloud SQL是一个完全托管的数据库服务，它使得在云中设置、维护、管理和管理关系数据变得非常容易。它自动执行所有数据备份、复制、修补和更新。</p><p id="8fa4" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">根据网站使用案例，您可能希望使用基于文档的数据库，如用于用户数据的<a class="ae li" href="https://cloud.google.com/datastore/" rel="noopener ugc nofollow" target="_blank">数据存储库</a>，或者使用<a class="ae li" href="https://cloud.google.com/bigtable/" rel="noopener ugc nofollow" target="_blank"> Bigtable </a>来管理大型的、高度可扩展的全球NoSQL数据库。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mf"><img src="../Images/a59e217b3ee60aea4866846c876ff0d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T_PI7eA2MU977I5TCzorcg.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">在谷歌计算引擎上托管网络应用的架构</figcaption></figure><h1 id="ee4e" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">缩放网站</h1><p id="eea7" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">现在我们知道了如何为Google Compute Engine建立web应用程序架构，如果我们的网站变得非常受欢迎，流量从100个用户增长到数百万用户，会发生什么？我们需要确保我们的应用程序能够优雅地处理流量的高峰和低谷。</p><p id="d283" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">增加处理峰值的能力的一种方法是垂直扩展，向同一个实例添加更多的CPU和内存。这意味着垂直扩展将受到单台机器的容量及其大小的限制。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mg"><img src="../Images/af0831095e3c1cfbf49d564cdc331057.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ollag3k8Idzt_C9JxawG2w.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">水平和垂直缩放</figcaption></figure><p id="73ee" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">另一方面，水平扩展是高可用性应用程序的更好选择，因为它允许您随着需求的增加动态扩展计算资源的数量。</p><p id="2212" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">应用程序的资源可以增加或减少的想法要求它有一种方法，通过这种方法我们可以从服务中添加或删除实例。但是，添加或删除实例是如何自动工作的呢？看看下一篇文章就知道了！</p><h1 id="be47" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">后续步骤</h1><ul class=""><li id="1f37" class="kx ky hi kd b ke kf kh ki kk lr ko ls ks lt kw lu lf lg lh bi translated">在<a class="ae li" href="https://medium.com/google-cloud" rel="noopener">谷歌云平台媒体</a>上关注这个博客系列。</li><li id="9472" class="kx ky hi kd b ke lj kh lk kk ll ko lm ks ln kw lu lf lg lh bi translated">跟随<a class="ae li" href="https://www.youtube.com/watch?v=pxp7uYUjH_M" rel="noopener ugc nofollow" target="_blank">获取云端烹饪</a>视频系列，订阅谷歌云平台YouTube频道</li><li id="ce78" class="kx ky hi kd b ke lj kh lk kk ll ko lm ks ln kw lu lf lg lh bi translated">想要更多的故事？查看我的<a class="ae li" rel="noopener" href="/@pvergadia/">中</a>，<a class="ae li" href="https://twitter.com/pvergadia" rel="noopener ugc nofollow" target="_blank">在twitter上关注我</a>。</li><li id="e7ba" class="kx ky hi kd b ke lj kh lk kk ll ko lm ks ln kw lu lf lg lh bi translated">与我们一起享受这个系列的旅程，并了解更多关于Google Cloud的信息:)</li></ul></div></div>    
</body>
</html>